{"device":"PHONE","widgets":{"MenuTemplateRodent":{"t":"Scripting","lX":645,"lY":265,"sX":1,"sY":1,"s":"Initialisation","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"37.12%","y":"30.21%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"height:100%;width:100%;\" onclick=\"HideElement('ContentContainer')\">\n\t<style>\n        body{\n            margin: 0;\n            padding: 0;\n        }\n\t\t #widget\n\t\t{\n\t\t\theight:100%;\n\t\t\twidth:100%;\n\t\t}\n\t\t.row\n\t\t{\n\t\t\tfont-size:18px;\n \t\t\toverflow:hidden;\n\t\t}\n\t\t.NavIcon\n\t\t{\n\t\t\tcolor:white;\n\t\t\tmargin:auto;\n\t\t}\n\t\t\n\t\t.NavIcon:hover\n\t\t{\n\t\t\tcolor: #4d98c2ff;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t\n        .flex {\n            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6, BB7 */\n            display: -ms-flexbox; /* TWEENER - IE 10 */\n            display: -webkit-flex; /* NEW - Safari 6.1+. iOS 7.1+, BB10 */\n            display: flex; /* NEW, Spec - Firefox, Chrome, Opera */\n            width: 100%;\n        }\n        .svgIcon{\n            width: 8vh;\n            height: 18vh;\n        }\n\t\t.RightPanel\n\t\t{\n\t\t\theight:100%;\n\t\t\tfloat:right;\n\t\t\twidth:50%;\n\t\t\tbackground-color:#41505aff;\n\t\t\tdisplay:block;\n\t\t}\n\t\t.LeftPanel\n\t\t{\n\t\t\theight:100%;\n\t\t\t\n\t\t\twidth:50%;\n\t\t\tbackground-color:#41505aff;\n\t\t\tdisplay:block;\n\t\t}\n        .btnBorder {\n            padding-left: 5px;\n            border-bottom: 1px solid white;\n            color: white;\n            height: 17vh;\n            margin: auto;\n        }\n\t\t.btnBorder:hover{\n            padding-left: 5px;\n\t\t\tborder-bottom: 1px solid white;\n\t\t\tcolor:#f49c4bff;\n\t\t\tfill:#f49c4bff;\n\t\t\tcursor:pointer;\n            height: 17vh;\n            margin: auto;\n\n\n\t\t}\n\t\t.btn {\n            text-align: center;\n            font-size: 1em;\n            margin: auto;\n        }\n\t\t.navigation{\n\t\t\tdisplay:grid;\n\t\t\tposition:absolute;\n\t\t\tbottom:0px;\n\t\t\theight:50px;\n\t\t\twidth:100%;\n\t\t\tbackground-color:#41505aff;\n\t\t}           \n\t\t \n\n        @media screen and (max-height: 320px) {\n          .navigation{\n\t\t\t\tdisplay: grid;\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 0px;\n\t\t\t\theight: 50px;\n\t\t\t\twidth: 100%;\n\t\t\t\t/* margin-bottom: 12px; */\n\t\t\t\tbackground-color: #41505aff;\n\t\t\t}           \n\t\t \n        }\n\t \n\n\t\t\n\t \n\t\t\n\t\t \n\t</style>\n\t\t<div id=\"RightPanel\" class=\"RightPanel\" style=\"overflow:hidden;\">\n \n\t\t\t<span class=\"btnBorder flex\" style=\"display:none\" >\n\t\t\t\t<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" class=\"svgIcon\" viewBox=\"0 0 210 297\" version=\"1.1\" id=\"svg18188\" inkscape:version=\"1.0.1 (3bc2e813f5, 2020-09-07)\" sodipodi:docname=\"DeiceIcon.svg\">\n\t\t\t\t  <defs id=\"defs18182\"></defs>\n\t\t\t\t  <sodipodi:namedview id=\"base\" pagecolor=\"#ffffff\" bordercolor=\"#666666\" borderopacity=\"1.0\" inkscape:pageopacity=\"0.0\" inkscape:pageshadow=\"2\" inkscape:zoom=\"0.35\" inkscape:cx=\"1174.5302\" inkscape:cy=\"560\" inkscape:document-units=\"mm\" inkscape:current-layer=\"layer1\" showgrid=\"false\" inkscape:window-width=\"1440\" inkscape:window-height=\"810\" inkscape:window-x=\"2159\" inkscape:window-y=\"3\" inkscape:window-maximized=\"0\" inkscape:document-rotation=\"0\"></sodipodi:namedview>\n\n\t\t\t\t  <g inkscape:label=\"Layer 1\" inkscape:groupmode=\"layer\" id=\"layer1\">\n\t\t\t\t\t<g id=\"g20636-7-4-3\" style=\"stroke:#ffffff;stroke-opacity:1\" transform=\"matrix(12.303368,0,0,17.172872,-765.62541,343.78496)\">\n\t\t\t\t\t  <path style=\"fill:none;fill-opacity:1;stroke:white;stroke-width:0.840507;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 68.386504,-11.18857 c 0.1894,-1.55145 1.1761,-2.12246 2.469,-2.1975\" id=\"path24992-2-3-3-7-5\" inkscape:connector-curvature=\"0\"></path>\n\t\t\t\t\t  <g id=\"g7816-3-6-0-8-5-5-5-2-4\" transform=\"matrix(0.35033854,0,0,-0.35033854,172.78191,414.26569)\" style=\"stroke:#ffffff;stroke-opacity:1\">\n\t\t\t\t\t\t<path style=\"fill:none;stroke:white;stroke-width:7.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -270.79532,1212.4821 v -17.9842 h -40.40178 v 40.8342 h 40.03112 v -6.7954\" id=\"path6880-5-6-9-2-2-1-3-2-88\" inkscape:connector-curvature=\"0\"></path>\n\t\t\t\t\t  </g>\n\t\t\t\t\t  <path d=\"m 71.653704,-10.99199 a 0.81896231,0.81896231 0 0 1 -0.8162,0.81896 0.81896231,0.81896231 0 0 1 -0.8217,-0.81348 0.81896231,0.81896231 0 0 1 0.8108,-0.8244 0.81896231,0.81896231 0 0 1 0.8271,0.80795\" id=\"path24990-5-8-4-9-3\" style=\"opacity:1;fill:#6dbbea;fill-opacity:1;stroke:#ffffff;stroke-width:0.797517;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" inkscape:connector-curvature=\"0\"></path>\n\t\t\t\t\t  <path id=\"path24992-1-6-2-0-1-2\" d=\"m 66.715904,-11.4547 c 0.1624,-0.93372 0.4565,-1.65593 0.8538,-2.20314 0.7478,-1.03009 1.8609,-1.44004 3.1476,-1.47342\" style=\"fill:none;fill-opacity:1;stroke:white;stroke-width:1.02335;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" inkscape:connector-curvature=\"0\"></path>\n\t\t\t\t\t</g>\n\t\t\t\t  </g>\n\t\t\t\t</svg>\n\n\t\t\t\t<a class=\"btn\">\n\t\t\t\t\tDevice\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t\t<span class=\"btnBorder flex\" id=\"AddReport\"  onclick=\"GenericClicked('GoTo|Site Report Form|GetReportId|0')\">\n\n\t\t\t\t<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" class=\"svgIcon\" viewBox=\"0 0 210 297\" version=\"1.1\" id=\"svg18188\">\n\t\t\t\t  <defs id=\"defs18182\"></defs>\n\n\t\t\t\t  <g id=\"layer1\">\n\t\t\t\t\t<g id=\"g10568-7\" transform=\"matrix(4.1161192,0,0,-5.8270521,916.99452,6143.8052)\" style=\"stroke:#ffffff;stroke-opacity:1\">\n\t\t\t\t\t  <path id=\"path10534-8\" d=\"m 13.173199,25.694459 h 2.706652\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10536-7\" d=\"m 13.109734,26.74482 h 7.610521\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10538-5\" d=\"m 13.141484,27.787454 h 7.610517\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10540-5\" d=\"m 22.538898,33.771658 v 4.15671 H 11.418059 V 23.19263 h 11.120839 v 3.556811\" style=\"opacity:1;fill:none;fill-opacity:1;stroke:white;stroke-width:1.17149;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10542-10\" d=\"m 12.794562,29.55473 h 1.575612 v 1.575611 h -1.575612 z\" style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10544-15\" d=\"m 15.79021,30.80127 h 4.258345\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.614797;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10546-4\" d=\"m 15.812223,29.883872 h 4.880049\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.658147;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10548-4\" d=\"m 12.794562,31.918164 h 1.575612 v 1.575611 h -1.575612 z\" style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10550-1\" d=\"m 15.652521,33.164669 h 2.87408\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10552-55\" d=\"m 15.716832,32.247271 h 3.729849\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10554-4\" d=\"m 12.794562,34.281493 h 1.575612 v 1.575611 h -1.575612 z\" style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10556-1\" d=\"m 15.797971,35.528033 h 4.880074\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.658147;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10558-7\" d=\"m 15.735847,34.610635 h 2.17738\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" transform=\"matrix(3.1945168,0,0,-3.1945168,-256.64923,1126.6462)\"></path>\n\t\t\t\t\t  <path id=\"path10560-4\" d=\"m -178.98346,1035.7038 -10.46644,-14.1134\" style=\"fill:#d74423;fill-opacity:1;stroke:#ffffff;stroke-width:4.85039;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"></path>\n\t\t\t\t\t  <path id=\"path10562-2\" d=\"m -192.69744,1020.7469 -1.14687,-4.5368 4.49648,2.049 z\" style=\"fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.431559px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\"></path>\n\t\t\t\t\t  <rect transform=\"matrix(0.63652687,0.77125453,0.79873314,-0.60168545,0,0)\" y=\"-799.04865\" x=\"725.02814\" height=\"1.5188034\" width=\"1.1050575\" id=\"rect10564-1\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:3.29365;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></rect>\n\t\t\t\t\t  <path id=\"path10566-6\" d=\"m -187.00514,1024.5384 c -0.5949,-0.02 -0.9409,0.6655 -0.5723,1.1328 l 9.4752,12.4039 1.1254,-0.8516 -9.4893,-12.4019 c -0.127,-0.1717 -0.3255,-0.276 -0.539,-0.2832 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.3994;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\"></path>\n\t\t\t\t\t</g>\n\t\t\t\t  </g>\n\t\t\t\t</svg>\n\n\t\t\t\t<a class=\"btn\" >\n\t\t\t\t\tSite Report\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t\t<span class=\"btnBorder flex\" id=\"AddAdvisory\" onclick=\"GenericClicked('GoTo|Recommendation Form|AdvisorySelected|0')\">\n\t\t\t<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\"  class=\"svgIcon\" viewBox=\"0 0 210 297\" version=\"1.1\" id=\"svg18188\">\n\t\t\t\t  <defs id=\"defs18182\"></defs>\n\n\t\t\t\t  <g id=\"layer1\">\n\t\t\t\t\t<g style=\"stroke:#ffffff;stroke-opacity:1\" transform=\"matrix(4.6885092,0,0,-6.4519441,2933.3658,6755.2786)\" id=\"g10359-1\">\n\t\t\t\t\t  <rect transform=\"scale(1,-1)\" y=\"-1044.7333\" x=\"-623.32709\" height=\"41.608433\" width=\"40.356335\" id=\"rect10339-4\" style=\"opacity:1;fill:none;fill-opacity:1;stroke:white;stroke-width:3.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></rect>\n\t\t\t\t\t  <rect style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect10341-4\" width=\"7.3386645\" height=\"7.3386645\" x=\"-618.78735\" y=\"-1038.9415\" transform=\"scale(1,-1)\"></rect>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1033.0517 h 18.992\" id=\"path10343-2\"></path>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1037.5947 h 18.992\" id=\"path10345-3\"></path>\n\t\t\t\t\t  <rect style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect10347-6\" width=\"7.3386641\" height=\"7.3386641\" x=\"-618.85553\" y=\"-1027.453\" transform=\"scale(1,-1)\"></rect>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1021.6163 h 18.992\" id=\"path10349-75\"></path>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1026.1593 h 18.992\" id=\"path10351-3\"></path>\n\t\t\t\t\t  <rect style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect10353-5\" width=\"7.3386641\" height=\"7.3386641\" x=\"-618.68079\" y=\"-1016.1975\" transform=\"scale(1,-1)\"></rect>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1010.4315 h 18.992\" id=\"path10355-0\"></path>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1014.9745 h 18.992\" id=\"path10357-8\"></path>\n\t\t\t\t\t</g>\n\t\t\t\t  </g>\n\t\t\t\t</svg>\n\t\t\t\t<a class=\"btn\" >\n\t\t\t\t\tRecommendation\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t\t<span class=\"btnBorder flex\" id=\"AddAdvisory\" onclick=\"GenericClicked('GoTo|Recommendation Form|AdvisorySelected|-1')\">\n\t\t\t<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\"  class=\"svgIcon\" viewBox=\"0 0 210 297\" version=\"1.1\" id=\"svg18188\">\n\t\t\t\t  <defs id=\"defs18182\"></defs>\n\n\t\t\t\t  <g id=\"layer1\">\n\t\t\t\t\t<g style=\"stroke:#ffffff;stroke-opacity:1\" transform=\"matrix(4.6885092,0,0,-6.4519441,2933.3658,6755.2786)\" id=\"g10359-1\">\n\t\t\t\t\t  <rect transform=\"scale(1,-1)\" y=\"-1044.7333\" x=\"-623.32709\" height=\"41.608433\" width=\"40.356335\" id=\"rect10339-4\" style=\"opacity:1;fill:none;fill-opacity:1;stroke:white;stroke-width:3.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></rect>\n\t\t\t\t\t  <rect style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect10341-4\" width=\"7.3386645\" height=\"7.3386645\" x=\"-618.78735\" y=\"-1038.9415\" transform=\"scale(1,-1)\"></rect>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1033.0517 h 18.992\" id=\"path10343-2\"></path>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1037.5947 h 18.992\" id=\"path10345-3\"></path>\n\t\t\t\t\t  <rect style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect10347-6\" width=\"7.3386641\" height=\"7.3386641\" x=\"-618.85553\" y=\"-1027.453\" transform=\"scale(1,-1)\"></rect>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1021.6163 h 18.992\" id=\"path10349-75\"></path>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1026.1593 h 18.992\" id=\"path10351-3\"></path>\n\t\t\t\t\t  <rect style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect10353-5\" width=\"7.3386641\" height=\"7.3386641\" x=\"-618.68079\" y=\"-1016.1975\" transform=\"scale(1,-1)\"></rect>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1010.4315 h 18.992\" id=\"path10355-0\"></path>\n\t\t\t\t\t  <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#ffffff;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -607.90804,1014.9745 h 18.992\" id=\"path10357-8\"></path>\n\t\t\t\t\t</g>\n\t\t\t\t  </g>\n\t\t\t\t</svg>\n\t\t\t\t<a class=\"btn\" >\n\t\t\t\t\tIncident\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t\t\n\t\t\t\n\t\t</div>\n\t\t<div id=\"LeftPanel\" class=\"LeftPanel\" style=\"overflow:hidden;\">\n\t\t\t <span class=\"btnBorder flex\">\n\t\t\t\t\n\t\t\t\t <svg class=\"svgIcon\"   viewBox=\"0 0 74 74\" xmlns=\"http://www.w3.org/2000/svg\" data-name=\"color line\"><g fill=\"white\"><path d=\"m3.27 22.938a.5.5 0 0 1 -.5-.5v-7.927a.5.5 0 0 1 .5-.5h7.93a.5.5 0 0 1 0 1h-7.43v7.427a.5.5 0 0 1 -.5.5z\"/><path d=\"m71.27 22.938a.5.5 0 0 1 -.5-.5v-7.427h-7.427a.5.5 0 0 1 0-1h7.927a.5.5 0 0 1 .5.5v7.927a.5.5 0 0 1 -.5.5z\"/><path d=\"m11.2 59.989h-7.93a.5.5 0 0 1 -.5-.5v-7.927a.5.5 0 0 1 1 0v7.427h7.43a.5.5 0 0 1 0 1z\"/><path d=\"m71.27 59.989h-7.927a.5.5 0 0 1 0-1h7.427v-7.427a.5.5 0 0 1 1 0v7.927a.5.5 0 0 1 -.5.5z\"/><path d=\"m18.386 19.475h2.355v35.051h-2.355z\"/><path d=\"m14.915 19.475h1.709v35.051h-1.709z\"/><path d=\"m34.039 19.475h2.897v35.051h-2.897z\"/><path d=\"m27.498 19.475h1.292v35.051h-1.292z\"/><path d=\"m30.186 19.475h1.916v35.051h-1.916z\"/><path d=\"m9.311 19.475h3.25v35.051h-3.25z\"/><path d=\"m22.611 19.475h3.203v35.051h-3.203z\"/><path d=\"m55.424 19.475h2.355v35.051h-2.355z\" transform=\"matrix(-1 0 0 -1 113.202 74)\"/><path d=\"m59.577 19.475h1.709v35.051h-1.709z\" transform=\"matrix(-1 0 0 -1 120.863 74)\"/><path d=\"m47.089 19.475h1.292v35.051h-1.292z\" transform=\"matrix(-1 0 0 -1 95.471 74)\"/><path d=\"m39.186 19.475h1.584v35.051h-1.584z\" transform=\"matrix(-1 0 0 -1 79.956 74)\"/><path d=\"m43.311 19.475h1.916v35.051h-1.916z\" transform=\"matrix(-1 0 0 -1 88.539 74)\"/><path d=\"m63.343 19.475h2.76v35.051h-2.76z\" transform=\"matrix(-1 0 0 -1 129.445 74)\"/><path d=\"m50.068 19.475h3.203v35.051h-3.203z\" transform=\"matrix(-1 0 0 -1 103.34 74)\"/></g><path d=\"m35.645 3.514h3.25v66.972h-3.25z\" fill=\"#fe7058\" transform=\"matrix(0 1 -1 0 74.27 -.27)\"/></svg>\n\n\t\t\t\t<a class=\"btn\" onclick=\"GenericClicked('GoTo|Provisioning Step 1')\">\n\t\t\t\t\tBarcode Scanner\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t\t\n\t\t\t<span class=\"btnBorder flex\">\n\t\t\t\t <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" height=\"40\" width=\"40\" viewBox=\"0 0 40.0 40.0\" version=\"1.1\" id=\"SVGRoot\" sodipodi:docname=\"branchIcon.svg\" inkscape:version=\"1.0.1 (3bc2e813f5, 2020-09-07)\">\n\t\t\t\t  <g inkscape:label=\"Layer 1\" inkscape:groupmode=\"layer\" id=\"layer1\">\n\t\t\t\t\t<g transform=\"matrix(2.8315254,0,0,2.3131511,1250.3615,-135.65766)\" id=\"g63807\">\n\t\t\t\t\t  <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect63791\" width=\"6.5903883\" height=\"1.4587677\" x=\"433.22476\" y=\"-62.705818\" transform=\"scale(-1)\"></rect>\n\t\t\t\t\t  <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect63793\" width=\"6.5903883\" height=\"1.4587677\" x=\"433.22476\" y=\"-65.194893\" transform=\"scale(-1)\"></rect>\n\t\t\t\t\t  <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect63795\" width=\"6.5903883\" height=\"1.4587677\" x=\"433.22476\" y=\"-67.683983\" transform=\"scale(-1)\" inkscape:transform-center-x=\"-1.25\" inkscape:transform-center-y=\"-3.5945593\"></rect>\n\t\t\t\t\t  <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect63797\" width=\"6.3636031\" height=\"1.4587677\" x=\"61.317451\" y=\"431.00888\" transform=\"rotate(90)\"></rect>\n\t\t\t\t\t  <rect y=\"69.145058\" x=\"-436.51538\" height=\"6.3613191\" width=\"8.7030411\" id=\"rect63799\" style=\"opacity:1;fill:none;fill-opacity:1;stroke: #ffffff;stroke-width:1.0614;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\"></rect>\n\t\t\t\t\t  <path sodipodi:nodetypes=\"ccccccccccccccc\" inkscape:connector-curvature=\"0\" id=\"path63801\" d=\"m -437.65522,74.827066 -3.9548,-0.006 0.0236,-16.17481 h 12.22868 v 6.62866 l 0.004,2.66544 -1.16431,-0.0147 -0.0106,-2.65078 v -5.48182 h -9.88744 v 13.81616 0 l 2.75443,0.015 v 0 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill: #ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;\"></path>\n\t\t\t\t\t  <rect inkscape:transform-center-y=\"-2.4472877\" inkscape:transform-center-x=\"-1.25\" transform=\"scale(-1)\" y=\"-71.544823\" x=\"428.84824\" height=\"0.99317604\" width=\"6.5903883\" id=\"rect63803\" style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\"></rect>\n\t\t\t\t\t  <rect transform=\"scale(-1)\" y=\"-73.045937\" x=\"428.84824\" height=\"0.99317604\" width=\"6.5903883\" id=\"rect63805\" style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\"></rect>\n\t\t\t\t\t</g>\n\t\t\t\t  </g>\n\t\t\t\t</svg>\n\n\t\t\t\t<a class=\"btn\" onclick=\"GenericClicked('GoTo|Levels')\">\n\t\t\t\t\tLevels\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t\t \n\t\t</div>\n\t<div class=\"navigation\" id=\"bottomMenu\" style=\"overflow:hidden; width:100%;\">\n\n\t\t<div class=\"row flex clearfix\" style=\"width:100%;\">\n\t\t\t\n\t\t\t<div class=\"NavIcon\"   onclick=\"GenericClicked('GoBack|null')\"  style=\"/* float:left; */margin-left:2%;font-size:18px;width: 100%;float: left;\">\n\t\t\t\t <svg  id=\"BackButton\"  viewBox=\"0 0 16 16\" width=\"40px\" height=\"40px\" xml:space=\"preserve\" class=\"bi bi-arrow-left\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" style=\"float: left;\">\n\t\t\t\t  <path fill-rule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z\"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t\n\t\t\t\t<div class=\"NavIcon\"    onclick=\"GenericClicked('GoTo|Provisioning Step 1')\"style=\"font-size:18px;width: 100%; text-align:center\">\n\t\t\t\t <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40px\" height=\"40px\"  fill=\"currentColor\" class=\"bi bi-upc-scan\" viewBox=\"0 0 16 16\">\n\t\t\t\t  <path d=\"M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z\"/>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t\n\t\t \n\t\t\t\n\t\t\t<div class=\"NavIcon\" onclick=\"GenericClicked('AddMenu|CloseBtn|OpenBtn|activateGeneric|RightPanel')\"  style=\"font-size: 18px; width: 100%; float: right;    margin-right: 2%; \">\n\t\t\t\t<svg  width=\"50px\" id=\"OpenBtn\" height=\"50px\" xml:space=\"preserve\" viewBox=\"0 0 16 16\" class=\"bi bi-plus\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" style=\"float: right;\">\n\t\t\t\t  <path fill-rule=\"evenodd\" d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"NavIcon\" onclick=\"GenericClicked('ClosePanel|OpenBtn|CloseBtn|activateGeneric|RightPanel')\" id=\"CloseBtn\" style=\"float: right; margin-right: 2%; width: 100%; font-size: 18px;display: none;\">\n\t\t\t   <svg   width=\"50px\" height=\"50px\" xml:space=\"preserve\" viewBox=\"0 0 16 16\" class=\"bi bi-x-circle\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" style=\"float: right;\">\n\t\t\t\t  <path fill-rule=\"evenodd\" d=\"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"></path>\n\t\t\t\t  <path fill-rule=\"evenodd\" d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t</div>\n</div>"},"ev":{}},"Menu":{"t":"Scripting","lX":215,"lY":280,"sX":1,"sY":1,"s":"Initialisation","ps":{"enabled":"false","scalingType":"OK","width":"12.8%","height":"11.88%","x":"27.53%","y":"33.25%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div class=\"setColor\" id=\"Content\">\n\t<style>\n\t\t.setColor{\n\t\t\tbackground-color:#41505aff;\n\t\t\twidth:100%;\n\t\t\toverflow:hidden;\n\t\t\theight:100%;\n\t\t}\n\t\t.row{\n\t\t\tdisplay:flex;\n\t\t\theight: 100%;\n\t\t\twidth:100%;\n\t\t}\n\t\t.col-1{\n\t\t\twidth:10%;\n\t\t}\n\t\t.col-2{\n\t\t\twidth:20%;\n\t\t}\n\t\t.col-3{\n\t\t\twidth:30%;\n\t\t}\n\t\t.col-4{\n\t\t\twidth:40%;\n\t\t}\n\t\t.col-5{\n\t\t\twidth:50%;\n\t\t}\n\t\t.col-6{\n\t\t\twidth:60%;\n\t\t}\n\t\t.col-7{\n\t\t\twidth:70%;\n\t\t}\n\t\t.col-8{\n\t\t\twidth:80%;\n\t\t}\n\t\t.col-9{\n\t\t\twidth:90%;\n\t\t}\n\t\t.col-10{\n\t\t\twidth:100%;\n\t\t}\n\t\t.column{\n \t\t\theight: 100%;\n\t\t}\n\t\t.clearFix{\n\t\t\tborder-right:1px solid gray;\n\t\t}\n\t\t.dot {\n\t\t  height: 25px;\n\t\t  width: 25px;\n\t\t  background-color: #bbb;\n\t\t  border-radius: 50%;\n\t\t  display: inline-block;\n\t\t}\n\t\t.active{\n\t\t\tbackground-color:#4d98c2ff;\n\t\t}\n\t\t\n\t\t.dot:hover{\n\t\t\tbackground-color:#4d98c2ff;\n\t\t\tcursor:pointer;\n\t\t}\n\t\t.activeText{\n\t\t\tcolor:#4d98c2ff;\n \n\t\t}\n\t\t.circleText{\n\t\t\tmargin-top: 0px;\n\t\t\tfont-size: 10px;\n\t\t\tcolor: white;\n\t\t}\n\t\t\n\t\t.dotsMenu{\n\t\t\tcursor:pointer;\n \t\t\tfill:#4d98c2ff;\n\t\t}\n\t\t\n\t\t\n.inactiveToggle{\n    position: absolute;\n    top: 3.4px;\n    left: 23px;\n}\n\t\n.activeToggle{\n    position: absolute;\n    left: 13px;\n    top: 5px;\n}\n\t/* The switch - the box around the slider */\n.switch {\n    position: relative;\n    display: inline-block;\n    width: 78px;\n    height: 23px;\n}\n\n/* Hide default HTML checkbox */\n.switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.slider {\n     position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 20px;\n    right: 0;\n    bottom: 0;\n    background-color: #6ac0f3;\n    -webkit-transition: .4s;\n    transition: .4s;\n    font-size: 11px;\n    padding-top: 10px;\n    padding-left: 24px;\n    color: white;\n}\n.slider:before {\n    position: absolute;\n    content: \"\";\n    height: 14px;\n    width: 15px;\n    left: 5px;\n    bottom: 5px;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n}\n\n.Selected{\n\tposition:absolute;\n\tleft:10px;\n}\n\t\t\n\t\ninput:checked + .slider {\n    background-color: #6ac0f3ff;\n    font-size: 10px;\n    padding-top: 10px;\n    padding-right: 28px;\n    color: white;\n}\n\ninput:focus + .slider {\n  box-shadow: 0 0 1px #6ac0f3ff;\n}\n\ninput:checked + .slider:before {\n  -webkit-transform: translateX(34px);\n  -ms-transform: translateX(34px);\n  transform: translateX(34px);\n}\n\t\t\n#filterSearchInputContainer {\n\theight: 22%;\n\tdisplay: flex;\n    justify-content: space-around;\n\tpadding-top: 1px;\n}\n\t\t\n#filterSearchInput, #filterSelect {\n  width: 90%;\n  background-color: #646c83;\n  color: white;\n  border-radius: 5px;\n  font-size: 16px;\n  line-height: 1.3;\n  padding: 0.2em 0.8em;\n  border: 1px solid #aaa;\n  box-shadow: 0 1px 0 1px rgb(0 0 0 / 4%);\n}\n\t\t\n#filterSearchInput:focus-visible, #filterSelect:focus-visible {\n  outline: none;\n}\n\t\t\n#filterSearchInput::placeholder, #filterSelect::placeholder {\n\tcolor: #aaa;\n}\n\t\t\n#clearSearchButton {\n  background-color: #666e81;\n  color: white;\n  font-size: 13px;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\t\t\n[type=\"search\"]::-webkit-search-cancel-button {\n  -webkit-appearance: none;\n  appearance: none;\n  height: 10px;\n  width: 10px;\n  cursor: pointer;\n  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEyMy4wNXB4IiBoZWlnaHQ9IjEyMy4wNXB4IiB2aWV3Qm94PSIwIDAgMTIzLjA1IDEyMy4wNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTIzLjA1IDEyMy4wNTsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTEyMS4zMjUsMTAuOTI1bC04LjUtOC4zOTljLTIuMy0yLjMtNi4xLTIuMy04LjUsMGwtNDIuNCw0Mi4zOTlMMTguNzI2LDEuNzI2Yy0yLjMwMS0yLjMwMS02LjEwMS0yLjMwMS04LjUsMGwtOC41LDguNQ0KCQljLTIuMzAxLDIuMy0yLjMwMSw2LjEsMCw4LjVsNDMuMSw0My4xbC00Mi4zLDQyLjVjLTIuMywyLjMtMi4zLDYuMSwwLDguNWw4LjUsOC41YzIuMywyLjMsNi4xLDIuMyw4LjUsMGw0Mi4zOTktNDIuNGw0Mi40LDQyLjQNCgkJYzIuMywyLjMsNi4xLDIuMyw4LjUsMGw4LjUtOC41YzIuMy0yLjMsMi4zLTYuMSwwLTguNWwtNDIuNS00Mi40bDQyLjQtNDIuMzk5QzEyMy42MjUsMTcuMTI1LDEyMy42MjUsMTMuMzI1LDEyMS4zMjUsMTAuOTI1eiIvPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=);\n  filter: invert(1);\n  background-size: 10px 10px;\n}\n\n/* Rounded sliders */\n.slider.round {\n  border-radius: 34px;\n}\n\n.slider.round:before {\n  border-radius: 50%;\n}\n\t</style>\n\n\n\t<div class=\"row\" id=\"navContainer\" style=\"padding-top: 10px;height:68%; padding-bottom: 5px;\">\n\t\t<div class=\"column col-5 clearFix\">\n\t\t\t <div class=\"row\" style=\"justify-content: space-around;\">\n\t\t\t\t <div class=\"column col-8\" style=\"display: inline-grid;overflow:hidden;\">\n\t\t\t\t\t \n\t\t\t\t\t <div class=\"row\" style=\"height:28px; padding-top:2px; justify-content:space-between;\" id=\"MaintnanceModeRow\">\n\t\t\t\t\t\t<div id=\"navToggle\" data-value=\"swithToggle\" style=\"text-align:center\" onclick=\"CahngeMaitnanceMode(this)\" id=\"maintenanceModeContainer\">\n\t\t\t\t\t\t\t<label class=\"switch\" >\n\t\t\t\t\t\t\t  <input type=\"checkbox\" data-value=\"maintnanceCheckbox\" disabled >\n\t\t\t\t\t\t\t\t<span   class=\"slider round\"><span data-value=\"maitnanceSelect\" class=\"inactiveToggle\">OFF</span></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"text-align:center; cursor: pointer; padding-left: 10px;\" onclick=\"toggleSearchBar(this)\">\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill=\"white\" class=\"bi bi-funnel\" viewBox=\"0 0 16 16\">\n\t\t\t\t\t\t\t  <path d=\"M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<svg style=\"display: none\" xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill=\"white\" class=\"bi bi-funnel-fill\" viewBox=\"0 0 16 16\">\n\t\t\t\t\t\t\t  <path d=\"M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t </div>\n\t\t\t\t\t \n\t\t\t\t\t <div class=\"row\">\n\t\t\t\t\t\t <span class=\"activeText\" id=\"PageName\" data-value=\"currentParent\" style=\"padding-left:10px;color:white; font-size:12px;margin-top:3px;\">Contoso </span>\n\t\t\t\t\t </div>\n\t\t\t\t\t \n\t\t\t\t </div>\n\t\t\t\t <!--data-value=\"swithToggle\" <div class=\"column col-2\" id=\"ShowFilters\" onclick=\"GenericClicked('ShowFilterComponents|BgContainer|BgContainer2|SortFilter|SortFilter2|EditFilter|EditFilter2')\">\n\t\t\t\t\t<svg width=\"1.8em\" height=\"1.8em\" viewBox=\"0 0 16 16\" style=\"padding-left:8px\" class=\"bi bi-three-dots-vertical\" fill=\"white\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"column col-2\" style=\"display:none\" id=\"HideFilters\" onclick=\"GenericClicked('HideFilterComponents|BgContainer|BgContainer2|SortFilter|SortFilter2|EditFilter|EditFilter2')\">\n\t\t\t\t\t<svg width=\"1.8em\" height=\"1.8em\"  viewBox=\"0 0 16 16\" style=\"padding-left:8px; fill:#4d98c2ff;\" class=\"bi bi-three-dots-vertical\" fill=\"white\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div> -->\n\n\t\t\t\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class=\"column col-5\" id=\"Statuses\" style=\"display:flex; text-align:center;padding-top:2px;margin-right:3px;\">\n\t\t\t<div class=\"column col-3\" style=\"width:80%\">\n\t\t\t\t<div  id=\"status\" onclick=\"GenericClicked('GoTo|Site Report List')\" >\n\t\t\t\t\t<span class=\"dot active\" data-info=\"Active1\">\n\n\t\t\t\t\t</span>\n\t\t\t\t\t<p class=\"circleText\" data-info=\"active1Name\">Status</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"column col-3\" style=\"width:100%\" >\n\t\t\t\t<div id=\"siteVisits\" onclick=\"GenericClicked('GoTo|Site Report List')\" >\n\t\t\t\t\t<span class=\"dot\" data-info=\"Active2\" >\n\n\t\t\t\t\t</span>\n\t\t\t\t\t<p class=\"circleText\">Site Reports</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"column col-3\" style=\"width:100%\">\n\t\t\t\t<div id=\"Advisories\"  onclick=\"GenericClicked('GoTo|Recommendation List')\">\n\t\t\t\t\t<span class=\"dot\" data-info=\"Active3\" >\n\n\t\t\t\t\t</span>\n\t\t\t\t\t<p class=\"circleText\" >Site Events</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class=\"row\" id=\"filterContainer\" style=\"display: none; height: 22%; padding: 6px 0;\">\n        <div class=\"column col-5 clearFix\" style=\"display: flex; justify-content: center;\">\n            <select id=\"filterSelect\" style=\"width: 80%;\" onchange=\"ChangeActiveMode(this)\">\n                <option>Active</option>\n                <option>All</option>\n            </select>\n        </div>\n        <div class=\"column col-5\"  style=\"display:flex; text-align:center;padding-top:2px;margin-right:3px;\">\n        </div>\n    </div>\n\t\n\t<div class=\"row\" id=\"filterSearchInputContainer\" style=\"display: none;\">\n\t\t<input type=\"search\" id=\"filterSearchInput\" placeholder=\"Search\" data-value=\"filterSearchInput\" oninput=\"handleSearchInput()\">\n\t</div>\n\t\n</div>"},"ev":{}},"TMController":{"t":"Scripting","lX":795,"lY":250,"sX":1,"sY":1,"s":"Initialisation","ps":{"enabled":"false","scalingType":"OK","width":"5.76%","height":"11.88%","x":"51.87%","y":"22.57%"},"ver":"200124c190915","vis":false,"dis":false,"pr":"2","tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n var Caller = \"Caller\";\n var menuLeft = false;\n var menuRight = false;\n var ds1;\n var ds2;\n \n \n var _initializer = function Load(template, channel)\n {\n     ClientEvents.publish(channel, template);\n         \n };\n \n \n var _handleGeneric = function HandleGeneric(data)\n {\n      var command;\n      var split = data.split('|');\n      switch(split[0])\n      {\n          case \"GoBack\":\n              Caller = Script.getState(\"Caller\");\n              if(Caller !== \"null\")\n              {\n                 fw.func(\"JUMPSCREEN\", Caller);\n              }\n              break;\n          case \"GoTo\":\n              _gotoPage(split);\n              break;\n          case \"AddMenu\":\n             command = \n             {\n                 \"Action\":\"setVisible\",\n                 \"Compoent\":split[2],\n                 \"Value\":\"none\"\n              };\n              _publishCommand(command,split[3]);\n              command = \n             {\n                 \"Action\":\"setVisible\",\n                 \"Compoent\":split[1],\n                 \"Value\":\"\"\n               };\n              _publishCommand(command,split[3]);\n              OpenPopupMenu(split[4]);\n              break;\n          case \"ClosePanel\":\n              \n  \n              command = \n             {\n                 \"Action\":\"setVisible\",\n                 \"Compoent\":split[2],\n                 \"Value\":\"none\"\n               };\n             _publishCommand(command,split[3]);\n             command = \n             {\n                 \"Action\":\"display\",\n                 \"Compoent\":split[1],\n               };\n             _publishCommand(command,split[3]);\n             \n              ClosePopupMenu(split[4]);\n              break;\n          case \"SetAction\":\n              command = \n             {\n                 \"Action\":split[1],\n                 \"Compoent\":split[2],\n                 \"Value\": split[3]\n              };\n              _publishCommand(command,split[4]);\n              break;\n          case \"PublishCommand\":\n             command = \n             {\n                 \"Action\":split[1],\n                 \"Compoent\":split[2],\n                 \"Value\": split[3]\n             };\n             _publishCommand(command,split[4]);\n             break;\n          case \"ShowFilterComponents\":\n             command = \n             {\n                 \"Action\":\"setVisible\",\n                 \"Compoent\":\"HideFilters\",\n                 \"Value\":\"\"\n               };\n             _publishCommand(command,\"SetTopAction\");\n             command = \n             {\n                 \"Action\":\"setVisible\",\n                 \"Compoent\":\"ShowFilters\",\n                 \"Value\":\"none\"\n             };\n              _publishCommand(command,\"SetTopAction\");\n               fw.func(\"SETPROPERTY\", split[1], \"z-index\", \"120\");\n              fw.func(\"SETPROPERTY\", split[1], \"display\", \"\");\n              \n              fw.func(\"SETPROPERTY\", split[2], \"z-index\", \"130\");\n              fw.func(\"SETPROPERTY\", split[2], \"display\", \"\");\n              \n              fw.func(\"SETPROPERTY\", split[3], \"z-index\", \"130\");\n              fw.func(\"SETPROPERTY\", split[3], \"display\", \"\");\n              break;\n           case \"HideFilterComponents\":\n               command = \n             {\n                 \"Action\":\"setVisible\",\n                 \"Compoent\":\"HideFilters\",\n                 \"Value\":\"none\"\n               };\n             _publishCommand(command,\"SetTopAction\");\n             command = \n             {\n                 \"Action\":\"setVisible\",\n                 \"Compoent\":\"ShowFilters\",\n                 \"Value\":\"\"\n             };\n             _publishCommand(command,\"SetTopAction\");\n               fw.func(\"SETPROPERTY\", split[1], \"z-index\", \"-1\");\n              fw.func(\"SETPROPERTY\", split[1], \"display\", \"none\");\n \n              fw.func(\"SETPROPERTY\", split[2], \"z-index\", \"-1\");\n              fw.func(\"SETPROPERTY\", split[2], \"display\", \"none\");\n              \n              fw.func(\"SETPROPERTY\", split[3], \"z-index\", \"-1\");\n              fw.func(\"SETPROPERTY\", split[3], \"display\", \"none\");\n              break;\n      }\n };\n \n var _publishCommand = function PublishCommand(command, channel)\n {\t  \n     ClientEvents.publish(channel, command, false);\t \t\n };\n \n var _gotoPage = function GotoPage(page)\n {\n     if(page[2] !== undefined)\n     {\n         Script.setState(page[2],page[3]);\n     }\n      Script.setState(\"SelectedName\",page[0]);\n     fw.func(\"JUMPSCREEN\", page[1]);\n };\n \n var _UpdatePersistance = function UpdatePersistance(persistance)\n {\n     var id = fw.func(\"GETUSER\");\n     var packet = {};\n \n     packet = \n     [\n         {\n             \"TableName\":\"PlatformPersistence\",\n             \"OnConflict\":\n             [\n                 {\n                     \"Column\":\"User\",\n                     \"ParamName\":\"conf1\",\n                     \"Value\":id\n                 },\n                 {\n                     \"Column\":\"SessionId\",\n                     \"ParamName\":\"conf2\",\n                     \"Value\":persistance.SessionId\n                 },\n                 {\n                     \"Column\":\"LocationId\",\n                     \"ParamName\":\"LocationId1\",\n                     \"value\":persistance.LocationId === undefined ? \"\" : persistance.LocationId \n                 },\n                 {\n                     \"Column\":\"CompanyId\",\n                     \"ParamName\":\"CompanyId1\",\n                     \"value\":persistance.CompanyId === undefined ? \"\" : persistance.CompanyId\n                 },\n                 {\n                     \"Column\":\"CustomerId\",\n                     \"ParamName\":\"CustomerId1\",\n                     \"value\":persistance.CustomerId === undefined ? \"\" : persistance.CustomerId\n                 },\n                 {\n                     \"Column\":\"SiteId\",\n                     \"ParamName\":\"SiteId1\",\n                     \"value\":persistance.SiteId === undefined ? \"\" : persistance.SiteId\n                 },\n                 {\n                     \"Column\":\"LastScreen\",\n                     \"ParamName\":\"LastScreen1\",\n                     \"value\":persistance.LastScreen === undefined ? \"\" : persistance.LastScreen\n                 },\n                 {\n                     \"Column\":\"ReportId\",\n                     \"ParamName\":\"ReportId1\",\n                     \"value\": persistance.ReportId === undefined ? \"\" : persistance.ReportId\n                 },\n                 {\n                     \"Column\":\"AdvisoryId\",\n                     \"ParamName\":\"AdvisoryId1\",\n                     \"value\": persistance.AdvisoryId === undefined ? \"\" : persistance.AdvisoryId\n                 },\n                 {\n                     \"Column\":\"FormData\",\n                     \"ParamName\":\"FormData1\",\n                     \"value\": persistance.FormData === undefined ? \"\" : persistance.FormData \n                 },\n                 {\n                    \"Column\":\"BranchId\",\n                    \"ParamName\":\"BranchId1\",\n                    \"value\": persistance.BranchId === undefined ? \"\" : persistance.BranchId \n                 }\n             ],\n             \"data\":\n             [\n                 {\n                     \"Column\":\"User\",\n                     \"ParamName\":\"option1\",\n                     \"value\":id\n                 },\n                 {\n                     \"Column\":\"SessionId\",\n                     \"ParamName\":\"val1\",\n                     \"value\":persistance.SessionId === undefined ? \"\" : persistance.SessionId\n                 },\n                 {\n                     \"Column\":\"LocationId\",\n                     \"ParamName\":\"LocationId\",\n                     \"value\":persistance.LocationId === undefined ? \"\" : persistance.LocationId \n                 },\n                 {\n                     \"Column\":\"CompanyId\",\n                     \"ParamName\":\"CompanyId\",\n                     \"value\":persistance.CompanyId === undefined ? \"\" : persistance.CompanyId\n                 },\n                 {\n                     \"Column\":\"CustomerId\",\n                     \"ParamName\":\"CustomerId\",\n                     \"value\":persistance.CustomerId === undefined ? \"\" : persistance.CustomerId\n                 },\n                 {\n                     \"Column\":\"SiteId\",\n                     \"ParamName\":\"SiteId\",\n                     \"value\":persistance.SiteId === undefined ? \"\" : persistance.SiteId\n                 },\n                 {\n                     \"Column\":\"LastScreen\",\n                     \"ParamName\":\"LastScreen\",\n                     \"value\":persistance.LastScreen === undefined ? \"\" : persistance.LastScreen\n                 },\n                 {\n                     \"Column\":\"ReportId\",\n                     \"ParamName\":\"ReportId\",\n                     \"value\": persistance.ReportId === undefined ? \"\" : persistance.ReportId\n                 },\n                 {\n                     \"Column\":\"AdvisoryId\",\n                     \"ParamName\":\"AdvisoryId\",\n                     \"value\": persistance.AdvisoryId === undefined ? \"\" : persistance.AdvisoryId\n                 },\n                 {\n                     \"Column\":\"FormData\",\n                     \"ParamName\":\"FormData\",\n                     \"value\": persistance.FormData === undefined ? \"\" : persistance.FormData \n                 },\n                 {\n                    \"Column\":\"BranchId\",\n                    \"ParamName\":\"BranchId\",\n                    \"value\": persistance.BranchId === undefined ? \"\" : persistance.BranchId \n                 }\n                  \n             ],\n             \"Filters\":\n             [\n                 {\n                     \"Column\":\"User\",\n                     \"ParamName\":\"option1\",\n                     \"value\":id\n                 },\n                 {\n                     \"Column\":\"SessionId\",\n                     \"ParamName\":\"val1\",\n                     \"value\":persistance.SessionId\n                 }\n             ]\n         }\n     ];\n \n     Database.saveComposite(\n         \"Rodent\",\n         \"PlatformPersistence\",\n         packet,\n         function (dbResponse) {\n             Script.setState(\"rodent-persistance\",persistance);\n         }\n     );\n };\n \n function OpenPopupMenu(menu)\n {\n     if(menu === \"LeftPanel\")\n     {\n         menuLeft = true;\n     }\n     else\n     {\n         menuRight = true;\n     }\n         \n     var command = \n     {\n         \"Action\":\"display\",\n         \"Compoent\":menu,\n         \"Value\": true\n     };\n     ClientEvents.publish(\"activateGeneric\", command, false);\t\n }\n \n function ClosePopupMenu(menu)\n {\n     if(menu === \"LeftPanel\")\n     {\n         menuLeft = false;\n     }\n     else\n     {\n         menuRight = false;\n     }\n     \n      var command = \n     {\n         \"Action\":\"Hide\",\n         \"Compoent\":menu,\n         \"Value\": true\n     };\n     _publishCommand(command, \"activateGeneric\");\t\n     \n     if(menuLeft === false && menuRight === false)\n     {\n         command = \n         {\n             \"Action\":\"HideIndex\"\n         };\n         _publishCommand(command, \"activateGeneric\");\t\n     \n     }\n }\n \n Script.on('load', function() \n {\n\t //LoadPersistence();\n\t userAccess();\n      \n });\n\n Script.on('init', function() \n {\n\t var user = fw.func(\"GETUSER\");\n\t if(user !== \"admin\")\n\t {\n\t\tfw.func(\"HIDEWIDGET\",\"minButtonTag\");\n\t\tfw.func(\"HIDEWIDGET\",\"touchButton\");\n\t\tfw.func(\"HIDEWIDGET\",\"minButton\");\n\t\tfw.func(\"HIDEWIDGET\",\"sidebar\");\n\t\tfw.func(\"TOGGLESIDEBAR\",true);\n\n\t\t \n \t }\n\t \n\n\tuserAccess();\n    //ClientEvents.publish(\"set-welcome\", fw.func(\"GETUSER\"));\n });\n \n ClientEvents.subscribe(\"GenericActionMessage\", function(data) \n { \n       _handleGeneric(data);\n });\n \n function LoadPersistence()\n {\n      \n     var user = JSON.parse(sessionStorage.getItem(\"user\"));\n     \n     var compoundQeury = [\n     {\n         \"TableName\" : \"PlatformPersistence\", // Specify the primary table used to construct the join request\n         \"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n         \"Columns\" :\n         [\n             \"User\",\n             \"SessionId\",\n             \"LocationId\",\n             \"CompanyId\",\n             \"CustomerId\",\n             \"SiteId\",\n             \"LastScreen\",\n             \"ReportId\",\n             \"AdvisoryId\",\n             \"FormData\",\n             \"LevelAccess\",\n             \"BranchId\",\n\t\t\t \"IsAdmin\"\n             \n         ],\n         \"Filters\":\n         [\n             {\n                 \"Column\" : \"User\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                 \"ParamName\" : \"User\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                 \"Value\":fw.func(\"GETUSER\")  // Value that you want to pass for comparison (any object)\n             },\n             {\n                 \"Column\" : \"SessionId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                 \"ParamName\" : \"SessionId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                 \"Value\":user.sessionToken  // Value that you want to pass for comparison (any object)\n             }\n         ]// Specify the list of columns to take from the reference table.\n     }];\n     Database.readCompound(\"rodent\",\"PlatformPersistence\",compoundQeury, function(packet)\t\t\t\t\t \n     { \n            \n             ds1 = packet;\n             CheckJumpScreen();\n         \n     });\t\n     compoundQeury = [\n         {\n             \"TableName\" : \"UserRoles\", // Specify the primary table used to construct the join request\n             \"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\" :\n             [\n                 \"User\",\n                 \"CompanyId\"\n             ],\n             \"Filters\":\n             [\n                 {\n                     \"Column\" : \"User\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                     \"ParamName\" : \"User\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                     \"Value\":fw.func(\"GETUSER\")  // Value that you want to pass for comparison (any object)\n                 },\n                  \n             ]// Specify the list of columns to take from the reference table.\n         }];\n         Database.readCompound(\"rodent\",\"UserRoles\",compoundQeury, function(packet)\t\t\t\t\t \n         { \n\t\t\t \n             ds2 = [];\n             var current;\n             for(var val in packet.value.data)\n             {\n                 current =  packet.value.data[val];\n                 ds2.push(current[1]);\n\t\t\t\t \n             }\n             CheckJumpScreen();\n         });\t\n     \n }\n \n function CheckJumpScreen()\n {\n      \n     if(ds1 !== undefined && ds2 !== undefined)\n     {\n         JumpUser();\n     }\n }\n \n \n function JumpUser()\n {\n    var user = JSON.parse(sessionStorage.getItem(\"user\"));\n \n    var persistence;\n    var current;\n    var outgoingSource = [];\n    for(var val in ds1.value.data)\n    {\n        current =  ds1.value.data[val];\n    }\n    \n    Script.setState(\"Initializer\",_initializer);\n    Script.setState(\"HandleGeneric\",_handleGeneric);\n    Script.setState(\"PublishCommand\",_publishCommand);\n    Script.setState(\"UpdatePersistance\",_UpdatePersistance);\n  \n \n    persistence = current;\n  \n    if(persistence === undefined)\n    {\n        persistence = {};\n        Script.setState(\"rodent-persistance\",persistence);\n        persistence.UserRights = ds2;\n        persistence.User = fw.func(\"GETUSER\");\n        persistence.SessionId = user.sessionToken;\n\t    persistence.LocationId = \"\";\n        persistence.CompanyId = \"\";\n        persistence.CustomerId = \"\";\n        persistence.SiteId = \"\";\n        persistence.LastScreen = \"\";\n        persistence.ReportId = \"\";\n        persistence.AdvisoryId = \"\";\n        persistence.FormData = \"\";\n        persistence.LevelAccess = 1;\n        persistence.BranchId = \"\";\n        _UpdatePersistance(persistence);\n        fw.func(\"JUMPSCREEN\", \"Levels\");\n \n    }\n    else\n    {\n\t\t  \n        persistence = {};\n        persistence.User = current[0];\n        persistence.SessionId = current[1];\n        persistence.LocationId = current[2];\n        persistence.CompanyId = current[3];\n        persistence.CustomerId = current[4];\n        persistence.SiteId = current[5];\n        persistence.LastScreen = current[6];\n        persistence.ReportId = current[7];\n        persistence.AdvisoryId = current[8];\n        persistence.FormData = current[9];\n        persistence.LevelAccess = current[10];\n        persistence.BranchId = current[11];\n\t\tpersistence.IsAdmin = current[12];\n        persistence.UserRights = ds2;\n\t\t\n\t\tDatabase.readRecords(\"rodent\", \"UserRoles\", function(eventData) {\n\t\t\t//debugger;\n\t\t\tpersistence.IsAdmin = `${eventData.value.getColumn(\"IsAdmin\")[0]}`;\n\t\t\tScript.setState(\"SelectedCustomer\", persistence.CustomerId);\n\t\t\tScript.setState(\"SelectedArea\",persistence.LocationId);\n\t\t\tScript.setState(\"selectedSite\", persistence.SiteId);\n\t\t\tScript.setState(\"getSite\", persistence.SiteId);\n\t\t\tScript.setState(\"rodent-persistance\",persistence);\n\t\t\t\n\t\t\tScript.setState(\"GotoPage\",_gotoPage);\n\t\t\tvar command = \n\t\t\t{\n\t\t\t\t\"Action\":\"setVal\",\n\t\t\t\t\"Compoent\":\"RightPanel\",\n\t\t\t\t\"Value\": \" \",\n\t\t\t\t\"Id\": \"PageName\",\n\t\t\t};\n\t\t\t_publishCommand(command, \"SetTopAction\");\t\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"SetActiveDeactivate\",\n\t\t\t\t\"Compoent\":\"RightPanel\",\n\t\t\t\t\"Value\": \"dot|dot active\",\n\t\t\t\t\"Id\": \"Statuses|Active1|Active3\",\n\t\t\t};\n\t\t\t_publishCommand(command, \"SetTopAction\");\n\t\t\tif(persistence.LastScreen === \"Device Level\")\n\t\t\t{\n\t\t\t\tvar selectSites = [\n\t\t\t\t{\n\t\t\t\t\t\"TableName\" : \"Locations\", // Specify the primary table used to construct the join request\n\t\t\t\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\t\t\t\"Columns\" :\n\t\t\t\t\t[\n\t\t\t\t\t\t\"Id\",\n\n\t\t\t\t\t], // Specify the list of columns to take from the reference table.\n\t\t\t\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"Column\" : \"RelativeId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n\t\t\t\t\t\t\t\"ParamName\" : \"RelativeId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n\t\t\t\t\t\t\t\"Value\": persistence.SiteId // Value that you want to pass for comparison (any object)\n\t\t\t\t\t\t}\t\n\t\t\t\t\t]\n\t\t\t\t}];\n\t\t\t\tDatabase.readCompound(\"rodent\",\"Sites\",selectSites, function(currentData)\t\t\t\t\t \n\t\t\t\t{\n\n\t\t\t\t\tvar selectedSites = [];\n\t\t\t\t\tvar areas;\t\n\t\t\t\t\tfor(var item in currentData.value.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tareas = currentData.value.data[item];\n\t\t\t\t\t\tselectedSites.push(areas[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(current !== undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\tScript.setState(\"selectedSites\", selectedSites);\t \n\t\t\t\t\t\tfw.func(\"JUMPSCREEN\", persistence.LastScreen);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfw.func(\"JUMPSCREEN\", \"Levels\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(persistence.LastScreen === \"\")\n\t\t\t{\n\t\t\t\tfw.func(\"JUMPSCREEN\", \"Levels\");\n\t\t\t}\n\t\t\t else\n\t\t\t{\n\n\t\t\t\tif(persistence.LastScreen !== \"Recommendation Form\")\n\t\t\t\t{\n\t\t\t\t\tpersistence.AdvisoryId = \"\";\t\t\t\t\n\t\t\t\t\t_UpdatePersistance(persistence);\n\t\t\t\t}\n\t\t\t\tif(persistence.LastScreen !== \"Site Report Form\")\n\t\t\t\t{\n\t\t\t\t\tpersistence.ReportId = \"\";\n\t\t\t\t\t_UpdatePersistance(persistence);\n\t\t\t\t}\n\n\t\t\t\tif(persistence.LastScreen !== \"Recommendation Form\" && persistence.LastScreen !== \"Site Report Form\")\n\t\t\t\t{\n\t\t\t\t\tpersistence.FormData = \"\";\n\t\t\t\t\t_UpdatePersistance(persistence);\n\t\t\t\t}\n\n\t\t\t\tfw.func(\"JUMPSCREEN\", persistence.LastScreen);\n\t\t\t}\n\t\t}, {filter: `User='${Client.getUser()}'`});\n    }\n }\n\n/**\n * Check whether the user has been given access to access the services\n * @param {*} value : value which determine whether the page is loading or initialized\n */\nfunction userAccess(value){\n\n    var user = Client.getUser();\n\n    var selectUser = [\n        {\n            \"TableName\": \"users\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    //\"username\",\n                    \"accessrole\"\n\n\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": user // Value that you want to pass for comparison (any object)\n                    }\n                ]\n        }\n    ];\n\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\t\tvar details;\n        try {\n\n            var accessRoleId = Object.values(eventData.value.data)[0][0];\n            //console.log(\"Access role value is \" + accessRoleId);\n            //var errorEnable = {};\n            if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId === null) {\n\n                \n                if (user === \"admin\") {\n                    validateInitialization(value);\n                    return;\n                }\n\n                //General User Screen\n                details = `Dear ${user}, please contact your admin to be assigned an access role.`;\n                Script.setState(\"userDetails\", details);\n                fw.func(\"JUMPSCREEN\", \"General User Screen\");\n                //return;\n            } else {\n                validateInitialization(value);\n                \n            }\n\n        } catch (error) {\n            //to the same thing\n            if (user === \"admin\") {\n                validateInitialization(value);\n                return;\n            }\n            details = `Dear ${user}, please contact your admin to be assigned an access role.`;\n            Script.setState(\"userDetails\", details);\n            fw.func(\"JUMPSCREEN\", \"General User Screen\");\n            return;\n        }\n\n    });\n\n}\n\n/**\n * Validate the screen the user should go to\n * @param {*} value : value which determine whether the page is loading or initialized\n */\nfunction validateInitialization(value){\n\n\n    // this occure on init\n    if (value === 0) {\n\n        ClientEvents.publish(\"set-welcome\", fw.func(\"GETUSER\"));\n\n        // this happens on load\n    } else {\n\n        LoadPersistence();\n    }\n}"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"Container#0":{"t":"Container","lX":0,"lY":0,"sX":17.43,"sY":8.74,"s":"Initialisation","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"100%","x":"0%","y":"0%"},"ver":"190104c190915","z":"110","dis":false,"tt":"","a":{"title":"","color":"white"},"ev":{}},"Label#10":{"t":"Label","lX":0,"lY":430,"sX":17.43,"sY":3.4,"s":"Initialisation","ps":{"enabled":"false","scalingType":"OK","width":"100%","height":"10.1%","x":"0%","y":"0px"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"30","label text":"<font size=\"7\">Label text</font>","text align":"center"},"ev":{"clientEvents":{"inputEvents":{"set welcome":{"channel":"set-welcome/receive value","event":"receive value","important":"false"}}}}},"DeviceLevelMenu":{"t":"Scripting","lX":380,"lY":280,"sX":1,"sY":1,"s":"Initialisation","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c210519","dis":false,"tt":"","a":{"script type":"html","code editor":"<div class=\"setColor\" id=\"Content\">\n\t<style>\n\t\t.setColor{\n\t\t\tbackground-color:#41505aff;\n\t\t\twidth:100%;\n\t\t\toverflow:hidden;\n\t\t\theight:100%;\n\t\t}\n\t\t.row{\n\t\t\tdisplay:flex;\n\t\t\theight: 100%;\n\t\t\twidth:100%;\n\t\t}\n\t\t.col-1{\n\t\t\twidth:10%;\n\t\t}\n\t\t.col-2{\n\t\t\twidth:20%;\n\t\t}\n\t\t.col-3{\n\t\t\twidth:30%;\n\t\t}\n\t\t.col-4{\n\t\t\twidth:40%;\n\t\t}\n\t\t.col-5{\n\t\t\twidth:50%;\n\t\t}\n\t\t.col-6{\n\t\t\twidth:60%;\n\t\t}\n\t\t.col-7{\n\t\t\twidth:70%;\n\t\t}\n\t\t.col-8{\n\t\t\twidth:80%;\n\t\t}\n\t\t.col-9{\n\t\t\twidth:90%;\n\t\t}\n\t\t.col-10{\n\t\t\twidth:100%;\n\t\t}\n\t\t.column{\n \t\t\theight: 100%;\n\t\t}\n\t\t.clearFix{\n\t\t\tborder-right:1px solid gray;\n\t\t}\n\t\t.dot {\n\t\t  height: 25px;\n\t\t  width: 25px;\n\t\t  background-color: #bbb;\n\t\t  border-radius: 50%;\n\t\t  display: inline-block;\n\t\t}\n\t\t.active{\n\t\t\tbackground-color:#4d98c2ff;\n\t\t}\n\t\t\n\t\t.dot:hover{\n\t\t\tbackground-color:#4d98c2ff;\n\t\t\tcursor:pointer;\n\t\t}\n\t\t.activeText{\n\t\t\tcolor:#4d98c2ff;\n \n\t\t}\n\t\t.circleText{\n\t\t\tmargin-top: 0px;\n\t\t\tfont-size: 10px;\n\t\t\tcolor: white;\n\t\t}\n\t\t\n\t\t.dotsMenu{\n\t\t\tcursor:pointer;\n \t\t\tfill:#4d98c2ff;\n\t\t}\n\t\t\n\t\t\n.inactiveToggle{\n    position: absolute;\n    top: 3.4px;\n    left: 23px;\n}\n\t\n.activeToggle{\n    position: absolute;\n    left: 13px;\n    top: 5px;\n}\n\t/* The switch - the box around the slider */\n.switch {\n    position: relative;\n    display: inline-block;\n    width: 78px;\n    height: 23px;\n}\n\n/* Hide default HTML checkbox */\n.switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.slider {\n     position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 20px;\n    right: 0;\n    bottom: 0;\n    background-color: #6ac0f3;\n    -webkit-transition: .4s;\n    transition: .4s;\n    font-size: 11px;\n    padding-top: 10px;\n    padding-left: 24px;\n    color: white;\n}\n.slider:before {\n    position: absolute;\n    content: \"\";\n    height: 14px;\n    width: 15px;\n    left: 5px;\n    bottom: 5px;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n}\n\n.Selected{\n\tposition:absolute;\n\tleft:10px;\n}\n\t\t\n\t\ninput:checked + .slider {\n    background-color: #6ac0f3ff;\n    font-size: 10px;\n    padding-top: 10px;\n    padding-right: 28px;\n    color: white;\n}\n\ninput:focus + .slider {\n  box-shadow: 0 0 1px #6ac0f3ff;\n}\n\ninput:checked + .slider:before {\n  -webkit-transform: translateX(34px);\n  -ms-transform: translateX(34px);\n  transform: translateX(34px);\n}\n\t\t\n#filterSearchInputContainer {\n\theight: 22%;\n\tdisplay: flex;\n    justify-content: space-around;\n\tpadding-top: 1px;\n}\n\t\t\n#filterSearchInput, #filterSelect, #filterSort {\n  width: 90%;\n  background-color: #646c83;\n  color: white;\n  border-radius: 5px;\n  font-size: 16px;\n  line-height: 1.3;\n  padding: 0.2em 0.8em;\n  border: 1px solid #aaa;\n  box-shadow: 0 1px 0 1px rgb(0 0 0 / 4%);\n}\n\t\t\n#filterSearchInput:focus-visible, #filterSelect:focus-visible, #filterSort:focus-visible {\n  outline: none;\n}\n\t\t\n#filterSearchInput::placeholder, #filterSelect::placeholder, #filterSort::placeholder {\n\tcolor: #aaa;\n}\n\t\t\n#clearSearchButton {\n  background-color: #666e81;\n  color: white;\n  font-size: 13px;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\t\t\n[type=\"search\"]::-webkit-search-cancel-button {\n  -webkit-appearance: none;\n  appearance: none;\n  height: 10px;\n  width: 10px;\n  cursor: pointer;\n  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEyMy4wNXB4IiBoZWlnaHQ9IjEyMy4wNXB4IiB2aWV3Qm94PSIwIDAgMTIzLjA1IDEyMy4wNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTIzLjA1IDEyMy4wNTsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTEyMS4zMjUsMTAuOTI1bC04LjUtOC4zOTljLTIuMy0yLjMtNi4xLTIuMy04LjUsMGwtNDIuNCw0Mi4zOTlMMTguNzI2LDEuNzI2Yy0yLjMwMS0yLjMwMS02LjEwMS0yLjMwMS04LjUsMGwtOC41LDguNQ0KCQljLTIuMzAxLDIuMy0yLjMwMSw2LjEsMCw4LjVsNDMuMSw0My4xbC00Mi4zLDQyLjVjLTIuMywyLjMtMi4zLDYuMSwwLDguNWw4LjUsOC41YzIuMywyLjMsNi4xLDIuMyw4LjUsMGw0Mi4zOTktNDIuNGw0Mi40LDQyLjQNCgkJYzIuMywyLjMsNi4xLDIuMyw4LjUsMGw4LjUtOC41YzIuMy0yLjMsMi4zLTYuMSwwLTguNWwtNDIuNS00Mi40bDQyLjQtNDIuMzk5QzEyMy42MjUsMTcuMTI1LDEyMy42MjUsMTMuMzI1LDEyMS4zMjUsMTAuOTI1eiIvPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=);\n  filter: invert(1);\n  background-size: 10px 10px;\n}\n\n/* Rounded sliders */\n.slider.round {\n  border-radius: 34px;\n}\n\n.slider.round:before {\n  border-radius: 50%;\n}\n\t</style>\n\n\n\t<div class=\"row\" id=\"navContainer\" style=\"padding-top: 10px;height:68%; padding-bottom: 5px;\">\n\t\t<div class=\"column col-5 clearFix\">\n\t\t\t <div class=\"row\" style=\"justify-content: space-around;\">\n\t\t\t\t <div class=\"column col-8\" style=\"display: inline-grid;overflow:hidden;\">\n\t\t\t\t\t \n\t\t\t\t\t <div class=\"row\" style=\"height:28px; padding-top:2px; justify-content:space-between;\" id=\"MaintnanceModeRow\">\n\t\t\t\t\t\t<div id=\"navToggle\" data-value=\"swithToggle\" style=\"text-align:center\" onclick=\"CahngeMaitnanceMode(this)\" id=\"maintenanceModeContainer\">\n\t\t\t\t\t\t\t<label class=\"switch\" >\n\t\t\t\t\t\t\t  <input type=\"checkbox\" data-value=\"maintnanceCheckbox\" disabled >\n\t\t\t\t\t\t\t\t<span   class=\"slider round\"><span data-value=\"maitnanceSelect\" class=\"inactiveToggle\">OFF</span></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"text-align:center; cursor: pointer; padding-left: 10px;\" onclick=\"toggleSearchBar(this)\">\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill=\"white\" class=\"bi bi-funnel\" viewBox=\"0 0 16 16\">\n\t\t\t\t\t\t\t  <path d=\"M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<svg style=\"display: none\" xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill=\"white\" class=\"bi bi-funnel-fill\" viewBox=\"0 0 16 16\">\n\t\t\t\t\t\t\t  <path d=\"M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t </div>\n\t\t\t\t\t \n\t\t\t\t\t <div class=\"row\">\n\t\t\t\t\t\t <span class=\"activeText\" id=\"PageName\" data-value=\"currentParent\" style=\"padding-left:10px;color:white; font-size:12px;margin-top:3px;\">Contoso </span>\n\t\t\t\t\t </div>\n\t\t\t\t\t \n\t\t\t\t </div>\n\t\t\t\t <!--data-value=\"swithToggle\" <div class=\"column col-2\" id=\"ShowFilters\" onclick=\"GenericClicked('ShowFilterComponents|BgContainer|BgContainer2|SortFilter|SortFilter2|EditFilter|EditFilter2')\">\n\t\t\t\t\t<svg width=\"1.8em\" height=\"1.8em\" viewBox=\"0 0 16 16\" style=\"padding-left:8px\" class=\"bi bi-three-dots-vertical\" fill=\"white\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"column col-2\" style=\"display:none\" id=\"HideFilters\" onclick=\"GenericClicked('HideFilterComponents|BgContainer|BgContainer2|SortFilter|SortFilter2|EditFilter|EditFilter2')\">\n\t\t\t\t\t<svg width=\"1.8em\" height=\"1.8em\"  viewBox=\"0 0 16 16\" style=\"padding-left:8px; fill:#4d98c2ff;\" class=\"bi bi-three-dots-vertical\" fill=\"white\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div> -->\n\n\t\t\t\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class=\"column col-5\" id=\"Statuses\" style=\"display:flex; text-align:center;padding-top:2px;margin-right:3px;\">\n\t\t\t<div class=\"column col-3\" style=\"width:80%\">\n\t\t\t\t<div  id=\"status\" onclick=\"GenericClicked('GoTo|Site Report List')\" >\n\t\t\t\t\t<span class=\"dot active\" data-info=\"Active1\">\n\n\t\t\t\t\t</span>\n\t\t\t\t\t<p class=\"circleText\" data-info=\"active1Name\">Status</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"column col-3\" style=\"width:100%\" >\n\t\t\t\t<div id=\"siteVisits\" onclick=\"GenericClicked('GoTo|Site Report List')\" >\n\t\t\t\t\t<span class=\"dot\" data-info=\"Active2\" >\n\n\t\t\t\t\t</span>\n\t\t\t\t\t<p class=\"circleText\">Site Reports</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"column col-3\" style=\"width:100%\">\n\t\t\t\t<div id=\"Advisories\"  onclick=\"GenericClicked('GoTo|Recommendation List')\">\n\t\t\t\t\t<span class=\"dot\" data-info=\"Active3\" >\n\n\t\t\t\t\t</span>\n\t\t\t\t\t<p class=\"circleText\" >Site Events</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class=\"row\" id=\"filterContainer\" style=\"display: none; height: 22%; padding: 6px 0;\">\n        <div class=\"column col-5 clearFix\" style=\"display: flex; justify-content: center;\">\n            <select id=\"filterSelect\" style=\"width: 80%;\" onchange=\"ChangeActiveMode(this)\">\n                <option>All</option>\n                <option>Active</option>\n            </select>\n        </div>\n        <div class=\"column col-5\"  style=\"display:flex; justify-content: center; text-align:center;padding-top:2px;margin-right:3px;\">\n            <select id=\"filterSort\" style=\"width: 80%;\" onchange=\"ChangeSort(this)\">\n                <option>Sort By Status</option>\n                <option>Sort By Station Id</option>\n            </select>\n        </div>\n    </div>\n\t\n\t<div class=\"row\" id=\"filterSearchInputContainer\" style=\"display: none;\">\n\t\t<input type=\"search\" id=\"filterSearchInput\" placeholder=\"Search\" data-value=\"filterSearchInput\" oninput=\"handleSearchInput()\">\n\t</div>\n\t\n</div>"},"ev":{}},"GenericCard#2":{"t":"GenericCard","lX":0,"lY":75,"sX":17.43,"sY":6.98,"s":"Levels","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"100% - 125px","x":"0px","y":"75px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"SetSource":{"channel":"SetSource/receive headers","event":"receive headers","important":"false"},"setHeaderTemplate":{"channel":"setHeaderTemplate/set header template","event":"set header template","important":"false"},"setChildrenTemplate":{"channel":"setChildrenTemplate/set value template","event":"set value template","important":"false"},"setCustomers":{"channel":"setCustomers/receive value","event":"receive value","important":"false"},"changeVisibleCounter":{"channel":"changeVisibleCounter/change visible counter","event":"change visible counter","important":"false"},"sort Init":{"channel":"SortInit/sort init","event":"sort init","important":"false"},"view pointer":{"channel":"view-pointer-changed/change view pointer","event":"change view pointer","important":"false"},"ignore rows":{"channel":"ignore-rows/ignore row","event":"ignore row","important":"false"},"clearLanding":{"channel":"clearLanding/clear content","event":"clear content","important":"false"},"set ignore enabled":{"channel":"set-ignore-enabled/Ignore Enabled","event":"Ignore Enabled","important":"false"},"toggleCard":{"channel":"toggleCard/toggle card","event":"toggle card","important":"false"},"EnableEdit":{"channel":"EnableEdit/EnableEdit","event":"EnableEdit","important":"false"},"New or edit card icon":{"channel":"change-new-icon/SetNewItemIcon","event":"SetNewItemIcon","important":"false"},"filterCards":{"channel":"filterCards/filter","event":"filter","important":"false"},"setPosition":{"channel":"setPosition/setTopPosition","event":"setTopPosition","important":"false"}},"outputEvents":{"DeviceLevelActivated":{"channel":"DeviceLevelActivated/receive value","event":"DeviceLevelActivated","trigger":"DeviceLevelActivated","important":"false"}}}}},"Generic#5":{"t":"Generic","lX":0,"lY":474,"sX":17.43,"sY":4,"s":"Levels","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"400px","x":"0px","y":"100% - 400px"},"ver":"190104c190915","z":"110","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"Generic#6":{"t":"Generic","lX":0,"lY":0,"sX":17.43,"sY":0.75,"s":"Levels","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"75px","x":"0px","y":"0px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setTopHtml":{"channel":"setTopHtml/set html","event":"set html","important":"false"},"SetTopAction":{"channel":"SetTopAction/set action","event":"set action","important":"false"}},"outputEvents":{"EditCard":{"channel":"EditCard/receive value","event":"EditCard","trigger":"EditCard","important":"false"}}}}},"BgContainer":{"t":"Container","lX":0,"lY":50,"sX":17.35,"sY":0.76,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"99.88%","height":"9.03%","x":"0%","y":"5.94%"},"ver":"190104c190915","z":"110","vis":false,"dis":false,"tt":"","a":{"title":""},"ev":{"clientEvents":{"inputEvents":{"setPanelColor":{"channel":"setPanelColor/set color","event":"set color","important":"false"}}}}},"SortFilter":{"t":"Dropdown","lX":20,"lY":49,"sX":7.84,"sY":1,"s":"Levels","ps":{"enabled":"true","scalingType":"NOVERT","width":"45%","height":"5.72%","x":"1.15%","y":"49px"},"ver":"190104c190915","vis":false,"dis":false,"tt":"","a":{"default options":"Status,"},"ev":{"clientEvents":{"outputEvents":{"SortBySelected":{"channel":"SortBySelected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"EditFilter":{"t":"Dropdown","lX":903,"lY":49,"sX":7.84,"sY":1,"s":"Levels","ps":{"enabled":"true","scalingType":"NOVERT","width":"45%","height":"5.94%","x":"51.81%","y":"49px"},"ver":"190104c190915","vis":false,"dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"PopulateSort":{"channel":"PopulateSort/receive value","event":"receive value","important":"false"}},"outputEvents":{"FilterBySelected":{"channel":"FilterBySelected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"Map":{"t":"Maps","lX":0,"lY":0,"sX":3.91,"sY":1.58,"s":"Map","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"83.61%","x":"0px","y":"0px"},"ver":"190104c190915","dis":false,"tt":"","a":{"zoom":"18","api key":"AIzaSyDPZqlIT0Mx7pQDSBqQto-5mYB4PSBlT0U"},"ev":{"clientEvents":{"inputEvents":{"CUSTOM":{"channel":"CUSTOM/add custom popup","event":"add custom popup","important":"false"},"set map":{"channel":"set-map/set map","event":"set map","important":"false"}},"outputEvents":{}}}},"Scripting#2":{"t":"Scripting","lX":630,"lY":220,"sX":1,"sY":1,"s":"Map","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"0%","y":"0%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\n\nScript.on('load', function() {\n\t\n \t Script.setState(\"Caller\", \"Rodent Grid\");\n\t_initializer = Script.getState(\"Initializer\");\n\t_handleGeneric = Script.getState(\"HandleGeneric\");\n\t_publishCommand = Script.getState(\"PublishCommand\");\n\t_gotoPage = Script.getState(\"GotoPage\");\n  \tvar cardTemplate =  Script.inheritScript(\"MenuTemplateRodent\");\n\t_initializer(cardTemplate, \"SetHtml\");\n\tvar command = \n\t{\n\t\t\"Action\":\"Hide\",\n\t\t\"Compoent\":\"RightPanel\",\n\t\t\"Value\": true\n\t};\n\t_publishCommand(command, \"activateGeneric\");\n\tcommand = \n\t{\n\t\t\"Action\":\"Hide\",\n\t\t\"Compoent\":\"LeftPanel\",\n\t\t\"Value\": true\n\t};\n\t_publishCommand(command, \"activateGeneric\");\n\tcommand = \n\t{\n\t\t\"Action\":\"HideIndex\"\n\t};\n\t_publishCommand(command, \"activateGeneric\");\n});\n\nClientEvents.subscribe(\"GenericActionMessage\", function(data) \n{ \n   _handleGeneric(data);\n});"},"ev":{}},"Rodent#0":{"t":"Rodent","lX":0,"lY":75,"sX":17.43,"sY":6.98,"s":"Device Level","ps":{"enabled":true,"scalingType":"OK","width":"100%","height":"100% - 125px","x":"0px","y":"75px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"BaitTypes":{"channel":"baitTypes/set baitTypes","event":"set baitTypes","important":"false"},"SetQuantities":{"channel":"quantities/set Quantities","event":"set Quantities","important":"false"},"SetBaits":{"channel":"baits/set baits","event":"set baits","important":"false"},"CleanRodentCotent":{"channel":"CleanRodentCotent/clear content","event":"clear content","important":"false"},"Set Headers":{"channel":"SetHeaders/receive headers","event":"receive headers","important":"false"},"loadTreshold":{"channel":"loadTreshold/set thresholds","event":"set thresholds","important":"false"},"open":{"channel":"open/toggle card","event":"toggle card","important":"false"},"SortBy":{"channel":"SortBy/sort","event":"sort","important":"false"},"changeVisibleCounter":{"channel":"changeVisibleCounter/change visible counter","event":"change visible counter","important":"false"},"view pointer":{"channel":"view-pointer-changed/change view pointer","event":"change view pointer","important":"false"},"open child":{"channel":"open-child/toggle child","event":"toggle child","important":"false"},"toggle card":{"channel":"toggleCard/toggle card","event":"toggle card","important":"false"},"loadChildren":{"channel":"loadChildren/receive value","event":"receive value","important":"false"},"AddBait":{"channel":"AddBait/addBait","event":"addBait","important":"false"},"setDeviceDetails":{"channel":"setDeviceDetails/DeviceDetails","event":"DeviceDetails","important":"false"},"setDeviceErrors":{"channel":"setDeviceErrors/DeviceErrorsLoaded","event":"DeviceErrorsLoaded","important":"false"},"fCard":{"channel":"fCard/filter","event":"filter","important":"false"},"setPosition":{"channel":"setPosition/setTopPosition","event":"setTopPosition","important":"false"},"Set Site Id":{"channel":"setSiteId/setSiteId","event":"setSiteId","important":"false"},"SetCurrentStationId":{"channel":"SetCurrentStationId/SetCurrentStationId","event":"SetCurrentStationId","important":"false"},"SetAdjacentStationIds":{"channel":"SetAdjacentStationIds/SetAdjacentStationIds","event":"SetAdjacentStationIds","important":"false"},"deviceAction":{"channel":"deviceAction/device action","event":"device action","important":"false"}},"outputEvents":{"cleared":{"channel":"cleared/receive value","event":"clear trap","trigger":"clear trap","important":"false"},"test1":{"channel":"test1/receive value","event":"address pressed","trigger":"address pressed","important":"false"},"children populated":{"channel":"children-populated/receive value","event":"children populated","trigger":"children populated","important":"false"},"setTrap":{"channel":"setTrap/receive value","event":"set trap","trigger":"set trap","important":"false"},"ChangeBait":{"channel":"ChangeBait/receive value","event":"ChangeBait","trigger":"ChangeBait","important":"false"},"ChildCardToggled":{"channel":"ChildCardToggled/receive value","event":"ChildCardToggled","trigger":"ChildCardToggled","important":"false"},"DeviceDetails":{"channel":"DeviceDetails/receive value","event":"DeviceDetails","trigger":"DeviceDetails","important":"false"},"Event Transaction":{"channel":"EventTransaction/receive value","event":"EventTransaction","trigger":"EventTransaction","important":"false"}}},"serverEvents":{"inputEvents":{"countertotal":{"channel":"PESTCO/RODENTS/+/COUNTERTOTAL","event":"history","important":"false"},"SensorData":{"channel":"PESTCO/RODENTS/+/SENSORDATA","event":"feed","important":"false"},"Packet 2 Enabled":{"channel":"PESTCO/RODENTS/+/P2ENABLED","event":"feed","important":"false"},"SensorDataV3":{"channel":"PESTCO/RODENTS/+/SENSORDATA2","event":"feed","important":"false"},"WEIGHT":{"channel":"PESTCO/RODENTS/+/BAITTAKEN","event":"history","important":"false"},"History":{"channel":"PESTCO/RODENTS/+/COUNTERTOTAL","event":"history","important":"false"},"Cycle History Right":{"channel":"PESTCO/RODENTS/+/ACTIVECYCLERIGHT","event":"history","important":"false"},"Cycle History Left":{"channel":"PESTCO/RODENTS/+/ACTIVECYCLELEFT","event":"history","important":"false"}},"outputEvents":{"New Event #3":{"channel":"$NET/EMAIL/SMTPCLIENT/SEND","event":"smtpclient","trigger":"smtpclient","important":"false"}}}}},"popup":{"t":"Scripting","lX":255,"lY":120,"sX":1,"sY":1,"s":"Device Level","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div>\n<style>\n   /* Customize the label (the container) */\n        .container {\n            display: block;\n            position: relative;\n            padding-left: 2px;\n            /* padding: 15px; */\n            cursor: pointer;\n            /* font-size: 22px; */\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }\n\t\n\t.content {\n    width: 100%;\n    overflow: hidden;\n}\n\n            /* Hide the browser's default checkbox */\n            .container input {\n                position: absolute;\n                opacity: 0;\n                cursor: pointer;\n                height: 0;\n                width: 0;\n            }\n\n        /* Create a custom checkbox */\n        .checkmark {\n            position: absolute;\n            top: 3px;\n            left: 0;\n            height: 15px;\n            width: 15px;\n            background-color: #f2f2f2;\n            border-radius: 2px;\n            border: 2px solid #e57123;\n        }\n\n        /* On mouse-over, add a grey background color */\n        .container:hover input ~ .checkmark {\n            background-color: rgba(247, 152, 89, 0.7);\n        }\n\n        /* When the checkbox is checked, add a blue background */\n        .container input:checked ~ .checkmark {\n            background-color: rgba(245, 129, 51);\n        }\n\n        /* Create the checkmark/indicator (hidden when not checked) */\n        .checkmark:after {\n            content: \"\";\n            position: absolute;\n            display: none;\n        }\n\n        /* Show the checkmark when checked */\n        .container input:checked ~ .checkmark:after {\n            display: block;\n        }\n\n        /* Style the checkmark/indicator */\n        .container .checkmark:after {\n            left: 4px;\n            /* top: 1px; */\n            width: 5px;\n            height: 10px;\n            border: solid white;\n            border-width: 0 3px 3px 0;\n            -webkit-transform: rotate(45deg);\n            -ms-transform: rotate(45deg);\n            transform: rotate(45deg);\n        }\n\n        body {\n            font-family: \"Open Sans\";\n            font-size: 16px;\n            user-select: none;\n            overflow-x: hidden;\n            overflow-y: auto;\n        }\n\n        @font-face {\n            font-family: \"Open Sans\";\n            font-style: normal;\n            font-weight: 400;\n            src: local(\"Open Sans\"), local(\"OpenSans\"), url(\"../fonts/OpenSans400.woff\") format(\"woff\");\n        }\n\n        @font-face {\n            font-family: \"Open Sans\";\n            font-style: normal;\n            font-weight: 700;\n            src: local(\"Open Sans\"), local(\"OpenSans\"), url(\"../fonts/OpenSans700.woff\") format(\"woff\");\n        }\n\n        .noSelect {\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }\n\n        #widget {\n            background-color: white;\n        }\n        /* Hide scrollbar for Chrome, Safari and Opera */\n        #container::-webkit-scrollbar {\n            display: none;\n        }\n\n        /* Hide scrollbar for IE, Edge and Firefox */\n        #container {\n            -ms-overflow-style: none; /* IE and Edge */\n            scrollbar-width: none; /* Firefox */\n        }\n\n        #container {\n            position: fixed;\n            height: calc(100% - 2px);\n            border: 1px solid #ddd;\n            border-radius: 3px;\n            overflow: auto;\n        }\n\n        thead th {\n            position: sticky;\n            position: -webkit-sticky;\n            top: 35px;\n            z-index: 999;\n            background-color: #f2f2f2;\n        }\n\n        .selectBtn:hover {\n            color: #000000;\n            text-decoration: none;\n            font-family: sans-serif;\n            background-color: #4d98c2ff;\n            padding: 10px 25px;\n            cursor: pointer;\n            margin: 2%;\n            height: 15px;\n        }\n\n        .btnSelected {\n            border-bottom: 2px solid #4c4c4c;\n            color: #000000;\n            text-decoration: none;\n            font-family: sans-serif;\n            background-color: #4d98c2ff;\n            padding: 10px 25px;\n            cursor: pointer;\n            margin: 2%;\n            height: 15px;\n        }\n\n        .selectBtn {\n            background-color: #6ec4f7ff;\n            /* Green */\n            font-family: sans-serif;\n            margin: 2%;\n            border: none;\n            color: white;\n            padding: 10px 25px;\n            text-align: center;\n            text-decoration: none;\n            display: inline-block;\n            font-size: 1rem;\n            height: 15px;\n            cursor: pointer;\n        }\n\n        table {\n            border-collapse: collapse;\n            table-layout: fixed;\n            border-spacing: 0;\n            width: 100%;\n            max-height: calc(100% - 30px);\n            border: none;\n            bottom: 38px;\n        }\n\n        th {\n            text-transform: capitalize;\n            text-align: left;\n            padding: 5px 0px 5px 0px;\n            margin: 0px 4px 0px 4px;\n            background-color: white;\n            border-bottom: 2px solid #dee2e6;\n        }\n\n        .checkbox-row {\n            height: 1.5rem;\n        }\n\n        td {\n            position: sticky;\n            text-align: left;\n            word-break: break-word;\n            padding: 4px;\n            border-bottom: 1px solid #dee2e6;\n        }\n\n        .barLegend {\n            padding-left: 2%;\n            padding-right: 2%;\n            font-size: 12px;\n            color: white;\n            width: 100%;\n        }\n\n        tr:nth-child(even) {\n            background-color: rgba(0,0,0,.05);\n        }\n\n        tr.selected {\n            background-color: #dff0d8;\n            font-weight: bold /* our pastel green*/\n        }\n\n        .rowHover:hover td {\n            background-color: #fffaf3;\n            /* our pastel yellow*/\n        }\n\n        #searchInp {\n            width: 100px;\n            float: right;\n            height: 25px;\n            text-indent: 4px;\n            font: 14px 'Open Sans';\n            display: none;\n            border-radius: 3px;\n            border-color: lightgray;\n            margin: 4px;\n            padding: .375rem .75rem;\n            font-size: 1rem;\n            line-height: 1.5;\n            color: #495057;\n            background-color: #fff;\n            background-clip: padding-box;\n            border: 1px solid #ced4da;\n            border-radius: .25rem;\n            transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n            -webkit-transition: width 0.4s ease-in-out;\n            transition: width 0.4s ease-in-out;\n        }\n\n            /* When the input field gets focus, change its width to 100% */\n            #searchInp:focus {\n                width: 300px;\n            }\n\n        /* Remove blue box around textbox. */\n        input:focus {\n            outline: none;\n        }\n\n        #headerBar {\n            top: 0;\n            z-index: 100;\n            position: sticky;\n            display: none;\n            background-color: #f2f2f2;\n            height: 34px;\n            border-bottom: 1px solid #ddd;\n        }\n\n        #tableTitle {\n            float: left;\n            margin: 6px 0 6px 14px;\n        }\n\n        .headCol {\n            text-overflow: ellipsis;\n            overflow: hidden;\n            white-space: nowrap;\n        }\n\n        /* Status border */\n        .newPhotoBorder {\n            border-right: 5px solid blue;\n        }\n\n        .openCardBorder {\n            border-right: 5px solid black;\n        }\n\n        .normalCardBorder {\n            border-right: 5px solid #f2f2f2;\n        }\n\n        .alertCardBorder {\n            border-right: 5px solid red;\n        }\n\n\n        /* Triggered */\n        .redIcon {\n            background-image: url(\"/userfiles/Animal-Trap-Icon-Red.png\");\n            background-size: contain;\n            background-color: white;\n            border-radius: 5px;\n        }\n\n        /* Inactive */\n        .greyIcon {\n            background-image: url(\"/userfiles/Animal-Trap-Icon-DkGrey.png\");\n            background-size: contain;\n            background-color: white;\n            border-radius: 5px;\n        }\n\n        /* Set  */\n        .greenIcon {\n            background-image: url(\"/userfiles/Animal-Trap-Icon-Green.png\");\n            background-size: contain;\n            background-color: white;\n            border-radius: 5px;\n        }\n\n\n\n        .capitalize {\n            text-transform: capitalize;\n        }\n\n        .button {\n            background-color: #4CAF50;\n            /* Green */\n            font-family: sans-serif;\n            border: none;\n            color: white;\n            padding: 10px 25px;\n            text-align: center;\n            text-decoration: none;\n            display: inline-block;\n            font-size: 1rem;\n            border-radius: 6px;\n            height: 50px;\n            cursor: pointer;\n        }\n\n        .notes-css {\n            cursor: pointer;\n            display: block;\n            font-size: 16px;\n            font-family: sans-serif;\n            font-weight: 700;\n            color: #444;\n            line-height: 1.3;\n            padding: 0.6em 0.8em;\n            width: calc(100% - 16px);\n            max-width: 100%;\n            box-sizing: border-box;\n            margin: 8px;\n            border: 1px solid #aaa;\n            box-shadow: 0 1px 0 1px rgba(0, 0, 0, .04);\n            -moz-appearance: none;\n            -webkit-appearance: none;\n            appearance: none;\n            background-color: #fff;\n            background-repeat: no-repeat, repeat;\n            background-position: right .7em top 50%, 0 0;\n            background-size: .65em auto, 100%;\n        }\n\n            .notes-css::-ms-expand {\n                display: none;\n            }\n\n            .notes-css:hover {\n                border-color: #888;\n            }\n\n            .notes-css:focus {\n                border-color: #aaa;\n                box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);\n                box-shadow: 0 0 0 3px -moz-mac-focusring;\n                color: #222;\n                outline: none;\n            }\n\n            .notes-css option {\n                font-weight: normal;\n            }\n\n        .select-css {\n            cursor: pointer;\n            display: block;\n            font-size: 16px;\n            font-family: sans-serif;\n            font-weight: 700;\n            color: white;\n            line-height: 1.3;\n            padding: 0.6em 0.8em;\n            width: calc(100% - 16px);\n            max-width: 100%;\n            box-sizing: border-box;\n            margin: 8px;\n            border: 1px solid #aaa;\n            box-shadow: 0 1px 0 1px rgba(0, 0, 0, .04);\n            -moz-appearance: none;\n            -webkit-appearance: none;\n            appearance: none;\n            background-color: rgb(65, 80, 90);\n            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');\n            background-repeat: no-repeat, repeat;\n            background-position: right .7em top 50%, 0 0;\n            background-size: .65em auto, 100%;\n        }\n\n            .select-css::-ms-expand {\n                display: none;\n            }\n\n            .select-css:hover {\n                border-color: #ffffff;\n            }\n\n            .select-css:focus {\n                border-color: #aaa;\n                box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);\n                box-shadow: 0 0 0 3px -moz-mac-focusring;\n                border-color: #ffffff;\n                outline: none;\n            }\n\n            .select-css option {\n                font-weight: normal;\n            }\n\n        .container {\n            height: 60px;\n            position: relative;\n        }\n\n        .vertical-center {\n            margin: 0;\n            position: absolute;\n            top: 50%;\n            -ms-transform: translateY(-50%);\n            transform: translateY(-50%);\n        }\n\n        ul {\n            margin: 4px 0 4px 0;\n            overflow: hidden;\n            white-space: nowrap;\n        }\n\n        li {\n            white-space: nowrap;\n            overflow: hidden;\n        }\n\n        .mapIcon {\n            float: right;\n            cursor: pointer;\n            font-size: 29px;\n            margin-right: 3%;\n        }\n\n            .mapIcon:hover {\n                float: right;\n                cursor: pointer;\n                font-size: 35px;\n                color: #f58133;\n            }\n\n        .dialText {\n            font-size: 12px;\n        }\n\n        .fullWidth {\n            width: 80%;\n        }\n\n        .container-fluid {\n            margin: 3%;\n        }\n\n        .displayContainer {\n            display: inline-block;\n            text-align: end;\n        }\n\n        .underlineIndicatorLeft {\n            border: 0.1px solid #ffffff;\n            border-radius: 52px;\n            background-color: #ffffff;\n            height: 3px;\n            display: flex;\n            width: 20px;\n            position: relative;\n            left: 0%;\n        }\n\n        .underlineIndicatorRight {\n            border: 0.1px solid #ffffff;\n            border-radius: 52px;\n            background-color: #ffffff;\n            height: 3px;\n            display: flex;\n            width: 20px;\n            position: relative;\n            left: 94%;\n        }\n\n\n\n        .underlineIndicatorCenter {\n            border: 0.1px solid #ffffff;\n            border-radius: 52px;\n            background-color: #ffffff;\n            height: 3px;\n            display: flex;\n            width: 20px;\n            position: relative;\n            left: 46%;\n        }\n\n        @media screen and (max-width: 1440px) {\n            .underlineIndicatorLeft {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 0%;\n            }\n\n            .underlineIndicatorRight {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 89%;\n            }\n\n\n\n            .underlineIndicatorCenter {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 44%;\n            }\n        }\n\n        @media screen and (max-width: 1024px) {\n            .underlineIndicatorLeft {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 0%;\n            }\n\n            .underlineIndicatorRight {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 84%;\n            }\n\n\n\n            .underlineIndicatorCenter {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 43%;\n            }\n        }\n\n\n        @media screen and (max-width: 768px) {\n            .underlineIndicatorLeft {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 0%;\n            }\n\n            .underlineIndicatorRight {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 78%;\n            }\n\n\n\n            .underlineIndicatorCenter {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 20px;\n                position: relative;\n                left: 40%;\n            }\n        }\n\n        @media screen and (max-width: 425px) {\n            .underlineIndicatorLeft {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 0%;\n            }\n\n            .underlineIndicatorRight {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 78%;\n            }\n\n\n\n            .underlineIndicatorCenter {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 40%;\n            }\n        }\n\n        @media screen and (max-width: 375px) {\n            .underlineIndicatorLeft {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 0%;\n            }\n\n            .underlineIndicatorRight {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 74%;\n            }\n\n\n\n            .underlineIndicatorCenter {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 38%;\n            }\n        }\n\n\n\n        @media screen and (max-width: 320px) {\n            .underlineIndicatorLeft {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 0%;\n            }\n\n            .underlineIndicatorRight {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 70%;\n            }\n\n\n\n            .underlineIndicatorCenter {\n                border: 0.1px solid #ffffff;\n                border-radius: 52px;\n                background-color: #ffffff;\n                height: 3px;\n                display: flex;\n                width: 9px;\n                position: relative;\n                left: 35%;\n            }\n        }\n\n        .UnderlineGreen {\n            width: 100%;\n            border: 3px solid #388b3d;\n            border-radius: 52px;\n            margin-top: 3.7px;\n            margin-bottom: 3.7px;\n            background-color: #388b3d;\n        }\n\n        .UnderlineOrange {\n            width: 100%;\n            border: 3px solid #f88924ff;\n            border-radius: 52px;\n            margin-top: 3.7px;\n            margin-bottom: 3.7px;\n            background-color: #f88924ff;\n        }\n\n        .UnderlineRed {\n            width: 100%;\n            border: 3px solid #d74423ff;\n            border-radius: 52px;\n            margin-top: 3.7px;\n            margin-bottom: 3.7px;\n            background-color: #d74423ff;\n        }\n\n        .UnderlineGray {\n            width: 100%;\n            border: 3px solid gray;\n            border-radius: 52px;\n            margin-top: 3.7px;\n            margin-bottom: 3.7px;\n            background-color: gray;\n        }\n\n        .LabelStyle {\n            font-size: 7.5px;\n            justify-content: center;\n            display: inline-flex;\n        }\n\n        .SideBarGray {\n            border-left: 8px solid gray;\n        }\n\n        .SideBarGreen {\n            border-left: 8px solid green;\n        }\n\n        .SideBarYellow {\n            border-left: 8px solid orange;\n        }\n\n        .SideBarRed {\n            border-left: 8px solid red;\n        }\n\n        .StatusIndicator {\n            float: right;\n            font-size: 10px;\n        }\n\n        .ValueStyle {\n            font-size: 15.5px;\n            font-weight: bold;\n            color: #41505aff;\n        }\n\n        .tabBtn {\n            text-align: center;\n            width: 50%;\n            padding-left: 10%;\n            padding-right: 10%;\n            padding-top: 15px;\n            padding-bottom: 15px;\n            font-family: sans-serif;\n            background-color: rgb(230 230 230);\n            border: none;\n            color: #41505a;\n            padding: 10px 25px;\n            text-align: center;\n            text-decoration: none;\n            font-size: 1rem;\n            cursor: pointer;\n        }\n\n            .tabBtn:hover {\n                text-align: center;\n                width: 50%;\n                padding-left: 10%;\n                padding-right: 10%;\n                padding-top: 15px;\n                padding-bottom: 15px;\n                font-family: sans-serif;\n                background-color: #4d98c2;\n                border: none;\n                color: white;\n                padding: 10px 25px;\n                text-align: center;\n                text-decoration: none;\n                font-size: 1rem;\n                cursor: pointer;\n            }\n\n        .tabBtnSelected {\n            text-align: center;\n            width: 50%;\n            padding-left: 10%;\n            padding-right: 10%;\n            padding-top: 15px;\n            padding-bottom: 15px;\n            font-family: sans-serif;\n            background-color: #4d98c2;\n            border: none;\n            color: white;\n            padding: 10px 25px;\n            text-align: center;\n            text-decoration: none;\n            font-size: 1rem;\n            cursor: pointer;\n        }\n\n        .normalCardBorder {\n            background-color: #e6e6e6ff;\n        }\n\n            .normalCardBorder:hover {\n                background-color: #f2f2f2\n            }\n\n\n        [data-info=\"chart\"] {\n            padding: 20px;\n        }\n\n            [data-info=\"chart\"] table {\n                width: 100%;\n                height: 400px;\n            }\n\n        .charttitle {\n            text-align: center;\n        }\n\n        .bars {\n            color: white;\n            font-size: 13px;\n            text-align: center;\n        }\n\n            .bars td {\n                text-align: center;\n                vertical-align: bottom;\n            }\n\n            .bars div:hover {\n                opacity: 0.6;\n            }\n\n        .legend {\n            vertical-align: bottom;\n            padding-left: 20px;\n            text-align: left;\n        }\n\n        .legbox {\n            display: block;\n            clear: both;\n        }\n\n        .xaxisname {\n            margin: 5px;\n            color: #fff;\n            font-size: 77%;\n            padding: 5px;\n            float: left;\n        }\n\n\n        /*Flat UI colors*/\n\n        .one {\n            background: #16A085;\n        }\n\n        .two {\n            background: #2ECC71;\n        }\n\n        .three {\n            background: #27AE60;\n        }\n\n        .four {\n            background: #3498DB;\n        }\n\n        .five {\n            background: #2980B9;\n        }\n\n        .six {\n            background: #9B59B6;\n        }\n\n        .seven {\n            background: #8E44AD;\n        }\n\n        .eight {\n            background: #34495E;\n        }\n\n        .nine {\n            background: #2C3E50;\n        }\n\n        .ten {\n            background: #22313f;\n        }\n\n        .eleven {\n            background: #F1C40F;\n        }\n\n        .twelve {\n            background: #F39C12;\n        }\n\n        .thirteen {\n            background: #E67E22;\n        }\n\n        .fourteen {\n            background: #D35400;\n        }\n\n        .fifteen {\n            background: #E74C3C;\n        }\n\n        .sixteen {\n            background: #C0392B;\n        }\n\n        .seventeen {\n            background: #ECF0F1;\n        }\n\n            .seventeen.clouds {\n                color: #BDC3C7;\n            }\n\n        .eighteen {\n            background: #BDC3C7;\n        }\n\n        .nineteen {\n            background: #95A5A6;\n        }\n\n        .twenty {\n            background: #7F8C8D;\n        }\n\n        .barColor {\n            background-color: #6ec4f7ff;\n        }\n\n            .barColor:hover {\n                background-color: #4d98c2;\n                cursor: pointer;\n            }\n\n        .flex {\n            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6, BB7 */\n            display: -ms-flexbox; /* TWEENER - IE 10 */\n            display: -webkit-flex; /* NEW - Safari 6.1+. iOS 7.1+, BB10 */\n            display: flex; /* NEW, Spec - Firefox, Chrome, Opera */\n            flex: 1;\n            display: flex;\n            flex-direction: row;\n            align-items: flex-start;\n            -webkit-display: flex;\n            -webkit-flex-direction: row;\n            -webkit-align-items: flex-start;\n        }\n\n        .labelChild {\n            width: 100%;\n        }\n\n        @supports (overflow:-webkit-marquee) and (justify-content:inherit) {\n            .flex {\n                display: -webkit-flex; /* NEW - Safari 6.1+. iOS 7.1+, BB10 */\n                flex: 1;\n                flex-direction: row;\n                align-items: flex-start;\n            }\n        }\n\n        .iconWidth {\n            width: 5%;\n        }\n\n        @media screen and (max-width: 2560px) {\n            .CardWidth {\n                width: 99.5%;\n            }\n\n            .setupContent {\n                width: 45%;\n                display: grid;\n                margin-left: 3%;\n            }\n        }\n\n        @media screen and (max-width: 1504px) {\n            .CardWidth {\n                width: 99%;\n            }\n\n            .setupContent {\n                width: 45%;\n                display: grid;\n                margin-left: 3.5%;\n            }\n        }\n\n        @media screen and (max-width: 1404px) {\n            .CardWidth {\n                width: 99%;\n            }\n\n            .setupContent {\n                width: 45%;\n                display: grid;\n                margin-left: 5.5%;\n            }\n        }\n\n\n        @media screen and (max-width: 868px) {\n            .CardWidth {\n                width: 99%;\n            }\n\n            .setupContent {\n                width: 38%;\n                display: grid;\n                margin-left: 7%;\n            }\n\n            .labelChild {\n                width: 100%;\n                font-size: 7px;\n            }\n        }\n\n\n        @media screen and (max-width: 722px) {\n            .CardWidth {\n                width: 99%;\n            }\n\n            .setupContent {\n                width: 38%;\n                display: grid;\n                margin-left: 8%;\n            }\n\n            .labelChild {\n                width: 100%;\n                font-size: 7px;\n            }\n        }\n\n\n        @media screen and (max-width: 427px) {\n            .labelChild {\n                width: 100%;\n                font-size: 4px;\n            }\n\n            .CardWidth {\n                width: 97%;\n            }\n\n            .setupContent {\n                width: 38%;\n                display: grid;\n                margin-left: 14%;\n            }\n        }\n\n        @media screen and (max-width: 320px) {\n            .labelChild {\n                width: 100%;\n                font-size: 4px;\n            }\n\n            .CardWidth {\n                width: 97%;\n            }\n\n            .setupContent {\n                width: 33%;\n                display: grid;\n                margin-left: 15%;\n            }\n        }\n\n\t  .normalCardBorder{\n\t\tpadding: 2%;\n\t\tborder-right: 5px solid #e6e6e6ff;\n\t  }\n</style>\n<div class=\"main\" data-info=\"SideBarStatus\"  onclick=\"fw.fireEvent('custom popup pressed', this.querySelector('[data-value=\\'id\\']').innerHTML);\">\n     <div data-section=\"cell\">\n                <div>\n                    <div class=\"container flex\" style=\"margin: 8px 8px 4px 0;  \">\n\n                        <!--<div data-info=\"SideBarStatus\" class=\"SideBarGreen\">\n\n                        </div>-->\n                        <!--Dummy Trap Icon start-->\n                        <div style=\"border-right: 0.98px solid #9b9b9bff;width:99%;\">\n                            <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n                                 xmlns:cc=\"http://creativecommons.org/ns#\"\n                                 xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n                                 xmlns:svg=\"http://www.w3.org/2000/svg\"\n                                 xmlns=\"http://www.w3.org/2000/svg\"\n                                 id=\"svg29831\"\n                                 version=\"1.1\"\n                                 viewBox=\"0 0 16.933333 16.933333\"\n                                 height=\"40\"\n                                 width=\"40\"\n                                 data-info=\"iconDummy\"\n                                 style=\"margin-top: 12px; display:none;\">\n                                <g id=\"g25716\" transform=\"matrix(0.35356524,0,0,-0.35271157,-872.43975,177.40608)\">\n                                    <g transform=\"translate(2609.6979,-736.76742)\" id=\"g9647-9-8-80\">\n                                        <path id=\"path6880-7-3-8-0-4-0\" d=\"m -97.915822,1213.08 v -17.9842 H -138.3176 v 40.8342 h 40.031118 v -6.7954\" style=\"fill:none;stroke:#41505a;stroke-width:7.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"></path>\n                                    </g>\n                                    <path transform=\"scale(1,-1)\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:2.27642;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"path24990-4\" d=\"m 2493.9189,-478.74548 a 2.3376312,2.3376312 0 0 1 -2.3298,2.33761 2.3376312,2.3376312 0 0 1 -2.3454,-2.32197 2.3376312,2.3376312 0 0 1 2.3141,-2.35316 2.3376312,2.3376312 0 0 1 2.3609,2.30622 l -2.3374,0.0313 z\"></path>\n                                </g>\n                            </svg>\n                            <!--Dummy Trap Icon end-->\n                            <!--Smart Trap Icon start-->\n                            <svg data-info=\"iconSmart\"\n                                 style=\"margin-top: 12px; display:none;\"\n                                 xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n                                 xmlns:cc=\"http://creativecommons.org/ns#\"\n                                 xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n                                 xmlns:svg=\"http://www.w3.org/2000/svg\"\n                                 xmlns=\"http://www.w3.org/2000/svg\"\n                                 id=\"svg29831\"\n                                 version=\"1.1\"\n                                 viewBox=\"0 0 16.933333 16.933333\"\n                                 height=\"40\"\n                                 width=\"40\">\n                                <defs id=\"defs29825\" />\n\n                                <g transform=\"translate(0,-280.06667)\" id=\"layer1\">\n                                    <g transform=\"matrix(0.99308565,0,0,0.99308565,-104.14524,81.741953)\" id=\"g25310\">\n                                        <path id=\"path24992\" d=\"m 110.9523,208.5002 c 0.19067,-1.56225 1.18424,-2.13723 2.4862,-2.2128\" style=\"fill:none;fill-opacity:1;stroke:#41505a;stroke-width:0.84635907;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" />\n                                        <g transform=\"matrix(0.35277777,0,0,-0.35277777,216.07457,636.91667)\" id=\"g7816-3-6-0-8-5\">\n                                            <path id=\"path6880-5-6-9-2-2\" d=\"m -270.79532,1212.4821 v -17.9842 h -40.40178 v 40.8342 h 40.03112 v -6.7954\" style=\"fill:none;stroke:#41505a;stroke-width:7.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" />\n                                        </g>\n                                        <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.80306929;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"path24990-5\" d=\"m 114.24228,208.69815 a 0.82466435,0.82466435 0 0 1 -0.8219,0.82466 0.82466435,0.82466435 0 0 1 -0.82741,-0.81914 0.82466435,0.82466435 0 0 1 0.81637,-0.83014 0.82466435,0.82466435 0 0 1 0.83287,0.81358\" />\n                                        <path style=\"fill:none;fill-opacity:1;stroke:#41505a;stroke-width:1.03047788;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 109.27007,208.23222 c 0.16348,-0.94022 0.45971,-1.66746 0.85972,-2.21848 0.75304,-1.03726 1.87392,-1.45007 3.16954,-1.48368\" id=\"path24992-1-6\" />\n                                    </g>\n                                </g>\n                            </svg>\n                            <!--Smart Trap Icon end-->\n                            <!--Smart Trap Error Icon start-->\n                            <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n                                 xmlns:cc=\"http://creativecommons.org/ns#\"\n                                 xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n                                 xmlns:svg=\"http://www.w3.org/2000/svg\"\n                                 xmlns=\"http://www.w3.org/2000/svg\"\n                                 id=\"svg29831\"\n                                 version=\"1.1\"\n                                 viewBox=\"0 0 16.933333 16.933333\"\n                                 height=\"40\"\n                                 width=\"40\"\n                                 data-info=\"iconSmartError\"\n                                 style=\"margin-top: 12px; display:none;\">\n\n\n                                <g id=\"g8372\" transform=\"translate(-161.98269,-24.891438)\">\n                                    <path style=\"fill:none;stroke:#41505a;stroke-width:2.64854;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 177.57657,34.252709 v 6.343234 H 163.2919 V 26.193249 h 14.15362 v 2.396816\" id=\"path6880-7-3-8-0-4-0-8-2\"></path>\n                                    <path style=\"opacity:1;fill:#d74423;fill-opacity:1;stroke:#d74423;stroke-width:0.80389;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"path24990-4-4-5\" d=\"m 171.5802,33.613804 a 0.82650512,0.82450956 0 0 1 -0.82374,0.824505 0.82650512,0.82450956 0 0 1 -0.82925,-0.818986 0.82650512,0.82450956 0 0 1 0.81818,-0.829987 0.82650512,0.82450956 0 0 1 0.83473,0.813431 l -0.82643,0.01104 z\"></path>\n                                    <path style=\"fill:#000000;fill-opacity:0;stroke:#d74423;stroke-width:2.03333;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 170.76591,31.121397 -0.0244,-2.082158\" id=\"path5448-9-8-5-3-9-4-6-7-4-7-9-0\"></path>\n                                </g>\n\n                            </svg>\n                            <!--Smart Trap Error Icon end-->\n                            <!--Smart Trap No Signal Icon start-->\n                            <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n                                 xmlns:cc=\"http://creativecommons.org/ns#\"\n                                 xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n                                 xmlns:svg=\"http://www.w3.org/2000/svg\"\n                                 xmlns=\"http://www.w3.org/2000/svg\"\n                                 id=\"svg29831\"\n                                 version=\"1.1\"\n                                 viewBox=\"0 0 16.933333 16.933333\"\n                                 height=\"40\"\n                                 width=\"40\"\n                                 data-info=\"iconSmartNoSignal\"\n                                 style=\"margin-top: 12px; display:none;\">\n\n                                <g id=\"g9056\" transform=\"matrix(1.0067255,0,0,1,-118.44967,13.27514)\">\n                                    <g id=\"g7816-3-6-0-8-5-0\" transform=\"matrix(0.35033854,0,0,-0.35033854,228.02635,420.82483)\">\n                                        <path style=\"fill:none;stroke:#41505a;stroke-width:7.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -270.79532,1212.4821 v -17.9842 h -40.40178 v 40.8342 h 40.03112 v -6.7954\" id=\"path6880-5-6-9-2-2-6\"></path>\n                                    </g>\n                                    <g id=\"g9048\">\n                                        <path id=\"path24992-2\" d=\"m 123.63093,-4.6294193 c 0.18935,-1.551448 1.17605,-2.122453 2.46901,-2.1975\" style=\"fill:none;fill-opacity:1;stroke:#d74423;stroke-width:0.840507;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"></path>\n                                        <path style=\"opacity:1;fill:#d74423;fill-opacity:1;stroke:#d74423;stroke-width:0.797517;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"path24990-5-3\" d=\"m 126.89816,-4.4328383 a 0.81896233,0.81896233 0 0 1 -0.81622,0.818958 0.81896233,0.81896233 0 0 1 -0.82169,-0.813476 0.81896233,0.81896233 0 0 1 0.81073,-0.8244 0.81896233,0.81896233 0 0 1 0.82711,0.807954\"></path>\n                                        <path style=\"fill:none;fill-opacity:1;stroke:#d74423;stroke-width:1.02335;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 121.96033,-4.8955463 c 0.16235,-0.933719 0.45653,-1.655931 0.85377,-2.203141 0.74784,-1.030088 1.86097,-1.440044 3.14763,-1.473421\" id=\"path24992-1-6-7\"></path>\n                                    </g>\n                                </g>\n                            </svg>\n                            <!--Smart Trap No Signal Icon start-->\n                            <!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n                             <div class=\"vertical-center setupContent\" style=\"width: 100%;\">\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<span data-value=\"Status\" style=\"margin-right: 6px;\" class=\"capitalize StatusIndicator\"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<span data-value=\"Status\" style=\"margin-right: 6px;\" class=\"capitalize StatusIndicator\"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div data-value=\"DeviceNumber\" class=\"capitalize\" style=\"font-weight: bold;font-size: 12.5px;display: flex;width: 100%;\">--</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div data-value=\"BaitName\" style=\"display: flex;word-wrap:break-word;font-size: 10.5px;width: 100%;\">--</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t <div class=\"row\">\n\t\t\t\t\t\t\t\t<div data-value=\"battery\" style=\"display: block;word-wrap:break-word;font-size: 10.5px;\">--</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n                        </div>\n\n                         \n                </div>\n            </div>\n</div>\n</div>"},"ev":{}},"Input#2":{"t":"Input","lX":86,"lY":90,"sX":21.45,"sY":1,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"90%","height":"6.06%","x":"5%","y":"92px"},"ver":"270520c190915","dis":false,"tt":"","a":{"label text":"Title","color":"white","tab index":"1","required":"true"},"ev":{"clientEvents":{"inputEvents":{"SetAddress":{"channel":"SetAddress/receive value","event":"receive value","important":"false"}},"outputEvents":{"AddressChanged":{"channel":"AddressChanged/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#3":{"t":"Input","lX":38,"lY":202,"sX":21.45,"sY":1,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"90%","height":"6.29%","x":"5%","y":"202px"},"ver":"270520c190915","dis":false,"tt":"","a":{"label text":"Location/Floor","color":"white","tab index":"2","required":"true"},"ev":{"clientEvents":{"inputEvents":{"SetCode":{"channel":"SetCode/receive value","event":"receive value","important":"false"}},"outputEvents":{"CodeChanged":{"channel":"CodeChanged/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Label#16":{"t":"Label","lX":85,"lY":85,"sX":20.26,"sY":0.8,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"85%","height":"20px","x":"5%","y":"10%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"New Event #1":{"channel":"/set color","event":"set color","important":"false"}}}}},"Label#18":{"t":"Label","lX":85,"lY":50,"sX":20.26,"sY":0.8,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"85%%","height":"20px","x":"5%","y":"5.8%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"set date color":{"channel":"setDateColor/apply css","event":"apply css","important":"false"},"AdvisoryDate":{"channel":"AdvisoryDate/receive value","event":"receive value","important":"false"}}}}},"Text Area#1":{"t":"Text Area","lX":69,"lY":260,"sX":21.45,"sY":1.2,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"90%","height":"120px","x":"5%","y":"260px"},"ver":"190104c190915","dis":false,"tt":"","a":{"label text":"Details","color":"white","tab index":"3"},"ev":{"clientEvents":{"inputEvents":{"SetReason":{"channel":"SetReason/receive value","event":"receive value","important":"false"}},"outputEvents":{"ReasonChanged":{"channel":"ReasonChanged/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Image#0":{"t":"Image","lX":86,"lY":337,"sX":21.45,"sY":3,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"","width":"90%","height":"300px","x":"5%","y":"392px"},"ver":"202605c190915","dis":false,"tt":"","a":{"border width":"0","opacity":"1","image":""},"ev":{"clientEvents":{"inputEvents":{"SetImage":{"channel":"SetImage/receive value","event":"receive value","important":"false"}}}}},"Switch#0":{"t":"Switch","lX":1036,"lY":850,"sX":8.94,"sY":1,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"30%","height":"4.12%","x":"60%","y":"905px"},"ver":"190104c190915","dis":false,"tt":"","a":{"color":"blue","on label":"Open","off label":"Closed"},"ev":{"clientEvents":{"inputEvents":{"status changed":{"channel":"statusChanged/receive value","event":"receive value","important":"false"},"toggle-switch":{"channel":"toggle-switch/receive value","event":"receive value","important":"false"}},"outputEvents":{"status checked":{"channel":"statusChecked/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Label#17":{"t":"Label","lX":1122,"lY":819,"sX":4.77,"sY":0.8,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"20%","height":"20px","x":"65%","y":"872px"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"15","label text":"<font color=\"#ffffff\">Status</font>","text align":"center"},"ev":{}},"Label#19":{"t":"Label","lX":86,"lY":819,"sX":11.91,"sY":0.8,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"20px","x":"5%","y":"872px"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"15","label text":"<font color=\"#ffffff\">Priority</font>","text align":"center"},"ev":{}},"Dropdown#3":{"t":"Dropdown","lX":86,"lY":147,"sX":20.97,"sY":1,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"88%","height":"6.06%","x":"5%","y":"147px"},"ver":"190104c190915","z":"130","dis":false,"tt":"","a":{"default value":"Recommendation","default options":"Recommendation, Incident","label text":"Site Event Type","color":"white","tab index":"4","enable only use list values":"true"},"ev":{"clientEvents":{"inputEvents":{"set event type":{"channel":"setEventType/receive value","event":"receive value","important":"false"}},"outputEvents":{"event type changed":{"channel":"EventTypeChanged/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"Label#26":{"t":"Label","lX":107,"lY":17,"sX":17.87,"sY":1.08,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"75%","height":"26.909px","x":"14%","y":"2%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Site Event</font>"},"ev":{"clientEvents":{"inputEvents":{"set title color":{"channel":"setTitleColor/apply css","event":"apply css","important":"false"}}}}},"Generic#3":{"t":"Generic","lX":0,"lY":464,"sX":17.43,"sY":4,"s":"Device Level","ps":{"enabled":true,"scalingType":"OK","width":"100%","height":"400px","x":"0px","y":"100% - 400px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"},"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"}}}}},"Generic#4":{"t":"Generic","lX":0,"lY":0,"sX":17.43,"sY":0.75,"s":"Device Level","ps":{"enabled":true,"scalingType":"OK","width":"100%","height":"75px","x":"0px","y":"0px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setTopHtml":{"channel":"setTopHtml/set html","event":"set html","important":"false"},"SetTopAction":{"channel":"SetTopAction/set action","event":"set action","important":"false"}}}}},"ReportAdvisories":{"t":"Scripting","lX":660,"lY":145,"sX":1,"sY":1,"s":"Recommendation List","ps":{"enabled":"false","scalingType":"OK","width":"5.76%","height":"11.88%","x":"37.82%","y":"16.75%"},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div>\n    <style>\n    .childRow{\n     width:100%;\n    }\n    .barline{\n        width:20px;\n        height:100%;\n    }\n    .column-2{\n        width:20%;\n        \n    }\n    .column-4{\n        width:40%;\n    }\n    .column-6{\n        width:60%;\n    }\n    .column-8{\n        width:80%;\n    }\n    .column-10{\n        width:100%;\n    }\n    \n    .inactiveToggle{\n        position: absolute;\n        top: 5px;\n        left: 23px;\t\n    }\n        \n    .activeToggle{\n        position:absolute;\n        left:6px;\n        top: 5px;\n    }\n        /* The switch - the box around the slider */\n    .switch {\n        position: relative;\n        display: inline-block;\n        width: 73px;\n        height: 23px;\n    }\n    \n    /* Hide default HTML checkbox */\n    .switch input {\n      opacity: 0;\n      width: 0;\n      height: 0;\n    }\n    \n    .slider {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        left: 20px;\n        right: 0;\n        bottom: 0;\n        background-color: #6ac0f3;\n        -webkit-transition: .4s;\n        transition: .4s;\n        font-size: 9px;\n        padding-top: 10px;\n        padding-left: 24px;\n        color: white;\n    }\n    .slider:before {\n        position: absolute;\n        content: \"\";\n        height: 15px;\n        width: 15px;\n        left: 6px;\n        bottom: 4px;\n        background-color: white;\n        -webkit-transition: .4s;\n        transition: .4s;\n    }\n    \n    .Selected{\n        position:absolute;\n        left:10px;\n    }\n        \n    input:checked + .slider {\n        background-color: #6ac0f3ff;\n        font-size: 9px;\n        padding-top: 10px;\n        padding-right: 28px;\n        color: white;\n    }\n    \n    input:focus + .slider {\n      box-shadow: 0 0 1px #6ac0f3ff;\n    }\n    \n    input:checked + .slider:before {\n      -webkit-transform: translateX(26px);\n      -ms-transform: translateX(26px);\n      transform: translateX(26px);\n    }\n    \n    /* Rounded sliders */\n    .slider.round {\n      border-radius: 34px;\n    }\n    \n    .slider.round:before {\n      border-radius: 50%;\n    }\n        \n        \n    .normalCardBorder {\n        font-family: sans-serif;\n        background-color: #e6e6e6ff;\n        padding: 8px;\n        overflow: auto;\n    }\n    .normalCardBorder:hover{\n        cursor:pointer;\n        background-color:#f2f2f2;\n    }\n\t\t\n\t.grid-container{\n\t\tdisplay: grid;\n\t\tgrid-template-columns: auto 75px;\n\t}\n        \n    </style>\n    \n    <div id=\"cardChildTemplate\" style=\"display:none;\">\n            <div data-section=\"main\" data-info=\"SideBarStatus\" data-value=\"triggered\" class=\"normalCardBorder SideBarGreen\" onclick=\"doubleclick(this, function(){alert('single')}, function(){alert('double')})\" >\n                <div data-section=\"cell\">\n                    <div>\n                        <div class=\"childRow flex\" style=\"margin: 8px 8px 4px 0;\">\n                            <div class=\"childRow column-10 flex\">\n                                <div class=\"column-10 flex\" style=\"border-right:0.4px solid gray;flex:auto;\">\n                                    <div class=\"column-10\">\n                                        <!-- <div class=\"childRow flex\" style=\"float:right; font-size:9px\">\n                                            <span data-value=\"date\"> </span>\n                                        </div> -->\n                                        <div class=\"childRow flex\" >\n                                            <span data-value=\"AdvisoryName\" style=\"font-weight:bold;\"> </span>\n                                        </div>\n                                        <div class=\"childRow column-10\" style=\"padding-left:2px; font-size:12px;\">\n                                            <span data-value=\"AdvisoryText\" style=\"word-break: break-word;\"> </span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"column-10 flex grid-container\" style=\"flex:auto; display:grid; padding-top:2px; padding-bottom:2px;\">\n                                    <div class=\"column-10\" style=\"padding-left:10px;font-weight:bold;font-size:13px; grid-column-start:1; grid-column-end:1; grid-row-start:1; grid-row-end:1;\">\n                                        <span data-value=\"AdvisoryType\" style=\"word-break: break-word;\"> </span>\n                                    </div>\n                                    <div class=\"column-10\" style=\"padding-left:10px; grid-column-start:1; grid-column-end:1; grid-row-start:2; grid-row-end:2;\">\n                                        <span data-value=\"Assignee\" style=\"word-break: break-word;\"> </span>\n                                    </div>\n                                    <div style=\"text-align:center; grid-column-start:2; grid-column-end:2; grid-row-start:1; grid-row-end:2;\">\n                                        <label class=\"switch\">\n                                          <input type=\"checkbox\" data-value=\"checkbox\" checked disabled>\n                                            <span data-value=\"AdvStatus\" class=\"slider round\"><span data-value=\"SelectElement\" class=\"activeToggle\">Open</span></span>\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                                 \n                        </div>\n    \n                    </div>\n                </div>\n            </div>\n        </div>\n        \n    </div>"},"ev":{}},"ReportController":{"t":"Scripting","lX":400,"lY":135,"sX":1,"sY":1,"s":"Recommendation List","ps":{"enabled":"false","scalingType":"OK","width":"5.76%","height":"11.88%","x":"52.56%","y":"16.03%"},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"// event report controller\n//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n\nvar Caller;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar _UpdatePersistance;\nvar selectedLevel;\nvar persistence;\nvar reportControl = 0;\nScript.on('load', function () {\n\n    enalbeSubmitButtion();\n    persistence = Script.getState(\"rodent-persistance\");\n    //persistence.LastScreen = \"Device Level\";\n    Script.setState(\"Caller\", persistence.LastScreen);\n    selectedLevel = Script.getState(\"getSite\");\n\n    try {\n        _initializer = Script.getState(\"Initializer\");\n        _handleGeneric = Script.getState(\"HandleGeneric\");\n        _publishCommand = Script.getState(\"PublishCommand\");\n        _gotoPage = Script.getState(\"GotoPage\");\n        _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n    }\n    catch (e) {\n        setTimeout(function () {\n            fw.func(\"JUMPSCREEN\", \"Initialisation\");\n        }, 3000);\n    }\n    var seleceted = Script.getState(\"SelectedName\");\n    var cardTemplate = Script.inheritScript(\"MenuTemplateRodent\");\n    _initializer(cardTemplate, \"SetHtml\");\n\n    var topMenuTemplate = Script.inheritScript(\"Menu\");\n    _initializer(topMenuTemplate, \"setTopHtml\");\n    var command =\n    {\n        \"Action\": \"Hide\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command =\n    {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddReport\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command =\n    {\n        \"Action\": \"Hide\",\n        \"Compoent\": \"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command =\n    {\n        \"Action\": \"setVal\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": seleceted,\n        \"Id\": \"PageName\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command =\n    {\n        \"Action\": \"SetActiveDeactivate\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": \"dot|dot active\",\n        \"Id\": \"Statuses|Active1|Active3\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n\n    if (persistence.LastScreen == \"Site Report List\" || persistence.LastScreen == \"Levels\" || persistence.LocationId == null) {\n        command =\n        {\n            \"Action\": \"Change Generic Action\",\n            \"Compoent\": \"status\",\n            \"Value\": \"Landing Page\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n    } else {\n        command =\n        {\n            \"Action\": \"Change Generic Action\",\n            \"Compoent\": \"status\",\n            \"Value\": \"RodentGrid\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n    }\n    command =\n    {\n        \"Action\": \"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command =\n    {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"siteVisits\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command =\n    {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"MaintnanceModeRow\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    var col = new SensaCollection([\"id\", \"setTime\", \"TimeLeft\", \"Reason\", \"Technician\"], \"id\");\n\n\n\n    var compoundQeury = [\n        {\n            \"TableName\": \"Locations\", // Specify the primary table used to construct the join request\n            \"Join\": 2, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\",\n                    \"Name\",\n                    \"Address\"\n                ], // Specify the list of columns to take from the reference table.\n            \"JoinOn\": [\"Locations\"],\n            \"JoinTable\": \"SiteEvents\",\n            \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n                [\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"Urgent\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.LocationId\",\n                                \"ParamName\": \"Parent1\",\n                                \"Value\": \"Locations.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType1\",\n                                \"Value\": 1,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status1\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"Important\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.LocationId\",\n                                \"ParamName\": \"\",\n                                \"Value\": \"Locations.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType2\",\n                                \"Value\": 2,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status2\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"Minor\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.LocationId\",\n                                \"ParamName\": \"Parent3\",\n                                \"Value\": \"Locations.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType3\",\n                                \"Value\": 3,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status3\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n\n                ],\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"SiteId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": persistence.LocationId // Value that you want to pass for comparison (any object)\n                    }\n                ],\n            \"CustomColumnNames\":\n                [\n                    {\n                        \"Index\": 1,\n                        \"BindingName\": \"CardName\"\n                    },\n                    {\n                        \"Index\": 2,\n                        \"BindingName\": \"CardAddress\"\n                    },\n\n                ]\n        }];\n\n    if (persistence.LastScreen === \"Site Report List\" || persistence.LastScreen === \"Levels\" || persistence.LocationId == null) {\n        // set the location ID to null, as to make it only a site level site event\n        persistence.LocationId = null;\n        _UpdatePersistance(persistence);\n        compoundQeury = [\n            {\n                \"TableName\": \"Sites\", // Specify the primary table used to construct the join request\n                \"Join\": 2, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n                \"Columns\":\n                    [\n                        \"Id\",\n                        \"Name\",\n                        \"Address\",\n                        \"Status\"\n                    ], // Specify the list of columns to take from the reference table.\n                \"JoinOn\": [\"Sites\"],\n                \"JoinTable\": \"SiteEvents\",\n                \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n                    [\n                        {\n                            \"Columns\": [\"count(*)\"],\n                            \"TableName\": \"SiteEvents\",\n                            \"CustomName\": \"Urgent\",\n                            \"JoinTable\": \"SiteEvents\",\n                            \"Filters\": [\n                                {\n                                    \"Column\": \"SiteEvents.SiteId\",\n                                    \"ParamName\": \"Parent1\",\n                                    \"Value\": \"Sites.Id\",\n                                    \"IsParentRelated\": true\n                                },\n                                {\n                                    \"Column\": \"SiteEventPriority\",\n                                    \"ParamName\": \"AdvisoryType1\",\n                                    \"Value\": 1,\n                                    \"IsParentRelated\": false\n                                },\n                                {\n                                    \"Column\": \"SiteEventStatus\",\n                                    \"ParamName\": \"Status1\",\n                                    \"Value\": \"1\",\n                                    \"IsParentRelated\": false\n                                },\n                            ]\n                        },\n                        {\n                            \"Columns\": [\"count(*)\"],\n                            \"TableName\": \"SiteEvents\",\n                            \"CustomName\": \"Important\",\n                            \"JoinTable\": \"SiteEvents\",\n                            \"Filters\": [\n                                {\n                                    \"Column\": \"SiteEvents.SiteId\",\n                                    \"ParamName\": \"\",\n                                    \"Value\": \"Sites.Id\",\n                                    \"IsParentRelated\": true\n                                },\n                                {\n                                    \"Column\": \"SiteEventPriority\",\n                                    \"ParamName\": \"AdvisoryType2\",\n                                    \"Value\": 2,\n                                    \"IsParentRelated\": false\n                                },\n                                {\n                                    \"Column\": \"SiteEventStatus\",\n                                    \"ParamName\": \"Status2\",\n                                    \"Value\": \"1\",\n                                    \"IsParentRelated\": false\n                                },\n                            ]\n                        },\n                        {\n                            \"Columns\": [\"count(*)\"],\n                            \"TableName\": \"SiteEvents\",\n                            \"CustomName\": \"Minor\",\n                            \"JoinTable\": \"SiteEvents\",\n                            \"Filters\": [\n                                {\n                                    \"Column\": \"SiteEvents.SiteId\",\n                                    \"ParamName\": \"Parent3\",\n                                    \"Value\": \"Sites.Id\",\n                                    \"IsParentRelated\": true\n                                },\n                                {\n                                    \"Column\": \"SiteEventPriority\",\n                                    \"ParamName\": \"AdvisoryType3\",\n                                    \"Value\": 3,\n                                    \"IsParentRelated\": false\n                                },\n                                {\n                                    \"Column\": \"SiteEventStatus\",\n                                    \"ParamName\": \"Status3\",\n                                    \"Value\": \"1\",\n                                    \"IsParentRelated\": false\n                                },\n                            ]\n                        },\n\n                    ],\n                \"Filters\": // Filter options in case they are needed.\n                    [\n                        {\n                            \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                            \"ParamName\": \"SiteId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                            \"Value\": persistence.SiteId // Value that you want to pass for comparison (any object) THIS SHOULD BE SiteId but that breaks it......\n                        }\n                    ],\n                \"CustomColumnNames\":\n                    [\n                        {\n                            \"Index\": 1,\n                            \"BindingName\": \"CardName\"\n                        },\n                    ]\n            }];\n    }\n    Database.readSubQuery(\"rodent\", \"Locations\", compoundQeury, function (data) {\n        _UpdatePersistance(persistence);\n        var cardTemplate;\n        if (persistence.LastScreen === \"Site Report List\" || persistence.LastScreen === \"Levels\" || persistence.LocationId == null) {\n            cardTemplate = Script.getScriptElement(\"ReportsTemplateSite\");\n        } else {\n            cardTemplate = Script.getScriptElement(\"ReportsTemplateDevice\");\n        }\n\n        // need to add a status column, and set it to 1 so the card will display\n        data.value.headers.push(\"Status\");\n        Object.keys(data.value.data).forEach(key => {\n            data.value.data[key].push(\"1\");\n        });\n\n        ClientEvents.publish(\"SetHeaderTemplate\", cardTemplate, false);\n        ClientEvents.publish(\"SetReports\", data, false);\n        // if we are at the site level, then the ID for the card is the site id, not the location ID. Need to do this to display the children on load\n        if (persistence.LastScreen === \"Site Report List\" || persistence.LastScreen === \"Levels\" || persistence.LocationId == null) {\n            ClientEvents.publish(\"toggleCard\", persistence.SiteId, false);\n        } else {\n            ClientEvents.publish(\"toggleCard\", persistence.LocationId, false);\n        }\n\n    });\n\n    if (selectedLevel !== undefined) {\n        GetParentName(persistence.LocationId);\n    }\n    hideSiteReports();\n});\n\n\n// this function handles the back button\nClientEvents.subscribe(\"GenericActionMessage\", function (data) {\n    console.log(persistence.LastScreen);\n\n    // need to set the state so it will load the levels correctly\n    Script.setState(\"ReturningFromDevices\", false);\n\n    Script.setState(\"Caller\", persistence.LastScreen);\n    persistence.LastScreen = \"Recommendation List\";\n    Script.setState(\"rodent-persistance\", persistence);\n    _UpdatePersistance(persistence);\n    _handleGeneric(data);\n});\n\nClientEvents.subscribe(\"GnericCardChildPressed\", function (data) {\n    Script.setState(\"AdvisorySelected\", data);\n    fw.func(\"JUMPSCREEN\", \"Recommendation Form\");\n});\n\n//pretty sure this function doesn't get run\nClientEvents.subscribe(\"BackToTraps\", function (data) {\n    console.log(\"Back to Traps\");\n    console.log(persistence.LastScreen);\n    var tempLastScreen = persistence.LastScreen;\n    persistence.LastScreen = \"Recommendation List\";\n    fw.func(\"JUMPSCREEN\", tempLastScreen);//\"Device Level\");\n});\nClientEvents.subscribe(\"GnericCardPressed\", function (data) {\n\n    var selectAdvisories = [\n        {\n            \"TableName\": \"SiteEvents\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\",\n                    \"Context\",\n                    \"location\",\n                    \"reason\",\n                    \"title\",\n                    \"SiteEventPriority\",\n                    \"assigned\",\n                    \"SiteEventStatus\",\n                    \"SiteEventType\"\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"LocationId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"SiteId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": data // Value that you want to pass for comparison (any object)\n                    }\n                ]\n        }];\n    // if we are coming from the site report list, or the levels screen, then we are at the site level so want all the events from the whole site\n    if (persistence.LastScreen === \"Site Report List\" || persistence.LastScreen === \"Levels\" || persistence.LocationId == null) {\n        selectAdvisories[0].Filters[0].Column = \"SiteId\";\n        // since it is coming from a site level, set location id to null\n        persistence.LocationId = null;\n        _UpdatePersistance(persistence);\n    }\n    debugger;\n    Database.readCompound(\"rodent\", \"SiteEvents\", selectAdvisories, function (currentData) {\n        var cardTemplate = Script.getScriptElement(\"ReportAdvisories\");\n        ClientEvents.publish(\"SetValueTemplate\", cardTemplate, false);\n\n        // need to add a status column, and set it to 1 so the card will display\n        currentData.value.headers.push(\"Status\");\n        Object.keys(currentData.value.data).forEach(key => {\n            currentData.value.data[key].push(\"1\");\n        });\n        ClientEvents.publish(\"SetChildren\", currentData, false);\n        ClientEvents.publish(\"sort-advisories\", \"advisoriessort\", false);\n\n    });\n});\n\n\n\n\n\nfunction GetParentName(id) {\n    var compoundQeury = [\n        {\n            \"TableName\": \"Sites\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"SiteName\"\n                ],\n            \"Filters\":\n                [\n                    {\n                        \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"Id\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": id // Value that you want to pass for comparison (any object)\n                    }\n                ]// Specify the list of columns to take from the reference table.\n        }];\n    Database.readCompound(\"rodent\", \"Sites\", compoundQeury, function (packet) {\n\n        var current;\n        for (var val in packet.value.data) {\n            current = packet.value.data[val];\n        }\n        var command =\n        {\n            \"Action\": \"setVal\",\n            \"Compoent\": \"RightPanel\",\n            \"Value\": current[0],\n            \"Id\": \"PageName\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n    });\n}\n\n\n\n\n// hide the reporting site radio button and plus button\nfunction hideSiteReports() {\n    var delayInMilliseconds = 100; //1 second\n\n    setTimeout(function () {\n        //your code to be executed after 1 second\n        console.log(\"Hiding site reports line 1500\");\n        // var command = {\n        //     \"Action\": \"setVisible\",\n        //     \"Compoent\": \"AddReport\",\n        //     \"Value\": \"none\",\n        // };\n        // _publishCommand(command, \"activateGeneric\");\n        // command = {\n        //     \"Action\": \"setVisible\",\n        //     \"Compoent\": \"siteVisits\",\n        //     \"Value\": \"none\",\n        // }; \n        _publishCommand(command, \"SetTopAction\");\n        //enalbeSubmitButtion();\n\n        if (reportControl === 0) {\n\n            var command = {\n                \"Action\": \"setVisible\",\n                \"Compoent\": \"AddReport\",\n                \"Value\": \"none\",\n            };\n            _publishCommand(command, \"activateGeneric\");\n            command = {\n                \"Action\": \"setVisible\",\n                \"Compoent\": \"siteVisits\",\n                \"Value\": \"none\",\n            }; \n\n            //accessOpen\n            console.log(\"Reporting seems to be 0\");\n            command = {\n                \"Action\": \"setVisible\",\n                \"Compoent\": \"OpenBtn\",\n                \"Value\": \"none\",\n            };\n            _publishCommand(command, \"activateGeneric\");\n        }\n\n    }, delayInMilliseconds);\n\n}\n\n\nfunction enalbeSubmitButtion() {\n\n    var user = Client.getUser();\n    //console.log(\"User is \" + user);\n    var selectUser = [\n        {\n            \"TableName\": \"users\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    //\"username\",\n                    \"accessrole\"\n\n\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": user // Value that you want to pass for comparison (any object)\n                    }\n                ]\n        }\n    ];\n\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        var accessRoleId = Object.values(eventData.value.data)[0][0];\n        console.log(\"Access role value is \" + accessRoleId);\n        var errorEnable = {};\n        if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId == null) {\n            console.log(\"Hiding the add button at 1402  is \" + accessRoleId);\n            //accessOpen();\n            return;\n        }\n        var filter = {\n            columns: \"Feature03\",\n            filter: \"Id=\" + accessRoleId\n        };\n\n        Database.readRecords(\"rodent\", \"UserAccessRole\", function (eventData) {\n\n            console.log(\"Data read from user access role \" + JSON.stringify(eventData.value, null, 4));\n            var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n\n            if (provisioningAccess === 1) {\n                //Client.alert(\"You don't have adequate permission to update site events\");\n                //Script.hideWidget(\"siteReportFormSubmitbtin\");\n                //formCotrol = 1;\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                console.log(\"Hiding the add button at 1422 acces is \" + provisioningAccess);\n                //accessOpen();\n                reportControl = 1;\n            }\n            console.log(\"The accessrole in at 1425 \" + provisioningAccess);\n\n        }, filter);\n\n    });\n\n}"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"Generic#9":{"t":"Generic","lX":0,"lY":0,"sX":17.43,"sY":0.75,"s":"Recommendation List","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"75px","x":"0px","y":"0px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setTopHtml":{"channel":"setTopHtml/set html","event":"set html","important":"false"},"SetTopAction":{"channel":"SetTopAction/set action","event":"set action","important":"false"}}}}},"Generic#10":{"t":"Generic","lX":0,"lY":87,"sX":17.43,"sY":7.85,"s":"Recommendation List","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"89.82%","x":"0px","y":"10%"},"ver":"190104c190915","z":"110","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"ActivateGeneric":{"channel":"ActivateGeneric/set action","event":"set action","important":"false"}}}}},"GenericCard#4":{"t":"GenericCard","lX":0,"lY":75,"sX":17.43,"sY":6.11,"s":"Recommendation List","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"69.91%","x":"0px","y":"75px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"SetHeaderTemplate":{"channel":"SetHeaderTemplate/set header template","event":"set header template","important":"false"},"SetReports":{"channel":"SetReports/receive headers","event":"receive headers","important":"false"},"SetChildren":{"channel":"SetChildren/receive value","event":"receive value","important":"false"},"SetValueTemplate":{"channel":"SetValueTemplate/set value template","event":"set value template","important":"false"},"sort advisories":{"channel":"sort-advisories/sort","event":"sort","important":"false"},"ToggleCard":{"channel":"ToggleCard/toggle card","event":"toggle card","important":"false"}}}}},"Generic#7":{"t":"Generic","lX":0,"lY":0,"sX":17.43,"sY":0.75,"s":"Site Report List","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"75px","x":"0px","y":"0px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setTopHtml":{"channel":"setTopHtml/set html","event":"set html","important":"false"},"SetTopAction":{"channel":"SetTopAction/set action","event":"set action","important":"false"}}}}},"Generic#8":{"t":"Generic","lX":0,"lY":421,"sX":17.43,"sY":7.87,"s":"Site Report List","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"90%","x":"0px","y":"10%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"setHtml":{"channel":"setHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"GenericCard#3":{"t":"GenericCard","lX":0,"lY":75,"sX":17.43,"sY":6.11,"s":"Site Report List","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"69.95%","x":"0px","y":"75px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"SetSource":{"channel":"SetSource/receive headers","event":"receive headers","important":"false"},"setChildrenTemplate":{"channel":"setChildrenTemplate/set value template","event":"set value template","important":"false"},"setHeaderTemplate":{"channel":"setHeaderTemplate/set header template","event":"set header template","important":"false"},"clearLanding":{"channel":"clearLanding/clear content","event":"clear content","important":"false"},"setAreas":{"channel":"setAreas/receive value","event":"receive value","important":"false"},"toggleCard":{"channel":"toggleCard/toggle card","event":"toggle card","important":"false"},"view pointer changed":{"channel":"view-pointer-changed/change view pointer","event":"change view pointer","important":"false"}}}}},"ReportsChildren":{"t":"Scripting","lX":0,"lY":0,"sX":1,"sY":1,"s":"Site Report List","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div id=\"cardChildTemplate\" style=\"display:none;\">\n\t<div data-section=\"main\" data-info=\"SideBarStatus\" data-value=\"triggered\" class=\"normalCardBorder  SideBarGreen\" onclick=\"doubleclick(this, function(){alert('single')}, function(){alert('double')})\" style=\"font-family: sans-serif; padding: 8px; overflow:auto;\">\n\t\t<div data-section=\"cell\" class=\"CardWidth\">\n\t\t\t<div>\n\t\t\t\t<div class=\"container flex\" style=\"margin: 8px 8px 4px 0;  width: 100%;\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"flex\"  style=\"border-right: 0.98px solid #9b9b9bff;  width:100%;\">\n\t\t\t\t\t\t\t<div class=\"Date\">\n\t\t\t\t\t\t\t\t<span style=\"float:right;font-size:11px;\" data-value=\"ReportDate\">--</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"iconWidth\">\n\n\t\t\t\t\t\t\t <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"40\" width=\"40\">\n\t\t\t\t\t\t\t\t<g id=\"g7488\" transform=\"translate(-77.191562,-7.2480735)\">\n\t\t\t\t\t\t\t\t <g transform=\"matrix(1.0915288,0,0,1.0672761,65.860656,-16.508271)\" id=\"g7466\">\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 13.173199,25.694459 h 2.706652\" id=\"path5448-0-4-8-1-3-8-7\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 13.109734,26.74482 h 7.610521\" id=\"path5448-0-4-8-1-2-9\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 13.141484,27.787454 h 7.610517\" id=\"path5448-0-4-8-1-2-9-4\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:none;fill-opacity:1;stroke:#41505a;stroke-width:1.17149;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 22.538898,33.771658 v 4.15671 H 11.418059 V 23.19263 h 11.120839 v 3.556811\" id=\"rect5418-8-7-2\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#388b3d;fill-opacity:1;stroke:#388b3d;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 12.794562,29.55473 h 1.575612 v 1.575611 h -1.575612 z\" id=\"rect7488-1\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.614797;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.79021,30.80127 h 4.258345\" id=\"path5448-0-4-8-1-1\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.658147;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.812223,29.883872 h 4.880049\" id=\"path5448-0-4-8-1-3-21\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#f88924;fill-opacity:1;stroke:#f88924;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 12.794562,31.918164 h 1.575612 v 1.575611 h -1.575612 z\" id=\"rect7488-4-24\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.652521,33.164669 h 2.87408\" id=\"path5448-0-4-8-1-6-6\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.716832,32.247271 h 3.729849\" id=\"path5448-0-4-8-1-3-8-3\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#d74423;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 12.794562,34.281493 h 1.575612 v 1.575611 h -1.575612 z\" id=\"rect7488-4-2-2\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.658147;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.797971,35.528033 h 4.880074\" id=\"path5448-0-4-8-1-6-1-5\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.735847,34.610635 h 2.17738\" id=\"path5448-0-4-8-1-3-8-0-2\"></path>\n\t\t\t\t\t\t\t\t   <g transform=\"matrix(0.31303639,0,0,-0.31303639,90.244118,349.12083)\" id=\"g6845\">\n\t\t\t\t\t\t\t\t\t <g id=\"g6929\" transform=\"translate(-31.637095,-11.373785)\">\n\t\t\t\t\t\t\t\t\t   <path style=\"fill:#d74423;fill-opacity:1;stroke:#41505a;stroke-width:4.85039;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -178.98346,1035.7038 -10.46644,-14.1134\" id=\"path5448-9-8-5-2-8\"></path>\n\t\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1.3994;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -187.21598,1024.9764 9.45737,12.3724\" id=\"path5448-0-4-8-1-2-9-0\"></path>\n\t\t\t\t\t\t\t\t\t   <path style=\"fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:0.431559px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\" d=\"m -192.69744,1020.7469 -1.14687,-4.5368 4.49648,2.049 z\" id=\"path6831\"></path>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#41505a;stroke-width:3.29365;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect6833\" width=\"1.1050575\" height=\"1.5188034\" x=\"725.02814\" y=\"-799.04865\" transform=\"matrix(0.63652687,0.77125453,0.79873314,-0.60168545,0,0)\"></rect>\n\t\t\t\t\t\t\t\t\t </g>\n\t\t\t\t\t\t\t\t   </g>\n\t\t\t\t\t\t\t\t </g>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t\t\t\t<div class=\"vertical-center setupContent\">\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div class=\"capitalize\" data-value=\"CardName\" style=\"font-weight: bold; font-weight:bold;\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"CardAddress\" data-value=\"CardAddress\"  style=\"display:inline-block;word-wrap:break-word;\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex\" style=\"float: right; width:100%;\">\n\n\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 5px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Urgent\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status1Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 10px; margin-right:10px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Important\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status2Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;margin-right: 12px;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Minor\">\n\t\t\t\t\t\t\t\t\t  --\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status3Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>"},"ev":{}},"ReportsController":{"t":"Scripting","lX":955,"lY":180,"sX":1,"sY":1,"s":"Site Report List","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"55.13%","y":"20.71%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"// site reports controller\n//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar Caller;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar persistence;\nvar _UpdatePersistance;\nvar reportControl = 0;\nScript.on('load', function() {\n\n    enalbeSubmitButtion();\n    persistence = Script.getState(\"rodent-persistance\");\n    _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n    Script.setState(\"Caller\", persistence.LastScreen);\n    Script.setState(\"ReturningFromDevices\", true, false);\n\n    try {\n        _initializer = Script.getState(\"Initializer\");\n        _handleGeneric = Script.getState(\"HandleGeneric\");\n        _publishCommand = Script.getState(\"PublishCommand\");\n        _gotoPage = Script.getState(\"GotoPage\");\n        _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\n        // set the location id in the persistance to be -1 as there is no location id\n        persistence.LocationId = null;\n        _UpdatePersistance(persistence);\n    } catch (e) {\n        setTimeout(function() {\n            //   debugger;\n            console.log(e);\n            fw.func(\"JUMPSCREEN\", \"Initialisation\");\n        }, 3000);\n    }\n\n    var seleceted = Script.getState(\"SelectedName\");\n    var cardTemplate = Script.inheritScript(\"MenuTemplateRodent\");\n    _initializer(cardTemplate, \"SetHtml\");\n\n    var topMenuTemplate = Script.inheritScript(\"Menu\");\n    _initializer(topMenuTemplate, \"setTopHtml\");\n    var command = {\n        \"Action\": \"Hide\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"Hide\",\n        \"Compoent\": \"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVal\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": seleceted,\n        \"Id\": \"PageName\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command = {\n        \"Action\": \"SetActiveDeactivate\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": \"dot|dot active\",\n        \"Id\": \"Statuses|Active1|Active2\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n\n    command = {\n        \"Action\": \"Change Generic Action\",\n        \"Compoent\": \"status\",\n        \"Value\": \"Reports Status\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command = {\n        \"Action\": \"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n    //  command = \n    //   {\n    //      \"Action\":\"setVisible\",\n    //        \"Compoent\":\"Advisories\",\n    //       \"Value\": \"none\",\n    //   };\n    // _publishCommand(command, \"SetTopAction\");\t\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddReport\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddAdvisory\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"MaintnanceModeRow\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    var selectedSite = persistence.SiteId;\n    if (selectedSite === null) {\n        selectedSite = 1;\n    }\n\n    if (selectedSite !== undefined) {\n        GetParentName(persistence.CustomerId);\n    }\n\n    var compoundQeury = [{\n        \"TableName\": \"Sites\", // Specify the primary table used to construct the join request\n        \"Join\": 2, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Id\",\n            \"Name\",\n            \"Address\",\n            \"State\"\n        ], // Specify the list of columns to take from the reference table.\n        \"JoinOn\": [\"Sites\"],\n        \"JoinTable\": \"SiteEvents\",\n        \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n            [{\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Urgent\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": \"SiteEvents.SiteId\",\n                            \"ParamName\": \"Parent1\",\n                            \"Value\": \"Sites.Id\",\n                            \"IsParentRelated\": true\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType1\",\n                            \"Value\": 1,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status1\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"ReportId\",\n                            \"ParamName\": \"ReportId1\",\n                            \"Value\": null,\n                            \"IsParentRelated\": false,\n                            \"IsNull\": false,\n\n                        },\n                    ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Important\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": \"SiteEvents.SiteId\",\n                            \"ParamName\": \"\",\n                            \"Value\": \"Sites.Id\",\n                            \"IsParentRelated\": true\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType2\",\n                            \"Value\": 2,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status2\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"ReportId\",\n                            \"ParamName\": \"ReportId2\",\n                            \"Value\": null,\n                            \"IsParentRelated\": false,\n                            \"IsNull\": false,\n\n                        },\n                    ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Minor\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": \"SiteEvents.SiteId\",\n                            \"ParamName\": \"Parent3\",\n                            \"Value\": \"Sites.Id\",\n                            \"IsParentRelated\": true\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType3\",\n                            \"Value\": 3,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status3\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"ReportId\",\n                            \"ParamName\": \"ReportId3\",\n                            \"Value\": null,\n                            \"IsParentRelated\": false,\n                            \"IsNull\": false,\n\n                        },\n                    ]\n                },\n\n            ],\n        \"CustomColumnNames\": [{\n                \"Index\": 1,\n                \"BindingName\": \"CardName\"\n            },\n            {\n                \"Index\": 2,\n                \"BindingName\": \"CardAddress\"\n            },\n\n        ],\n        \"Filters\": [{\n            \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n            \"ParamName\": \"SiteIdPk\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n            \"Value\": persistence.SiteId // Value that you want to pass for comparison (any object)\n        }] // Filter options in case they are needed.\n    }];\n\n    Database.readSubQuery(\"rodent\", \"Areas\", compoundQeury, function(packet) {\n\n        persistence.LastScreen = \"Site Report List\";\n        _UpdatePersistance(persistence);\n        ClientEvents.publish(\"clearLanding\", \"\", false);\n\n        var cardTemplate = Script.getScriptElement(\"ReportsHeader\");\n        // add status column, set to 1 so they display\n        packet.value.headers.push(\"Status\");\n        Object.keys(packet.value.data).forEach(key => {\n            packet.value.data[key].push(\"1\");\n        });\n\n        ClientEvents.publish(\"setHeaderTemplate\", cardTemplate, false);\n        ClientEvents.publish(\"SetSource\", packet, false);\n        ClientEvents.publish(\"toggleCard\", selectedSite, false);\n        //ClientEvents.publish(\"view-pointer-changed\",2,false);\n    });\n\n    hideSiteReports();\n\n\n});\n\nClientEvents.subscribe(\"GnericCardPressed\", function(data) {\n    LoadAreaSites(data);\n});\n\nClientEvents.subscribe(\"GnericCardChildPressed\", function(data) {\n\n    Script.setState(\"SelectedReportPk\", data);\n\n    Script.setState(\"GetReportId\", data);\n    fw.func(\"JUMPSCREEN\", \"Site Report Form\");\n});\n\n\nfunction LoadAreaSites(areaId) {\n    var compoundQeury = [{\n        \"TableName\": \"Reports\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Id\",\n            \"SetDate\",\n            \"VisitReason\",\n\n        ], // Specify the list of columns to take from the reference table.\n        \"JoinOn\": [\"Reports\"],\n        \"JoinTable\": \"SiteEvents\",\n        \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n            [{\n                    \"Columns\": [\"Name\"],\n                    \"TableName\": \"Employees\",\n                    \"CustomName\": \"CardAddress\",\n                    \"JoinTable\": \"Reports\",\n                    \"Filters\": [{\n                        \"Column\": \"Id\",\n                        \"ParamName\": \"Parent1\",\n                        \"Value\": \"Reports.TechnicianId\",\n                        \"IsParentRelated\": true\n                    }, ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Urgent\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": \"ReportId\",\n                            \"ParamName\": \"Parent1\",\n                            \"Value\": \"Reports.Id\",\n                            \"IsParentRelated\": true\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType1\",\n                            \"Value\": 1,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status1\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                    ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Important\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": \"ReportId\",\n                            \"ParamName\": \"Parent1\",\n                            \"Value\": \"Reports.Id\",\n                            \"IsParentRelated\": true\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType2\",\n                            \"Value\": 2,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status2\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                    ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Minor\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": \"ReportId\",\n                            \"ParamName\": \"Parent1\",\n                            \"Value\": \"Reports.Id\",\n                            \"IsParentRelated\": true\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType3\",\n                            \"Value\": 3,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status3\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                    ]\n                },\n\n            ],\n        \"CustomColumnNames\": [{\n            \"Index\": 2,\n            \"BindingName\": \"CardName\"\n        }],\n        \"Filters\": [{\n            \"Column\": \"SiteId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n            \"ParamName\": \"SiteIdPk\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n            \"Value\": areaId // Value that you want to pass for comparison (any object)\n        }] // Filter options in case they are needed.\n    }];\n\n    Database.readSubQuery(\"rodent\", \"Reports\", compoundQeury, function(packet) {\n\n        var cardChildrenTemplate = Script.getScriptElement(\"ReportsChildren\");\n        ClientEvents.publish(\"setChildrenTemplate\", cardChildrenTemplate, false);\n        // add status column, and make it 1 for everything so the cards are visible\n        packet.value.headers.push(\"Status\");\n        Object.keys(packet.value.data).forEach(key => {\n            packet.value.data[key].push(\"1\");\n        });\n        ClientEvents.publish(\"setAreas\", packet, false);\n    });\n}\n\n// handles the back button\nClientEvents.subscribe(\"GenericActionMessage\", function(data) {\n    // need to make sure it always goes back to the levels screen if the back button is pressed\n    var split = data.split('|');\n    if (split[0] == \"GoBack\") {\n        Script.setState(\"Caller\", \"Levels\");\n    }\n\n    persistence.LastScreen = \"Site Report List\";\n    _UpdatePersistance(persistence);\n    _handleGeneric(data);\n});\n\nfunction GetParentName(id) {\n\n    var compoundQeury = [{\n        \"TableName\": \"Sites\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Name\"\n        ],\n        \"Filters\": [{\n            \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n            \"ParamName\": \"Id\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n            \"Value\": persistence.SiteId // Value that you want to pass for comparison (any object)\n        }] // Specify the list of columns to take from the reference table.\n    }];\n    Database.readCompound(\"rodent\", \"Sites\", compoundQeury, function(packet) {\n        var current;\n        for (var val in packet.value.data) {\n            current = packet.value.data[val];\n        }\n        var command = {\n            \"Action\": \"setVal\",\n            \"Compoent\": \"RightPanel\",\n            \"Value\": current[0],\n            \"Id\": \"PageName\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n    });\n}\n\n\n\n// hide the reporting site radio button and plus button\nfunction hideSiteReports() {\n    var delayInMilliseconds = 100; //1 second\n\n    setTimeout(function() {\n        //your code to be executed after 1 second\n        console.log(\"Hiding site reports line 1500\");\n        var command = {\n            \"Action\": \"setVisible\",\n            \"Compoent\": \"AddReport\",\n            \"Value\": \"none\",\n        };\n        _publishCommand(command, \"activateGeneric\");\n        command = {\n            \"Action\": \"setVisible\",\n            \"Compoent\": \"siteVisits\",\n            \"Value\": \"none\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n        //enalbeSubmitButtion();\n\n        if (reportControl === 0) {\n\n            //accessOpen\n            console.log(\"Reporting seems to be 0\");\n            command = {\n                \"Action\": \"setVisible\",\n                \"Compoent\": \"OpenBtn\",\n                \"Value\": \"none\",\n            };\n            _publishCommand(command, \"activateGeneric\");\n        }\n\n    }, delayInMilliseconds);\n\n}\n\n\nfunction enalbeSubmitButtion() {\n\n    var user = Client.getUser();\n    //console.log(\"User is \" + user);\n    var selectUser = [{\n        \"TableName\": \"users\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            //\"username\",\n            \"accessrole\"\n\n\n        ], // Specify the list of columns to take from the reference table.\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": user // Value that you want to pass for comparison (any object)\n            }]\n    }];\n\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        var accessRoleId = Object.values(eventData.value.data)[0][0];\n        console.log(\"Access role value is \" + accessRoleId);\n        var errorEnable = {};\n        if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId == null) {\n            console.log(\"Hiding the add button at 1402  is \" + accessRoleId);\n            //accessOpen();\n            return;\n        }\n        var filter = {\n            columns: \"Feature03\",\n            filter: \"Id=\" + accessRoleId\n        };\n\n        Database.readRecords(\"rodent\", \"UserAccessRole\", function(eventData) {\n\n            console.log(\"Data read from user access role \" + JSON.stringify(eventData.value, null, 4));\n            var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n\n            if (provisioningAccess === 1) {\n                //Client.alert(\"You don't have adequate permission to update site events\");\n                //Script.hideWidget(\"siteReportFormSubmitbtin\");\n                //formCotrol = 1;\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                console.log(\"Hiding the add button at 1422 acces is \" + provisioningAccess);\n                //accessOpen();\n                reportControl = 1;\n            }\n            console.log(\"The accessrole in at 1425 \" + provisioningAccess);\n\n        }, filter);\n\n    });\n\n}"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"ReportsHeader":{"t":"Scripting","lX":670,"lY":185,"sX":1,"sY":1,"s":"Site Report List","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div id=\"cardTemplate\" style=\"display:none\">\n\t<div>\n\t\t<!--Start of Parent Card-->\n\t\t<div class=\"normalCardBorder\" onclick=\"genericHeaderClicked(this)\" style=\"font-family: sans-serif; background-color: #f2f2f2;border-bottom: 3px solid white; padding: 8px; overflow:auto; overflow-x:hidden\">\n\t\t\t<div data-section=\"cell\">\n\n\t\t\t\t\t<div class=\"container flex\" style=\"margin: 8px 8px 4px 0;width:99.5%;\" >\n\t\t\t\t\t\t<div class=\"flex\"  style=\"border-right: 0.98px solid #9b9b9bff;  width:100%;\">\n\t\t\t\t\t\t\t<div class=\"iconWidth\">\n\t\t\t\t\t\t\t  \t <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"43\" width=\"43\">\n\t\t\t\t\t\t\t\t\t<g style=\"fill:#d74423;fill-opacity:1\" transform=\"matrix(0.39670883,0,0,-0.35820296,-163.19829,457.34499)\" id=\"g18592-3-4\">\n\t\t\t\t\t\t\t\t\t   <path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#41505a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3.28444;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" d=\"m 422.01831,1230.034 -2.7745,0.01 h -6.77539 v 46.6876 h 34.66406 v -18.7899 l 0.0117,-2.4418 -3.30047,2.1251 -0.0296,0.3167 v 15.5389 h -28.02734 v -39.7576 l 3.4746,-0.01 2.72883,0.01 c 0,-1.2216 0.0281,-1.332 0.0281,-3.6862 z\" id=\"path18578-0-7\"></path>\n\t\t\t\t\t\t\t\t\t   <path style=\"fill:#000000;fill-opacity:0;stroke:#41505a;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 445.0059,1251.8235 8.49957,-5.6176 0.20237,-15.2629 H 426.5017 l -0.0127,15.8989 13.96358,7.8434 z\" id=\"path18580-0-48\"></path>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18582-5-4\" width=\"4.6674132\" height=\"4.8891621\" x=\"-435.84637\" y=\"1237.4868\" transform=\"scale(-1,1)\"></rect>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18584-0-2\" width=\"4.6674132\" height=\"4.8891621\" x=\"-448.59576\" y=\"1237.4868\" transform=\"scale(-1,1)\"></rect>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18586-3-79\" width=\"21.868916\" height=\"5.0475268\" x=\"-440.74075\" y=\"1265.5631\" transform=\"scale(-1,1)\"></rect>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18588-6-6\" width=\"21.868916\" height=\"5.0475268\" x=\"-440.74075\" y=\"1258.3362\" transform=\"scale(-1,1)\"></rect>\n\t\t\t\t\t\t\t\t\t   <path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#2c5aa0;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" d=\"m 418.87296,1251.0608 v 4.9964 h 15.96391 l -8.73278,-4.9964 z\" id=\"path18590-6-1\"></path>\n\t\t\t\t\t\t\t\t\t</g>    \n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t\t\t\t<div class=\"vertical-center setupContent\" >\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div class=\"capitalize\" data-value=\"CardName\" style=\"font-weight:bold;width:100%;\" >\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div data-value=\"CardAddress\" class=\"CardAddress\" >\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex\" tyle=\"float: right;width:100%;\">\n\n\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 5px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Urgent\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status1Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 10px; margin-right:10px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Important\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status2Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;margin-right: 12px;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Minor\">\n\t\t\t\t\t\t\t\t\t  --\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status3Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t</div>\n\n\t\t<!--End of Parent Card-->\n\n\n\t\t<div data-selector=\"Children\" style=\"display:none;\">\n\n\t\t</div>\n\n\t</div>\n</div>"},"ev":{}},"Generic#13":{"t":"Generic","lX":86,"lY":903,"sX":11.91,"sY":1.61,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"161.233px","x":"5%","y":"903px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setContent":{"channel":"setContent/set html","event":"set html","important":"false"},"setSelectorAction":{"channel":"setSelectorAction/set action","event":"set action","important":"false"}}}}},"Cancel":{"t":"Button","lX":0,"lY":1174,"sX":11.91,"sY":1.3,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"0px","y":"1379px"},"ver":"190104c190915","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Cancel"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancelAction/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Submit":{"t":"Button","lX":863,"lY":1174,"sX":11.91,"sY":1.3,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"50%","y":"1379px"},"ver":"190104c190915","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Submit"},"ev":{"clientEvents":{"inputEvents":{"setSubmitColor":{"channel":"setSubmitColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"save changes":{"channel":"SaveChanges/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"StatusTEmplate":{"t":"Scripting","lX":1448,"lY":431,"sX":1,"sY":1,"s":"Recommendation Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"83.88%","y":"50.24%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div class=\"topContainer\" id=\"Content\">\n\t<style>\n\t\t.setColor{\n\t\t\tbackground-color:#41505aff;\n\t\t\twidth:98%;\n\t\t\toverflow:hidden;\n\t\t\theight:98%;\n\t\t}\n\t\t.topContainer{\n\t\t\twidth:98%;\n\t\t\toverflow:hidden;\n\t\t\theight:97%;\n\t\t\tborder: 0.787px solid #6ec4f7ff;\n\t\t\tborder-radius: 11px;\n\t\t}\n\t\t.row{\n\t\t\tdisplay:flex;\n\t\t\theight: 100%;\n\t\t\twidth:100%;\n\t\t}\n\t\t.col-1{\n\t\t\twidth:10%;\n\t\t}\n\t\t.col-2{\n\t\t\twidth:20%;\n\t\t}\n\t\t.col-3{\n\t\t\twidth:30%;\n\t\t}\n\t\t.col-4{\n\t\t\twidth:40%;\n\t\t}\n\t\t.col-5{\n\t\t\twidth:50%;\n\t\t}\n\t\t.col-6{\n\t\t\twidth:60%;\n\t\t}\n\t\t.col-7{\n\t\t\twidth:70%;\n\t\t}\n\t\t.col-8{\n\t\t\twidth:80%;\n\t\t}\n\t\t.col-9{\n\t\t\twidth:90%;\n\t\t}\n\t\t.col-10{\n\t\t\twidth:100%;\n\t\t}\n\t\t.column{\n \t\t\theight: 100%;\n\t\t}\n\t\t.clearFix{\n\t\t\tborder-right:1px solid gray;\n\t\t}\n\t \n\t\t.active{\n\t\t\tbackground-color:#4d98c2ff;\n\t\t}\n\t\t.activeText{\n\t\t\tcolor:#4d98c2ff;\n\t\t    text-transform: uppercase;\n\n\t\t}\n\t\t.circleText{\n\t\t\tmargin-top: -7px;\n\t\t\tfont-size: 10px;\n\t\t\tcolor: white;\n\t\t}\n\t\t.Border{\n\t\t\tdisplay:flex;\n\t\t\n\t\t}\n        .btnHolder {\n            display: flex;\n            height: 100%;\n        }\n\n        .btnRow{\n            margin: 2%;\n            height: 50%;\n        }\n        .dot {\n            height: 81px;\n            width: 81px;\n            background-color: #bbb;\n            border-radius: 50%;\n            border: 5px solid #6ec4f7ff;\n            display: inline-block;\n        }\n\t\t\n\t\t.textLabel{\n\t\t\tcolor:white;\n\t\t\tfont-size:13px;\n\t\t}\n       \n        @media screen and (max-width: 1440px) {\n            .btnHolder {\n                margin-top: 1%;\n                display: flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        @media screen and (max-width: 1239px) {\n            .btnHolder {\n                margin-top: 1%;\n                display: flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n\n        }\n        @media screen and (max-width: 768px) {\n            .btnHolder{\n                margin-top: 3%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        \n        @media screen and (max-width: 427px) {\n            .btnHolder{\n                margin-top: 9%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 61px;\n                width: 61px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        @media screen and (max-width: 320px) {\n            #widget{\n                height: 107.233px !important;\n            }\n            .btnHolder{\n                margin-top: 6%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 31px;\n                width: 31px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n\t\t\t.textLabel{\n\t\t\t\tcolor:white;\n\t\t\t\tfont-size:13px;\n\t\t\t}\n        }\n      \n\n\t\t.innerContainer{\n\t\t\tdisplay:grid;\n\t\t\ttext-align:center;\n\t\t}\n        .btnUrgent{\n            background-color: #d74423ff;\n        }\n        .btnImportant{\n            background-color: #f88924ff;\n        }\n        .btnMinor{\n            background-color: #388b3dff;\n        }\n\t\n      \n\t</style>\n\n\n\t<div  class=\"btnHolder\" id=\"BtnContent\">\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|urgent')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot \" data-info=\"urgent\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n             </div>\n             <span  class=\"textLabel\">Urgent</span>\n\n\t\t</div>\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|important')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot\" data-info=\"important\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n\t\t\t </div>\n             <span class=\"textLabel\">Important</span>\n\n\t\t</div>\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|minor')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot btnMinor\" data-info=\"minor\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n             </div>\n             <span class=\"textLabel\">Minor</span>\n\n\t\t</div>\n\t\t\n\t</div>\n</div>"},"ev":{}},"Sidebar":{"t":"Generic","lX":0,"lY":0,"sX":0.48,"sY":13.79,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"2%","height":"1379","x":"0%","y":"0%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"SidebarAction":{"channel":"SidebarAction/set action","event":"set action","important":"false"},"setContentSidebar":{"channel":"setContentSidebar/set html","event":"set html","important":"false"}}}}},"SidebarTemplate":{"t":"Scripting","lX":1150,"lY":385,"sX":1,"sY":1,"s":"Recommendation Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"76.57%","y":"82.54%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div class=\"setColor\" id=\"CurrentContent\">\n\t<style>\n\t\t.setColor{\n\t\t\tbackground-color:#41505aff;\n\t\t\twidth:100%;\n\t\t\toverflow:hidden;\n\t\t\theight:100%;\n\t\t}\n\t\t.row{\n\t\t\tdisplay:flex;\n\t\t\theight: 100%;\n\t\t\twidth:100%;\n\t\t}\n        .Default{\n            background-color: #d74423ff;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n        }\n        .btnUrgent{\n            background-color: #d74423ff;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n        }\n        .btnImportant{\n            background-color: #f88924ff;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n        }\n        .btnMinor{\n            background-color: #388b3dff;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n        }\n\t</style>\n\n\n\t<div class=\"Default\" data-info=\"sidebarContent\">\n\t\t \n\t</div>\n</div>"},"ev":{}},"AdvisoryInputController":{"t":"Scripting","lX":1310,"lY":405,"sX":1,"sY":1,"s":"Recommendation Form","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.88%","x":"75.16%","y":"48.1%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: Handles bussiness logic related to update/create advisory.\n * Create Author/Date: Kristifor Milcbev 8/20/2020 \n * Modified Author/Date Date: \n * Version: 0.1\n */\n\n/**\n * Initialise script state (run once at startup)\n */\n\n//varible declarations\nvar ImageSelected = [];\nvar SelectedAdvisory = 3;\nvar stateModel = {};\nvar mode;\nvar Mode;\nvar TrapId;\nvar SelectedArea;\nvar AssignedAdvisory = \"Customer\";\nvar command;\nvar Customer;\nvar AdvStatus = \"0\";\nvar Caller = \"Recommendation List\";\nvar ImageGuid;\nvar lastId = 0;\nvar persistence;\nvar _UpdatePersistance;\n\nScript.on('init', function () {\n    //Script.setState(\"CallbaackPage\", \"New Report\");\n\n\n});\n\n\nScript.on('load', function () {\n\n    persistence = Script.getState(\"rodent-persistance\");\n\n    SelectedArea = persistence.LocationId;\n    TrapId = persistence.SiteId;\n    Customer = persistence.CustomerId;\n\n    try {\n        _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n        //  persistence.LastScreen = \"Recommendation Form\";\n        _UpdatePersistance(persistence);\n    }\n    catch (e) {\n        setTimeout(function () {\n            fw.func(\"JUMPSCREEN\", \"Initialisation\");\n        }, 3000);\n    }\n    //Setting init styles\n    var bgContainer = Script.getScriptElement(\"bgContainer\");\n    var lineTemplate = Script.getScriptElement(\"bookAdvisoriesLine\");\n\n    var cardTemplate = Script.getScriptElement(\"StatusTEmplate\");\n    var sidebarContent = Script.getScriptElement(\"SidebarTemplate\");\n    var iconSvg = Script.getScriptElement(\"IconSvg\");\n\n    ClientEvents.publish(\"clear-fix-line\", lineTemplate, false);\n    ClientEvents.publish(\"setTitleColor\", \"color:#6ec4f7ff;\", false);\n    ClientEvents.publish(\"SetImage\", \"../images/blank.png\");\n    ClientEvents.publish(\"thumb-clear\", \"\");\n\n\n    //ClientEvents.publish(\"setTitleColor\",\"font-size:12px;\",false);\n    enalbeSubmitButtion();\n\n    ClientEvents.publish(\"setDateColor\", \"color:#6ec4f7ff;\", false);\n\n    //ClientEvents.publish(\"SetColor\",\"#e01d1d\");\n    ClientEvents.publish(\"setCss\", bgContainer, false);\n\n    ClientEvents.publish(\"setDeleteColor\", { Property: \"width\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setDeleteColor\", { Property: \"height\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setDeleteColor\", { Property: \"color\", PropertyValue: \"white\" }, false);\n    ClientEvents.publish(\"setDeleteColor\", { Property: \"background-color\", PropertyValue: \"#d12d1b\" }, false);\n\n\n\n    ClientEvents.publish(\"setbtn1Color\", { Property: \"width\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setbtn1Color\", { Property: \"height\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setbtn1Color\", { Property: \"color\", PropertyValue: \"white\" }, false);\n    ClientEvents.publish(\"setbtn1Color\", { Property: \"background-color\", PropertyValue: \"#6ec3f6ff\" }, false);\n\n    ClientEvents.publish(\"setCancelColor\", { Property: \"width\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setCancelColor\", { Property: \"height\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setCancelColor\", { Property: \"color\", PropertyValue: \"white\" }, false);\n    ClientEvents.publish(\"setCancelColor\", { Property: \"background-color\", PropertyValue: \"#6ec3f6ff\" }, false);\n\n    //\tClientEvents.publish(\"setSubmitColor\",{Property: \"width\",PropertyValue:\"96%\"},false);\n    ClientEvents.publish(\"setSubmitColor\", { Property: \"height\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setSubmitColor\", { Property: \"color\", PropertyValue: \"white\" }, false);\n    ClientEvents.publish(\"setSubmitColor\", { Property: \"background-color\", PropertyValue: \"#6ec3f6ff\" }, false);\n\n    ClientEvents.publish(\"setContent\", cardTemplate, false);\n    ClientEvents.publish(\"setContentSidebar\", sidebarContent, false);\n    ClientEvents.publish(\"set-icon-svg\", iconSvg, false);\n    debugger;\n    var date = new Date();\n    var formated = formatDate(date, \"MM/dd/yy H:mm\")\n\n\n    ClientEvents.publish(\"AdvisoryDate\", formated);\n    ClientEvents.publish(\"BtnSubmit\", \"save\");\n    ClientEvents.publish(\"AdvisoryTitle\", \"SITE EVENTS\");\n\n    //End edit styles\n\n\n    SelectedArea = Script.getState(\"SelectedArea\");\n    // get the mode of the advisory, this is defined in the initialisation screen, in MenuTemplateRodent\n    // a 0 indicates a recommendation, a 1 indicates an incident\n    Mode = Script.getState(\"AdvisorySelected\");\n    console.log(Mode);\n    SelectType(\"minor\");\n    if (Mode === null || Mode === \"0\") {\n        fw.func(\"HIDEWIDGET\", \"btnDelete\"); // Hides the delete button\n        Mode = \"0\";\n        Database.readLastPrimaryKey(\"Rodent\", \"SiteEvents\", function (eventData) {\n            lastId = eventData.value;\n        });\n        ClientEvents.publish(\"setEventType\", \"Recommendation\");\n        stateModel.AdvType = \"Recommendation\";\n    }\n    else if (Mode === null || Mode === \"-1\") {\n        fw.func(\"HIDEWIDGET\", \"btnDelete\"); // Hides the delete button\n        Mode = \"0\";\n        Database.readLastPrimaryKey(\"Rodent\", \"SiteEvents\", function (eventData) {\n            lastId = eventData.value;\n        });\n        ClientEvents.publish(\"setEventType\", \"Incident\");\n        stateModel.AdvType = \"Incident\";\n    }\n\n    UpdatePersistance();\n\n\n    if (Mode !== \"0\" && Mode !== \"-1\") {\n        fw.func(\"SHOWWIDGET\", \"btnDelete\"); // Shows the delete button\n        ClientEvents.publish(\"AdvisoryTitle\", \"RECOMMENDATION\");\n        LoadAdvisoryData(Mode);\n    }\n\n    //Script.setState(\"CallbaackPage\", \"New Report\");\n    stateModel = {};\n\n    if (persistence.FormData !== '') {\n        stateModel = JSON.parse(persistence.FormData);\n        if (typeof stateModel === 'object' && stateModel !== null) {\n            if (stateModel.title !== undefined) {\n                ClientEvents.publish(\"SetAddress\", stateModel.title, false);\n            }\n            if (stateModel.Code !== undefined) {\n                ClientEvents.publish(\"SetCode\", stateModel.Code, false);\n            }\n            if (stateModel.Reason !== undefined) {\n                ClientEvents.publish(\"SetReason\", stateModel.Reason, false);\n            }\n            if (stateModel.ResolutionNotes !== undefined) {\n                ClientEvents.publish(\"SetResolution\", stateModel.ResolutionNotes, false);\n            }\n            if (stateModel.AssignedAdvisory !== undefined) {\n                ClientEvents.publish(\"selectAssignee\", stateModel.AssignedAdvisory, false);\n            }\n            if (stateModel.AdvStatus !== undefined) {\n                ClientEvents.publish(\"statusChanged\", stateModel.AdvStatus, false);\n\n                switch (stateModel.Priority) {\n                    case \"1\":\n                        SelectType(\"urgent\");\n                        break;\n\n                    case \"2\":\n                        SelectType(\"important\");\n                        break;\n\n                    case \"3\":\n                        SelectType(\"minor\");\n                        break;\n\n                }\n            }\n            if (stateModel.ImageGuid !== undefined) {\n                get_carousel_images(stateModel.ImageGuid);\n            }\n        }\n        else {\n            stateModel = {};\n        }\n    }\n    ClientEvents.publish(\"toggle-switch\", \"1\", false);\n});\n\n\nClientEvents.subscribe(\"cancelAction\", function (data) {\n\n    Script.setState(\"AdvisorySelected\", \"0\");\n    Mode = null;\n    persistence.FormData = \"\";\n    persistence.AdvisoryId = \"0\";\n    _UpdatePersistance(persistence);\n    fw.func(\"JUMPSCREEN\", Caller);\n});\n\nClientEvents.subscribe(\"EventTypeChanged\", function (data) {\n    debugger;\n    stateModel.AdvType = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"AddressChanged\", function (data) {\n    stateModel.title = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"CodeChanged\", function (data) {\n    stateModel.Code = data.value;\n    UpdatePersistance();\n});\nClientEvents.subscribe(\"CodeChanged\", function (data) {\n    stateModel.Code = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"CommentChanged\", function (data) {\n    stateModel.Comment = data.value;\n    UpdatePersistance();\n});\nClientEvents.subscribe(\"ReasonChanged\", function (data) {\n    stateModel.Reason = data.value;\n    UpdatePersistance();\n});\nClientEvents.subscribe(\"ResolutionChanged\", function (data) {\n    stateModel.ResolutionNotes = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"Status\", function (data) {\n    stateModel.Status = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"ContextChanged\", function (data) {\n    stateModel.Context = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"AssigneeChanged\", function (data) {\n    AssignedAdvisory = data.value;\n    stateModel.AssignedAdvisory = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"statusChecked\", function (data) {\n\n    AdvStatus = data.value;\n    stateModel.AdvStatus = data.value;\n    UpdatePersistance();\n});\n\n\nClientEvents.subscribe(\"TakePhoto\", function (currentData) {\n    if (formCotrol === 0) {\n        Client.alert(\"You don't have adequate permission to update recommendation events\");\n        return;\n    }\n    var base64String = null;\n    var reader = new FileReader();\n    var data = null;\n    var imageName;\n    Client.selectFiles(\".png,.jpg,.jpeg,.gif\", function (fileData) {\n        data = fileData;\n        reader.readAsDataURL(data[0]);\n        Client.startLoadingSpinner();\n    });\n\n    reader.onloadend = function (file) {\n\n        console.log(reader.result);\n        base64String = reader.result;\n\n        if (base64String === null) {\n            return;\n        }\n        var dto = {};\n        dto.imagebase64 = base64String;\n        dto.data = data;\n        dto.fileName = new Date().getTime() + \"_\" + dto.data[0].name;\n        Client.saveImage(dto.imagebase64, function (current) {\n\n            var packet = {\n                method: \"append\",\n                src: \"../userfiles/\" + current.value\n            };\n            ClientEvents.publish(\"ReceiveImage\", packet, false);\n            ClientEvents.publish(\"SetImage\", packet.src);\n\n            ImageSelected.push(current.value);\n            UpdatePersistance()\n\n            Client.stopLoadingSpinner();\n        },\n            {\n                location: \"userfiles\",\n                fileType: \"IMAGE\",\n                fileName: dto.fileName,\n            });\n\n    };\n\n\n    // ImageSelected =  \n\n});\n\n\n\nfunction getImage() {\n\n    var reader = new FileReader();\n    var f = document.getElementById(\"file-select\").files;\n\n    reader.onloadend = function () {\n        console.log(reader.result);\n    };\n    reader.readAsDataURL(f[0]);\n\n}\n\n\nClientEvents.subscribe(\"thumb-pressed\", function (data) {\n\n    var getLast = data.value.src.split(\"/\");\n    var last = getLast[getLast.length - 1];\n    ClientEvents.publish(\"SetImage\", \"../userfiles/\" + last);\n    UpdatePersistance();\n});\n\n\n\n\nClientEvents.subscribe(\"SaveChanges\", function (data) {\n\n    if (formCotrol === 0) {\n        Client.alert(\"You don't have adequate permission to update recommendation events\");\n        return;\n    }\n\n    if (Mode === \"0\") {\n        SaveNewReport();\n    }\n    else {\n        UpdateSiteAdvisory();\n    }\n\n});\n\n\nClientEvents.subscribe(\"CancelChanges\", function (data) {\n\n    Script.setState(\"AdvisorySelected\", \"0\");\n    Mode = null;\n    persistence.FormData = \"\";\n    persistence.AdvisoryId = \"0\";\n    _UpdatePersistance(persistence);\n    fw.func(\"JUMPSCREEN\", Caller);\n});\n\nClientEvents.subscribe(\"DeleteAdvisory\", function (data) {\n\n    if (formCotrol === 0) {\n        Client.alert(\"You don't have adequate permission to update recommendation events\");\n        return;\n    }\n    var result = Client.confirm(\"Are you sure you want to delete this record?\", \"Delete Recommendation\");\n    result.then(result => {\n        if (result) {\n            var paramDelete = [{\n                Sql: \"Delete from SiteEvents where Id = $Id\",\n                Data: [{\n                    Column: \"$Id\",\n                    value: Mode\n                }]\n            }];\n            Database.cudParam(\"Rodent\", \"SiteEvents\", paramDelete, function (data) {\n                fw.func(\"JUMPSCREEN\", Caller);\n            });\n        }\n    });\n});\n\n\nfunction LoadAdvisoryData(id) {\n    var getAdvisory =\n        [{\n            \"TableName\": \"SiteEvents\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\",\n                    \"Context\",\n                    \"location\",\n                    \"reason\",\n                    \"title\",\n                    \"SiteEventType\",\n                    \"SiteEventPriority\",\n                    \"assigned\",\n                    \"SiteEventStatus\",\n                    \"Images\",\n                    \"SiteEventDate\",\n                    \"ResolutionNotes\"\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"Id\",\n                        \"ParamName\": \"AdvId\",\n                        \"Value\": id\n                    }\n                ]\n        }];\n    Database.readCompound(\"rodent\", \"SiteEvents\", getAdvisory, function (currentData) {\n\n        var advisoryData;\n        for (var item in currentData.value.data) {\n            advisoryData = currentData.value.data[item];\n        }\n\n        if (advisoryData === undefined) {\n            return;\n        }\n\n\n        stateModel.Code = advisoryData[1];\n        stateModel.Reason = advisoryData[2];\n        stateModel.title = advisoryData[3];\n        stateModel.AdvType = advisoryData[4];\n        stateModel.Priority = advisoryData[5];\n        stateModel.AssignedAdvisory = advisoryData[6];\n        stateModel.AdvStatus = advisoryData[7];\n        stateModel.ImageGuid = advisoryData[8];\n        stateModel.SetDate = advisoryData[9];\n        stateModel.ResolutionNotes = advisoryData[10];\n\n        SelectedAdvisory = advisoryData[5];\n        AssignedAdvisory = advisoryData[6];\n        ImageGuid = advisoryData[8];\n        if (stateModel.AdvType !== undefined) {\n            ClientEvents.publish(\"SetEventType\", stateModel.AdvType, false);\n        }\n        if (stateModel.title !== undefined) {\n            ClientEvents.publish(\"SetAddress\", stateModel.title, false);\n        }\n        if (stateModel.Code !== undefined) {\n            ClientEvents.publish(\"SetCode\", stateModel.Code, false);\n        }\n        if (stateModel.Reason !== undefined) {\n            ClientEvents.publish(\"SetReason\", stateModel.Reason, false);\n        }\n        if (stateModel.ResolutionNotes !== undefined) {\n            ClientEvents.publish(\"SetResolution\", stateModel.ResolutionNotes, false);\n        }\n        if (stateModel.AssignedAdvisory !== undefined) {\n            ClientEvents.publish(\"selectAssignee\", stateModel.AssignedAdvisory, false);\n        }\n        if (stateModel.SetDate !== undefined) {\n            debugger\n            var date = new Date(parseInt(stateModel.SetDate));\n            var formated = formatDate(date, \"MM/dd/yy H:mm\")\n\n            ClientEvents.publish(\"AdvisoryDate\", formated);\n        }\n        if (stateModel.AdvStatus !== undefined) {\n            ClientEvents.publish(\"statusChanged\", stateModel.AdvStatus, false);\n        }\n\n        if (stateModel.Priority !== undefined) {\n            switch (stateModel.Priority) {\n                case \"1\":\n                    SelectType(\"urgent\");\n                    break;\n\n                case \"2\":\n                    SelectType(\"important\");\n                    break;\n\n                case \"3\":\n                    SelectType(\"minor\");\n                    break;\n\n            }\n        }\n        if (stateModel.ImageGuid !== undefined) {\n            get_carousel_images(stateModel.ImageGuid);\n        }\n    });\n}\n\n\nfunction SaveNewReport() {\n    debugger;\n    var imageKey = Script.generateGUID();\n    stateModel.ImageGuid = imageKey;\n    UpdatePersistance();\n    var dbVal = {};\n    var date = new Date();\n\n    if (!Validate()) {\n\n        return;\n    }\n\n    dbVal[\"Id\"] =\n    {\n        \"Id\": lastId + 1,\n        \"reason\": stateModel.Reason,\n        \"ResolutionNotes\": stateModel.ResolutionNotes,\n        \"location\": stateModel.Code,\n        \"title\": stateModel.title,\n        //\"comment\": stateModel.Comment,\n        //\"context\": stateModel.Context,\n        \"assigned\": AssignedAdvisory,\n        \"SiteEventType\": stateModel.AdvType,\n        \"SiteEventPriority\": SelectedAdvisory,\n        \"SiteEventStatus\": AdvStatus,\n        \"SiteId\": TrapId,\n        \"CustomerId\": Customer,\n        \"CompanyId\": persistence.CompanyId,\n        \"LocationId\": persistence.LocationId,\n        \"SiteEventDate\": date.getTime(),\n        \"Images\": imageKey\n    };\n\n    if (persistence.LocationId == null) {\n        delete dbVal[\"Id\"][\"LocationId\"];\n    }\n\n\n    Database.saveRecordParam(\"Rodent\", \"SiteEvents\", dbVal, function (result) {\n\n        if (ImageSelected.length === 0) {\n            stateModel = \"\";\n            Script.setState(\"AdvisorySelected\", \"0\");\n            Mode = null;\n            persistence.FormData = \"\";\n            persistence.AdvisoryId = \"0\";\n            _UpdatePersistance(persistence);\n            fw.func(\"JUMPSCREEN\", Caller);\n        }\n        Database.readLastPrimaryKey(\"Rodent\", \"photos\", function (response) {\n            lastId = response.value;\n            for (var key in ImageSelected) {\n                lastId += 1;\n                var image = ImageSelected[key];\n                var imageQuery = {};\n                imageQuery[\"Id\"] =\n                {\n                    \"Id\": lastId,\n                    \"key\": imageKey,\n                    \"value\": image,\n                };\n\n                Database.saveRecordParam(\"Rodent\", \"photos\", imageQuery, function (result) {\n                    stateModel = \"\";\n                    Script.setState(\"AdvisorySelected\", \"0\");\n                    Mode = null;\n                    persistence.FormData = \"\";\n                    persistence.AdvisoryId = \"0\";\n                    _UpdatePersistance(persistence);\n                    fw.func(\"JUMPSCREEN\", Caller);\n\n                });\n            }\n        });\n    });\n\n\n\n}\n\n\n\nfunction UpdateSiteAdvisory() {\n\n\n    if (!Validate()) {\n\n        return;\n    }\n\n\n    var dbVal = {};\n    dbVal[\"Id\"] =\n    {\n        \"Id\": Mode,\n        \"reason\": stateModel.Reason,\n        \"ResolutionNotes\": stateModel.ResolutionNotes,\n        \"title\": stateModel.title,\n        \"location\": stateModel.Code,\n        //\"comment\": stateModel.Comment,\n        //\"context\": stateModel.Context,\n        \"assigned\": AssignedAdvisory,\n        \"SiteEventType\": stateModel.AdvType,\n        \"SiteEventStatus\": AdvStatus,\n        \"SiteEventPriority\": SelectedAdvisory,\n    };\n\n    Database.saveRecordParam(\"Rodent\", \"SiteEvents\", dbVal, function (result) {\n\n        persistence.FormData = \"\";\n        persistence.AdvisoryId = \"0\";\n        _UpdatePersistance(persistence);\n        Database.readLastPrimaryKey(\"Rodent\", \"photos\", function (response) {\n            lastId = response.value;\n\n            if (ImageSelected.length === 0) {\n                Script.setState(\"AdvisorySelected\", \"0\");\n                fw.func(\"JUMPSCREEN\", Caller);\n            }\n            for (var key in ImageSelected) {\n                lastId += 1;\n                var image = ImageSelected[key];\n                var imageQuery = {};\n                imageQuery[\"Id\"] =\n                {\n                    \"Id\": lastId,\n                    \"key\": ImageGuid,\n                    \"value\": image,\n                };\n\n                Database.saveRecordParam(\"Rodent\", \"photos\", imageQuery, function (result) {\n\n                    stateModel = \"\";\n                    persistence.FormData = \"\";\n                    persistence.AdvisoryId = \"0\";\n                    _UpdatePersistance(persistence);\n                    Script.setState(\"AdvisorySelected\", \"0\");\n                    fw.func(\"JUMPSCREEN\", Caller);\n                });\n            }\n        });\n    });\n\n\n}\nClientEvents.subscribe(\"GenericActionMessage\", function (data) {\n    var msg = data.split(\"|\");\n    switch (msg[0]) {\n        case \"ActivateDeactivate\":\n            SelectType(msg[1]);\n            break;\n    }\n\n});\n\nfunction SelectType(type) {\n    switch (type) {\n        case \"urgent\":\n            SelectedAdvisory = \"1\";\n\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"CurrentContent|sidebarContent\",\n                \"Value\": \"btnUrgent\"\n            };\n            ClientEvents.publish(\"SidebarAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|urgent\",\n                \"Value\": \"dot btnUrgent\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|important\",\n                \"Value\": \"dot\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|minor\",\n                \"Value\": \"dot\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n\n            break;\n        case \"important\":\n            SelectedAdvisory = \"2\";\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"CurrentContent|sidebarContent\",\n                \"Value\": \"btnImportant\"\n            };\n            ClientEvents.publish(\"SidebarAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|urgent\",\n                \"Value\": \"dot\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|important\",\n                \"Value\": \"dot btnImportant\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|minor\",\n                \"Value\": \"dot\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n            break;\n        case \"minor\":\n            SelectedAdvisory = \"3\";\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"CurrentContent|sidebarContent\",\n                \"Value\": \"btnMinor\"\n            };\n            ClientEvents.publish(\"SidebarAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|urgent\",\n                \"Value\": \"dot\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|important\",\n                \"Value\": \"dot\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n            command =\n            {\n                \"Action\": \"setElementClass\",\n                \"Compoent\": \"widget\",\n                \"Id\": \"BtnContent|minor\",\n                \"Value\": \"dot btnMinor\"\n            };\n            ClientEvents.publish(\"setSelectorAction\", command, true);\n            break;\n    }\n}\n\n\n\n\n\nfunction populate_carousel(value) {\n\n    var keys = Object.keys(value.data);\n    var len = keys.length;\n\n    keys.forEach(function (key, index) {\n\n        var data = value.data[key];\n        var packet = {\n            method: \"append\",\n            src: \"../userfiles/\" + data[0],\n            //label: new Date(parseInt(data.datetime * 1000)).toLocaleString(\"en-AU\").replace(\",\", \"\"),\n        };\n        ClientEvents.publish(\"ReceiveImage\", packet);\n    });\n}\n\n\nfunction get_carousel_images(guid) {\n    ClientEvents.publish(\"SetImage\", \"../images/blank.png\");\n    var getPhotos =\n        [{\n            \"TableName\": \"photos\", // Specify the primary table used to construct the join request\n            \"Columns\":\n                [\n                    \"value\"\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"key\",\n                        \"ParamName\": \"Akey\",\n                        \"Value\": guid\n                    }\n                ]\n        }];\n\n    Database.readCompound(\"rodent\", \"photos\", getPhotos, function (dbResponse) {\n\n        var first = GetFirst(dbResponse.value.data);\n        if (first !== undefined) {\n            ClientEvents.publish(\"SetImage\", \"../userfiles/\" + first);\n        }\n\n        populate_carousel(dbResponse.value);\n    });\n\n}\n\n\nfunction GetFirst(data) {\n    var element;\n    for (var index in data) {\n        element = index;\n        break;\n    }\n    return element;\n}\n\nfunction UpdatePersistance() {\n    persistence.FormData = JSON.stringify(stateModel);\n    _UpdatePersistance(persistence);\n}\n\n\nfunction Validate() {\n    if (stateModel.title === \"\" || stateModel.title === undefined) {\n        //error\n        Client.alert(\"Title cannot be empty!\");\n        return false;\n    }\n\n    if (stateModel.Code === \"\" || stateModel.Code === undefined) {\n        Client.alert(\"Location/Floor cannot be empty!\");\n        return false;\n    }\n\n    if (AssignedAdvisory === \"\" || AssignedAdvisory === undefined) {\n        Client.alert(\"Assigner user cannot be empty!\");\n        return false;\n    }\n\n    if (AdvStatus === \"\" || AdvStatus === undefined) {\n        Client.alert(\"Advisory type must be selected from the radio box!\");\n        return false;\n    }\n\n    if (SelectedAdvisory === \"\" || SelectedAdvisory === undefined) {\n        //error\n        Client.alert(\"Please select state for the advisory!\");\n        return false;\n    }\n\n    return true;\n}\n\n\nfunction enalbeSubmitButtion() {\n\n    var user = Client.getUser();\n    //console.log(\"User is \" + user);\n    var selectUser = [\n        {\n            \"TableName\": \"users\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    //\"username\",\n                    \"accessrole\"\n\n\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": user // Value that you want to pass for comparison (any object)\n                    }\n                ]\n        }\n    ];\n\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        var accessRoleId = Object.values(eventData.value.data)[0];\n        console.log(\"Access role value is \" + accessRoleId);\n        var errorEnable = {};\n        if (accessRoleId === \"\" || accessRoleId == 0) {\n\n            return;\n\n        }\n        var filter = {\n            columns: \"Feature03\",\n            filter: \"Id=\" + accessRoleId\n        };\n\n        Database.readRecords(\"rodent\", \"UserAccessRole\", function (eventData) {\n\n            //console.log(\"Data read from user access role \" + JSON.stringify(eventData.value, null, 4));\n            var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n\n            if (provisioningAccess === 1) {\n\n                formCotrol = 1;\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n            }\n\n        }, filter);\n\n    });\n\n\n}\n\nfunction formatDate(date, format, utc) {\n    var MMMM = [\"\\x00\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var MMM = [\"\\x01\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    var dddd = [\"\\x02\", \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var ddd = [\"\\x03\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    function ii(i, len) { var s = i + \"\"; len = len || 2; while (s.length < len) s = \"0\" + s; return s; }\n\n    var y = utc ? date.getUTCFullYear() : date.getFullYear();\n    format = format.replace(/(^|[^\\\\])yyyy+/g, \"$1\" + y);\n    format = format.replace(/(^|[^\\\\])yy/g, \"$1\" + y.toString().substr(2, 2));\n    format = format.replace(/(^|[^\\\\])y/g, \"$1\" + y);\n\n    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;\n    format = format.replace(/(^|[^\\\\])MMMM+/g, \"$1\" + MMMM[0]);\n    format = format.replace(/(^|[^\\\\])MMM/g, \"$1\" + MMM[0]);\n    format = format.replace(/(^|[^\\\\])MM/g, \"$1\" + ii(M));\n    format = format.replace(/(^|[^\\\\])M/g, \"$1\" + M);\n\n    var d = utc ? date.getUTCDate() : date.getDate();\n    format = format.replace(/(^|[^\\\\])dddd+/g, \"$1\" + dddd[0]);\n    format = format.replace(/(^|[^\\\\])ddd/g, \"$1\" + ddd[0]);\n    format = format.replace(/(^|[^\\\\])dd/g, \"$1\" + ii(d));\n    format = format.replace(/(^|[^\\\\])d/g, \"$1\" + d);\n\n    var H = utc ? date.getUTCHours() : date.getHours();\n    format = format.replace(/(^|[^\\\\])HH+/g, \"$1\" + ii(H));\n    format = format.replace(/(^|[^\\\\])H/g, \"$1\" + H);\n\n    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;\n    format = format.replace(/(^|[^\\\\])hh+/g, \"$1\" + ii(h));\n    format = format.replace(/(^|[^\\\\])h/g, \"$1\" + h);\n\n    var m = utc ? date.getUTCMinutes() : date.getMinutes();\n    format = format.replace(/(^|[^\\\\])mm+/g, \"$1\" + ii(m));\n    format = format.replace(/(^|[^\\\\])m/g, \"$1\" + m);\n\n    var s = utc ? date.getUTCSeconds() : date.getSeconds();\n    format = format.replace(/(^|[^\\\\])ss+/g, \"$1\" + ii(s));\n    format = format.replace(/(^|[^\\\\])s/g, \"$1\" + s);\n\n    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();\n    format = format.replace(/(^|[^\\\\])fff+/g, \"$1\" + ii(f, 3));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])ff/g, \"$1\" + ii(f));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])f/g, \"$1\" + f);\n\n    var T = H < 12 ? \"AM\" : \"PM\";\n    format = format.replace(/(^|[^\\\\])TT+/g, \"$1\" + T);\n    format = format.replace(/(^|[^\\\\])T/g, \"$1\" + T.charAt(0));\n\n    var t = T.toLowerCase();\n    format = format.replace(/(^|[^\\\\])tt+/g, \"$1\" + t);\n    format = format.replace(/(^|[^\\\\])t/g, \"$1\" + t.charAt(0));\n\n    var tz = -date.getTimezoneOffset();\n    var K = utc || !tz ? \"Z\" : tz > 0 ? \"+\" : \"-\";\n    if (!utc) {\n        tz = Math.abs(tz);\n        var tzHrs = Math.floor(tz / 60);\n        var tzMin = tz % 60;\n        K += ii(tzHrs) + \":\" + ii(tzMin);\n    }\n    format = format.replace(/(^|[^\\\\])K/g, \"$1\" + K);\n\n    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;\n    format = format.replace(new RegExp(dddd[0], \"g\"), dddd[day]);\n    format = format.replace(new RegExp(ddd[0], \"g\"), ddd[day]);\n\n    format = format.replace(new RegExp(MMMM[0], \"g\"), MMMM[M]);\n    format = format.replace(new RegExp(MMM[0], \"g\"), MMM[M]);\n\n    format = format.replace(/\\\\(.)/g, \"$1\");\n\n    return format;\n}"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"},"New Event #2":{"channel":"$SYS/FILES/RESPONSE/+","event":"feed","important":"false"}}}}},"BaitBoxController":{"t":"Scripting","lX":180,"lY":215,"sX":1,"sY":1,"s":"Device Level","ps":{"enabled":false,"scalingType":"OK","width":"5.74%","height":"11.88%","x":"10.33%","y":"26.13%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=baitbox controller\n/**\n * Description: \n * Create Kristifor Milchev\n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar Sites = [];\nvar devices = {};\nvar ActiveDataSource;\nvar DefaultFloor;\nvar Packet;\nvar selectedLevel;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar activeFilter;\nvar persistence;\nvar _UpdatePersistance;\nconst ICONS = [\"smart.html\", \"regular.html\"];\nvar IsMobile = true;\nvar IsDesktop = !IsMobile;\nvar floorMapMenu;\nvar floorMapFileName;\nvar mapItems = [];\nvar reportControl = 0;\nvar isEdit = false;\n\nScript.on('init', function () {\n    ClientEvents.publish(\"animals\", [\"Fox\", \"Wild hog\", \"Dog\", \"Deer\", \"Feral Cat\"]);\n\n\n});\nScript.on('load', function () {\n    ClientEvents.publish(\"set-floor-map-mode\", 'true');\n    ClientEvents.publish(\"focus-category-floor\", 4, false);\n    ClientEvents.publish(\"remove-image\", true);\n    Database.readRecords('rodent', 'Maps', function (evntData) {\n        let collection = SensaCollection.load(evntData.value);\n        let filteredMap = collection.query((record, pk) => {\n            if (record['LocationId'] == persistence.LocationId && record['Status'] == 1) {\n                return true;\n            }\n        }).getFirst();\n        LoadDevices(persistence.LocationId, true)\n        if (filteredMap) {\n            persistence.MapId = filteredMap.Id;\n            ClientEvents.publish(\"toggle-element\", {\n                id: 'editFloorMapBtn',\n                visibility: 'inherit'\n            });\n            ClientEvents.publish(\"toggle-element\", {\n                id: 'deleteFloorMapBtn',\n                visibility: 'inherit'\n            });\n            floorMapFileName = filteredMap.Name;\n            ClientEvents.publish(\"set-floor-map-image\", {\n                src: filteredMap.ImageURL\n            });\n            ClientEvents.publish(\"load-floor-menu-icons\", {\n                type: 1,\n                source: ICONS\n            }, false);\n            ClientEvents.publish(\"focus-category-floor\", 1, false);\n            Database.readRecords('rodent', 'MapItems', function (evntData) {\n                let collection = SensaCollection.load(evntData.value);\n                let savedMapItems = [];\n                collection.query((record, pk) => {\n                    if (record['MapId'] == persistence.MapId) {\n                        return true;\n                    }\n                }).forEach(item => {\n                    for (var itm in devices) {\n                        var device = devices[itm];\n                        if (device[26] === (item.StationId || item.Title)) {\n                            item.state = device[4];\n                            item.deviceId = device[0];\n                        }\n                    }\n                    savedMapItems.push({\n                        url: item.IconUrl,\n                        x: item.PositionX,\n                        y: item.PositionY,\n                        label: item.StationId || item.Title,\n                        deviceId: item.DeviceId,\n                        dataLabel: item.dataLabel,\n                        uid: Script.generateGUID(),\n                        state: item.state,\n                        deviceId: item.deviceId\n                    });\n                });\n                debugger;\n                savedMapItems.forEach(item => {\n                    mapItems.push({\n                        UID: item.uid,\n                        iconUrl: item.url,\n                        id: undefined,\n                        label: item.label,\n                        x: item.x,\n                        y: item.y,\n                        state: item.state,\n                        deviceId: item.deviceId\n                    });\n                });\n                ClientEvents.publish(\"set-map-items\", savedMapItems);\n            });\n        } else {\n            persistence.MapId = null;\n        }\n    });\n    try {\n        persistence = Script.getState(\"rodent-persistance\");\n        _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n        persistence.LastScreen = \"Device Level\";\n        _UpdatePersistance(persistence);\n        LoadTresholds();\n        LoadCompanyProducts();\n        Script.setState(\"Caller\", \"Levels\");\n    } catch (e) {\n        setTimeout(function () {\n            fw.func(\"JUMPSCREEN\", \"Initialisation\");\n        }, 300);\n    }\n\n    _initializer = Script.getState(\"Initializer\");\n    _handleGeneric = Script.getState(\"HandleGeneric\");\n    _publishCommand = Script.getState(\"PublishCommand\");\n    _gotoPage = Script.getState(\"GotoPage\");\n    var seleceted = Script.getState(\"OldState\");\n    var cardTemplate = Script.inheritScript(\"MenuTemplateRodent\");\n    _initializer(cardTemplate, \"SetHtml\");\n    if (IsDesktop) {\n        floorMapMenu = Script.inheritScript(\"FloorMapMenu\");\n        _initializer(floorMapMenu, \"SetFloorMapMenuHtml\");\n    }\n\n    ClientEvents.publish(\"setSiteId\", persistence.SiteId);\n\n    // Set the current stationId for this Site\n    Database.readRecords(\"rodent\", \"Sites\", function (eventData) {\n        let stationId = eventData.value.getColumn(\"StationId\")[0];\n        ClientEvents.publish(\"SetCurrentStationId\", stationId);\n    }, {\n        filter: `Id='${persistence.SiteId}'`\n    });\n\n    // Get the station Ids of the other locations in the site\n    Database.readRecords(\"rodent\", \"Devices\", function (eventData) {\n        let stationIds = eventData.value.filter([\"StationId\"]);\n        ClientEvents.publish(\"SetAdjacentStationIds\", stationIds.data);\n    }, {\n        filter: `SiteId='${persistence.SiteId}'`\n    });\n\n\n    //var topMenuTemplate = Script.inheritScript(\"Menu\");\n    //_initializer(topMenuTemplate, \"setTopHtml\");\n\t//var topMenuTemplate = Script.inheritScript(\"Menu\");\n\tvar topMenuTemplate = Script.inheritScript(\"DeviceLevelMenu\");\n     //\n     //topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').setAttribute(\"hidden\", \"hidden\"); //.style.setProperty(\"visibility: hidden\"); //\"visibility: hidden\"\n\ttopMenuTemplate.querySelector('[data-value=\"swithToggle\"]').style.setProperty(\"visibility\", \"hidden\"); //\"visibility: hidden\"\n    //ClientEvents.publ\n                 //Clien\n     _initializer(topMenuTemplate, \"setTopHtml\");\n    //enableMaintainance();\n    var command = {\n        \"Action\": \"Hide\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"Hide\",\n        \"Compoent\": \"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddAdvisory\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\n    command = {\n        \"Action\": \"setVal\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": \" \",\n        \"Id\": \"PageName\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n\n    command = {\n        \"Action\": \"Change Generic Action\",\n        \"Compoent\": \"status\",\n        \"Value\": \"RodentGrid\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"siteVisits\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddReport\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisibility\",\n        \"Compoent\": \"maintenanceModeContainer\",\n        \"Value\": \"hidden\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n\n    selectedLevel = persistence.LocationId;\n\n    DefaultFloor = \"Floor 1\";\n    var GetSites = Script.getState(\"selectedSites\");\n\n    if (GetSites !== undefined && GetSites.length > 0) {\n        Sites = [persistence.LocationId];\n        ClientEvents.publish(\"CleanRodentCotent\", \"\", false);\n        GetParentName(persistence.LocationId);\n        LoadSites(Sites);\n    }\n    enableDeviceAction();\n    Script.setState(\"EnableProvisioning\", \"True\");\n\n\n    enalbeSubmitButtion();\n    HideSiteReports();\n    //enalbeSubmitButtion();\n\n    ClientEvents.publish(\"fCard\", {\n        value: \"All\"\n    }, false);\n\n});\n\n\nfunction enableDeviceAction() {\n\n    var user = Client.getUser();\n    //var topMenuTemplate = Script.inheritScript(\"Menu\");\n    var selectUser = [{\n        \"TableName\": \"users\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            //\"username\",\n            \"accessrole\"\n\n\n        ], // Specify the list of columns to take from the reference table.\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": user // Value that you want to pass for comparison (any object)\n            }]\n    }];\n    var deviceAction = 0;\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        try {\n\n            var accessRoleId = Object.values(eventData.value.data)[0][0];\n            if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId == null) {\n\n                //topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').setAttribute(\"hidden\", \"hidden\");//.style.setProperty(\"visibility: hidden\"); //\"visibility: hidden\"\n                ClientEvents.publish(\"deviceAction\", deviceAction);\n                return;\n            }\n            var filter = {\n                columns: \"Feature04\",\n                filter: \"Id=\" + accessRoleId\n            };\n\n            Database.readRecords(\"rodent\", \"UserAccessRole\", function (eventData) {\n                deviceAction = parseInt(Object.values(eventData.value.data)[0][0]);\n                //deviceAction = parseInt(Object.values(eventData.value.data)[0][1]);\n                ClientEvents.publish(\"deviceAction\", deviceAction);\n                /// _initializer(topMenuTemplate, \"setTopHtml\");\n                return;\n\n            }, filter);\n        } catch (error) {\n            ClientEvents.publish(\"deviceAction\", deviceAction);\n\n            return;\n        }\n\n    });\n\n\n}\n\nfunction enableMaintainance() {\n\n    var user = Client.getUser();\n    var topMenuTemplate = Script.inheritScript(\"DeviceLevelMenu\");\n    var selectUser = [{\n        \"TableName\": \"users\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            //\"username\",\n            \"accessrole\"\n\n\n        ], // Specify the list of columns to take from the reference table.\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": user // Value that you want to pass for comparison (any object)\n            }]\n    }];\n    var deviceAction = 0;\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        try {\n\n            var accessRoleId = Object.values(eventData.value.data)[0][0];\n            if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId == null) {\n\n                topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').setAttribute(\"hidden\", \"hidden\"); //.style.setProperty(\"visibility: hidden\"); //\"visibility: hidden\"\n                //ClientEvents.publish(\"setSiteId\", deviceAction);\n                _initializer(topMenuTemplate, \"setTopHtml\");\n\n            }\n            var filter = {\n                columns: \"Feature01\",\n                filter: \"Id=\" + accessRoleId\n            };\n\n            Database.readRecords(\"rodent\", \"UserAccessRole\", function (eventData) {\n                var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n                //deviceAction = parseInt(Object.values(eventData.value.data)[0][1]);\n\n                if (provisioningAccess === 0) {\n\n                    topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').setAttribute(\"hidden\", \"hidden\"); //.style.setProperty(\"visibility: hidden\"); //\"visibility: hidden\"\n\n                }\n                //ClientEvents.publish(\"setSiteId\", deviceAction);\n                _initializer(topMenuTemplate, \"setTopHtml\");\n                return;\n\n            }, filter);\n        } catch (error) {\n            //ClientEvents.publish(\"setSiteId\", deviceAction);\n            topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').setAttribute(\"hidden\", \"hidden\"); //.style.setProperty(\"visibility: hidden\"); //\"visibility: hidden\"\n\n            _initializer(topMenuTemplate, \"setTopHtml\");\n            return;\n        }\n    });\n}\n\nClientEvents.subscribe(\"SaveTimeWindow\", function (data) {\n    Database.readRecords('rodent', 'TimeWindow', function (evntData) {\n        let collection = SensaCollection.load(evntData.value);\n        let size = collection.size();\n        let filteredWindow = collection.query((record, pk) => {\n            if (record['DeviceId'] == data.value.id && record['LocationId'] == data.value.locationId && record['Status'] == 1) {\n                return true;\n            }\n        }).getFirst();\n        if (!filteredWindow) {\n            Database.readRecords('rodent', 'Devices', function (evntData) {\n                let devicesCollection = SensaCollection.load(evntData.value);\n                let filteredDevice = devicesCollection.query((record, pk) => {\n                    if (record['Id'] == data.value.id) {\n                        return true;\n                    }\n                }).getFirst();\n                let dbVal = {};\n                dbVal[size + 1] = {\n                    \"Id\": size + 1,\n                    \"DeviceId\": filteredDevice.Id,\n                    \"CompanyId\": filteredDevice.CompanyId,\n                    \"BranchId\": filteredDevice.BranchId,\n                    \"CustomerId\": filteredDevice.CustomerId,\n                    \"SiteId\": filteredDevice.SiteId,\n                    \"LocationId\": filteredDevice.LocationId,\n                    \"StartDate\": new Date().getTime(),\n                    \"EndDate\": '31/12/2199 ',\n                    \"CreatedBy\": fw.func(\"GETUSER\"),\n                    \"CreatedOn\": new Date().getTime(),\n                    \"ModifiedOn\": new Date().getTime(),\n                    \"Status\": '1',\n                    \"SystemCreated\": 'Y',\n                };\n                Database.saveRecordParam('rodent', 'TimeWindow', dbVal);\n            });\n        }\n    });\n});\nClientEvents.subscribe(\"UpdateTimeWindow\", function (data) {\n    Database.readRecords('rodent', 'TimeWindow', function (evntData) {\n        let collection = SensaCollection.load(evntData.value);\n        let filteredWindow = collection.query((record, pk) => {\n            if (record['DeviceId'] == data.value.id && record['Status'] == 1) {\n                return true;\n            }\n        }).getFirst();\n        let dbVal = {};\n        dbVal[filteredWindow.Id] = {\n            \"Id\": filteredWindow.Id,\n            \"EndDate\": new Date().getTime(),\n            \"Status\": '0',\n        };\n        Database.saveRecordParam('rodent', 'TimeWindow', dbVal);\n    });\n});\nClientEvents.subscribe(\"ChildCardToggled\", function (data) {\n\n    ClientEvents.publish(\"devsel\", data.value);\n});\n\nClientEvents.subscribe(\"LoadCardTraps\", function (data) {\n    LoadDevices(data);\n});\nClientEvents.subscribe(\"CardAdvisoryClicked\", function (data) {\n\n    var selectAdvisories = [{\n        \"TableName\": \"SiteEvents\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Id\",\n            \"Context\",\n            \"Location\",\n            \"Comment\",\n            \"title\",\n            \"SiteEventPriority\",\n            \"assigned\"\n\n        ], // Specify the list of columns to take from the reference table.\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"TrapId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"TrapId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": data.value // Value that you want to pass for comparison (any object)\n            }]\n    }];\n    Database.readCompound(\"rodent\", \"SiteEvents\", selectAdvisories, function (currentData) {\n\n        Script.setState(\"SelectedAdvisories\", currentData.value.data);\n        Script.setState(\"AdvisoryListCaller\", \"Device Level\");\n        fw.func(\"JUMPSCREEN\", \"Recommendation List\");\n    });\n});\n\n\nClientEvents.subscribe(\"AreaAdvisoriesClicked\", function (data) {\n\n    var currentArea = Script.getState(\"SelectedArea\");\n    var selectAdvisories = [{\n        \"TableName\": \"SiteEvents\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Id\",\n            \"Context\",\n            \"Location\",\n            \"Comment\",\n            \"title\",\n            \"SiteEventPriority\",\n            \"assigned\",\n            \"reason\"\n\n        ], // Specify the list of columns to take from the reference table.\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"LocationId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"AreaId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": currentArea // Value that you want to pass for comparison (any object)\n            }]\n    }];\n    Database.readCompound(\"rodent\", \"SiteEvents\", selectAdvisories, function (currentData) {\n        Script.setState(\"SelectedAdvisories\", currentData);\n        Script.setState(\"AdvisoryListCaller\", \"Device Level\");\n        fw.func(\"JUMPSCREEN\", \"Recommendation List\");\n    });\n});\n\nClientEvents.subscribe(\"FloorSelected\", function (data) {\n\n    var bindingData = SetActiveFloorData(ActiveDataSource, data.value);\n    Packet.value.data = bindingData;\n    ClientEvents.publish(\"test\", Packet);\n});\n\nClientEvents.subscribe(\"BackToAreas\", function (data) {\n\n    fw.func(\"JUMPSCREEN\", \"Levels\");\n});\n\nClientEvents.subscribe(\"children-populated\", function (data) {\n\n    var getSelectedBarcodeId = Script.getState(\"barcodeId\");\n    if (getSelectedBarcodeId !== null && getSelectedBarcodeId !== undefined || getSelectedBarcodeId === \"0\") {\n        ClientEvents.publish(\"open-child\", getSelectedBarcodeId);\n    }\n});\nClientEvents.subscribe(\"ChildCardToggled\", function (data) {\n\n    ClientEvents.publish(\"devsel\", data.value);\n});\n\nClientEvents.subscribe(\"ChangeBait\", function (data) {\n\n    var id = data.value.ID;\n    var compoundQeury = [{\n        \"TableName\": \"Devices\", // Specify the primary table used to construct the join request\n        \"Columns\": [\n            \"Id\",\n            \"DeviceRange\",\n            \"FullRange\",\n            \"BaitEnalbed\"\n\n\n        ],\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"Id\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": id // Value that you want to pass for comparison (any object)\n            }],\n\n    }];\n\n\n    Database.readCompound(\"rodent\", \"Devices\", compoundQeury, function (packet) {\n\n        var current;\n        for (var item in packet.value.data) {\n            var current = packet.value.data[item];\n        }\n        var resultValue = {\n            Event: data.value.Event,\n            ID: data.value.ID,\n            Form: data.value.form,\n            DeviceRange: current[1],\n            FullRange: current[2],\n            BaitEnalbed: current[3]\n        };\n        ClientEvents.publish(\"AddBait\", resultValue);\n    });\n\n    //ClientEvents.publish(\"devsel\", data.value);\n});\n\n\nClientEvents.subscribe(\"DeviceDetails\", function (data) {\n\n\n    var id = data.value;\n    var compoundQeury = [{\n        \"TableName\": \"Devices\", // Specify the primary table used to construct the join request\n        \"Columns\": [\n            \"Id\",\n            \"DeviceRange\",\n            \"PacketType\",\n            \"P1Weight\",\n            \"P2Weight\",\n            \"RebaitRange\",\n            \"L1\",\n            \"L2\",\n            \"PState\"\n\n        ],\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"Id\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": id // Value that you want to pass for comparison (any object)\n            }],\n\n    }];\n\n\n    Database.readCompound(\"rodent\", \"Devices\", compoundQeury, function (packet) {\n\n        var current;\n        for (var item in packet.value.data) {\n            var current = packet.value.data[item];\n        }\n        var resultValue = {\n            ID: id,\n            DeviceRange: current[1],\n            PacketType: current[2],\n            P1Weight: current[3],\n            P2Weight: current[4],\n            RebaitRange: current[5],\n            L1: current[6],\n            L2: current[7],\n            PState: current[8]\n        };\n        ClientEvents.publish(\"setDeviceDetails\", resultValue);\n    });\n\n\n    var errorCodeQuery = [{\n        Sql: \"select it.Id, it.DeviceId, it.IssueId, it.CreatedAt, ec.Description, tf.FileLocation from ErrorTransactions it join ErrorCodes ec on it.IssueId = ec.Id left join TroubleshootingFiles tf on tf.Id = ec.TroubleshootingHelp where it.DeviceId = $DeviceId AND it.IsActive = $isActive\",\n        Data: [{\n            Column: \"$DeviceId\",\n            value: id\n        },\n        {\n            Column: \"$isActive\",\n            value: '1'\n        }\n        ]\n    }];\n    Database.ReadRecordsParam(\"Rodent\", \"ErrorTransactions\", errorCodeQuery, function (packet) {\n\n        var current;\n        var result = [];\n        for (var item in packet.value.data) {\n            var current = packet.value.data[item];\n            result.push({\n                Id: current[0],\n                IssueId: current[2],\n                CreatedAt: current[3],\n                Description: current[4],\n                TroubleshootingHelp: current[5]\n            });\n        }\n\n        var user = Client.getUser();\n        var selectUser = [{\n            \"TableName\": \"users\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\": [\n                //\"username\",\n                \"accessrole\"\n\n\n            ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [{\n                    \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                    \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                    \"Value\": user // Value that you want to pass for comparison (any object)\n                }]\n        }];\n\n        Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n            try {\n                var accessRoleId = Object.values(eventData.value.data)[0][0];\n                var errorEnable = {};\n                if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId == null) {\n                    //Client.alert(\"You don't have sufficient adequate permission to delete this error\");\n                    //return;\n                    //fw.func(\"JUMPSCREEN\", \"Device Level\");\n                    result.push(0);\n                    ClientEvents.publish(\"setDeviceErrors\", result);\n                    // errorEnable.value = 0;\n                    return;\n                }\n                var filter = {\n                    columns: \"Feature05\",\n                    filter: \"Id=\" + accessRoleId\n                };\n\n                Database.readRecords(\"rodent\", \"UserAccessRole\", function (eventData) {\n                    var provisioningAccess = Object.values(eventData.value.data)[0][0];\n\n                    result.push(parseInt(provisioningAccess));\n                    ClientEvents.publish(\"setDeviceErrors\", result);\n                    //return 1;\n                }, filter);\n\n            } catch (error) {\n                result.push(0);\n                ClientEvents.publish(\"setDeviceErrors\", result);\n                // errorEnable.value = 0;\n                return;\n            }\n\n        });\n\n\n    });\n\n\n    //ClientEvents.publish(\"devsel\", data.value);\n});\n\nfunction LoadSites(sites) {\n\n    var filters = [];\n    for (var site in sites) {\n        var siteID = sites[site];\n        filters.push({\n            \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n            \"ParamName\": \"Location\" + siteID, // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n            \"Value\": siteID // Value that you want to pass for comparison (any object)\n        });\n\n    }\n    var compoundQeury = [{\n        \"TableName\": \"Locations\", // Specify the primary table used to construct the join request\n        \"Columns\": [\n            \"Id\",\n            \"Name\",\n            \"Description\"\n\n        ], // Specify the list of columns to take from the reference table.\n        \"JoinOn\": [\"Locations\"],\n        \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n            [{\n                \"Columns\": [\"count(*)\"],\n                \"TableName\": \"SiteEvents\",\n                \"CustomName\": \"Urgent\",\n                \"JoinTable\": \"SiteEvents\",\n                \"Filters\": [{\n                    \"Column\": \"LocationId\",\n                    \"ParamName\": \"Parent1\",\n                    \"Value\": \"Locations.Id\",\n                    \"IsParentRelated\": true\n                },\n                {\n                    \"Column\": \"SiteEventPriority\",\n                    \"ParamName\": \"AdvisoryType1\",\n                    \"Value\": 1,\n                    \"IsParentRelated\": false\n                },\n                {\n                    \"Column\": \"Status\",\n                    \"ParamName\": \"Status1\",\n                    \"Value\": \"1\",\n                    \"IsParentRelated\": false\n                },\n                ]\n            },\n            {\n                \"Columns\": [\"count(*)\"],\n                \"TableName\": \"SiteEvents\",\n                \"CustomName\": \"Important\",\n                \"JoinTable\": \"SiteEvents\",\n                \"Filters\": [{\n                    \"Column\": \"LocationId\",\n                    \"ParamName\": \"\",\n                    \"Value\": \"Locations.Id\",\n                    \"IsParentRelated\": true\n                },\n                {\n                    \"Column\": \"SiteEventPriority\",\n                    \"ParamName\": \"AdvisoryType2\",\n                    \"Value\": 2,\n                    \"IsParentRelated\": false\n                },\n                {\n                    \"Column\": \"Status\",\n                    \"ParamName\": \"Status2\",\n                    \"Value\": \"1\",\n                    \"IsParentRelated\": false\n                },\n                ]\n            },\n            {\n                \"Columns\": [\"count(*)\"],\n                \"TableName\": \"SiteEvents\",\n                \"CustomName\": \"Minor\",\n                \"JoinTable\": \"SiteEvents\",\n                \"Filters\": [{\n                    \"Column\": \"LocationId\",\n                    \"ParamName\": \"Parent3\",\n                    \"Value\": \"Locations.Id\",\n                    \"IsParentRelated\": true\n                },\n                {\n                    \"Column\": \"SiteEventPriority\",\n                    \"ParamName\": \"AdvisoryType3\",\n                    \"Value\": 3,\n                    \"IsParentRelated\": false\n                },\n                {\n                    \"Column\": \"Status\",\n                    \"ParamName\": \"Status3\",\n                    \"Value\": \"1\",\n                    \"IsParentRelated\": false\n                },\n\n                ]\n            },\n            {\n                \"Columns\": [\"count(*)\"],\n                \"TableName\": \"Devices\",\n                \"CustomName\": \"Danger\",\n                \"JoinTable\": \"Devices\",\n                \"Filters\": [{\n                    \"Column\": \"Devices.LocationId\",\n                    \"ParamName\": \"Parent4\",\n                    \"Value\": \"Locations.Id\",\n                    \"IsParentRelated\": true\n                },\n\n                {\n                    \"Column\": \"State\",\n                    \"ParamName\": \"State1\",\n                    \"Value\": 4,\n                    \"IsParentRelated\": false\n                },\n                {\n                    \"Column\": \"Status\",\n                    \"ParamName\": \"DStatus1\",\n                    \"Value\": 1,\n                    \"IsParentRelated\": false\n                }\n                ]\n            },\n            {\n                \"Columns\": [\"count(*)\"],\n                \"TableName\": \"Devices\",\n                \"CustomName\": \"Attention\",\n                \"JoinTable\": \"Devices\",\n                \"Filters\": [{\n                    \"Column\": \"Devices.LocationId\",\n                    \"ParamName\": \"Parent5\",\n                    \"Value\": \"Locations.Id\",\n                    \"IsParentRelated\": true\n                },\n\n                {\n                    \"Column\": \"State\",\n                    \"ParamName\": \"State2\",\n                    \"Value\": 3,\n                    \"IsParentRelated\": false\n                },\n                {\n                    \"Column\": \"Status\",\n                    \"ParamName\": \"DStatus2\",\n                    \"Value\": 1,\n                    \"IsParentRelated\": false\n                }\n                ]\n            },\n            {\n                \"Columns\": [\"count(*)\"],\n                \"TableName\": \"Devices\",\n                \"CustomName\": \"NoAction\",\n                \"JoinTable\": \"Devices\",\n                \"Filters\": [{\n                    \"Column\": \"Devices.LocationId\",\n                    \"ParamName\": \"Parent6\",\n                    \"Value\": \"Locations.Id\",\n                    \"IsParentRelated\": true\n                },\n                {\n                    \"Column\": \"State\",\n                    \"ParamName\": \"State3\",\n                    \"Value\": 2,\n                    \"IsParentRelated\": false\n                },\n                {\n                    \"Column\": \"Status\",\n                    \"ParamName\": \"DStatus3\",\n                    \"Value\": 1,\n                    \"IsParentRelated\": false\n                }\n                ]\n            },\n\n            ],\n        \"CustomColumnNames\": [{\n            \"Index\": 1,\n            \"BindingName\": \"CardName\"\n        },\n        {\n            \"Index\": 2,\n            \"BindingName\": \"CardAddress\"\n        },\n\n        ],\n        \"Filters\": filters // Filter options in case they are needed.\n    }];\n\n    Database.readSubQuery(\"rodent\", \"Sites\", compoundQeury, function (packet) {\n\n        ClientEvents.publish(\"SetHeaders\", packet, false);\n        ClientEvents.publish(\"toggleCard\", selectedLevel, false);\n\n    });\n}\n\nfunction LoadDevices(siteId, isOnLoad) {\n    var compoundQeury = [{\n        \"TableName\": \"Devices\", // Specify the primary table used to construct the join request\n        \"Columns\": [\n            \"Id\",\n            \"Status\",\n            \"BaitRate\",\n            \"Hours\",\n            \"State\",\n            \"SetTime\",\n            \"TriggerTime\",\n            \"Alert\",\n            \"CompanyProductId\",\n            \"SignalStatus\",\n            \"emptyBy\",\n            \"DeviceName\",\n            \"SignalStrenght\",\n            \"UpdateTime\",\n            \"DeviceType\",\n            \"Sid\",\n            \"DeviceNumber\",\n            \"Address\",\n            \"Expiry\",\n            \"FoodDate\",\n            \"DeviceBattery\",\n            \"CommunicationError\",\n            \"CalculatedWeight\",\n            \"DeviceRange\",\n            \"WeightConsumed\",\n            \"RebaitRange\",\n            \"EnteredWeight\",\n            \"StationId\",\n            \"Location\",\n            \"PacketType\",\n            \"ModelId\",\n            \"ErrorCodeFlag\"\n        ], // Specify the list of columns to take from the reference table.\n        \"CustomColumnNames\": [{\n            \"Index\": 29,\n            \"BindingName\": \"BaitTypeName\"\n        },\n\n\n        ],\n        \"JoinOn\": [\"Model\", \"CompanyProducts\", \"Locations\"],\n        \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n            [{\n                \"Columns\": [\"Name\"],\n                \"TableName\": \"CompanyProducts\",\n                \"JoinTable\": \"Devices\",\n            },\n            {\n                \"Columns\": [\"BatteryUpper\", \"BatteryLower\"],\n                \"TableName\": \"Model\",\n\n            }\n            ],\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"LocationId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"LocationId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": siteId // Value that you want to pass for comparison (any object)\n            }],\n\n    }];\n    Database.readCompound(\"rodent\", \"Devices\", compoundQeury, function (packet) {\n        if (isOnLoad) {\n            devices = packet.value.data;\n            mapItems.forEach(mapItem => {\n                mapItem.state = '';\n                for (var item in devices) {\n                    var device = devices[item];\n                    if (device[26] === mapItem.label) {\n                        mapItem.state = device[4];\n                        mapItem.deviceId = device[0];\n                    }\n                }\n            })\n            ClientEvents.publish(\"set-map-items\", mapItems.map(item => ({\n                url: item.iconUrl,\n                x: item.x,\n                y: item.y,\n                label: item.label,\n                uid: item.UID,\n                state: item.state\n            })));\n            return;\n        }\n        ClientEvents.publish(\"loadChildren\", packet, false);\n        devices = packet.value.data;\n        GetVisibleFilter();\n        ClientEvents.publish(\"changeVisibleCounter\", 1, false);\n        ClientEvents.publish(\"view-pointer-changed\", 1, false);\n    });\n}\n\n\nfunction SetActiveFloorData(activeSource, floor) {\n    var bindingData = [];\n    for (var item in activeSource) {\n        var currentItem = activeSource[item];\n        if (currentItem[17] === floor) {\n            bindingData.push(currentItem);\n        }\n    }\n    return bindingData;\n}\n\n\n//region Initialization Queries\nfunction LoadTresholds() {\n    var compoundQeury = [{\n        \"TableName\": \"Lookups\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Key\",\n            \"Value\"\n        ],\n\n    }];\n    Database.readComposite(\"rodent\", \"Lookups\", compoundQeury, [{\n        \"Column\": \"Key\",\n        \"Value\": \"thresholds\"\n    }], function (packet) {\n        ClientEvents.publish(\"loadTreshold\", packet, false);\n    });\n\n\n}\n\n\nfunction LoadCompanyProducts() {\n    var companyIdQuery = [{\n        Sql: \"select c.Id, l.name from Locations as l join Sites as s on l.RelativeId = s.id join Customers as cu on s.RelativeId = cu.Id Join Branches as b on cu.RelativeId = b.Id join Companies as c on b.RelativeId = c.Id where l.Id = $LocationId\",\n        Data: [{\n            Column: \"$LocationId\",\n            value: persistence.LocationId\n        }]\n    }];\n    Database.ReadRecordsParam(\"Rodent\", \"Locations\", companyIdQuery, function (packet) {\n        var current;\n        for (var item in packet.value.data) {\n            var current = packet.value.data[item];\n\n        }\n\n        var compoundQeury = [{\n            \"TableName\": \"CompanyProducts\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\": [\n                \"Id\",\n                \"Name\",\n                \"Expiry\",\n                \"LowerThreshold\",\n                \"UpperThreshold\",\n                \"WeightPerBlock\"\n            ],\n            \"Filters\": // Filter options in case they are needed.\n                [{\n                    \"Column\": \"CompanyId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                    \"ParamName\": \"CompanyId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                    \"Value\": current[0] // Value that you want to pass for comparison (any object)\n                },\n                {\n                    \"Column\": \"Status\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                    \"ParamName\": \"Status\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                    \"Value\": 1 // Value that you want to pass for comparison (any object)\n                }\n                ],\n        }];\n        Database.readCompound(\"rodent\", \"CompanyProducts\", compoundQeury, function (packet) {\n\n            var current;\n            var outgoingSource = [];\n            for (var val in packet.value.data) {\n\n                current = packet.value.data[val];\n                outgoingSource.push({\n                    Id: current[0],\n                    Name: current[1],\n                    Expiry: current[2],\n                    LowerThreshold: current[3],\n                    UpperThreshold: current[4],\n                    WeightPerBlock: current[5]\n                });\n            }\n            ClientEvents.publish(\"baitTypes\", outgoingSource, false);\n        });\n    });\n\n}\n\n//end region\n\n\nfunction GetParentName(id) {\n    var compoundQeury = [{\n        \"TableName\": \"Locations\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Name\"\n        ],\n        \"Filters\": [{\n            \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n            \"ParamName\": \"Id\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n            \"Value\": id // Value that you want to pass for comparison (any object)\n        }] // Specify the list of columns to take from the reference table.\n    }];\n    Database.readCompound(\"rodent\", \"Locations\", compoundQeury, function (packet) {\n        var current;\n        for (var val in packet.value.data) {\n            current = packet.value.data[val];\n        }\n        var command = {\n            \"Action\": \"setVal\",\n            \"Compoent\": \"RightPanel\",\n            \"Value\": current[0],\n            \"Id\": \"PageName\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n    });\n}\n\n\nfunction GetVisibleFilter() {\n\n    activeFilter = Script.getState(\"changeVisibleCounterVal\");\n    if (activeFilter === null) {\n        Script.setState(\"changeVisibleCounterVal\", 1);\n        activeFilter = 1;\n    }\n}\n\nClientEvents.subscribe(\"EventTransaction\", function (data) {\n    Database.readLastPrimaryKey(\"Rodent\", \"EventLogs\", function (eventData) {\n        var lastId = parseInt(eventData.value);\n        var Id = lastId + 1;\n        if (data.value.EventType == 1) {\n            Database.readRecords('rodent', 'Devices', function (evntData) {\n                let devicesCollection = SensaCollection.load(evntData.value);\n                let filteredDevice = devicesCollection.query((record, pk) => {\n                    if (record['Id'] == data.value.ID) {\n                        return true;\n                    }\n                }).getFirst();\n                if (filteredDevice.BaitEnalbed == 1) {\n                    Id = filteredDevice.EventTransactionId;\n                    upsertEventLog(Id, data);\n                } else {\n                    upsertEventLog(Id, data, function () {\n                        var dbReq = {};\n                        dbReq[data.value.ID] = {\n                            \"Id\": data.value.ID,\n                            \"BaitEnalbed\": 1,\n                            \"EventTransactionId\": Id\n                        };\n                        Database.updateRecord('rodent', 'Devices', dbReq);\n                    });\n                }\n            });\n        } else {\n            upsertEventLog(Id, data);\n        }\n        LoadDevices(persistence.LocationId, true)\n    });\n});\n\nfunction upsertEventLog(id, data, callback) {\n    var dbVal = {};\n    dbVal[id] = {\n        \"Id\": id,\n        \"DeviceId\": data.value.ID,\n        \"EventTypeId\": data.value.EventType,\n        \"CompanyProductId\": data.value.CompanyProductId,\n        \"Value\": data.value.Value,\n        \"CreatedOn\": data.value.CreatedOn,\n        \"CreatedBy\": data.value.CreatedBy,\n        \"Owner\": data.value.Owner\n    };\n    if (callback) {\n        // Update a record's values, Fails if the record does not exist.\n        Database.saveRecordParam(\"Rodent\", \"EventLogs\", dbVal, callback);\n    } else {\n        // Update a record's values, Fails if the record does not exist.\n        Database.saveRecordParam(\"Rodent\", \"EventLogs\", dbVal, function (data) {\n\n        });\n    }\n}\n\nClientEvents.subscribe(\"GenericActionMessage\", function (data) {\n    if (data === \"GoBack|null\") {\n        Script.setState(\"ReturningFromDevices\", true, false);\n    }\n    _handleGeneric(data);\n});\n\nClientEvents.subscribe(\"HandleGenericMessage\", function (data) {\n    let dataType = data.split(\"|\")[0];\n    switch (dataType) {\n        case \"SearchFor\":\n            ClientEvents.publish(\"fCard\", data.split(\"|\")[1], false);\n            break;\n        case \"AdjustSize\":\n            ClientEvents.publish(\"setPosition\", data.split(\"|\")[1], false);\n            break;\n        case \"FilterFor\":\n            ClientEvents.publish(\"fCard\", {\n                value: data.split(\"|\")[1]\n            }, false);\n            break;\n    }\n});\n\nClientEvents.subscribe(\"UploadFloorMap\", function (eventData) {\n    var base64String = null;\n    var reader = new FileReader();\n    var data = null;\n    var imageName;\n    reader.onloadend = function (file) {\n        base64String = reader.result;\n        if (base64String === null) {\n            return;\n        }\n        var dto = {};\n        dto.imagebase64 = base64String;\n        dto.data = data;\n        dto.fileName = new Date().getTime() + \"_\" + dto.data[0].name;\n        Client.saveImage(dto.imagebase64, function (current) {\n            if (persistence.MapId)\n                Database.deleteRecord('rodent', 'MapItems', 'MapId', persistence.MapId, function () {\n                    mapItems = [];\n                });\n            ClientEvents.publish(\"set-floor-map-mode\", 'true');\n            ClientEvents.publish(\"set-map-items\", []);\n            Client.stopLoadingSpinner();\n            floorMapFileName = dto.fileName;\n            ClientEvents.publish(\"set-floor-map-image\", {\n                src: `../userfiles/floormapImages/${dto.fileName}`\n            });\n            ClientEvents.publish(\"load-floor-menu-icons\", {\n                type: 1,\n                source: ICONS\n            }, false);\n            ClientEvents.publish(\"focus-category-floor\", 4, false);\n            ClientEvents.publish(\"toggle-element\", {\n                id: 'editFloorMapBtn',\n                visibility: 'inherit'\n            });\n            ClientEvents.publish(\"toggle-element\", {\n                id: 'deleteFloorMapBtn',\n                visibility: 'inherit'\n            });\n            fw.func(\"PUBLISHCLIENT\", \"edit-floor-plan\", 1);\n            fw.func(\"SHOWWIDGET\", \"SaveFloorMap\");\n        }, {\n            location: \"userfiles/floormapImages\",\n            fileType: \"IMAGE\",\n            fileName: dto.fileName,\n        });\n    };\n    Client.selectFiles(\".png,.jpg,.jpeg,.gif\", function (fileData) {\n        data = fileData;\n        reader.readAsDataURL(data[0]);\n        Client.startLoadingSpinner();\n    });\n\n\n});\n\nfunction updateMapItems() {\n    Database.deleteRecord('rodent', 'MapItems', 'MapId', persistence.MapId, function () {\n        Database.readLastPrimaryKey(\"rodent\", \"MapItems\", function (eventData) {\n            let lastId = parseInt(eventData.value);\n            let Id = lastId + 1;\n            mapItems.forEach((item, index) => {\n                let dbReq = {};\n                dbReq[Id + index] = {\n                    \"Id\": Id + index,\n                    \"MapId\": parseInt(persistence.MapId),\n                    \"IconUrl\": item.iconUrl,\n                    \"StationId\": item.iconUrl && item.label,\n                    \"PositionX\": item.x,\n                    \"PositionY\": item.y,\n                    \"Title\": !item.iconUrl ? item.label : '',\n                };\n                Database.saveRecordParam('rodent', 'MapItems', dbReq);\n            });\n            setTimeout(() => {\n                Client.stopLoadingSpinner();\n                isEdit = false;\n            }, 600);\n        });\n    });\n}\n\nClientEvents.subscribe(\"save-floor-map\", function (eventData) {\n    if (floorMapFileName) {\n        Client.startLoadingSpinner();\n        if (persistence.MapId) {\n            let dbReq = {};\n            dbReq[persistence.MapId] = {\n                \"Id\": persistence.MapId,\n                \"Name\": floorMapFileName,\n                \"ImageURL\": `../userfiles/floormapImages/${floorMapFileName}`,\n                \"ModifiedOn\": new Date().getTime(),\n                \"ModifiedBy\": fw.func(\"GETUSER\"),\n            };\n            Database.saveRecordParam('rodent', 'Maps', dbReq, updateMapItems);\n            ClientEvents.publish(\"set-floor-map-mode\", 'true');\n        } else {\n            Database.readLastPrimaryKey(\"Rodent\", \"Maps\", function (eventData) {\n                let lastId = parseInt(eventData.value);\n                let Id = lastId + 1;\n                persistence.MapId = Id;\n                let dbReq = {};\n                dbReq[Id] = {\n                    \"Id\": Id,\n                    \"Name\": floorMapFileName,\n                    \"ImageURL\": `../userfiles/floormapImages/${floorMapFileName}`,\n                    \"LocationId\": persistence.LocationId,\n                    \"DateAdded\": new Date().getTime(),\n                    \"CreatedOn\": new Date().getTime(),\n                    \"CreatedBy\": fw.func(\"GETUSER\"),\n                    \"Status\": '1'\n                };\n                Database.saveRecordParam('rodent', 'Maps', dbReq, updateMapItems);\n                ClientEvents.publish(\"set-floor-map-mode\", 'true');\n            });\n        }\n        ClientEvents.publish(\"focus-category-floor\", 4, false);\n    }\n});\n\nClientEvents.subscribe(\"on-floor-map-items-update\", function (eventData) {\n    mapItems = [];\n    for (var key in eventData.value) {\n        let data = eventData.value[key];\n        for (var item in devices) {\n            var device = devices[item];\n            if (device[26] === data.label) {\n                data = {\n                    ...data,\n                    state: device[4],\n                    deviceId: device[0],\n                };\n            }\n        }\n        mapItems.push(data);\n    }\n    ClientEvents.publish(\"set-map-items\", mapItems.map(item => ({\n        url: item.iconUrl,\n        x: item.x,\n        y: item.y,\n        label: item.label,\n        uid: item.UID,\n        state: item.state\n    })));\n});\n\nClientEvents.subscribe(\"edit-floor-plan\", function (data) {\n    isEdit = true;\n    ClientEvents.publish(\"set-floor-map-mode\", 'false');\n    ClientEvents.publish(\"focus-category-floor\", 1, false);\n});\n\nClientEvents.subscribe(\"delete-floor-map\", function (data) {\n    Client.startLoadingSpinner();\n    Database.deleteRecord('rodent', 'MapItems', 'MapId', persistence.MapId, function () {\n        Database.deleteRecord('rodent', 'Maps', 'Id', persistence.MapId, function () {\n            ClientEvents.publish(\"focus-category-floor\", 4, false);\n            ClientEvents.publish(\"remove-image\", true);\n            ClientEvents.publish(\"set-map-items\", []);\n            Client.stopLoadingSpinner();\n            ClientEvents.publish(\"toggle-element\", {\n                id: 'editFloorMapBtn',\n                visibility: 'hidden'\n            });\n            ClientEvents.publish(\"toggle-element\", {\n                id: 'deleteFloorMapBtn',\n                visibility: 'hidden'\n            });\n        });\n    });\n});\n\n// hide the reporting site radio button and plus button\nfunction HideSiteReports() {\n    var delayInMilliseconds = 100; //1 second\n\n    setTimeout(function () {\n        //your code to be executed after 1 second\n        console.log(\"Hiding site reports line 1500\");\n        var command = {\n            \"Action\": \"setVisible\",\n            \"Compoent\": \"AddReport\",\n            \"Value\": \"none\",\n        };\n        _publishCommand(command, \"activateGeneric\");\n        command = {\n            \"Action\": \"setVisible\",\n            \"Compoent\": \"siteVisits\",\n            \"Value\": \"none\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n        //enalbeSubmitButtion();\n\n        if (reportControl === 0) {\n\n            //accessOpen\n            console.log(\"Reporting seems to be 0\");\n            command = {\n                \"Action\": \"setVisible\",\n                \"Compoent\": \"OpenBtn\",\n                \"Value\": \"none\",\n            };\n            _publishCommand(command, \"activateGeneric\");\n        }\n        //accessOpen\n        // command = {//\n        //     \"Action\": \"setVisible\",\n        //     \"Compoent\": \"OpenBtn\",\n        //     \"Value\": \"none\",\n        // };\n        // _publishCommand(command, \"activateGeneric\");\n\n\n    }, delayInMilliseconds);\n\n\n\n}\n\nfunction accessOpen() {\n\n\n    // var delayInMilliseconds = 100\n    // setTimeout(function () {\n    //     //your code to be executed after 1 second\n    //     command = {\n    //         \"Action\": \"setVisible\",\n    //         \"Compoent\": \"OpenBtn\",\n    //         \"Value\": \"none\",\n    //     };\n    //     _publishCommand(command, \"activateGeneric\");\n    // }, delayInMilliseconds);\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"OpenBtn\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\n}\n\nfunction enalbeSubmitButtion() {\n\n    var user = Client.getUser();\n    var selectUser = [{\n        \"TableName\": \"users\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            //\"username\",\n            \"accessrole\"\n\n\n        ], // Specify the list of columns to take from the reference table.\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": user // Value that you want to pass for comparison (any object)\n            }]\n    }];\n\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        var accessRoleId = Object.values(eventData.value.data)[0][0];\n        var errorEnable = {};\n        if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId == null) {\n            //accessOpen();\n            return;\n        }\n        var filter = {\n            columns: \"Feature03\",\n            filter: \"Id=\" + accessRoleId\n        };\n\n        Database.readRecords(\"rodent\", \"UserAccessRole\", function (eventData) {\n            var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n\n            if (provisioningAccess === 1) {\n                //Client.alert(\"You don't have adequate permission to update site events\");\n                //Script.hideWidget(\"siteReportFormSubmitbtin\");\n                //formCotrol = 1;\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                //accessOpen();\n                reportControl = 1;\n            }\n\n        }, filter);\n\n    });\n\n}\n\nClientEvents.subscribe(\"highlightFloorMapItems\", function (data) {\n    const stationId = data.stationId;\n    if (stationId && !isEdit) {\n        ClientEvents.publish(\"highlight-map-item\", stationId);\n    } else {\n        ClientEvents.publish(\"highlight-map-item\", \"\");\n    }\n});\n\nClientEvents.subscribe(\"floor-map-item-click\", function (data) {\n    const item = mapItems.filter(mapItem => mapItem.label === data.value)\n    if (item.length > 0 && !isEdit) {\n        ClientEvents.publish(\"open-child\", item[0].deviceId);\n    }\n});","file name":"DeviceLevelController"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"Carousel#0":{"t":"Carousel","lX":86,"lY":638,"sX":21.45,"sY":1.14,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"90%","height":"113.856px","x":"5%","y":"693px"},"ver":"190104c190915","dis":false,"tt":"","a":{"per page":"4"},"ev":{"clientEvents":{"inputEvents":{"ReceiveImage":{"channel":"ReceiveImage/receive value","event":"receive value","important":"false"},"Remove":{"channel":"thumb-remove/remove slide","event":"remove slide","important":"false"},"Previous":{"channel":"thumb-previous/previous","event":"previous","important":"false"},"goTo":{"channel":"thumb-goTo/goTo","event":"goTo","important":"false"},"Next":{"channel":"thumb-next/next","event":"next","important":"false"},"Clear":{"channel":"thumb-clear/clear","event":"clear","important":"false"}},"outputEvents":{"Changed":{"channel":"thumb-changed/receive value","event":"onChange","trigger":"onChange","important":"false"},"Pressed":{"channel":"thumb-pressed/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"IconSvg":{"t":"Scripting","lX":1035,"lY":385,"sX":1,"sY":1,"s":"Recommendation Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"56.99%","y":"46.91%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"34\" width=\"34\">\n<g id=\"g14926\" transform=\"translate(-0.19518077,-0.19518077)\" style=\"width:100%;height:100%;\">\n    \n    <g id=\"g16648-2-7-1\" transform=\"matrix(0.39301533,0,0,-0.38059309,245.7737,398.44754)\" style=\"display:inline;stroke:#6dbbea;stroke-opacity:1\" >\n      <rect style=\"opacity:1;fill:none;fill-opacity:1;stroke:#6dbbea;stroke-width:3.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect5418-8-7-0-1\" width=\"40.356335\" height=\"41.608433\" x=\"-623.32709\" y=\"-1044.7333\" transform=\"scale(1,-1)\"/>\n      <rect transform=\"scale(1,-1)\" y=\"-1038.9415\" x=\"-618.78735\" height=\"7.3386645\" width=\"7.3386645\" id=\"rect7488-2-9-8\" style=\"opacity:1;fill:#6dbbea;fill-opacity:1;stroke:#6dbbea;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"/>\n      <path id=\"path5448-0-4-8-1-0-9-5\" d=\"m -607.90804,1033.0517 h 18.992\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#6dbbea;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"/>\n      <path id=\"path5448-0-4-8-1-3-0-8-8\" d=\"m -607.90804,1037.5947 h 18.992\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#6dbbea;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"/>\n      <rect transform=\"scale(1,-1)\" y=\"-1027.453\" x=\"-618.85553\" height=\"7.3386641\" width=\"7.3386641\" id=\"rect7488-4-1-5-28\" style=\"opacity:1;fill:#6dbbea;fill-opacity:1;stroke:#6dbbea;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"/>\n      <path id=\"path5448-0-4-8-1-6-7-3-8\" d=\"m -607.90804,1021.6163 h 18.992\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#6dbbea;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"/>\n      <path id=\"path5448-0-4-8-1-3-8-9-5-4\" d=\"m -607.90804,1026.1593 h 18.992\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#6dbbea;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"/>\n      <rect transform=\"scale(1,-1)\" y=\"-1016.1975\" x=\"-618.68079\" height=\"7.3386641\" width=\"7.3386641\" id=\"rect7488-4-2-24-2-7\" style=\"opacity:1;fill:#6dbbea;fill-opacity:1;stroke:#6dbbea;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"/>\n      <path id=\"path5448-0-4-8-1-6-1-6-0-6\" d=\"m -607.90804,1010.4315 h 18.992\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#6dbbea;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"/>\n      <path id=\"path5448-0-4-8-1-3-8-0-6-2-5\" d=\"m -607.90804,1014.9745 h 18.992\" style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#6dbbea;stroke-width:2.56135;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"/>\n    </g>\n  </g>\n</svg>"},"ev":{}},"Label#0":{"t":"Label","lX":1204,"lY":79,"sX":20.26,"sY":0.8,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"85%","height":"20px","x":"5%","y":"9%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{}}}},"Label#1":{"t":"Label","lX":293,"lY":20,"sX":11.91,"sY":2.53,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"4.99%","x":"17%","y":"2.38%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"22","label text":"<font color=\"#ffffff\">SITE VISIT REPORT</font>"},"ev":{"clientEvents":{"inputEvents":{"set title color":{"channel":"setTitleColor/apply css","event":"apply css","important":"false"},"AdvisoryTitle":{"channel":"AdvisoryTitle/receive value","event":"receive value","important":"false"}}}}},"Label#2":{"t":"Label","lX":86,"lY":41,"sX":20.26,"sY":0.8,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"85%","height":"20px","x":"5%","y":"5%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"set date color":{"channel":"setDateColor/apply css","event":"apply css","important":"false"},"AdvisoryDate":{"channel":"SetDate/receive value","event":"receive value","important":"false"}}}}},"Text Area#2":{"t":"Text Area","lX":86,"lY":189,"sX":21.45,"sY":1.5,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"90%","height":"150px","x":"5%","y":"22%"},"ver":"190104c190915","dis":false,"tt":"","a":{"label text":"Summary","color":"white"},"ev":{"clientEvents":{"inputEvents":{"sumarry":{"channel":"summary-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"summary changed":{"channel":"summary-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Button#2":{"t":"Button","lX":0,"lY":1003,"sX":11.91,"sY":0.87,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"40px","x":"0px","y":"117%"},"ver":"190104c190915","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Cancel"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#3":{"t":"Button","lX":863,"lY":1003,"sX":11.91,"sY":0.87,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"40px","x":"50%","y":"117%"},"ver":"190104c190915","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Submit"},"ev":{"clientEvents":{"inputEvents":{"setSubmitColor":{"channel":"setSubmitColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"save changes":{"channel":"save-changes/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Generic#14":{"t":"Generic","lX":86,"lY":718,"sX":21.45,"sY":2.48,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"90%","height":"19.57%","x":"5%","y":"87%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"report advisories preview":{"channel":"report-advisories-preview/set html","event":"set html","important":"false"},"advisories action":{"channel":"advisories-action/set action","event":"set action","important":"false"}}}}},"Button#4":{"t":"Button","lX":86,"lY":891,"sX":21.45,"sY":0.87,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"90%","height":"40px","x":"5%","y":"108%"},"ver":"190104c190915","dis":false,"tt":"","a":{"color":"orange strong","outline color":"white","text color":"white","button name":"View Recommendations"},"ev":{"clientEvents":{"inputEvents":{"setbtn1Color":{"channel":"setbtn1Color/set style property","event":"set style property","important":"false"}}}}},"Generic#15":{"t":"Generic","lX":0,"lY":421,"sX":19.57,"sY":4.74,"s":"Map","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"50%","x":"0px","y":"50%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"Generic#16":{"t":"Generic","lX":0,"lY":0,"sX":23.71,"sY":13.85,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"99.48%","height":"1385px","x":"0%","y":"0%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set html","event":"set html","important":"false"}}}}},"bgContainer":{"t":"Scripting","lX":900,"lY":380,"sX":1,"sY":1,"s":"Recommendation Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"width:100%;height:100%;background-color:#41505aff;\">\n\t\n</div>"},"ev":{}},"Generic#17":{"t":"Generic","lX":0,"lY":71,"sX":23.35,"sY":0.06,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"98%","height":"0.46%","x":"0%","y":"8.46%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"clear fix line":{"channel":"clear-fix-line/set html","event":"set html","important":"false"}}}}},"Generic#18":{"t":"Generic","lX":0,"lY":0,"sX":23.59,"sY":15.17,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"99%","height":"119.83%","x":"0%","y":"0%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"set css":{"channel":"set-css/set html","event":"set html","important":"false"}}}}},"reportBG":{"t":"Scripting","lX":830,"lY":15,"sX":1,"sY":1,"s":"Site Report Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"width:100%;height:100%;background-color:#41505aff;\">\n\t\n</div>"},"ev":{}},"lineTemplateReport":{"t":"Scripting","lX":695,"lY":15,"sX":1,"sY":1,"s":"Site Report Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"28.04%","y":"34.2%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"overflow:hiden; border-bottom:1.5px solid white; width:100%;\">\n\t<style>\n\t\tbody {\n\t\t\tfont-family: \"Open Sans\";\n\t\t\tfont-size: 16px;\n\t\t\tuser-select: none;\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: hidden;\n\t\t}\n\t</style>\n</div>"},"ev":{}},"AddEditReportController":{"t":"Scripting","lX":930,"lY":20,"sX":1,"sY":1,"s":"Site Report Form","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"53.93%","y":"1.72%"},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar selectedSite;\nvar model = {};\nvar newAdvisories = [];\nvar employess = {};\nvar employeeNames = {};\nvar state;\nvar SelectedArea;\nvar Customer;\nvar loadedTechId;\nvar formDataTrue = false;\nvar _UpdatePersistance;\nvar persistence;\nvar visitReasons = {};\n\nvar formCotrol = 0;\n\nScript.on('load', function () {\n    Script.setState(\"Caller\", \"Site Report List\");\n    persistence = Script.getState(\"rodent-persistance\");\n\n    var bgContainer = Script.getScriptElement(\"reportBG\");\n    var lineTemplate = Script.getScriptElement(\"lineTemplateReport\");\n    var reportAdvisories = Script.getScriptElement(\"ReportAdvisoriesTemplate\");\n\n    var reportIcon = Script.getScriptElement(\"ReportsSvgIcon\");\n    try {\n        _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n        persistence.LastScreen = \"Site Report Form\";\n        _UpdatePersistance(persistence);\n    }\n    catch (e) {\n        setTimeout(function () {\n            fw.func(\"JUMPSCREEN\", \"Initialisation\");\n        }, 3000);\n    }\n\n    enalbeSubmitButtion();\n    ClientEvents.publish(\"clear-fix-line\", lineTemplate, false);\n    ClientEvents.publish(\"set-css\", bgContainer, false);\n    ClientEvents.publish(\"report-advisories-preview\", reportAdvisories, false);\n\n    ClientEvents.publish(\"setDateColor\", \"color:#6ec4f7ff;\", false);\n    ClientEvents.publish(\"setbtn1Color\", { Property: \"width\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setbtn1Color\", { Property: \"height\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setbtn1Color\", { Property: \"color\", PropertyValue: \"white\" }, false);\n    ClientEvents.publish(\"setbtn1Color\", { Property: \"background-color\", PropertyValue: \"#6ec3f6ff\" }, false);\n\n\n    ClientEvents.publish(\"setCancelColor\", { Property: \"width\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setCancelColor\", { Property: \"height\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setCancelColor\", { Property: \"color\", PropertyValue: \"white\" }, false);\n    ClientEvents.publish(\"setCancelColor\", { Property: \"background-color\", PropertyValue: \"#6ec3f6ff\" }, false);\n\n    //\tClientEvents.publish(\"setSubmitColor\",{Property: \"width\",PropertyValue:\"96%\"},false);\n    ClientEvents.publish(\"setSubmitColor\", { Property: \"height\", PropertyValue: \"100%\" }, false);\n    ClientEvents.publish(\"setSubmitColor\", { Property: \"color\", PropertyValue: \"white\" }, false);\n    ClientEvents.publish(\"setSubmitColor\", { Property: \"background-color\", PropertyValue: \"#6ec3f6ff\" }, false);\n    ClientEvents.publish(\"set-icon-svg\", reportIcon, false);\n\n\n    LoadVisitReasons();\n    LoadEmployees();\n    SelectedArea = persistence.LocationId;\n    Customer = persistence.CustomerId;\n    selectedSite = persistence.SiteId;\n    if (selectedSite === null) {\n        selectedSite = 1;\n    }\n    state = Script.getState(\"GetReportId\");\n    if (state === 0 || state === \"0\") {\n        state = null;\n        LoadReports();\n    }\n\n    if (state !== undefined && state !== null) {\n        LoadReport(state);\n        ClientEvents.publish(\"AdvisoryTitle\", \"UPDATE REPORT\");\n        ClientEvents.publish(\"setTitleColor\", \"color:#6ec4f7ff;\", false);\n\n\n    }\n    else {\n        Database.readLastPrimaryKey(\"Rodent\", \"Reports\", function (eventData) {\n            var result = eventData.value;\n            model.Id = result + 1;\n        });\n\n        var date = new Date();\n        var dateFormated = formatDate(date, \"dd/MM/yyyy\");\n\n\n        model.Summary = \"\";\n        model.Signature = \"\";\n        model.SiteId = persistence.SiteId;\n\n        ClientEvents.publish(\"SetDate\", dateFormated, false);\n        //ClientEvents.publish(\"set-time\", model.Time,false);\t\n        ClientEvents.publish(\"setTitleColor\", \"color:#6ec4f7ff;\", false);\n        ClientEvents.publish(\"AdvisoryTitle\", \"REPORT\");\n    }\n\n    console.log(JSON.stringify(model));\n    //debugger;\n\n    if (persistence.FormData !== \"\") {\n        model = JSON.parse(persistence.FormData);\n        if (typeof model === 'object' && model !== null) {\n            if (!Exists(model.SetDate)) {\n                var date1 = new Date();\n                var dateFormated1 = formatDate(date1, \"dd/MM/yyyy\");\n                ClientEvents.publish(\"SetDate\", dateFormated1, false);\n\n                model.SetDate = new Date();\n            }\n            else {\n                ClientEvents.publish(\"SetDate\", model.SetDate, false);\n            }\n\n            if (!Exists(model.Time)) {\n                model.Time = new Date();\n            }\n            else {\n                ClientEvents.publish(\"set-time\", model.Time, false);\n            }\n\n            if (Exists(model.VisitReason)) {\n                ClientEvents.publish(\"visit-reason\", model.VisitReason, false);\n            }\n            if (Exists(model.Summary)) {\n                ClientEvents.publish(\"summary-value\", model.Summary, false);\n            }\n            if (Exists(model.Signature)) {\n                ClientEvents.publish(\"set-signature\", model.Signature, false);\n            }\n            formDataTrue = true;\n        }\n        else {\n\n            model = {};\n            var date1 = new Date();\n            var dateFormated1 = formatDate(date1, \"dd/MM/yyyy\");\n            ClientEvents.publish(\"SetDate\", dateFormated1, false);\n\n            model.SetDate = new Date();\n            model.Time = new Date();\n\n            model.Summary = \"\";\n            model.Signature = \"\";\n            model.SiteId = persistence.SiteId;\n\n        }\n    }\n});\n\n\n\n\nfunction enalbeSubmitButtion() {\n\n    var user = Client.getUser();\n    //console.log(\"User is \" + user);\n    var selectUser = [\n        {\n            \"TableName\": \"users\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    //\"username\",\n                    \"accessrole\"\n\n\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": user // Value that you want to pass for comparison (any object)\n                    }\n                ]\n        }\n    ];\n\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        var accessRoleId = Object.values(eventData.value.data)[0];\n        console.log(\"Access role value is \" + accessRoleId);\n        var errorEnable = {};\n        if (accessRoleId === \"\" || accessRoleId == 0) {\n\n            return;\n\n        }\n        var filter = {\n            columns: \"Feature03\",\n            filter: \"Id=\" + accessRoleId\n        };\n\n        Database.readRecords(\"rodent\", \"UserAccessRole\", function (eventData) {\n\n            //console.log(\"Data read from user access role \" + JSON.stringify(eventData.value, null, 4));\n            var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n\n            if (provisioningAccess === 1) {\n\n                formCotrol = 1;\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n            }\n\n        }, filter);\n\n    });\n\n\n}\nfunction LoadReport(eventData) {\n\n    var statePk = Script.getState(\"SelectedReportPk\");\n\n\n    var popupTemplate = Script.getScriptElement(\"AdvisoriesTemplate\");\n\n    var compoundQeury = [\n        {\n            \"TableName\": \"Reports\", // Specify the primary table used to construct the join request\n            \"Join\": 2, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\",\n                    \"SetDate\",\n                    \"Time\",\n                    \"VisitReason\",\n                    \"Summary\",\n                    \"SiteId\",\n                    \"Signature\",\n                    \"TechnicianId\"\n\n\n                ], // Specify the list of columns to take from the reference table.\n            \"JoinOn\": [\"SiteEvents\"],\n            \"JoinTable\": \"SiteEvents\",\n            \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n                [\n\n                    //Get Employee name \n                    {\n                        \"Columns\": [\"Name\"],\n                        \"TableName\": \"Employees\",\n                        \"CustomName\": \"Employee\",\n                        \"JoinTable\": \"Reports\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"Reports.TechnicianId\",\n                                \"ParamName\": \"Parent1\",\n                                \"Value\": \"Employees.Id\",\n                                \"IsParentRelated\": true\n                            }\n                        ]\n                    },\n                    //Open Advisories Count\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"UrgentCountOpen\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType1\",\n                                \"Value\": 1,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId01\",\n                                \"Value\": statePk,\n                                \"IsParentRelated\": false,\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status1\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"ImportantCountOpen\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType2\",\n                                \"Value\": 2,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId02\",\n                                \"Value\": statePk,\n                                \"IsParentRelated\": false,\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status2\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"MinorCountOpen\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType3\",\n                                \"Value\": 3,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId03\",\n                                \"Value\": statePk,\n                                \"IsParentRelated\": false,\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status3\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n                    //Closed Advisories Count\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"UrgentCountClosed\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType11\",\n                                \"Value\": 1,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId1\",\n                                \"Value\": statePk,\n                                \"IsParentRelated\": false,\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status11\",\n                                \"Value\": \"0\",\n                                \"IsParentRelated\": false\n                            },\n\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"ImportantCountClosed\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType22\",\n                                \"Value\": 2,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId2\",\n                                \"Value\": statePk,\n                                \"IsParentRelated\": false,\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status22\",\n                                \"Value\": \"0\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"MinorCountClosed\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType33\",\n                                \"Value\": 3,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId3\",\n                                \"Value\": statePk,\n                                \"IsParentRelated\": false,\n\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status33\",\n                                \"Value\": \"0\",\n                                \"IsParentRelated\": false\n                            },\n\n                        ]\n                    },\n                ],\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"ReportId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": statePk // Value that you want to pass for comparison (any object)\n                    }\n                ]\n        }];\n    Database.readSubQuery(\"rodent\", \"Reports\", compoundQeury, function (packet) {\n\n        var current;\n        for (var item in packet.value.data) {\n            current = packet.value.data[item];\n        }\n        var command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"UrgentCountOpen\",\n            \"Value\": current[9]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"ImportantCountOpen\",\n            \"Value\": current[10]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"MinorCountOpen\",\n            \"Value\": current[11]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"UrgentCountClosed\",\n            \"Value\": current[12]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"ImportantCountClosed\",\n            \"Value\": current[13]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"MinorCountClosed\",\n            \"Value\": current[14]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n\n        model.Id = current[0];\n        model.SetDate = new Date(current[1] * 1000);\n        model.Time = new Date(current[2] * 1000);\n        model.TechnicianId = current[7];\n        model.VisitReason = current[3];\n        model.Summary = current[4];\n        model.Signature = current[6];\n        model.SiteId = current[5];\n\n        if (Exists(model.SetDate)) {\n            var date1 = model.SetDate;\n            var dateFormated = formatDate(date1, \"dd/MM/yyyy\");\n\n            ClientEvents.publish(\"SetDate\", dateFormated, false);\n        }\n        if (Exists(model.Time)) {\n            ClientEvents.publish(\"set-time\", model.Time, false);\n        }\n        if (Exists(model.TechnicianId)) {\n            if (model.TechnicianId !== \"\") {\n                ClientEvents.publish(\"technician-name\", employeeNames[model.TechnicianId], false);\n            }\n        }\n        if (Exists(model.VisitReason)) {\n            ClientEvents.publish(\"visit-reason\", model.VisitReason, false);\n        }\n        if (Exists(model.Summary)) {\n            ClientEvents.publish(\"summary-value\", model.Summary, false);\n        }\n        if (Exists(model.Signature)) {\n            ClientEvents.publish(\"set-signature\", model.Signature, false);\n        }\n\n    });\n}\n\n\nClientEvents.subscribe(\"ReturnToReports\", function (data) {\n    model = \"\";\n    UpdatePersistance();\n    Script.setState(\"GetReportId\", 0);\n    fw.func(\"JUMPSCREEN\", \"Site Report List\");\n});\n\nClientEvents.subscribe(\"reason-changed\", function (data) {\n    var formData = Script.getForm(\"reasonForm\");\n    var option = formData[\"reasonForm\"];\n    if (typeof option !== \"string\" && !(option instanceof String)) {\n        option = \"\";\n    }\n\n    model.VisitReason = option;\n    UpdatePersistance();\n});\n\n\nClientEvents.subscribe(\"summary-changed\", function (data) {\n    model.Summary = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"technician-selected\", function (data) {\n\n    model.TechnicianId = employess[data.value];\n    // In case we lose connection and the page loads before the query for the employees we take the last employee name to populate it to avoid async error\n    model.Technician = data.value;\n    UpdatePersistance();\n});\n\n\nClientEvents.subscribe(\"signature-cleared\", function (data) {\n    ClientEvents.publish(\"clear-signature\", \"\", false);\n    model.Signature = \"\";\n    UpdatePersistance();\n});\nClientEvents.subscribe(\"get-signature\", function (data) {\n\n    model.Signature = data.value;\n    UpdatePersistance();\n});\n\nClientEvents.subscribe(\"cancel-btn\", function (data) {\n    model = \"\";\n    UpdatePersistance();\n    Script.setState(\"GetReportId\", 0);\n    fw.func(\"JUMPSCREEN\", \"Site Report List\");\n});\n\nClientEvents.subscribe(\"save-changes\", function (data) {\n    //debugger;\n    if (formCotrol === 0) {\n        Client.alert(\"You don't have adequate permission to update site events\");\n        return;\n    }\n    console.log(JSON.stringify(model));\n\n\n    model.SetDate = new Date();\n    model.Time = new Date();\n\n    var dbVal = {};\n    dbVal[\"Id\"] =\n    {\n        \"Id\": model.Id,\n        \"SetDate\": model.SetDate.getTime() / 1000,\n        \"Time\": model.Time.getTime() / 1000,\n        \"VisitReason\": model.VisitReason,\n        \"SiteId\": model.SiteId,\n        \"Summary\": model.Summary,\n        \"Signature\": model.Signature,\n        \"TechnicianId\": model.TechnicianId\n    };\n\n    Database.saveRecordParam(\"Rodent\", \"Reports\", dbVal, function (result) {\n\n        if (state !== undefined && state !== null) {\n            model = \"\";\n            UpdatePersistance();\n            Script.setState(\"GetReportId\", 0);\n            fw.func(\"JUMPSCREEN\", \"Site Report List\");\n        }\n\n\n    });\n    if (state === undefined || state === null) {\n        AssocaitedAdvisories();\n    }\n\n});\n\n\nfunction LoadReports() {\n\n    var compoundQeury = [\n        {\n            \"TableName\": \"Sites\", // Specify the primary table used to construct the join request\n            \"Join\": 2, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\"\n                ], // Specify the list of columns to take from the reference table.\n            \"JoinOn\": [\"Sites\"],\n            \"JoinTable\": \"SiteEvents\",\n            \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n                [\n                    //Open Advisories Count\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"UrgentCountOpen\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.SiteId\",\n                                \"ParamName\": \"Parent1\",\n                                \"Value\": \"Sites.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventsPriority\",\n                                \"ParamName\": \"AdvisoryType1\",\n                                \"Value\": 1,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId01\",\n                                \"Value\": null,\n                                \"IsParentRelated\": false,\n                                \"IsNull\": true,\n\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status1\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"ImportantCountOpen\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.SiteId\",\n                                \"ParamName\": \"\",\n                                \"Value\": \"Sites.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType2\",\n                                \"Value\": 2,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId02\",\n                                \"Value\": null,\n                                \"IsParentRelated\": false,\n                                \"IsNull\": true,\n\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status2\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"MinorCountOpen\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.SiteId\",\n                                \"ParamName\": \"Parent33\",\n                                \"Value\": \"Sites.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType3\",\n                                \"Value\": 3,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId03\",\n                                \"Value\": null,\n                                \"IsParentRelated\": false,\n                                \"IsNull\": true,\n\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status3\",\n                                \"Value\": \"1\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n                    //Closed Advisories Count\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"UrgentCountClosed\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.SiteId\",\n                                \"ParamName\": \"Parent11\",\n                                \"Value\": \"Sites.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType11\",\n                                \"Value\": 1,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId1\",\n                                \"Value\": null,\n                                \"IsParentRelated\": true,\n                                \"IsNull\": true,\n\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status11\",\n                                \"Value\": \"0\",\n                                \"IsParentRelated\": false\n                            },\n\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"ImportantCountClosed\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.SiteId\",\n                                \"ParamName\": \"\",\n                                \"Value\": \"Sites.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType22\",\n                                \"Value\": 2,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId2\",\n                                \"Value\": null,\n                                \"IsParentRelated\": true,\n                                \"IsNull\": true,\n\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status22\",\n                                \"Value\": \"0\",\n                                \"IsParentRelated\": false\n                            },\n                        ]\n                    },\n                    {\n                        \"Columns\": [\"count(*)\"],\n                        \"TableName\": \"SiteEvents\",\n                        \"CustomName\": \"MinorCountClosed\",\n                        \"JoinTable\": \"SiteEvents\",\n                        \"Filters\": [\n                            {\n                                \"Column\": \"SiteEvents.SiteId\",\n                                \"ParamName\": \"Parent33\",\n                                \"Value\": \"Sites.Id\",\n                                \"IsParentRelated\": true\n                            },\n                            {\n                                \"Column\": \"SiteEventPriority\",\n                                \"ParamName\": \"AdvisoryType33\",\n                                \"Value\": 3,\n                                \"IsParentRelated\": false\n                            },\n                            {\n                                \"Column\": \"ReportId\",\n                                \"ParamName\": \"ReportId3\",\n                                \"Value\": null,\n                                \"IsParentRelated\": true,\n                                \"IsNull\": true,\n\n                            },\n                            {\n                                \"Column\": \"SiteEventStatus\",\n                                \"ParamName\": \"Status33\",\n                                \"Value\": \"0\",\n                                \"IsParentRelated\": false\n                            },\n\n                        ]\n                    },\n                ],\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"SiteId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": selectedSite // Value that you want to pass for comparison (any object)\n                    }\n                ]\n        }];\n\n\n    Database.readSubQuery(\"rodent\", \"Reports\", compoundQeury, function (packet) {\n\n        var current;\n        for (var item in packet.value.data) {\n            current = packet.value.data[item];\n        }\n\n\n        var command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"UrgentCountOpen\",\n            \"Value\": current[1]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"ImportantCountOpen\",\n            \"Value\": current[2]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"MinorCountOpen\",\n            \"Value\": current[3]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"UrgentCountClosed\",\n            \"Value\": current[4]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"ImportantCountClosed\",\n            \"Value\": current[5]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n\n        command =\n        {\n            \"Action\": \"setProp\",\n            \"Id\": \"MinorCountClosed\",\n            \"Value\": current[6]\n        };\n        ClientEvents.publish(\"advisories-action\", command, false);\n    });\n}\n\nfunction LoadEmployees() {\n    var employeesQuery = [\n        {\n            \"TableName\": \"Employees\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\",\n                    \"Name\"\n\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"CustomerId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"CustomerId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": persistence.CustomerId // Value that you want to pass for comparison (any object)\n                    }\n                ]\n        }];\n\n    Database.readCompound(\"rodent\", \"Employees\", employeesQuery, function (eventData) {\n        var current;\n        for (var val in eventData.value.data) {\n            current = eventData.value.data[val];\n            model.TechnicianId = current[0];\n            ClientEvents.publish(\"technician-name\", current[1], false);\n            employess[current[1]] = current[0];\n            employeeNames[current[0]] = current[1];\n        }\n        if (formDataTrue === true) {\n            ClientEvents.publish(\"technician-name\", model.Technician, false);\n        }\n    });\n\n}\n\n\nfunction LoadVisitReasons() {\n    var compoundQeury = [\n        {\n            \"TableName\": \"Lookups\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Key\",\n                    \"Value\"\n                ],\n\n        }];\n    Database.readComposite(\"rodent\", \"Lookups\", compoundQeury, [\n        {\n            \"Column\": \"Key\",\n            \"Value\": \"VisitReason\"\n        }\n    ], function (packet) {\n        var current;\n        for (var val in packet.value.data) {\n\n            current = packet.value.data[val];\n            model.VisitReason = current[0];\n            ClientEvents.publish(\"visit-reason\", current[0], false);\n            visitReasons[current[1]] = current[0];\n        }\n\n        if (formDataTrue === true) {\n            ClientEvents.publish(\"visit-reason\", model.VisitReason, false);\n        }\n    });\n\n}\n\nfunction AssocaitedAdvisories() {\n    var selectAdvisories = [\n        {\n            \"TableName\": \"SiteEvents\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\"\n\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": // Filter options in case they are needed.\n                [\n                    {\n                        \"Column\": \"SiteId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"SiteId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": selectedSite // Value that you want to pass for comparison (any object)\n                    },\n                    {\n                        \"Column\": \"ReportId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                        \"ParamName\": \"ReportId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                        \"Value\": null, // Value that you want to pass for comparison (any object)\n                        \"IsNull\": true,\n\n                    }\n                ]\n        }];\n    Database.readCompound(\"rodent\", \"SiteEvents\", selectAdvisories, function (currentData) {\n\n        UpdateAdvisories(currentData);\n    });\n}\n\nfunction UpdateAdvisories(currentData) {\n\n    if (Object.keys(currentData.value.data).length === 0) // Check if the file is not an empty object {} otherwise it breaks the json in the SensaCollection when running the sql query.\n    {\n        UpdatePersistance();\n        Script.setState(\"GetReportId\", null);\n        fw.func(\"JUMPSCREEN\", \"Site Report List\");\n    }\n    var current;\n\n    for (var val in currentData.value.data) {\n        current = currentData.value.data[val];\n        var dbVal = {};\n        dbVal[\"Id\"] =\n        {\n            \"Id\": current[0],\n            \"ReportId\": model.Id.toString(),\n            \"CustomerId\": Customer,\n            \"CompanyId\": 1,\n            \"LocationId\": SelectedArea,\n        };\n        Database.saveRecordParam(\"Rodent\", \"SiteEvents\", dbVal, function (result) {\n\n            model = \"\";\n            UpdatePersistance();\n            Script.setState(\"GetReportId\", null);\n            fw.func(\"JUMPSCREEN\", \"Site Report List\");\n        });\n    }\n}\n\n\nfunction UpdatePersistance() {\n    persistence.FormData = JSON.stringify(model);\n    _UpdatePersistance(persistence);\n}\n\nfunction Exists(prop) {\n    if (prop !== undefined) {\n        return true;\n    }\n\n    return false;\n}\n\n\nfunction formatDate(date, format, utc) {\n    var MMMM = [\"\\x00\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var MMM = [\"\\x01\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    var dddd = [\"\\x02\", \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var ddd = [\"\\x03\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    function ii(i, len) { var s = i + \"\"; len = len || 2; while (s.length < len) s = \"0\" + s; return s; }\n\n    var y = utc ? date.getUTCFullYear() : date.getFullYear();\n    format = format.replace(/(^|[^\\\\])yyyy+/g, \"$1\" + y);\n    format = format.replace(/(^|[^\\\\])yy/g, \"$1\" + y.toString().substr(2, 2));\n    format = format.replace(/(^|[^\\\\])y/g, \"$1\" + y);\n\n    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;\n    format = format.replace(/(^|[^\\\\])MMMM+/g, \"$1\" + MMMM[0]);\n    format = format.replace(/(^|[^\\\\])MMM/g, \"$1\" + MMM[0]);\n    format = format.replace(/(^|[^\\\\])MM/g, \"$1\" + ii(M));\n    format = format.replace(/(^|[^\\\\])M/g, \"$1\" + M);\n\n    var d = utc ? date.getUTCDate() : date.getDate();\n    format = format.replace(/(^|[^\\\\])dddd+/g, \"$1\" + dddd[0]);\n    format = format.replace(/(^|[^\\\\])ddd/g, \"$1\" + ddd[0]);\n    format = format.replace(/(^|[^\\\\])dd/g, \"$1\" + ii(d));\n    format = format.replace(/(^|[^\\\\])d/g, \"$1\" + d);\n\n    var H = utc ? date.getUTCHours() : date.getHours();\n    format = format.replace(/(^|[^\\\\])HH+/g, \"$1\" + ii(H));\n    format = format.replace(/(^|[^\\\\])H/g, \"$1\" + H);\n\n    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;\n    format = format.replace(/(^|[^\\\\])hh+/g, \"$1\" + ii(h));\n    format = format.replace(/(^|[^\\\\])h/g, \"$1\" + h);\n\n    var m = utc ? date.getUTCMinutes() : date.getMinutes();\n    format = format.replace(/(^|[^\\\\])mm+/g, \"$1\" + ii(m));\n    format = format.replace(/(^|[^\\\\])m/g, \"$1\" + m);\n\n    var s = utc ? date.getUTCSeconds() : date.getSeconds();\n    format = format.replace(/(^|[^\\\\])ss+/g, \"$1\" + ii(s));\n    format = format.replace(/(^|[^\\\\])s/g, \"$1\" + s);\n\n    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();\n    format = format.replace(/(^|[^\\\\])fff+/g, \"$1\" + ii(f, 3));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])ff/g, \"$1\" + ii(f));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])f/g, \"$1\" + f);\n\n    var T = H < 12 ? \"AM\" : \"PM\";\n    format = format.replace(/(^|[^\\\\])TT+/g, \"$1\" + T);\n    format = format.replace(/(^|[^\\\\])T/g, \"$1\" + T.charAt(0));\n\n    var t = T.toLowerCase();\n    format = format.replace(/(^|[^\\\\])tt+/g, \"$1\" + t);\n    format = format.replace(/(^|[^\\\\])t/g, \"$1\" + t.charAt(0));\n\n    var tz = -date.getTimezoneOffset();\n    var K = utc || !tz ? \"Z\" : tz > 0 ? \"+\" : \"-\";\n    if (!utc) {\n        tz = Math.abs(tz);\n        var tzHrs = Math.floor(tz / 60);\n        var tzMin = tz % 60;\n        K += ii(tzHrs) + \":\" + ii(tzMin);\n    }\n    format = format.replace(/(^|[^\\\\])K/g, \"$1\" + K);\n\n    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;\n    format = format.replace(new RegExp(dddd[0], \"g\"), dddd[day]);\n    format = format.replace(new RegExp(ddd[0], \"g\"), ddd[day]);\n\n    format = format.replace(new RegExp(MMMM[0], \"g\"), MMMM[M]);\n    format = format.replace(new RegExp(MMM[0], \"g\"), MMM[M]);\n\n    format = format.replace(/\\\\(.)/g, \"$1\");\n\n    return format;\n}"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"ReportAdvisoriesTemplate":{"t":"Scripting","lX":1090,"lY":10,"sX":1,"sY":1,"s":"Site Report Form","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div class=\"flex\" style=\"height:100%\">\n\t <style>\n\t\t\n\t   .container {\n            display: block;\n            position: relative;\n            padding-left: 2px;\n            /* padding: 15px; */\n            cursor: pointer;\n            /* font-size: 22px; */\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }\n\t\t  .LabelStyle {\n            font-size: 7.5px;\n            justify-content: center;\n\t\t\tcolor:white;\n        }\n\t\t.flex {\n            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6, BB7 */\n            display: -ms-flexbox; /* TWEENER - IE 10 */\n            display: -webkit-flex; /* NEW - Safari 6.1+. iOS 7.1+, BB10 */\n            display: flex; /* NEW, Spec - Firefox, Chrome, Opera */\n            width: 100%;\n        }\n\t\t\n\t\t  .CardAddress {\n            display: inline-block;\n            word-wrap: break-word;\n            font-size: 10.5px;\n            width: 100%;\n        }\n\t\t\n\t\t .displayContainer {\n            display: inline-block;\n            text-align: end;\n        }\n\n        .UnderlineGreen {\n            width: 100%;\n            border: 3px solid #388b3d;\n            border-radius: 52px;\n            margin-top: 3.7px;\n            margin-bottom: 3.7px;\n        }\n\n        .UnderlineOrange {\n            width: 100%;\n            border: 3px solid #f88924ff;\n            border-radius: 52px;\n            margin-top: 3.7px;\n            margin-bottom: 3.7px;\n        }\n\n        .UnderlineRed {\n            width: 100%;\n            border: 3px solid #d74423ff;\n            border-radius: 52px;\n            margin-top: 3.7px;\n            margin-bottom: 3.7px;\n        }\n\n        .UnderlineGray {\n            width: 100%;\n            border: 3px solid gray;\n            border-radius: 52px;\n            margin-top: 3.7px;\n            margin-bottom: 3.7px;\n        }\n\n\n        .LabelStyle {\n            font-size: 7.5px;\n            justify-content: center;\n        }\n\t\t\n\t\t .ValueStyle {\n            font-size: 15.5px;\n            font-weight: bold;\n            color: white;\n        }\n\n\t  .CardWidth {\n            width: 99.5%;\n        }\n\n        .iconWidth {\n            width: 5%;\n        }\n\t\t.Label{\n\t\t\tfont-weight: bold;\n\t\t\twidth: 100%;\n\t\t\tcolor: white;\n\t\t\theight: 67px;\n\t\t\t/* position: absolute; */\n\t\t\tfont-size: 52px;\n\t\t\tmargin: 0;\n\t\t}\n\t\t\n        @media screen and (max-width: 2560px) {\n            .CardWidth {\n                width: 99.5%;\n            }\n\n          \n        }\n\n        @media screen and (max-width: 1504px) {\n            .CardWidth {\n                width: 99%;\n            }\n\n          \n        }\n\n        @media screen and (max-width: 1404px) {\n            .CardWidth {\n                width: 99%;\n            }\n\n           \n        }\n\n\n        @media screen and (max-width: 868px) {\n            .CardWidth {\n                width: 99%;\n            }\n\t\t\t\n\t\t\t.Label{\n\t\t\t\tfont-weight: bold;\n\t\t\t\twidth: 100%;\n\t\t\t\tcolor: white;\n\t\t\t\theight: 67px;\n\t\t\t\t/* position: absolute; */\n\t\t\t\tfont-size: 44px;\n\t\t\t\tmargin: 0;\n\t\t\t}\n \n        }\n\n\n        @media screen and (max-width: 722px) {\n            .CardWidth {\n                width: 99%;\n            }\n\t\t    .Label {\n\t\t\t    font-weight: bold;\n\t\t\t\twidth: 100%;\n\t\t\t\tcolor: white;\n\t\t\t\theight: 67px;\n\t\t\t\t/* position: absolute; */\n\t\t\t\tfont-size: 18px;\n\t\t\t\tpadding-top: 10%;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\n             \n        }\n\n \n        @media screen and (max-width: 427px) {\n            .CardWidth {\n                width: 97%;\n            }\n\n           \n        }\n\n        @media screen and (max-width: 320px) {\n            .CardWidth {\n                width: 97%;\n            }\n\t\t\t\n\t\t\t.Label {\n\t\t\t\tfont-weight: bold;\n\t\t\t\twidth: 100%;\n\t\t\t\tcolor: white;\n\t\t\t\theight: 67px;\n\t\t\t\t/* position: absolute; */\n\t\t\t\tfont-size: 14px;\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding-top: 8%;\n\t\t\t}\n\n            \n        }\n\t\t\n\t\t    @media screen and (max-width: 290px) {\n            .CardWidth {\n                width: 97%;\n            }\n\t\t\t\n\t\t\t.Label {\n\t\t\t\tfont-weight: bold;\n\t\t\t\twidth: 100%;\n\t\t\t\tcolor: white;\n\t\t\t\theight: 67px;\n\t\t\t\tposition: absolute;\n\t\t\t\tfont-size: 15px;\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding-top: 8%;\n\t\t\t}\n\t\t\t\t\n\t\t  @media screen and (max-width: 270px) {\n            .CardWidth {\n                width: 97%;\n            }\n\t\t\t\n\t\t\t.Label {\n\t\t\t\tfont-weight: bold;\n\t\t\t\twidth: 100%;\n\t\t\t\tcolor: white;\n\t\t\t\theight: 67px;\n\t\t\t\t/* position: absolute; */\n\t\t\t\tfont-size: 14px;\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding-top: 16%;\n\t\t\t}\n            \n        }\n\t\t\t\t\n\t\t  @media screen and (max-width: 270px and max-height:777px) {\n            .CardWidth {\n                width: 97%;\n            }\n\t\t\t\n\t\t\t.Label {\n\t\t\t    font-weight: bold;\n\t\t\t\twidth: 100%;\n\t\t\t\tcolor: white;\n\t\t\t\theight: 67px;\n\t\t\t\t/* position: absolute; */\n\t\t\t\tfont-size: 14px;\n\t\t\t\tpadding-top: 12%;\n\t\t\t\tmargin: 0;\n\t\t\t\t \n\t\t\t}\n\t\t\t  \n\t\t\t  \n            \n        }\n\t\t\n\t\t\n\n        .flex {\n            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6, BB7 */\n            display: -ms-flexbox; /* TWEENER - IE 10 */\n            display: -webkit-flex; /* NEW - Safari 6.1+. iOS 7.1+, BB10 */\n            display: flex; /* NEW, Spec - Firefox, Chrome, Opera */\n            width: 100%;\n            flex: 1;\n            display: flex;\n            flex-direction: row;\n            align-items: flex-start;\n            -webkit-display: flex;\n            -webkit-flex-direction: row;\n            -webkit-align-items: flex-start;\n        }\n\n        @supports (overflow:-webkit-marquee) and (justify-content:inherit) {\n            .flex {\n                display: -webkit-flex; /* NEW - Safari 6.1+. iOS 7.1+, BB10 */\n                flex: 1;\n                width: 100%;\n                flex-direction: row;\n                align-items: flex-start;\n                flex-wrap: wrap-reverse\n            }\n        }\n\t</style>\n\t<div class=\"container  \" style=\"width:100%;height: 100%;\">\n\t\t<div class=\"flex\" style=\"height: 50%;\">\n\t\t\t<div class=\"flex\" style=\"border-right: 0.98px solid #9b9b9bff;width:100%;height: 100%;\">\n\n\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t<div class=\"vertical-center setupContent\">\n\t\t\t\t\t<div class=\"row flex\">\n\t\t\t\t\t\t<div data-value=\"CardName\" class=\"Label\">\n\t\t\t\t\t\t\tOpen Recommendations\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex\" tyle=\"float: right;width:100%;\">\n\n\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 5px; width:100%;\">\n\t\t\t\t\t<span class=\"ValueStyle\" id=\"UrgentCountOpen\">0</span>\n\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\"></div>\n\t\t\t\t\t<span data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 10px; margin-right:10px; width:100%;\">\n\t\t\t\t\t<span class=\"ValueStyle\" id=\"ImportantCountOpen\">0</span>\n\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\"></div>\n\t\t\t\t\t<span data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;margin-right: 12px;\">\n\t\t\t\t\t<span class=\"ValueStyle\" id=\"MinorCountOpen\">0</span>\n\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\"></div>\n\t\t\t\t\t<span data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"flex\" style=\"height:50%\">\n\t\t\t\t<div class=\"flex\" style=\"border-right: 0.98px solid #9b9b9bff;width:100%;height: 100%;\">\n\n\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t<div class=\"vertical-center setupContent\">\n\t\t\t\t\t<div class=\"row flex\">\n\t\t\t\t\t\t<div data-value=\"CardName\" class=\"Label\">\n\t\t\t\t\t\t\tClosed Recommendations\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex\" tyle=\"float: right;width:100%;\">\n\n\t\t\t\t<div class=\"displayContainer\" style=\"text-align: center;margin-left: 5px;width:100%;/* height: 45px; */\">\n\t\t\t\t\t<span class=\"ValueStyle\" id=\"UrgentCountClosed\">0</span>\n\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\"></div>\n\t\t\t\t\t<span data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 10px; margin-right:10px; width:100%;\">\n\t\t\t\t\t<span class=\"ValueStyle\" id=\"ImportantCountClosed\">0</span>\n\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\"></div>\n\t\t\t\t\t<span data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;margin-right: 12px;\">\n\t\t\t\t\t<span class=\"ValueStyle\" id=\"MinorCountClosed\">0</span>\n\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\"></div>\n\t\t\t\t\t<span data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t</div>\n\n\t\n</div>\n</div>"},"ev":{}},"bookAdvisoriesLine":{"t":"Scripting","lX":710,"lY":215,"sX":1,"sY":1,"s":"Recommendation Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"28.04%","y":"34.2%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"overflow:hiden; border-bottom:1.5px solid white; width:100%;\">\n\t<style>\n\t\tbody {\n\t\t\tfont-family: \"Open Sans\";\n\t\t\tfont-size: 16px;\n\t\t\tuser-select: none;\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: hidden;\n\t\t}\n\t</style>\n</div>"},"ev":{}},"BookAdvisoriesLine":{"t":"Generic","lX":0,"lY":79,"sX":23.35,"sY":0.04,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"98%","height":"0.34%","x":"0%","y":"9.2%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"clear fix line":{"channel":"clear-fix-line/set html","event":"set html","important":"false"}}}}},"Dropdown#1":{"t":"Dropdown","lX":86,"lY":411,"sX":21.45,"sY":1,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"90%","height":"5.72%","x":"5%","y":"48%"},"ver":"190104c190915","dis":false,"tt":"","a":{"dirty on change":"true","default options":"","placeholder":"Name","label text":"Name","color":"white"},"ev":{"clientEvents":{"inputEvents":{"technician name":{"channel":"technician-name/receive value","event":"receive value","important":"false"}},"outputEvents":{"technician selected":{"channel":"technician-selected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"Signature#0":{"t":"Signature","lX":84,"lY":511,"sX":21.47,"sY":3.17,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"90.1%","height":"25.06%","x":"4.89%","y":"58.44%"},"ver":"190104c190915","dis":false,"tt":"","a":{"background color":"#ffffff","pen color":"#000000"},"ev":{"clientEvents":{"inputEvents":{"set signature":{"channel":"set-signature/set value","event":"set value","important":"false"},"clear signature":{"channel":"clear-signature/clear content","event":"clear content","important":"false"}},"outputEvents":{"get signature":{"channel":"get-signature/receive value","event":"Changed","trigger":"Changed","important":"false"}}}}},"Generic#20":{"t":"Generic","lX":86,"lY":10,"sX":0.4,"sY":0.4,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"40px","height":"40px","x":"5%","y":"1.12%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"set svg icon":{"channel":"set-icon-svg/set html","event":"set html","important":"false"}}}}},"Generic#21":{"t":"Generic","lX":86,"lY":9,"sX":0.4,"sY":0.4,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"OK","width":"40px","height":"40px","x":"5%","y":"1.12%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"set svg icon":{"channel":"set-icon-svg/set html","event":"set html","important":"false"}}}}},"ReportsSvgIcon":{"t":"Scripting","lX":1230,"lY":10,"sX":1,"sY":1,"s":"Site Report Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"56.99%","y":"46.91%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div>\n\t <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"40\" width=\"40\">\n\t\t\t\t\t\t\t\t<g id=\"g7488\" transform=\"translate(-77.191562,-7.2480735)\">\n\t\t\t\t\t\t\t\t <g transform=\"matrix(1.0915288,0,0,1.0672761,65.860656,-16.508271)\" id=\"g7466\">\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 13.173199,25.694459 h 2.706652\" id=\"path5448-0-4-8-1-3-8-7\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 13.109734,26.74482 h 7.610521\" id=\"path5448-0-4-8-1-2-9\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.684038;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 13.141484,27.787454 h 7.610517\" id=\"path5448-0-4-8-1-2-9-4\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:none;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:1.17149;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 22.538898,33.771658 v 4.15671 H 11.418059 V 23.19263 h 11.120839 v 3.556811\" id=\"rect5418-8-7-2\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 12.794562,29.55473 h 1.575612 v 1.575611 h -1.575612 z\" id=\"rect7488-1\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.614797;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.79021,30.80127 h 4.258345\" id=\"path5448-0-4-8-1-1\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.658147;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.812223,29.883872 h 4.880049\" id=\"path5448-0-4-8-1-3-21\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#f88924;fill-opacity:1;stroke:#f88924;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 12.794562,31.918164 h 1.575612 v 1.575611 h -1.575612 z\" id=\"rect7488-4-24\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.652521,33.164669 h 2.87408\" id=\"path5448-0-4-8-1-6-6\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.716832,32.247271 h 3.729849\" id=\"path5448-0-4-8-1-3-8-3\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#d74423;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 12.794562,34.281493 h 1.575612 v 1.575611 h -1.575612 z\" id=\"rect7488-4-2-2\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.658147;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.797971,35.528033 h 4.880074\" id=\"path5448-0-4-8-1-6-1-5\"></path>\n\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.661458;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 15.735847,34.610635 h 2.17738\" id=\"path5448-0-4-8-1-3-8-0-2\"></path>\n\t\t\t\t\t\t\t\t   <g transform=\"matrix(0.31303639,0,0,-0.31303639,90.244118,349.12083)\" id=\"g6845\">\n\t\t\t\t\t\t\t\t\t <g id=\"g6929\" transform=\"translate(-31.637095,-11.373785)\">\n\t\t\t\t\t\t\t\t\t   <path style=\"fill:#d74423;fill-opacity:1;stroke:#41505a;stroke-width:4.85039;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -178.98346,1035.7038 -10.46644,-14.1134\" id=\"path5448-9-8-5-2-8\"></path>\n\t\t\t\t\t\t\t\t\t   <path style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1.3994;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -187.21598,1024.9764 9.45737,12.3724\" id=\"path5448-0-4-8-1-2-9-0\"></path>\n\t\t\t\t\t\t\t\t\t   <path style=\"fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:0.431559px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\" d=\"m -192.69744,1020.7469 -1.14687,-4.5368 4.49648,2.049 z\" id=\"path6831\"></path>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#6ec4f7ff;fill-opacity:1;stroke:#6ec4f7ff;stroke-width:3.29365;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect6833\" width=\"1.1050575\" height=\"1.5188034\" x=\"725.02814\" y=\"-799.04865\" transform=\"matrix(0.63652687,0.77125453,0.79873314,-0.60168545,0,0)\"></rect>\n\t\t\t\t\t\t\t\t\t </g>\n\t\t\t\t\t\t\t\t   </g>\n\t\t\t\t\t\t\t\t </g>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t</svg>\n\t\n</div>"},"ev":{}},"Generic#0":{"t":"Generic","lX":0,"lY":0,"sX":17.43,"sY":0.5,"s":"Scan Device","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"50px","x":"0px","y":"0px"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setTopHtml":{"channel":"setTopHtml/set html","event":"set html","important":"false"},"SetTopAction":{"channel":"SetTopAction/set action","event":"set action","important":"false"}}}}},"Generic#22":{"t":"Generic","lX":0,"lY":437,"sX":17.43,"sY":4.16,"s":"Scan Device","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"49.43%","x":"0px","y":"50%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"}}}}},"BarcodeScanner#0":{"t":"BarcodeScanner","lX":0,"lY":51,"sX":17.43,"sY":6.82,"s":"Scan Device","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"81.01%","x":"0px","y":"51px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"detection start":{"channel":"detection-start/activate","event":"activate","important":"false"}},"outputEvents":{"detected":{"channel":"detected/receive value","event":"Detected","trigger":"Detected","important":"false"},"error":{"channel":"error/receive value","event":"Error","trigger":"Error","important":"false"}}}}},"Scripting#0":{"t":"Scripting","lX":465,"lY":195,"sX":1,"sY":1,"s":"Scan Device","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"26.77%","y":"22.57%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar _UpdatePersistance;\nvar persistence;\n\nScript.on('load', function() {\n\t \n\tpersistence = \tScript.getState(\"rodent-persistance\");\n\t \n\tvar templateLine =  Script.getScriptElement(\"barcodeStyle\");\n\tClientEvents.publish(\"set-line\", templateLine);\n\tClientEvents.publish(\"set-label-css\", \"color:white; font-size:22px;\");\n\tClientEvents.publish(\"set-label\", \"Scanning\");\n\n\n\n\tClientEvents.publish(\"detection-start\",true);\n \t\n\t_initializer = Script.getState(\"Initializer\");\n\t_handleGeneric = Script.getState(\"HandleGeneric\");\n\t_publishCommand = Script.getState(\"PublishCommand\");\n\t_gotoPage = Script.getState(\"GotoPage\");\n\t_UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\n \tvar seleceted = Script.getState(\"SelectedName\");\n\tvar cardTemplate =  Script.inheritScript(\"MenuTemplateRodent\");\n\t_initializer(cardTemplate, \"SetHtml\");\n\n\tvar topMenuTemplate = Script.inheritScript(\"Menu\");\n\t_initializer(topMenuTemplate, \"setTopHtml\");\n  \tvar command = \n\t{\n\t\t\"Action\":\"Hide\",\n\t\t\"Compoent\":\"RightPanel\",\n\t\t\"Value\": true\n\t};\n\t_publishCommand(command, \"activateGeneric\");\t\n\tcommand = \n\t{\n\t\t\"Action\":\"Hide\",\n\t\t\"Compoent\":\"LeftPanel\",\n\t\t\"Value\": true\n\t};\n\t_publishCommand(command, \"activateGeneric\");\t\n});\n\nClientEvents.subscribe(\"GenericActionMessage\", function(data) \n{ \n\t  _handleGeneric(data);\n});\n\nClientEvents.subscribe(\"detected\", function(data) \n{ \n\tClientEvents.publish(\"set-label-css\", \"color:white; font-size:22px;\");\n\tClientEvents.publish(\"set-label\", data.value);\n\t // alert(data.value.code);\n\tvar selectAdvisories = [\n\t{\n\t\t\"TableName\" : \"Devices\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t\t\"Id\",\n\t\t    \"SiteId\",\n\t\t\t\"AreaId\",\n\t\t\t\"CustomerId\",\n\t\t\t\"CompanyId\",\n\t\t\t\n\t\t\t \n\n\t\t], // Specify the list of columns to take from the reference table.\n\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t[\n\t\t\t{\n\t\t\t\t\"Column\" : \"BarcodeId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n\t\t\t\t\"ParamName\" : \"BarcodeId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n\t\t\t\t\"Value\": data.value // Value that you want to pass for comparison (any object)\n\t\t\t}\t\n\t\t]\n\t}];\n\tDatabase.readCompound(\"rodent\",\"Devices\",selectAdvisories, function(eventData)\t\t\t\t\t \n    {\n\t\t var current;\t\n\t\tfor(var item in eventData.value.data)\n\t\t{\n\t\t\tcurrent = eventData.value.data[item];\n\t\t}\n\t\t\n\t\tvar selectAdvisories = [\n\t\t{\n\t\t\t\"TableName\" : \"Locations\", // Specify the primary table used to construct the join request\n\t\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\t\"Columns\" :\n\t\t\t[\n\t\t\t\t\"Id\",\n\t\t\t\t \n\n\n\n\t\t\t], // Specify the list of columns to take from the reference table.\n\t\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t\"Column\" : \"RelativeId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n\t\t\t\t\t\"ParamName\" : \"AreaId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n\t\t\t\t\t\"Value\": current[2] // Value that you want to pass for comparison (any object)\n\t\t\t\t}\t\n\t\t\t]\n\t\t}];\n\t\tDatabase.readCompound(\"rodent\",\"Locations\",selectAdvisories, function(currentData)\t\t\t\t\t \n\t\t{\n\t\t\t \n\t\t\tvar selectedSites = [];\n\t\t\tvar areas;\t\n\t\t\tfor(var item in currentData.value.data)\n\t\t\t{\n\t\t\t\tareas = currentData.value.data[item];\n\t\t\t\tselectedSites.push(areas[0]);\n\t\t\t}\n\n\t\t\tif(current !== undefined)\n\t\t\t{\n\t\t\t\tClientEvents.publish(\"detection-end\", \"\");\n\t\t\t\t\n\t\t\t\tpersistence.SiteId = current[1];\n\t\t\t\tpersistence.AreaId = current[2];\n\t\t\t\tpersistence.CompanyId = current[3];\n\t\t\t\tpersistence.CustomerId = current[4];\n\t\t\t\tpersistence.LastScreen = \"Device Level\";\n\n\n\t\t\t\tScript.setState(\"SelectedCustomer\", persistence.CustomerId);\n\t\t\t\tScript.setState(\"SelectedArea\",persistence.SiteiD);\n\t\t\t\t\n\t\t\t\tScript.setState(\"selectedSites\", selectedSites);\n\n\t\t\t\tScript.setState(\"selectedSite\", persistence.LocationId);\n\t\t\t\tScript.setState(\"getSite\", persistence.SiteId);\n\t\t\t\tScript.setState(\"rodent-persistance\",persistence,true);\n\t\t\t\tScript.setState(\"barcodeId\",current[0],true);\n\n\n\t\t\t\t_UpdatePersistance(persistence);\n\t\t\t\tfw.func(\"JUMPSCREEN\", \"Device Level\");\n\t\t\t}\n\t\t});\n\t});\n \n});"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"Icon#0":{"t":"Icon","lX":1422,"lY":469,"sX":0.9,"sY":0.9,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"NOHORIZ,NOVERT","width":"45px","height":"5.15%","x":"82.69%","y":"57.63%"},"ver":"200628c190915","dis":false,"tt":"","a":{"icon file":"x","outline color":"no outline"},"ev":{"clientEvents":{"outputEvents":{"signature cleared":{"channel":"signature-cleared/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Label#11":{"t":"Label","lX":0,"lY":55,"sX":17.43,"sY":2,"s":"Scan Device","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"50px","x":"0%","y":"55px"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"14","text align":"center","label text":"Label text"},"ev":{"clientEvents":{"inputEvents":{"set css":{"channel":"set-label-css/apply css","event":"apply css","important":"false"},"set-label":{"channel":"set-label/receive value","event":"receive value","important":"false"}}}}},"barcodeStyle":{"t":"Scripting","lX":1115,"lY":240,"sX":1,"sY":1,"s":"Scan Device","ps":{"enabled":"false","scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"width: 100%;border-bottom: 1px solid red;position: absolute;margin: 0;\"> \n</div>"},"ev":{}},"Generic#23":{"t":"Generic","lX":0,"lY":437,"sX":17.43,"sY":0.1,"s":"Scan Device","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"10px","x":"0%","y":"50%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{}},"Generic#24":{"t":"Generic","lX":0,"lY":437,"sX":17.43,"sY":0.1,"s":"Scan Device","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"10px","x":"0%","y":"50%"},"ver":"190104c190915","z":"110","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"set-line":{"channel":"set-line/set html","event":"set html","important":"false"}}}}},"HierarchyController":{"t":"Scripting","lX":1010,"lY":190,"sX":1,"sY":1,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.88%","x":"58%","y":"23.16%"},"ver":"200124c190915","vis":false,"dis":false,"pr":"1","tt":"","a":{"script type":"javascript","code editor":"//heirarchy controller\n//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar activeFilter1;\nvar CompanyId;\nvar IsMobile = true;\nvar IsDesktop = !IsMobile;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar _UpdatePersistance;\nvar persistence;\nvar activeLevel;\nvar activeFilter;\nvar lastId;\nvar parentId;\nvar reportControl = 0;\nvar levels = {\n    \"Companies\": {\n        Header: {\n            table: \"Companies\",\n            columns: [\n                \"Id\",\n                \"Name\",\n                \"Address\",\n                \"Status\"\n            ],\n            Subquery1: {\n                column: \"CompanyId\",\n                value: \"Companies.Id\"\n            },\n            Subquery2: {\n                column: \"Devices.CompanyId\",\n                value: \"Companies.Id\"\n            },\n            Icon: \"CompaniesIcon\"\n        },\n        Children: {\n            table: \"Branches\",\n            columns: [\n                \"Id\",\n                \"Name\",\n                \"Address\",\n                \"Status\"\n            ],\n            Subquery1: {\n                column: \"BranchId\",\n                value: \"Branches.Id\"\n            },\n            Subquery2: {\n                column: \"Devices.BranchId\",\n                value: \"Branches.Id\"\n            },\n            Icon: \"BranchesIcon\",\n            HeaderVal: \"Companies\"\n        },\n        Next: \"Branches\",\n        LevelIndex: 1\n    },\n    \"Branches\": {\n        Header: {\n            table: \"Branches\",\n            columns: [\n                \"Id\",\n                \"Name\",\n                \"Address\",\n                \"Status\"\n            ],\n            Subquery1: {\n                column: \"BranchId\",\n                value: \"Branches.Id\"\n            },\n            Subquery2: {\n                column: \"Devices.BranchId\",\n                value: \"Branches.Id\"\n            },\n            Icon: \"BranchesIcon\"\n        },\n        Children: {\n            table: \"Customers\",\n            columns: [\n                \"Id\",\n                \"Name\",\n                \"Address\",\n                \"Status\"\n            ],\n            Subquery1: {\n                column: \"CustomerId\",\n                value: \"Customers.Id\"\n            },\n            Subquery2: {\n                column: \"Devices.CustomerId\",\n                value: \"Customers.Id\"\n            },\n            Icon: \"CustomersIcon\"\n        },\n        Next: \"Customers\",\n        Prev: \"Companies\",\n        LevelIndex: 2\n    },\n    \"Customers\": {\n        Header: {\n            table: \"Customers\",\n            columns: [\n                \"Id\",\n                \"Name\",\n                \"Address\",\n                \"Status\"\n            ],\n            Subquery1: {\n                column: \"CustomerId\",\n                value: \"Customers.Id\"\n            },\n            Subquery2: {\n                column: \"Devices.CustomerId\",\n                value: \"Customers.Id\"\n            },\n            Icon: \"CustomersIcon\"\n        },\n        Children: {\n            table: \"Sites\",\n            columns: [\n                \"Id\",\n                \"Name\",\n                \"Address\",\n                \"Status\"\n            ],\n            Subquery1: {\n                column: \"SiteId\",\n                value: \"Sites.Id\"\n            },\n            Subquery2: {\n                column: \"Devices.SiteId\",\n                value: \"Sites.Id\"\n            },\n            Icon: \"SitesIcon\"\n        },\n        Next: \"Sites\",\n        Prev: \"Branches\",\n        LevelIndex: 3\n    },\n    \"Sites\": {\n        Header: {\n            table: \"Sites\",\n            columns: [\n                \"Id\",\n                \"Name\",\n                \"Address\",\n                \"Status\"\n            ],\n            Subquery1: {\n                column: \"SiteId\",\n                value: \"Sites.Id\"\n            },\n            Subquery2: {\n                column: \"Devices.SiteId\",\n                value: \"Sites.Id\"\n            },\n            Icon: \"SitesIcon\"\n        },\n        Children: {\n            table: \"Locations\",\n            columns: [\n                \"Id\",\n                \"Name\",\n                \"Description\",\n                \"Status\"\n            ],\n            Subquery1: {\n                column: \"LocationId\",\n                value: \"Locations.Id\"\n            },\n            Subquery2: {\n                column: \"Devices.LocationId\",\n                value: \"Locations.Id\"\n            },\n            Icon: \"LocationsIcon\"\n        },\n        Next: \"Device Level\",\n        Prev: \"Customers\",\n        Location: true,\n\n        LevelIndex: 4\n\n    },\n    \"Device Level\": {\n\n    }\n};\nvar backHidden = true;\nvar DeviceLevel = false;\nvar locationName;\nvar description;\nvar topMenuTemplate;\nScript.on('load', function() {\n\ttopMenuTemplate = Script.inheritScript(\"Menu\");\n    enableSiteEvent();\n    //enableMaintainance();\n    //enableSiteEvent();\n    try {\n        persistence = Script.getState(\"rodent-persistance\");\n        _initializer = Script.getState(\"Initializer\");\n        _handleGeneric = Script.getState(\"HandleGeneric\");\n        _publishCommand = Script.getState(\"PublishCommand\");\n        _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n        _gotoPage = Script.getState(\"GotoPage\");\n        var seleceted = Script.getState(\"OldState\");\n        var cardTemplate = Script.inheritScript(\"MenuTemplateRodent\");\n        _initializer(cardTemplate, \"SetHtml\");\n        ClientEvents.publish(\"ignore-rows\", persistence.UserRights, false);\n    } catch (e) {\n        setTimeout(function() {\n            fw.func(\"JUMPSCREEN\", \"Initialisation\");\n        }, 200);\n\n    }\n    if (IsDesktop) HideReporting();\n\n    enableMaintainance();\n\n    HideAll();\n\n    //var topMenuTemplate = Script.inheritScript(\"Menu\");\n    // topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').style.setProperty(\"display\",  \"none\");\n    //_initializer(topMenuTemplate, \"setTopHtml\");\n    //HideAll();\n    //  console.log(JSON.stringify(persistence));\n    //  debugger;\n    if (persistence === null) {\n        Console.log(\"persistence is null line 232\");\n        persistence = {\n            \"LocationId\": 0,\n            \"CompanyId\": 0,\n            \"CustomerId\": 0,\n            \"SiteId\": 0,\n            \"LastScreen\": \"Levels\"\n        };\n    } else {\n        // the persistence.ActiveLevelAccess holds the access level data shown on this screen.\n        // the code block contains if, else if, and else statements. These correspond to IF coming from device level screen, ELSE IF coming from maintenance screen, ELSE if coming from any screen\n        // persistence.LevelAccess seems to only be set in the initialisation script on the initialisation screen, there is nowhere that this value is changed.\n        // The code gets the level if it is saved in the persistence, then uses it to determine the level index it needs to show, as well as the customer id, company id, site id etc that is necessary\n        // for it to display that level. \n        var goingBack = Script.getState(\"ReturningFromDevices\");\n        var goingBackFromMaintenance = Script.getState(\"ReturningFromMaintenance\");\n        var actualLevel;\n        if (goingBack) {\n\n            actualLevel = persistence.LevelAccess !== undefined ? GetUserAccess(parseInt(persistence.LevelAccess)) : GetUserAccess(4);\n\n        } else {\n            actualLevel = persistence.LevelAccess !== undefined ? GetUserAccess(parseInt(persistence.LevelAccess)) : GetUserAccess(1);\n        }\n        //var actualLevel = persistence.LevelAccess !== undefined ? GetUserAccess(parseInt(persistence.LevelAccess)) : GetUserAccess(1);\n        activeLevel = levels[actualLevel.name];\n        //  console.log(\"Loaded actual level from persistence: \" + JSON.stringify(actualLevel));\n        //  console.log(\"Loaded active level from persistence: \" + JSON.stringify(activeLevel));\n        if (parseInt(persistence.LevelAccess) > 1) {\n            ClientEvents.publish(\"set-ignore-enabled\", false, false);\n        }\n\n        // persistence.ActiveLevelAccess = activeLevel;\n        // _UpdatePersistance(persistence);\n\n        // if the active level is greater that 1 (if it is deeper than the company screen) then show the back button\n        //console.log(\"the active level is \");\n\n        if (parseInt(activeLevel.LevelIndex) > 1) {\n            console.log(\"Showing the back button\");\n            ShowBackButton();\n        } else {\n            console.log(\"Hiding the back button with active level \" + activeLevel.LevelIndex + \" condition is \" + (parseInt(activeLevel.LevelIndex) > 1));\n            HideBackButton();\n        }\n\n        // if coming from the Device Level screen\n        // console.log(\"Coming from device level \" + JSON.stringify(goingBack, null, 4));\n        //console.log(\"data from device \" + JSON.stringify(goingBackFromMaintenance, null, 4));\n        //console.log(\"actual level data \" + JSON.stringify(actualLevel, null, 4));\n        if (goingBack !== undefined && goingBack === true) {\n            //ShowBackButton();\n            DeviceLevel = true;\n            activeSiteControl();\n            ClientEvents.publish(\"set-ignore-enabled\", false, false);\n            actualLevel = GetUserAccess(4);\n            activeLevel = levels[actualLevel.name];\n            persistence.LevelAccess = activeLevel.LevelIndex;\n            console.log(\"Actual level \" + JSON.stringify(actualLevel, null, 4));\n            console.log(\"activeLevel level \" + JSON.stringify(activeLevel, null, 4));\n            console.log(\"persistence level \" + JSON.stringify(persistence, null, 4));\n            _UpdatePersistance(persistence);\n            Script.setState(\"ReturningFromDevices\", false, false);\n            lastId = actualLevel.id;\n        }\n\n        // else if coming from the maintenance screen\n        else if (goingBackFromMaintenance !== undefined && goingBackFromMaintenance === true) {\n            var mLevel = Script.getState(\"ReturningFromMaintenanceLevel\");\n            ClientEvents.publish(\"set-ignore-enabled\", false, false);\n            var nextLevelRecordId = Script.getState(\"SelectedEditId\");\n            var mMode = Script.getState(\"MaitnanceMode\");\n            var cancelState = Script.getState(\"matinanceCanceled\");\n            if (mMode === \"0\") {\n                var command = {\n                    \"Action\": \"SetToggle\",\n                    \"Value\": \"1\",\n                };\n                _publishCommand(command, \"SetTopAction\");\n            } else {\n                activeSiteControl();\n                ClientEvents.publish(\"set-ignore-enabled\", false, false);\n                activeLevel = levels[actualLevel.name];\n                persistence.LevelAccess = activeLevel.LevelIndex;\n                _UpdatePersistance(persistence);\n                lastId = actualLevel.id;\n            } {\n                var command = {\n                    \"Action\": \"SetToggle\",\n                    \"Value\": \"0\",\n                };\n                _publishCommand(command, \"SetTopAction\");\n            }\n            if (mLevel < 4 && cancelState !== \"1\") {\n                actualLevel = GetUserAccess(mLevel + 1);\n            } else {\n                actualLevel = GetUserAccess(mLevel);\n            }\n            activeLevel = levels[actualLevel.name];\n            persistence.LevelAccess = activeLevel.LevelIndex;\n            _UpdatePersistance(persistence);\n\n            if (mLevel < 4 && cancelState !== \"1\") {\n                actualLevel.id = nextLevelRecordId;\n            }\n            Script.setState(\"ReturningFromMaintenanceLevel\", false, false);\n            lastId = actualLevel.id;\n\n        }\n\n        // else if coming from any screen\n        else {\n            if (activeLevel.LevelIndex >= 3) {\n                activeSiteControl();\n                DeviceLevel = true;\n            }\n            ClientEvents.publish(\"set-ignore-enabled\", false, false);\n            lastId = actualLevel.id;\n        }\n\n        //  console.log(\"Active level header: \" + JSON.stringify(activeLevel.Header) + \", Actual Level Id: \" + actualLevel.id);\n        LoadHeaders(activeLevel.Header, actualLevel.id);\n        if (parentId !== undefined) {\n            GetParentName(parentId, activeLevel);\n        }\n        var command1;\n        if (persistence.User === \"admin\" || persistence.IsAdmin === \"1\") {\n            command1 = {\n                \"Action\": \"setVisible\",\n                \"Compoent\": \"MaintnanceModeRow\",\n                \"Value\": \"\",\n            };\n            _publishCommand(command1, \"SetTopAction\");\n        } else {\n            command1 = {\n                \"Action\": \"setVisible\",\n                \"Compoent\": \"MaintnanceModeRow\",\n                \"Value\": \"none\",\n            };\n            _publishCommand(command1, \"SetTopAction\");\n        }\n\n    }\n    Script.setState(\"EnableProvisioning\", \"False\");\n    var startDate = new Date();\n    var endDate = startDate.addDays(7);\n    var result = {\n        startDate: startDate,\n        endDate: endDate,\n        locationName: \"\",\n        description: \"\",\n        data: []\n    };\n    if (IsDesktop) {\n        Database.readRecords(\"rodent\", \"ApplicationSettings\", function(eventData) {\n            ClientEvents.publish(\"setLegendHour\", eventData.value, false);\n            ClientEvents.publish(\"SetLegendDay\", eventData.value, false);\n        });\n    }\n    ClientEvents.publish(\"receive-data\", result, false);\n    //enalbeSubmitButtion();\n\n});\n\n\nfunction enableSiteEvent() {\n\n    var user = Client.getUser();\n    //console.log(\"User is \" + user);\n    var selectUser = [{\n        \"TableName\": \"users\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            //\"username\",\n            \"accessrole\"\n\n\n        ], // Specify the list of columns to take from the reference table.\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": user // Value that you want to pass for comparison (any object)\n            }]\n    }];\n\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        var accessRoleId = Object.values(eventData.value.data)[0][0];\n        console.log(\"Access role value is \" + accessRoleId);\n        var errorEnable = {};\n        if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId == null) {\n            //accessOpen();\n            return;\n        }\n        var filter = {\n            columns: \"Feature03\",\n            filter: \"Id=\" + accessRoleId\n        };\n\n        Database.readRecords(\"rodent\", \"UserAccessRole\", function(eventData) {\n\n            console.log(\"Data read from user access role \" + JSON.stringify(eventData.value, null, 4));\n            var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n\n            if (provisioningAccess === 1) {\n                //Client.alert(\"You don't have adequate permission to update site events\");\n                //Script.hideWidget(\"siteReportFormSubmitbtin\");\n                //formCotrol = 1;\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                //accessOpen();\n                reportControl = 1;\n            }\n\n        }, filter);\n\n    });\n\n}\n\nfunction enableMaintainance() {\n\n    var user = Client.getUser();\n    //var topMenuTemplate = Script.inheritScript(\"Menu\");\n\n    //console.log(\"User is \" + user);\n    var selectUser = [{\n        \"TableName\": \"users\", // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            //\"username\",\n            \"accessrole\"\n\n\n        ], // Specify the list of columns to take from the reference table.\n        \"Filters\": // Filter options in case they are needed.\n            [{\n                \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": user // Value that you want to pass for comparison (any object)\n            }]\n    }];\n\n    Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n\n        try {\n\n            var accessRoleId = Object.values(eventData.value.data)[0][0];\n            //console.log(\"Access role value is \" + accessRoleId);\n            //var errorEnable = {};\n            if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId === null) {\n\n                //topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').setAttribute(\"hidden\", \"hidden\"); //.style.setProperty(\"visibility: hidden\"); //\"visibility: hidden\"\n\t\t\t\ttopMenuTemplate.querySelector('[data-value=\"swithToggle\"]').style.setProperty(\"visibility\", \"hidden\"); //\"visibility: hidden\"\n                _initializer(topMenuTemplate, \"setTopHtml\");\n                //HideAll();\n\n                return;\n            }\n            var filter = {\n                columns: \"Feature01\",\n                filter: \"Id=\" + accessRoleId\n            };\n\n            Database.readRecords(\"rodent\", \"UserAccessRole\", function(eventData) {\n\n                //console.log(\"Data read from user access role \" + JSON.stringify(eventData.value, null, 4));\n                var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n\n                if (provisioningAccess === 0) {\n\n                    //topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').setAttribute(\"hidden\", \"hidden\"); //.style.setProperty(\"visibility: hidden\"); //\"visibility: hidden\"\n\t\t\t\t\ttopMenuTemplate.querySelector('[data-value=\"swithToggle\"]').style.setProperty(\"visibility\", \"hidden\"); //\"visibility: hidden\"\n                    //_initializer(topMenuTemplate, \"setTopHtml\");\n                    //HideAll();\n                    //return;\n                    //Script.disableWidget(\"siteReportFormSubmitbtin\");\n                }\n                _initializer(topMenuTemplate, \"setTopHtml\");\n                // HideAll();\n\n            }, filter);\n        } catch (error) {\n\n            //topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').style.setProperty(\"display\",  \"none\"); //\"visibility: hidden\"\n            //topMenuTemplate.querySelector('[data-value=\"swithToggle\"]').setAttribute(\"hidden\", \"hidden\"); //style.setProperty(\"visibility: hidden\"); //\"visibility: hidden\"\n\t\t\ttopMenuTemplate.querySelector('[data-value=\"swithToggle\"]').style.setProperty(\"visibility\", \"hidden\"); //\"visibility: hidden\"\n            _initializer(topMenuTemplate, \"setTopHtml\");\n            //HideAll();\n            return;\n        }\n\n    });\n\n\n}\n\n\n\nfunction LoadHeaders(level, id) {\n\n    var compoundQeury = ComposeQuery(level, id, 1);\n    var tempId = id;\n    if (activeLevel.LevelIndex > 1) {\n        ShowBackButton();\n    }\n    Database.readSubQuery(\"rodent\", level.table, compoundQeury, function(packet) {\n\n        for (const packetData in packet.value.data) {\n            var addr = typeof packet.value.data[packetData][2] === \"string\" ? packet.value.data[packetData][2].split(\",\") : \"\";\n\n            if (addr.length === 6 && typeof addr === \"object\") {\n                var devAddr = addr.filter(function(value, index, arr) {\n                    return index !== 3;\n                });\n                packet.value.data[packetData][2] = devAddr.join(\", \");\n            }\n        }\n        if (level.table === \"Companies\") {\n            ClientEvents.publish(\"set-ignore-enabled\", true, false);\n        }\n\n        ClientEvents.publish(\"clearLanding\", \"\", false);\n        var cardTemplate = Script.getScriptElement(\"header\");\n        var icon = Script.getScriptElement(level.Icon);\n        cardTemplate.querySelector(\"[data-info='headerIcon']\").appendChild(icon);\n        ClientEvents.publish(\"setHeaderTemplate\", cardTemplate, false);\n        // set the total counts for the header.\n        ClientEvents.publish(\"SetSource\", packet, false);\n\n        if (_publishCommand === undefined) {\n            GetVisibleFilter();\n            ClientEvents.publish(\"changeVisibleCounter\", activeFilter1, false);\n            ClientEvents.publish(\"view-pointer-changed\", activeFilter1, false);\n        } else if (activeFilter1 !== null && activeFilter1 !== undefined) {\n            ClientEvents.publish(\"changeVisibleCounter\", activeFilter1, false);\n            ClientEvents.publish(\"view-pointer-changed\", activeFilter1, false);\n        } else {\n            ClientEvents.publish(\"changeVisibleCounter\", 1, false);\n            ClientEvents.publish(\"view-pointer-changed\", 1, false);\n        }\n\n        if (lastId !== undefined) {\n            ClientEvents.publish(\"toggleCard\", lastId, false);\n        }\n\n        SetPersistanceVal(level.table, tempId);\n        ClientEvents.publish(\"set-ignore-enabled\", false, false);\n        //ClientEvents.publish(\"ignore-rows\", persistence.UserRights, false);\n    });\n}\n\nfunction LoadChildren(level, id) {\n    var tempId = id;\n    var compoundQeury = ComposeQuery(level, id, 0);\n    Database.readSubQuery(\"rodent\", level.table, compoundQeury, function(packet) {\n\n        for (const packetData in packet.value.data) {\n            var addr = typeof packet.value.data[packetData][2] === \"string\" ? packet.value.data[packetData][2].split(\",\") : \"\";\n\n            if (addr.length === 6 && typeof addr === \"object\") {\n                var devAddr = addr.filter(function(value, index, arr) {\n                    return index !== 3;\n                });\n                packet.value.data[packetData][2] = devAddr.join(\", \");\n            }\n            //debugger;\n        }\n        ClientEvents.publish(\"set-ignore-enabled\", false, false);\n        var cardChildrenTemplate = Script.getScriptElement(\"child\");\n        var icon = Script.getScriptElement(level.Icon);\n        cardChildrenTemplate.querySelector(\"[data-info='childIcon']\").append(icon);\n        ClientEvents.publish(\"setChildrenTemplate\", cardChildrenTemplate, false);\n        console.log(\"This is the data that is sent to the generic card:\");\n        console.log(JSON.stringify(packet));\n        ClientEvents.publish(\"setCustomers\", packet, false);\n        ClientEvents.publish(\"change-new-icon\", icon, false);\n\n\n        if (_publishCommand === undefined) {\n            GetVisibleFilter();\n            ClientEvents.publish(\"changeVisibleCounter\", activeFilter1, false);\n            ClientEvents.publish(\"view-pointer-changed\", activeFilter1, false);\n\n        } else if (activeFilter1 !== null && activeFilter1 !== undefined) {\n            ClientEvents.publish(\"changeVisibleCounter\", activeFilter1, false);\n            ClientEvents.publish(\"view-pointer-changed\", activeFilter1, false);\n\n        } else {\n\n            ClientEvents.publish(\"changeVisibleCounter\", 1, false);\n            ClientEvents.publish(\"view-pointer-changed\", 1, false);\n        }\n        if (level.HeaderVal !== undefined) {\n            SetPersistanceVal(\"Companies\", tempId);\n        } else {\n            SetPersistanceVal(level.table, tempId);\n        }\n    });\n}\n\nfunction SetPersistanceVal(item, data) {\n\n\n    switch (item) {\n        case \"Companies\":\n            persistence.CompanyId = data;\n\n            break;\n        case \"Branches\":\n            persistence.BranchId = data;\n\n            break;\n        case \"Customers\":\n            persistence.CustomerId = data;\n            break;\n        case \"Sites\":\n            persistence.SiteId = data;\n            break;\n        case \"Locations\":\n            LoadHeatmapData(null);\n\n            if (IsDesktop) ShowReporting();\n            persistence.LocationId = data;\n\n            break;\n    }\n\n    _UpdatePersistance(persistence);\n    Script.setState(\"rodent-persistance\", persistence);\n}\n\nfunction ComposeQuery(level, id, isParent) {\n\n    var compoundQeury = [{\n        \"TableName\": level.table, // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": level.columns,\n        \"JoinOn\": [level.table],\n        \"JoinTable\": \"SiteEvents\",\n        \"CompoundTables\": // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n            [{\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Urgent\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": level.Subquery1.column,\n                            \"ParamName\": \"Parent1\",\n                            \"Value\": level.Subquery1.value,\n                            \"IsParentRelated\": true\n\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType1\",\n                            \"Value\": 1,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status1\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                    ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Important\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": level.Subquery1.column,\n                            \"ParamName\": \"Parent2\",\n                            \"Value\": level.Subquery1.value,\n                            \"IsParentRelated\": true\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType2\",\n                            \"Value\": 2,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status2\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                    ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"SiteEvents\",\n                    \"CustomName\": \"Minor\",\n                    \"JoinTable\": \"SiteEvents\",\n                    \"Filters\": [{\n                            \"Column\": level.Subquery1.column,\n                            \"ParamName\": \"Parent3\",\n                            \"Value\": level.Subquery1.value,\n                            \"IsParentRelated\": true\n\n                        },\n                        {\n                            \"Column\": \"SiteEventPriority\",\n                            \"ParamName\": \"AdvisoryType3\",\n                            \"Value\": 3,\n                            \"IsParentRelated\": false\n                        },\n                        {\n                            \"Column\": \"SiteEventStatus\",\n                            \"ParamName\": \"Status3\",\n                            \"Value\": \"1\",\n                            \"IsParentRelated\": false\n                        },\n                    ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"Devices\",\n                    \"CustomName\": \"Danger\",\n                    \"JoinTable\": \"Devices\",\n                    \"Filters\": [{\n                            \"Column\": level.Subquery2.column,\n                            \"ParamName\": \"Parent4\",\n                            \"Value\": level.Subquery2.value,\n                            \"IsParentRelated\": true\n                        },\n\n                        {\n                            \"Column\": \"State\",\n                            \"ParamName\": \"State1\",\n                            \"Value\": 4,\n                            \"IsParentRelated\": false\n                        },\n\n                        {\n                            \"Column\": \"Status\",\n                            \"ParamName\": \"DStatus1\",\n                            \"Value\": 1,\n                            \"IsParentRelated\": false\n                        }\n\n                    ]\n                },\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"Devices\",\n                    \"CustomName\": \"Attention\",\n                    \"JoinTable\": \"Devices\",\n                    \"Filters\": [{\n                            \"Column\": level.Subquery2.column,\n                            \"ParamName\": \"Parent5\",\n                            \"Value\": level.Subquery2.value,\n                            \"IsParentRelated\": true\n                        },\n\n                        {\n                            \"Column\": \"State\",\n                            \"ParamName\": \"State2\",\n                            \"Value\": 3,\n                            \"IsParentRelated\": false\n                        },\n\n                        {\n                            \"Column\": \"Status\",\n                            \"ParamName\": \"DStatus2\",\n                            \"Value\": 1,\n                            \"IsParentRelated\": false\n                        }\n                    ]\n                },\n\n                {\n                    \"Columns\": [\"count(*)\"],\n                    \"TableName\": \"Devices\",\n                    \"CustomName\": \"NoAction\",\n                    \"JoinTable\": \"Devices\",\n                    \"Filters\": [{\n                            \"Column\": level.Subquery2.column,\n                            \"ParamName\": \"Parent6\",\n                            \"Value\": level.Subquery2.value,\n                            \"IsParentRelated\": true\n                        },\n\n                        {\n                            \"Column\": \"State\",\n                            \"ParamName\": \"State3\",\n                            \"Value\": 2,\n                            \"IsParentRelated\": false\n                        },\n\n                        {\n                            \"Column\": \"Status\",\n                            \"ParamName\": \"DStatus3\",\n                            \"Value\": 1,\n                            \"IsParentRelated\": false\n                        }\n                    ]\n                },\n            ],\n        \"CustomColumnNames\": [{\n                \"Index\": 1,\n                \"BindingName\": \"CardName\"\n            },\n            {\n                \"Index\": 2,\n                \"BindingName\": \"CardAddress\"\n            },\n\n        ],\n\n    }];\n\n    //We apply filters if we are lower in the hierarchy\n    if (id !== undefined) {\n        if (isParent == 1) {\n            compoundQeury[0][\"Filters\"] = [{\n                \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"PK\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": id // Value that you want to pass for comparison (any object)\n            }];\n        } else {\n            compoundQeury[0][\"Filters\"] = [{\n                \"Column\": \"RelativeId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\": \"RelativeIdPk\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": id // Value that you want to pass for comparison (any object)\n            }];\n        }\n    }\n    return compoundQeury;\n}\n\nClientEvents.subscribe(\"GnericCardPressed\", function(data) {\n    persistence.LastScreen = \"Levels\";\n\n    _UpdatePersistance(persistence);\n    activeFilter = Script.getState(\"changeVisibleCounterVal\");\n\n    activeFilter = data;\n    parentId = data;\n    if (IsMobile) {\n        LoadChildren(activeLevel.Children, data);\n    } else {\n        if (activeLevel === undefined) {\n            LoadHeatmapData(null);\n        } else {\n            LoadChildren(activeLevel.Children, data);\n        }\n    }\n});\n\n// data published by the heatmap is formatted and displayed in the table\nClientEvents.subscribe(\"publishData\", function(data) {\n    ClientEvents.publish(\"clear-table\", true, false);\n    ClientEvents.publish(\"receive-data\", data.value, false);\n    if (IsDesktop) {\n        var collection = new SensaCollection([\"Id\", \"date time\", \"device name\", \"location name\", \"location details\", \"cycle count\", \"bait taken\", \"timestamp\"], \"Id\");\n\n        for (var item in data.value.TableData.data) {\n            var itemTpm = data.value.TableData.data[item];\n            //debugger;\n            var obj = {};\n            obj[\"Id\"] = itemTpm.Id;\n            obj[\"date time\"] = itemTpm[\"date time\"];\n            obj[\"device name\"] = itemTpm[\"device name\"];\n            obj[\"location name\"] = itemTpm[\"location name\"];\n            obj[\"location details\"] = itemTpm[\"location details\"];\n            obj[\"cycle count\"] = itemTpm[\"motion count\"];\n            obj[\"bait taken\"] = itemTpm[\"bait taken\"];\n            obj[\"timestamp\"] = itemTpm[\"timestamp\"];\n            collection.add(obj);\n        }\n\n        ClientEvents.publish(\"receive-table-data\", collection, false);\n        ClientEvents.publish(\"sort-table\", {\n            sortFunction: tableSortingFunction,\n            col: \"date time\",\n            asc: true\n        });\n    } else {\n        var collectionData = SensaCollection.load(data.value.TableData);\n        ClientEvents.publish(\"receive-table-data\", collectionData, false);\n    }\n    ClientEvents.publish(\"sort-table\", {\n        sortFunction: tableSortingFunction,\n        col: \"date time\",\n        asc: true\n    });\n});\n\nfunction tableSortingFunction(a, b) {\n    // Provide column index manually\n    a = a.children[0].innerHTML.toUpperCase();\n    b = b.children[0].innerHTML.toUpperCase();\n    // necessary to make sure that the time is 4 digits. If the time was eg 8:00, it would originally output as 800, needs to be 0800\n    var tempTimeA = a.split(\" \")[1].split(\":\").join('');\n    var tempTimeB = b.split(\" \")[1].split(\":\").join('');\n    if (tempTimeA.length == 3) {\n        tempTimeA = \"0\" + tempTimeA;\n    }\n    if (tempTimeB.length == 3) {\n        tempTimeB = \"0\" + tempTimeB;\n    }\n\n    a = parseInt(a.split(\" \")[0].split(\"/\").reverse().join('') + tempTimeA);\n    b = parseInt(b.split(\" \")[0].split(\"/\").reverse().join('') + tempTimeB);\n    return a > b ? -1 : a < b ? 1 : 0;\n}\n\nif (IsDesktop) {\n    ClientEvents.subscribe(\"publishDatacascade\", function(data) {\n\n        ClientEvents.publish(\"clear-table\", true, false);\n        var collection = new SensaCollection([\"Id\", \"date time\", \"device name\", \"location name\", \"location details\", \"cycle count\", \"bait taken\", \"timestamp\"], \"Id\");\n        for (var item in data.value.TableData.data) {\n            var itemTpm = data.value.TableData.data[item];\n            var obj = {};\n            obj[\"Id\"] = itemTpm.Id;\n            obj[\"date time\"] = itemTpm[\"date time\"];\n            obj[\"device name\"] = itemTpm[\"device name\"];\n            obj[\"location name\"] = itemTpm[\"location name\"];\n            obj[\"location details\"] = itemTpm[\"location details\"];\n            obj[\"cycle count\"] = itemTpm[\"motion count\"];\n            obj[\"bait taken\"] = itemTpm[\"bait taken\"];\n            obj[\"timestamp\"] = itemTpm[\"timestamp\"];\n            collection.add(obj);\n\n        }\n        ClientEvents.publish(\"receive-table-data\", collection, false);\n        ClientEvents.publish(\"sort-table\", {\n            col: \"date time\",\n            asc: false\n        }, false);\n\n\n    });\n}\n\nClientEvents.subscribe(\"GnericCardChildPressed\", function(data) {\n\n\n    ClientEvents.publish(\"set-ignore-enabled\", false, false);\n    Script.setState(\"SlectedCustomer\", data);\n    activeFilter = Script.getState(\"changeVisibleCounterVal\");\n    persistence.LastScreen = \"Levels\";\n    lastId = data;\n\n    //  if (activeLevel.Next === undefined || activeLevel.Next === \"Device Level\") {\n    //      DeviceLevel = true;\n    //  }\n\n    if (activeLevel !== undefined) {\n        console.log(\"ACTIVE LEVEL: \" + JSON.stringify(activeLevel));\n        activeLevel = levels[activeLevel.Next];\n        persistence.LevelAccess = activeLevel.LevelIndex;\n        _UpdatePersistance(persistence);\n    }\n\n    if (IsDesktop) HideReporting();\n\n    if (DeviceLevel === true) {\n        persistence.LocationId = data;\n\n        if (IsDesktop) ShowReporting();\n        _UpdatePersistance(persistence);\n        Script.setState(\"rodent-persistance\", persistence);\n        if (IsDesktop) LoadHeatmapData(data);\n        if (IsMobile) LoadRodentGrid(data);\n\n    } else {\n        if (activeLevel.Next === \"Device Level\") {\n            DeviceLevel = true;\n        }\n\n        if (activeLevel.Location != undefined && activeLevel.Location === true) {\n            activeSiteControl();\n        } else {\n            DeactivateSiteControls();\n        }\n\n        LoadHeaders(activeLevel.Header, data);\n        GetParentName(parentId, activeLevel);\n\n    }\n\n});\n\nClientEvents.subscribe(\"ChildMaitnancePressed\", function(data) {\n\n    Script.setState(\"rodent-maitnanceId\", data);\n\n    switch (activeLevel.Children.table) {\n        case \"Branches\":\n            fw.func(\"JUMPSCREEN\", \"Branch Form\", false);\n            break;\n        case \"Customers\":\n            fw.func(\"JUMPSCREEN\", \"Customer Form\", false);\n            break;\n        case \"Sites\":\n            fw.func(\"JUMPSCREEN\", \"Site Form\", false);\n            break;\n        case \"Locations\":\n            fw.func(\"JUMPSCREEN\", \"Location Form\", false);\n            break;\n    }\n\n\n});\nClientEvents.subscribe(\"SortBySelected\", function(data) {\n    switch (data.value) {\n        case \"Status\":\n            ClientEvents.publish(\"SortBy\", \"sstatus\", false);\n            break;\n        case \"Advisories\":\n            ClientEvents.publish(\"SortBy\", \"sstatus\", false);\n            break;\n    }\n});\n\nClientEvents.subscribe(\"FilterBySelected\", function(data) {\n\n});\n\nfunction GetVisibleFilter() {\n\n    if (_publishCommand === undefined) {\n        return;\n    }\n\n    activeFilter1 = Script.getState(\"changeVisibleCounterVal\");\n    if (activeFilter1 === null) {\n        Script.setState(\"changeVisibleCounterVal\", 1);\n        activeFilter1 = 1;\n    }\n\n    if (activeFilter === 1) {\n        var command = {\n            \"Action\": \"SetActiveDeactivate\",\n            \"Compoent\": \"Statuses\",\n            \"Value\": \"dot|dot active\",\n            \"Id\": \"Statuses|Active3|Active1\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n    } else {\n        var cmd = {\n            \"Action\": \"SetActiveDeactivate\",\n            \"Compoent\": \"Statuses\",\n            \"Value\": \"dot|dot active\",\n            \"Id\": \"Statuses|Active1|Active3\",\n        };\n        _publishCommand(cmd, \"SetTopAction\");\n    }\n}\n\nfunction LoadRodentGrid(id) {\n    var compoundQeury = [{\n        \"TableName\": \"Locations\", // Specify the primary table used to construct the join request\n        \"Join\": 3, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Id\",\n            \"Name\",\n            \"Description\"\n        ],\n        \"Filters\": [{\n            \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n            \"ParamName\": \"Id\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n            \"Value\": id // Value that you want to pass for comparison (any object)\n        }] // Specify the list of columns to take from the reference table.\n    }];\n    Database.readCompound(\"rodent\", \"Locations\", compoundQeury, function(packet) {\n\n        var ids = [];\n        for (var item in packet.value.data) {\n            var id = packet.value.data[item][0];\n            locationName = packet.value.data[item][1];\n            description = packet.value.data[item][2];\n            ids.push(id);\n        }\n        //Important to get the selected status\n        GetVisibleFilter();\n\n\n        Script.setState(\"selectedSites\", ids);\n        if (activeFilter === 2) {\n            fw.func(\"JUMPSCREEN\", \"Recommendation List\", false);\n        } else {\n            fw.func(\"JUMPSCREEN\", \"Device Level\", false);\n        }\n\n    });\n\n}\n\nfunction LoadHeatmapData(id) {\n\n    var paramsData;\n    var query;\n    if (id === null) {\n        query = \"Select D.Id, D.DeviceNumber, L.Name, L.Description From Devices as D join Locations as L on D.LocationId = L.Id where D.SiteId = $SiteId\";\n        paramsData = [{\n            Column: \"$SiteId\",\n            value: persistence.SiteId\n        }];\n    } else {\n        paramsData = [{\n                Column: \"$SiteId\",\n                value: persistence.SiteId\n            },\n            {\n                Column: \"$LocationId\",\n                value: persistence.LocationId\n            }\n        ];\n        query = \"Select D.Id, D.DeviceNumber, L.Name, L.Description From Devices as D join Locations as L on D.LocationId = L.Id where D.SiteId = $SiteId and D.LocationId = $LocationId\";\n\n    }\n    var sqlParam = [{\n        Sql: query,\n        Data: paramsData\n    }];\n    Database.ReadRecordsParam(\"rodent\", \"Locations\", sqlParam, function(currentPacket) {\n\n        var devices = [];\n        for (var item in currentPacket.value.data) {\n            var device = currentPacket.value.data[item][1];\n            var locationName = currentPacket.value.data[item][2];\n            var description = currentPacket.value.data[item][3];\n            devices.push({\n                Device: device,\n                LocationName: locationName,\n                Description: description\n            });\n        }\n\n        var startDate = new Date(new Date().getFullYear()).addDays(-150);\n\n        var result = {\n\n            startDate: startDate,\n            endDate: new Date(),\n            locationName: locationName,\n            description: description,\n            data: devices\n        }\n        if (IsDesktop) ClientEvents.publish(\"clearheatmap\", true, false);\n        ClientEvents.publish(\"clear-table\", true, false);\n        ClientEvents.publish(\"subscribe-data\", result, false);\n\n\n    });\n}\n\n\nClientEvents.subscribe(\"DeviceLevelActivated\", function(data) {\n    if (DeviceLevel) {\n        DeviceLevel = false;\n        persistence.LocationId = data;\n        _UpdatePersistance(persistence);\n        LoadRodentGrid(data);\n    }\n});\n\n\nfunction GetUserAccess(userLevel) {\n    var result;\n    switch (userLevel) {\n        case 1:\n            result = {\n                name: \"Companies\",\n                id: undefined\n            };\n            var command = {\n                \"Action\": \"setVal\",\n                \"Compoent\": \"RightPanel\",\n                \"Value\": \"\",\n                \"Id\": \"PageName\",\n            };\n            _publishCommand(command, \"SetTopAction\");\n            break;\n        case 2:\n            result = {\n                name: \"Branches\",\n                id: persistence.BranchId\n            };\n            parentId = persistence.CompanyId;\n            break;\n        case 3:\n            result = {\n                name: \"Customers\",\n                id: persistence.CustomerId\n            };\n            parentId = persistence.BranchId;\n            break;\n        case 4:\n            if (IsDesktop) ShowReporting();\n            result = {\n                name: \"Sites\",\n                id: persistence.SiteId\n            };\n            parentId = persistence.CustomerId;\n            break;\n    }\n    lastId = result.id;\n    return result;\n}\n\n\nClientEvents.subscribe(\"GenericActionMessage\", function(data) {\n    if (data === \"GoBack|null\") {\n        ClientEvents.publish(\"clear-table\", true, false);\n        if (IsDesktop) ClientEvents.publish(\"clearheatmap\", true, false);\n\n        DeviceLevel = false;\n        DeactivateSiteControls();\n        var id;\n        if (activeLevel === undefined) {\n            ReturnToCustomers();\n\n            return;\n        }\n\n        switch (activeLevel.Prev) {\n            case \"Companies\":\n                backHidden = true;\n                HideBackButton();\n                var command = {\n                    \"Action\": \"setVal\",\n                    \"Compoent\": \"RightPanel\",\n                    \"Value\": \"\",\n                    \"Id\": \"PageName\",\n                };\n                _publishCommand(command, \"SetTopAction\");\n                //id = persistence.CompanyId;\n                break;\n            case \"Branches\":\n                id = persistence.BranchId;\n                parentId = persistence.CompanyId;\n                if (IsDesktop) HideReporting();\n                break;\n            case \"Customers\":\n                id = persistence.CustomerId;\n                parentId = persistence.BranchId;\n                if (IsDesktop) HideReporting();\n                break;\n            case \"Sites\":\n                id = persistence.SiteId; //persistence.LocationId;\n                parentId = persistence.CustomerId; //persistence.SiteId;\n                ShowReporting();\n                break;\n            default:\n                ReturnToCustomers();\n                return;\n        }\n        lastId = id;\n        activeLevel = levels[activeLevel.Prev];\n        persistence.LevelAccess = activeLevel.LevelIndex;\n        _UpdatePersistance(persistence);\n        if (activeLevel.LevelIndex > 1) {\n            ShowBackButton();\n        } else {\n            HideBackButton();\n        }\n        LoadHeaders(activeLevel.Header, id);\n        GetParentName(parentId, activeLevel);\n    } else {\n        _handleGeneric(data);\n    }\n});\n\nClientEvents.subscribe(\"HandleGenericMessage\", function(data) {\n    let dataType = data.split(\"|\")[0];\n    switch (dataType) {\n        case \"SearchFor\":\n            ClientEvents.publish(\"filterCards\", data.split(\"|\")[1], false);\n            break;\n        case \"AdjustSize\":\n            ClientEvents.publish(\"setPosition\", data.split(\"|\")[1], false);\n            break;\n        case \"FilterFor\":\n            ClientEvents.publish(\"filterCards\", {\n                value: data.split(\"|\")[1]\n            }, false);\n            break;\n    }\n});\n\nClientEvents.subscribe(\"EditCard\", function(data) {\n\n    ClientEvents.publish(\"EnableEdit\", data.value, false);\n\n});\n\nfunction ReturnToCustomers() {\n    lastId = persistence.CustomerId;\n    parentId = persistence.BranchId;\n    if (IsDesktop) HideReporting();\n\n    activeLevel = levels[\"Customers\"];\n    // persistence.LevelAccess = activeLevel;\n    _UpdatePersistance(persistence);\n\n    LoadHeaders({\n        \"table\": \"Customers\",\n        \"columns\": [\n            \"Id\",\n            \"Name\",\n            \"Address\",\n            \"Status\"\n        ],\n        \"Subquery1\": {\n            \"column\": \"CustomerId\",\n            \"value\": \"Customers.Id\"\n        },\n        \"Subquery2\": {\n            \"column\": \"Devices.CustomerId\",\n            \"value\": \"Customers.Id\"\n        },\n        \"Icon\": \"CustomersIcon\"\n    }, lastId);\n    GetParentName(parentId, activeLevel);\n}\n\nfunction GetParentName(id, level) {\n    var compoundQeury = [{\n        \"TableName\": level.Next, // Specify the primary table used to construct the join request\n        \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\": [\n            \"Name\"\n        ],\n        \"Filters\": [{\n            \"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n            \"ParamName\": \"Id\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n            \"Value\": id // Value that you want to pass for comparison (any object)\n        }] // Specify the list of columns to take from the reference table.\n    }];\n    if (level.Next === \"Device Level\") {\n        // there is no table called device level\n        return;\n    }\n    Database.readCompound(\"rodent\", level.Next, compoundQeury, function(packet) {\n        var current;\n        for (var val in packet.value.data) {\n            current = packet.value.data[val];\n        }\n        var command = {\n            \"Action\": \"setVal\",\n            \"Compoent\": \"RightPanel\",\n            \"Value\": current[0],\n            \"Id\": \"PageName\",\n        };\n        _publishCommand(command, \"SetTopAction\");\n    });\n}\n\n//Menu Related options\nfunction HideAll() {\n    console.log(\"Hide all inside function\");\n    var command = {\n        \"Action\": \"Hide\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"Hide\",\n        \"Compoent\": \"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"siteVisits\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n\n    command = {\n        \"Action\": \"setVal\",\n        \"Compoent\": \"RightPanel\",\n        \"Value\": \" \",\n        \"Id\": \"PageName\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"siteVisits\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command = {\n        \"Action\": \"Change Generic Action\",\n        \"Compoent\": \"status\",\n        \"Value\": \"Status\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command = {\n        \"Action\": \"Change Generic Action\",\n        \"Compoent\": \"Advisories\",\n        \"Value\": \"GoTo|Recommendation List\",\n    };\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"Advisories\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n    command = {\n        \"Action\": \"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"OpenBtn\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"CloseBtn\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"OpenNavigation\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\n    //if (activeLevel.LevelIndex === undefined || activeLevel.LevelIndex <= 1) {\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"BackButton\",\n        \"Value\": \"none\",\n    };\n    //}\n\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddAdvisory\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddReport\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\n}\n\nfunction ShowBackButton() {\n    console.log(\"Showing back button inside function\");\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"BackButton\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n}\n\nfunction ShowAdvisory() {\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"Advisories\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"setTopAction\");\n}\n\nfunction HideAdvisory() {\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"Advisories\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"setTopAction\");\n}\n\nfunction ShowOpenBtn() {\n\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"OpenBtn\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n}\n\nfunction ShowMenuBtn() {\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"OpenNavigation\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n}\n\nfunction ShowSiteReports() {\n    console.log(\"Showing site reports line 1464\");\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddReport\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"siteVisits\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n\n}\n\nfunction HideOpenBtn() {\n\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"OpenBtn\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n}\n\nfunction HideMenuBtn() {\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"OpenNavigation\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n}\n\nfunction HideSiteReports() {\n    console.log(\"Hiding site reports line 1500\");\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"AddReport\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"siteVisits\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"SetTopAction\");\n\n}\n\nfunction HideBackButton() {\n    console.log(\"Hiding back button in function\");\n    var command = {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"BackButton\",\n        \"Value\": \"None\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n}\n\n// shows certain buttons when at the site level\nfunction activeSiteControl() {\n\n    if (reportControl === 1) {\n        ShowOpenBtn();\n    }\n    // ShowOpenBtn();\n    ShowMenuBtn();\n    ShowSiteReports();\n    ShowAdvisory();\n}\n// hides certain buttons when exiting the site level\nfunction DeactivateSiteControls() {\n    HideOpenBtn();\n    HideMenuBtn();\n    HideSiteReports();\n    HideAdvisory();\n}\n\nDate.prototype.addDays = function(days) {\n    var date = new Date(this.valueOf());\n    date.setDate(date.getDate() + days);\n    return date;\n};\n\n// Hides the two cascading heatmap calendars and data table\nfunction HideReporting() {\n    fw.func(\"HIDEWIDGET\", \"mainMap\");\n    fw.func(\"HIDEWIDGET\", \"cascadeMap\");\n    fw.func(\"HIDEWIDGET\", \"datatable\");\n}\n\n// Shows the two cascading heatmap calendars and data table\nfunction ShowReporting() {\n    fw.func(\"SHOWWIDGET\", \"mainMap\");\n    fw.func(\"SHOWWIDGET\", \"cascadeMap\");\n    fw.func(\"SHOWWIDGET\", \"datatable\");\n}\n\nfunction accessOpen() {\n\n\n\n    setTimeout(function() {\n        //your code to be executed after 1 second\n        command = {\n            \"Action\": \"setVisible\",\n            \"Compoent\": \"OpenBtn\",\n            \"Value\": \"none\",\n        };\n        _publishCommand(command, \"activateGeneric\");\n    }, delayInMilliseconds);\n\n}"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"header":{"t":"Scripting","lX":1150,"lY":195,"sX":1,"sY":1,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div id=\"cardTemplate\" style=\"display:none\">\n\t\n\n        <div>\n            <!--Start of Parent Card-->\n            <div class=\"normalCardBorder\" onclick=\"genericHeaderClicked(this)\" style=\"font-family: sans-serif; background-color: #f2f2f2;border-bottom: 3px solid white; padding: 8px; overflow:auto; overflow-x:hidden\">\n                <div data-section=\"cell\">\n                    \n                        <div class=\"container flex\" style=\"margin: 8px 8px 4px 0;width:99.5%;\" >\n\t\t\t\t\t\t\t<div class=\"flex\"  style=\"border-right: 0.98px solid #9b9b9bff;  width:100%;\">\n\t\t\t\t\t\t\t\t<div class=\"iconWidth\" data-info=\"headerIcon\">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t\t\t\t\t<div class=\"vertical-center setupContent\" >\n\t\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"capitalize\" data-value=\"CardName\" style=\"font-weight:bold;width:100%;\" >\n\t\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div data-value=\"CardAddress\" class=\"CardAddress\" >\n\t\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"flex\" tyle=\"float: right;width:100%;\">\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 5px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Urgent\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status1Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 9px; margin-right:10px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Important\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status2Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;margin-right: 3px; \">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Minor\">\n\t\t\t\t\t\t\t\t\t  --\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status3Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t\t\t\t\t</div>\n\n                            </div>\n\n                        </div>\n                    </div>\n               \n            </div>\n            \n            <!--End of Parent Card-->\n\n\n            <div data-selector=\"Children\" style=\"display:none;\">\n\n            </div>\n\n        </div>\n    </div>"},"ev":{}},"child":{"t":"Scripting","lX":1275,"lY":190,"sX":1,"sY":1,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div id=\"cardChildTemplate\" style=\"display:none;\">\n        <div data-section=\"main\" data-info=\"SideBarStatus\" data-value=\"triggered\" class=\"normalCardBorder  SideBarGreen\" onclick=\"doubleclick(this, function(){alert('single')}, function(){alert('double')})\" style=\"font-family: sans-serif; padding: 8px; overflow:auto;\">\n            <div data-section=\"cell\" class=\"CardWidth\">\n                <div>\n                    <div class=\"container flex\" style=\"margin: 8px 8px 4px 0;  width: 100%;\">\n\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"flex\" style=\"border-right: 0.98px solid #9b9b9bff;  width:100%;\">\n\t\t\t\t\t\t\t\t<div class=\"iconWidth\" data-info=\"childIcon\">\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t\t\t\t\t<div class=\"vertical-center setupContent\">\n\t\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"capitalize\" data-value=\"CardName\" style=\"font-weight: bold; font-weight:bold;\">\n\t\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\"CardAddress\" data-value=\"CardAddress\"  style=\"display:inline-block;word-wrap:break-word;\">\n\t\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n                            <div class=\"flex\" style=\"float: right; width:100%;\">\n\n                              \t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 5px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Urgent\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status1Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 9px; margin-right:10px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Important\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status2Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Minor\">\n\t\t\t\t\t\t\t\t\t  --\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status3Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n                            </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>"},"ev":{}},"BranchesIcon":{"t":"Scripting","lX":215,"lY":85,"sX":1,"sY":1,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"25.3%","y":"21.05%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n   xmlns:cc=\"http://creativecommons.org/ns#\"\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   height=\"36\" width=\"36\"\n   viewBox=\"0 0 40.0 40.0\"\n   version=\"1.1\"\n   id=\"SVGRoot\"\n   sodipodi:docname=\"branchIcon.svg\"\n   inkscape:version=\"1.0.1 (3bc2e813f5, 2020-09-07)\">\n  <defs\n     id=\"defs8039\" />\n \n \n  <g\n     inkscape:label=\"Layer 1\"\n     inkscape:groupmode=\"layer\"\n     id=\"layer1\">\n    <g\n       transform=\"matrix(2.8315254,0,0,2.3131511,1250.3615,-135.65766)\"\n       id=\"g63807\">\n      <rect\n         style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n         id=\"rect63791\"\n         width=\"6.5903883\"\n         height=\"1.4587677\"\n         x=\"433.22476\"\n         y=\"-62.705818\"\n         transform=\"scale(-1)\" />\n      <rect\n         style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n         id=\"rect63793\"\n         width=\"6.5903883\"\n         height=\"1.4587677\"\n         x=\"433.22476\"\n         y=\"-65.194893\"\n         transform=\"scale(-1)\" />\n      <rect\n         style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n         id=\"rect63795\"\n         width=\"6.5903883\"\n         height=\"1.4587677\"\n         x=\"433.22476\"\n         y=\"-67.683983\"\n         transform=\"scale(-1)\"\n         inkscape:transform-center-x=\"-1.25\"\n         inkscape:transform-center-y=\"-3.5945593\" />\n      <rect\n         style=\"opacity:1;fill:#41505a;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n         id=\"rect63797\"\n         width=\"6.3636031\"\n         height=\"1.4587677\"\n         x=\"61.317451\"\n         y=\"431.00888\"\n         transform=\"rotate(90)\" />\n      <rect\n         y=\"69.145058\"\n         x=\"-436.51538\"\n         height=\"6.3613191\"\n         width=\"8.7030411\"\n         id=\"rect63799\"\n         style=\"opacity:1;fill:none;fill-opacity:1;stroke:#41505a;stroke-width:1.0614;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" />\n      <path\n         sodipodi:nodetypes=\"ccccccccccccccc\"\n         inkscape:connector-curvature=\"0\"\n         id=\"path63801\"\n         d=\"m -437.65522,74.827066 -3.9548,-0.006 0.0236,-16.17481 h 12.22868 v 6.62866 l 0.004,2.66544 -1.16431,-0.0147 -0.0106,-2.65078 v -5.48182 h -9.88744 v 13.81616 0 l 2.75443,0.015 v 0 z\"\n         style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#41505a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" />\n      <rect\n         inkscape:transform-center-y=\"-2.4472877\"\n         inkscape:transform-center-x=\"-1.25\"\n         transform=\"scale(-1)\"\n         y=\"-71.544823\"\n         x=\"428.84824\"\n         height=\"0.99317604\"\n         width=\"6.5903883\"\n         id=\"rect63803\"\n         style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" />\n      <rect\n         transform=\"scale(-1)\"\n         y=\"-73.045937\"\n         x=\"428.84824\"\n         height=\"0.99317604\"\n         width=\"6.5903883\"\n         id=\"rect63805\"\n         style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" />\n    </g>\n  </g>\n</svg>"},"ev":{}},"CustomersIcon":{"t":"Scripting","lX":270,"lY":305,"sX":1,"sY":1,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"5.76%","height":"11.88%","x":"42.26%","y":"8.55%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"36\" width=\"36\">\n<g style=\"fill:#d74423;fill-opacity:1\" id=\"g8558\" transform=\"matrix(1.2320797,0,0,1.1086219,-149.59752,-64.987096)\">\n<path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#41505a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.15868;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" d=\"m 127.7884,74.23748 -2.65186,-0.006 -0.88953,-0.0088 H 121.8568 V 58.963261 h 12.22869 v 6.628658 l 0.004,0.973414 c -0.33978,-0.368141 -0.71617,-0.634551 -1.16431,-0.701637 l -0.0106,-0.271777 v -5.481813 h -9.88744 v 12.965712 h 1.22576 l 0.89574,0.0088 2.62582,0.006 z\" id=\"path6880-6-8-4-3-2-9\"></path>\n<rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#2c5aa0;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect7488-4-2-8-3-4-8-4-0-8-2-2-3\" width=\"7.7148671\" height=\"1.7806553\" x=\"-131.72319\" y=\"-63.009228\" transform=\"scale(-1)\"></rect>\n<rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect7488-4-2-8-3-4-8-4-3-5-3-2-5-6\" width=\"7.7148671\" height=\"1.7806553\" x=\"-131.61604\" y=\"-65.558746\" transform=\"scale(-1)\"></rect>\n<path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#2c5aa0;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" d=\"m 123.88958,68.099214 v -1.76264 h 6.60242 c -0.57651,0.485193 -0.7723,0.844388 -1.09929,1.758906 z\" id=\"path8471-5-4-0-6-7\"></path>\n<g id=\"g26680-4-6-1\" transform=\"matrix(0.32163656,0,0,-0.35879566,438.60327,574.36524)\">\n<g transform=\"translate(0.31661036,-0.22079882)\" id=\"g8547\">\n<path style=\"opacity:1;fill:#000000;fill-opacity:0;stroke:#41505a;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"path26669-0-9-3\" transform=\"scale(1,-1)\" d=\"m -947.89313,-1408.5568 a 4.8449111,4.8449111 0 0 1 -4.82869,4.8449 4.8449111,4.8449111 0 0 1 -4.86102,-4.8124 4.8449111,4.8449111 0 0 1 4.79616,-4.8771 4.8449111,4.8449111 0 0 1 4.89312,4.7798 l -4.84448,0.065 z\"></path>\n<path style=\"fill:#000000;fill-opacity:0;stroke:#41505a;stroke-width:2.90815;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m -961.98958,1395.7962 17.9656,-0.035\" id=\"path26675-9-4-9\"></path>\n<path style=\"opacity:1;fill:none;fill-opacity:1;stroke:#41505a;stroke-width:3.11311;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"path26671-0-8-9\" transform=\"matrix(-0.99997671,0.00682476,0.01106739,0.99993875,0,0)\" d=\"m 977.38034,1389.4074 a 8.9775076,7.0499392 0 0 1 -8.92843,7.0495 8.9775076,7.0499392 0 0 1 -9.02604,-6.9724 l 8.97696,-0.077 z\"></path>\n</g>\n</g>\n</g>\n</svg>"},"ev":{}},"SitesIcon":{"t":"Scripting","lX":135,"lY":305,"sX":1,"sY":1,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"24.04%","y":"33.18%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"36\" width=\"36\"> \n    <g style=\"fill:#d74423;fill-opacity:1\" transform=\"matrix(0.39670883,0,0,-0.35820296,-163.19829,457.34499)\" id=\"g18592-3-4\">\n      <path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#41505a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3.28444;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" d=\"m 422.01831,1230.034 -2.7745,0.01 h -6.77539 v 46.6876 h 34.66406 v -18.7899 l 0.0117,-2.4418 -3.30047,2.1251 -0.0296,0.3167 v 15.5389 h -28.02734 v -39.7576 l 3.4746,-0.01 2.72883,0.01 c 0,-1.2216 0.0281,-1.332 0.0281,-3.6862 z\" id=\"path18578-0-7\"></path>\n      <path style=\"fill:#000000;fill-opacity:0;stroke:#41505a;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 445.0059,1251.8235 8.49957,-5.6176 0.20237,-15.2629 H 426.5017 l -0.0127,15.8989 13.96358,7.8434 z\" id=\"path18580-0-48\"></path>\n      <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18582-5-4\" width=\"4.6674132\" height=\"4.8891621\" x=\"-435.84637\" y=\"1237.4868\" transform=\"scale(-1,1)\"></rect>\n      <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18584-0-2\" width=\"4.6674132\" height=\"4.8891621\" x=\"-448.59576\" y=\"1237.4868\" transform=\"scale(-1,1)\"></rect>\n      <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18586-3-79\" width=\"21.868916\" height=\"5.0475268\" x=\"-440.74075\" y=\"1265.5631\" transform=\"scale(-1,1)\"></rect>\n      <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18588-6-6\" width=\"21.868916\" height=\"5.0475268\" x=\"-440.74075\" y=\"1258.3362\" transform=\"scale(-1,1)\"></rect>\n      <path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#2c5aa0;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" d=\"m 418.87296,1251.0608 v 4.9964 h 15.96391 l -8.73278,-4.9964 z\" id=\"path18590-6-1\"></path>\n    </g><path style=\"opacity:1;fill:none;fill-opacity:1;stroke:none;stroke-width:0.52916664;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"path8151-5\" d=\"m 85.820055,40.985616 c -0.009,0.07735 -0.0182,0.154429 -0.031,0.231198 -0.0114,0.07599 -0.0207,0.152299 -0.0328,0.228203 -0.0111,0.0578 -0.0184,0.116107 -0.0219,0.174834 7.9e-4,0.03778 -0.008,0.07453 -0.0136,0.111596 -0.004,0.02885 -0.0133,0.05649 -0.0251,0.08295 -0.009,0.025 -0.0223,0.04897 -0.0402,0.0687 -0.0828,0.128844 -0.24216,0.181486 -0.38234,0.239544 -0.0618,0.02146 -0.12596,0.03336 -0.19032,0.04406 -0.0902,0.0136 -0.18174,0.0149 -0.27281,0.01659 -0.0923,0.0013 -0.18469,0.0011 -0.27703,7.94e-4 -0.1198,7.94e-4 -0.23937,-0.0016 -0.35902,-0.0073 -0.1534,-0.0052 -0.30649,-0.0163 -0.45983,-0.02294 -0.14134,-0.0067 -0.28199,-0.02222 -0.42307,-0.03239 -0.0823,-0.0019 -0.16381,-0.01283 -0.24574,-0.01961 -0.057,-0.0043 -0.11427,-0.0051 -0.17145,-0.0054 -0.0481,-2.04e-4 -0.0962,2.65e-4 -0.14428,2.28e-4 -0.0511,-1.9e-5 -0.10224,-1.88e-4 -0.15336,-1.46e-4 -0.0501,0.0011 -0.0994,0.0013 -0.14887,-0.0068 -0.0366,-0.0066 -0.0737,-0.0088 -0.11085,-0.0099 -0.0423,-2.19e-4 -0.0849,-0.0067 -0.12597,-0.0168 -0.0397,-0.0094 -0.0797,-0.01434 -0.11874,-0.02606 -0.0296,-0.0045 -0.0557,-0.01841 -0.085,-0.024 -0.0348,-0.0019 -0.0665,-0.01098 -0.0957,-0.02997 -0.0298,-0.02371 -0.0626,-0.04255 -0.0913,-0.06763 -0.0254,-0.0269 -0.0417,-0.06077 -0.0598,-0.09269 -0.0228,-0.03592 -0.0385,-0.07562 -0.0521,-0.115774 -0.0182,-0.06403 -0.0391,-0.12723 -0.0583,-0.19096 -0.0182,-0.04842 -0.0256,-0.09938 -0.0366,-0.14958 -0.01,-0.03448 -0.0143,-0.07002 -0.0226,-0.104794 -0.0109,-0.03965 -0.0129,-0.08057 -0.0145,-0.121414 -8e-4,-0.04239 -0.003,-0.08485 -0.001,-0.12723 0.002,-0.04219 0.0231,-0.06898 0.0565,-0.09248 0.95189,-0.544792 0.003,-0.0019 0.0457,-0.02561 0.13988,-0.07753 0.27167,-0.159393 0.41208,-0.232066 0.01,-0.0049 0.0186,-0.01077 0.0286,-0.01466 0.0253,-0.0099 0.0573,-0.01558 0.0835,-0.02053 0.0646,-0.0122 0.12884,-0.01836 0.19431,-0.02379 0.20301,-0.01169 0.4066,-0.01333 0.60988,-0.01019 0.18194,5.3e-4 0.36261,0.02508 0.54261,0.04912 0.23724,0.02708 0.47419,0.05593 0.71204,0.0774 0.2279,0.01752 0.45588,0.0334 0.68433,0.04131 0.0943,0.01005 0.19063,0.0063 0.28442,0.02103 0.0447,0.0049 0.0864,0.02056 0.12866,0.03472 0.0409,0.01156 0.0831,0.0159 0.12486,0.02326 0.0456,0.0026 0.0879,0.01352 0.1294,0.03171 0.0144,0.01418 0.0352,0.0186 0.0499,0.03204 0.007,0.0064 0.0129,0.01397 0.0198,0.02053 0.0178,0.02093 0.0279,0.04716 0.0461,0.0677 0.0207,0.01894 0.0465,0.0285 0.0662,0.04841 0.0154,0.02373 0.0268,0.0496 0.0412,0.07397 0.0123,0.02342 0.0247,0.04673 0.0373,0.07005 0.006,0.0091 0.0151,0.01468 0.0229,0.02223 0,0 -0.31477,0.194117 -0.31477,0.194117 v 0 c -0.0106,-0.0099 -0.0217,-0.01955 -0.0289,-0.03243 -0.0123,-0.02289 -0.0245,-0.04575 -0.0366,-0.06874 -0.0126,-0.02125 -0.0231,-0.04367 -0.0356,-0.06471 -0.0226,-0.01775 -0.0495,-0.03019 -0.0684,-0.05277 -0.0163,-0.02043 -0.0282,-0.04377 -0.0444,-0.0641 -0.0179,-0.01757 -0.0393,-0.03006 -0.0616,-0.04149 -0.0394,-0.01585 -0.0815,-0.01974 -0.12323,-0.0258 -0.0433,-0.0073 -0.0873,-0.01151 -0.12857,-0.02752 -0.0403,-0.01355 -0.0814,-0.02431 -0.12362,-0.02999 -0.0906,-0.01114 -0.18177,-0.01759 -0.27269,-0.02532 -0.22492,-0.01376 -0.44941,-0.03291 -0.67405,-0.05042 -0.24151,-0.02117 -0.48261,-0.04658 -0.72383,-0.07079 -0.17768,-0.02275 -0.35555,-0.04936 -0.53513,-0.04944 -0.20468,-0.0024 -0.40976,5.29e-4 -0.61381,0.01799 -0.10457,0.01214 -0.21304,0.02289 -0.30612,0.07617 -0.0173,0.0091 -0.0345,0.01826 -0.0518,0.02736 -0.008,0.0041 -0.031,0.0167 -0.0234,0.01225 0.0967,-0.05653 0.38837,-0.223258 0.29067,-0.168514 -0.0485,0.02716 -0.78226,0.452385 -0.045,0.02535 -0.0287,0.01405 -0.063,0.02603 -0.0689,0.06136 -0.009,0.03981 -10e-4,0.08208 -0.003,0.122589 0.001,0.03829 0.003,0.0768 0.0122,0.114152 0.009,0.03516 0.0139,0.07075 0.0223,0.106021 0.0109,0.04955 0.0152,0.100629 0.0339,0.148408 0.0171,0.06366 0.0376,0.126351 0.0581,0.188983 0.013,0.03794 0.029,0.07494 0.0507,0.108792 0.0156,0.02819 0.0295,0.05862 0.0526,0.08154 0.0279,0.02238 0.0582,0.04167 0.0879,0.06149 0.0289,0.01281 0.0601,0.01455 0.0906,0.02162 0.0285,0.0085 0.0563,0.01897 0.0855,0.02529 0.0381,0.01027 0.0776,0.0146 0.11577,0.02471 0.041,0.0067 0.0822,0.0113 0.12378,0.01138 0.0376,0.0024 0.075,0.0069 0.1122,0.01312 0.0481,0.0056 0.0966,0.0027 0.14489,0.0033 0.0513,1.9e-5 0.10264,-1.93e-4 0.15396,-2.64e-4 0.048,-1.86e-4 0.096,4.5e-5 0.14395,5.29e-4 0.0574,0.0011 0.11486,0.0028 0.17203,0.0087 0.0803,0.0084 0.16043,0.01762 0.24102,0.02244 0.1393,0.01275 0.27833,0.02881 0.41821,0.03422 0.1539,0.0069 0.30761,0.01733 0.46163,0.02159 0.1207,0.0043 0.24137,0.0044 0.36214,0.0032 0.0922,-1.03e-4 0.18437,9e-5 0.27654,-0.0013 0.0906,-0.0024 0.1815,-0.0055 0.27075,-0.02228 0.0641,-0.01294 0.12866,-0.02585 0.18826,-0.05368 0.12604,-0.06168 -0.0137,0.0061 -0.2825,0.165312 -0.0175,0.01035 0.0238,-0.0068 0.0308,-0.01786 0.003,-0.004 0.004,-0.0087 0.006,-0.0131 0.0143,-0.02011 0.0342,-0.03539 0.0452,-0.05814 0.004,-0.01326 0.0112,-0.02339 0.0164,-0.03581 0.005,-0.0127 0.006,-0.02777 0.0129,-0.03981 0.004,-0.03706 0.0153,-0.07286 0.0166,-0.110125 0.004,-0.06021 0.009,-0.120332 0.0221,-0.179408 0.0139,-0.07577 0.0232,-0.152355 0.0338,-0.228651 0.013,-0.07524 0.0262,-0.150614 0.0277,-0.227189 0,0 0.33,-0.163569 0.33,-0.163569 z\"></path>\n  </svg>"},"ev":{}},"LocationsIcon":{"t":"Scripting","lX":280,"lY":185,"sX":1,"sY":1,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"35.57%","y":"22.2%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"36\" width=\"36\">\n\t<g id=\"g8856\" transform=\"matrix(1.0393596,0,0,1.0918312,-144.64395,-96.576359)\">\n\t <g id=\"g8880\">\n\t   <path id=\"path18578-0-7-9-4\" d=\"m 151.37301,104.03303 -8.46777,-0.006 -1.0003,-0.009 h -2.68785 V 88.523917 h 13.75153 v 6.730598 l 0.005,-2.01108 -1.30933,0.01668 -0.0117,1.994402 v -5.56608 H 140.5335 V 102.8535 h 1.37841 l 1.00727,0.009 7.73503,0.006 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#41505a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.23812;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\"></path>\n\t   <rect transform=\"scale(-1)\" y=\"-92.548515\" x=\"-150.43297\" height=\"1.8080391\" width=\"8.6755915\" id=\"rect18586-3-79-9-9\" style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></rect>\n\t   <path style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 148.8019,95.137243 h -7.04451 v -1.808039 h 8.67558 c -0.70958,0.529282 -1.38201,1.074999 -1.63107,1.808039 z\" id=\"rect18588-6-6-2-1\"></path>\n\t   <path id=\"path18590-6-1-8-7\" d=\"m 141.75782,97.743303 v -1.789747 l 6.75536,-0.0092 c -0.11624,0.430866 -0.29459,0.730966 -0.28386,1.817226 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#2c5aa0;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\"></path>\n\t   <g id=\"g8846\" transform=\"matrix(0.68359534,0,0,0.68359534,43.301134,37.305868)\">\n\t\t <path id=\"path7975-0-8-4-00\" d=\"m 163.24978,87.851079 a 3.5554496,3.5554496 0 0 1 -3.55545,3.555449 3.5554496,3.5554496 0 0 1 -3.55545,-3.555449 3.5554496,3.5554496 0 0 1 3.55545,-3.555449 3.5554496,3.5554496 0 0 1 3.55545,3.555449 z\" style=\"opacity:1;fill:none;fill-opacity:1;stroke:#41505a;stroke-width:1.77158;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></path>\n\t\t <path id=\"path8088-3-7-2\" d=\"m 155.57309,89.531337 4.09342,7.671637 c 1.38143,-2.559632 3.23012,-5.812085 4.14428,-7.678892 -2.4549,3.121173 -5.10937,3.839063 -8.2377,0.0073 z\" style=\"fill:#41505a;fill-opacity:1;stroke:none;stroke-width:0.529167;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"></path>\n\t   </g>\n\t </g>\n\t</g>\n</svg>"},"ev":{}},"CompaniesIcon":{"t":"Scripting","lX":140,"lY":180,"sX":1,"sY":1,"s":"Levels","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"20.94%","y":"21.05%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"36\" width=\"36\">\n\n  <g id=\"g14926\" transform=\"translate(-0.19518077,-0.19518077)\">\n\t<g id=\"g15557\" transform=\"translate(-53.206299,-70.551807)\">\n\t  <rect style=\"opacity:1;fill:none;fill-opacity:1;stroke:#41505a;stroke-width:1.23052;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect14895\" width=\"15.702811\" height=\"15.702811\" x=\"54.052711\" y=\"71.402916\"/>\n\t  <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#2c5aa0;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect14897\" width=\"9.3824368\" height=\"1.9740734\" x=\"-65.14447\" y=\"-75.373886\" transform=\"scale(-1)\"/>\n\t  <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect14899\" width=\"9.3824368\" height=\"1.9740734\" x=\"-65.084213\" y=\"-78.20034\" transform=\"scale(-1)\"/>\n\t  <rect transform=\"scale(-1)\" y=\"-81.051872\" x=\"-65.14447\" height=\"1.9740734\" width=\"9.3824368\" id=\"rect14901\" style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#2c5aa0;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"/>\n\t  <rect transform=\"scale(-1)\" y=\"-83.878326\" x=\"-65.084213\" height=\"1.9740734\" width=\"9.3824368\" id=\"rect14903\" style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"/>\n\t  <rect transform=\"scale(-1)\" y=\"-75.373886\" x=\"-68.070396\" height=\"1.9740734\" width=\"2.0163553\" id=\"rect14909\" style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#2c5aa0;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"/>\n\t  <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#2c5aa0;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect14911\" width=\"2.0163553\" height=\"1.9740734\" x=\"-68.070396\" y=\"-78.20034\" transform=\"scale(-1)\"/>\n\t  <rect transform=\"scale(-1)\" y=\"-81.051872\" x=\"-68.070396\" height=\"1.9740734\" width=\"2.0163553\" id=\"rect14913\" style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#2c5aa0;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"/>\n\t  <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#2c5aa0;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect14915\" width=\"2.0163553\" height=\"1.9740734\" x=\"-68.070396\" y=\"-83.878326\" transform=\"scale(-1)\"/>\n\t</g>\n  </g>\n</svg>"},"ev":{}},"Generic#2":{"t":"Generic","lX":0,"lY":0,"sX":12.63,"sY":5,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"500px","x":"0%","y":"0%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"blue"},"ev":{"clientEvents":{"inputEvents":{"set css":{"channel":"set-css/set html","event":"set html","important":"false"}}}}},"Button#0":{"t":"Button","lX":0,"lY":500,"sX":6.32,"sY":1.3,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"0px","y":"500px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Cancel"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#5":{"t":"Button","lX":549,"lY":500,"sX":6.32,"sY":1.3,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"49.8%","y":"500px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Submit"},"ev":{"clientEvents":{"inputEvents":{"setSubmitColor":{"channel":"setSubmitColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"save changes":{"channel":"save-changes/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Scripting#1":{"t":"Scripting","lX":940,"lY":360,"sX":1,"sY":1,"s":"Branch Form","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"49.45%","y":"17.85%"},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n \n \n var _UpdatePersistance;\n var persistence;\n var model;\n var Caller;\n var maitnanceId;\n\n\n var countryList = [ \n    {name: 'Afghanistan', code: 'AF'}, \n    {name: 'Åland Islands', code: 'AX'}, \n    {name: 'Albania', code: 'AL'}, \n    {name: 'Algeria', code: 'DZ'}, \n    {name: 'American Samoa', code: 'AS'}, \n    {name: 'AndorrA', code: 'AD'}, \n    {name: 'Angola', code: 'AO'}, \n    {name: 'Anguilla', code: 'AI'}, \n    {name: 'Antarctica', code: 'AQ'}, \n    {name: 'Antigua and Barbuda', code: 'AG'}, \n    {name: 'Argentina', code: 'AR'}, \n    {name: 'Armenia', code: 'AM'}, \n    {name: 'Aruba', code: 'AW'}, \n    {name: 'Australia', code: 'AU'}, \n    {name: 'Austria', code: 'AT'}, \n    {name: 'Azerbaijan', code: 'AZ'}, \n    {name: 'Bahamas', code: 'BS'}, \n    {name: 'Bahrain', code: 'BH'}, \n    {name: 'Bangladesh', code: 'BD'}, \n    {name: 'Barbados', code: 'BB'}, \n    {name: 'Belarus', code: 'BY'}, \n    {name: 'Belgium', code: 'BE'}, \n    {name: 'Belize', code: 'BZ'}, \n    {name: 'Benin', code: 'BJ'}, \n    {name: 'Bermuda', code: 'BM'}, \n    {name: 'Bhutan', code: 'BT'}, \n    {name: 'Bolivia', code: 'BO'}, \n    {name: 'Bosnia and Herzegovina', code: 'BA'}, \n    {name: 'Botswana', code: 'BW'}, \n    {name: 'Bouvet Island', code: 'BV'}, \n    {name: 'Brazil', code: 'BR'}, \n    {name: 'British Indian Ocean Territory', code: 'IO'}, \n    {name: 'Brunei Darussalam', code: 'BN'}, \n    {name: 'Bulgaria', code: 'BG'}, \n    {name: 'Burkina Faso', code: 'BF'}, \n    {name: 'Burundi', code: 'BI'}, \n    {name: 'Cambodia', code: 'KH'}, \n    {name: 'Cameroon', code: 'CM'}, \n    {name: 'Canada', code: 'CA'}, \n    {name: 'Cape Verde', code: 'CV'}, \n    {name: 'Cayman Islands', code: 'KY'}, \n    {name: 'Central African Republic', code: 'CF'}, \n    {name: 'Chad', code: 'TD'}, \n    {name: 'Chile', code: 'CL'}, \n    {name: 'China', code: 'CN'}, \n    {name: 'Christmas Island', code: 'CX'}, \n    {name: 'Cocos (Keeling) Islands', code: 'CC'}, \n    {name: 'Colombia', code: 'CO'}, \n    {name: 'Comoros', code: 'KM'}, \n    {name: 'Congo', code: 'CG'}, \n    {name: 'Congo, The Democratic Republic of the', code: 'CD'}, \n    {name: 'Cook Islands', code: 'CK'}, \n    {name: 'Costa Rica', code: 'CR'}, \n    {name: 'Cote D\\'Ivoire', code: 'CI'}, \n    {name: 'Croatia', code: 'HR'}, \n    {name: 'Cuba', code: 'CU'}, \n    {name: 'Cyprus', code: 'CY'}, \n    {name: 'Czech Republic', code: 'CZ'}, \n    {name: 'Denmark', code: 'DK'}, \n    {name: 'Djibouti', code: 'DJ'}, \n    {name: 'Dominica', code: 'DM'}, \n    {name: 'Dominican Republic', code: 'DO'}, \n    {name: 'Ecuador', code: 'EC'}, \n    {name: 'Egypt', code: 'EG'}, \n    {name: 'El Salvador', code: 'SV'}, \n    {name: 'Equatorial Guinea', code: 'GQ'}, \n    {name: 'Eritrea', code: 'ER'}, \n    {name: 'Estonia', code: 'EE'}, \n    {name: 'Ethiopia', code: 'ET'}, \n    {name: 'Falkland Islands (Malvinas)', code: 'FK'}, \n    {name: 'Faroe Islands', code: 'FO'}, \n    {name: 'Fiji', code: 'FJ'}, \n    {name: 'Finland', code: 'FI'}, \n    {name: 'France', code: 'FR'}, \n    {name: 'French Guiana', code: 'GF'}, \n    {name: 'French Polynesia', code: 'PF'}, \n    {name: 'French Southern Territories', code: 'TF'}, \n    {name: 'Gabon', code: 'GA'}, \n    {name: 'Gambia', code: 'GM'}, \n    {name: 'Georgia', code: 'GE'}, \n    {name: 'Germany', code: 'DE'}, \n    {name: 'Ghana', code: 'GH'}, \n    {name: 'Gibraltar', code: 'GI'}, \n    {name: 'Greece', code: 'GR'}, \n    {name: 'Greenland', code: 'GL'}, \n    {name: 'Grenada', code: 'GD'}, \n    {name: 'Guadeloupe', code: 'GP'}, \n    {name: 'Guam', code: 'GU'}, \n    {name: 'Guatemala', code: 'GT'}, \n    {name: 'Guernsey', code: 'GG'}, \n    {name: 'Guinea', code: 'GN'}, \n    {name: 'Guinea-Bissau', code: 'GW'}, \n    {name: 'Guyana', code: 'GY'}, \n    {name: 'Haiti', code: 'HT'}, \n    {name: 'Heard Island and Mcdonald Islands', code: 'HM'}, \n    {name: 'Holy See (Vatican City State)', code: 'VA'}, \n    {name: 'Honduras', code: 'HN'}, \n    {name: 'Hong Kong', code: 'HK'}, \n    {name: 'Hungary', code: 'HU'}, \n    {name: 'Iceland', code: 'IS'}, \n    {name: 'India', code: 'IN'}, \n    {name: 'Indonesia', code: 'ID'}, \n    {name: 'Iran, Islamic Republic Of', code: 'IR'}, \n    {name: 'Iraq', code: 'IQ'}, \n    {name: 'Ireland', code: 'IE'}, \n    {name: 'Isle of Man', code: 'IM'}, \n    {name: 'Israel', code: 'IL'}, \n    {name: 'Italy', code: 'IT'}, \n    {name: 'Jamaica', code: 'JM'}, \n    {name: 'Japan', code: 'JP'}, \n    {name: 'Jersey', code: 'JE'}, \n    {name: 'Jordan', code: 'JO'}, \n    {name: 'Kazakhstan', code: 'KZ'}, \n    {name: 'Kenya', code: 'KE'}, \n    {name: 'Kiribati', code: 'KI'}, \n    {name: 'Korea, Democratic People\\'S Republic of', code: 'KP'}, \n    {name: 'Korea, Republic of', code: 'KR'}, \n    {name: 'Kuwait', code: 'KW'}, \n    {name: 'Kyrgyzstan', code: 'KG'}, \n    {name: 'Lao People\\'S Democratic Republic', code: 'LA'}, \n    {name: 'Latvia', code: 'LV'}, \n    {name: 'Lebanon', code: 'LB'}, \n    {name: 'Lesotho', code: 'LS'}, \n    {name: 'Liberia', code: 'LR'}, \n    {name: 'Libyan Arab Jamahiriya', code: 'LY'}, \n    {name: 'Liechtenstein', code: 'LI'}, \n    {name: 'Lithuania', code: 'LT'}, \n    {name: 'Luxembourg', code: 'LU'}, \n    {name: 'Macao', code: 'MO'}, \n    {name: 'Macedonia, The Former Yugoslav Republic of', code: 'MK'}, \n    {name: 'Madagascar', code: 'MG'}, \n    {name: 'Malawi', code: 'MW'}, \n    {name: 'Malaysia', code: 'MY'}, \n    {name: 'Maldives', code: 'MV'}, \n    {name: 'Mali', code: 'ML'}, \n    {name: 'Malta', code: 'MT'}, \n    {name: 'Marshall Islands', code: 'MH'}, \n    {name: 'Martinique', code: 'MQ'}, \n    {name: 'Mauritania', code: 'MR'}, \n    {name: 'Mauritius', code: 'MU'}, \n    {name: 'Mayotte', code: 'YT'}, \n    {name: 'Mexico', code: 'MX'}, \n    {name: 'Micronesia, Federated States of', code: 'FM'}, \n    {name: 'Moldova, Republic of', code: 'MD'}, \n    {name: 'Monaco', code: 'MC'}, \n    {name: 'Mongolia', code: 'MN'}, \n    {name: 'Montserrat', code: 'MS'}, \n    {name: 'Morocco', code: 'MA'}, \n    {name: 'Mozambique', code: 'MZ'}, \n    {name: 'Myanmar', code: 'MM'}, \n    {name: 'Namibia', code: 'NA'}, \n    {name: 'Nauru', code: 'NR'}, \n    {name: 'Nepal', code: 'NP'}, \n    {name: 'Netherlands', code: 'NL'}, \n    {name: 'Netherlands Antilles', code: 'AN'}, \n    {name: 'New Caledonia', code: 'NC'}, \n    {name: 'New Zealand', code: 'NZ'}, \n    {name: 'Nicaragua', code: 'NI'}, \n    {name: 'Niger', code: 'NE'}, \n    {name: 'Nigeria', code: 'NG'}, \n    {name: 'Niue', code: 'NU'}, \n    {name: 'Norfolk Island', code: 'NF'}, \n    {name: 'Northern Mariana Islands', code: 'MP'}, \n    {name: 'Norway', code: 'NO'}, \n    {name: 'Oman', code: 'OM'}, \n    {name: 'Pakistan', code: 'PK'}, \n    {name: 'Palau', code: 'PW'}, \n    {name: 'Palestinian Territory, Occupied', code: 'PS'}, \n    {name: 'Panama', code: 'PA'}, \n    {name: 'Papua New Guinea', code: 'PG'}, \n    {name: 'Paraguay', code: 'PY'}, \n    {name: 'Peru', code: 'PE'}, \n    {name: 'Philippines', code: 'PH'}, \n    {name: 'Pitcairn', code: 'PN'}, \n    {name: 'Poland', code: 'PL'}, \n    {name: 'Portugal', code: 'PT'}, \n    {name: 'Puerto Rico', code: 'PR'}, \n    {name: 'Qatar', code: 'QA'}, \n    {name: 'Reunion', code: 'RE'}, \n    {name: 'Romania', code: 'RO'}, \n    {name: 'Russian Federation', code: 'RU'}, \n    {name: 'RWANDA', code: 'RW'}, \n    {name: 'Saint Helena', code: 'SH'}, \n    {name: 'Saint Kitts and Nevis', code: 'KN'}, \n    {name: 'Saint Lucia', code: 'LC'}, \n    {name: 'Saint Pierre and Miquelon', code: 'PM'}, \n    {name: 'Saint Vincent and the Grenadines', code: 'VC'}, \n    {name: 'Samoa', code: 'WS'}, \n    {name: 'San Marino', code: 'SM'}, \n    {name: 'Sao Tome and Principe', code: 'ST'}, \n    {name: 'Saudi Arabia', code: 'SA'}, \n    {name: 'Senegal', code: 'SN'}, \n    {name: 'Serbia and Montenegro', code: 'CS'}, \n    {name: 'Seychelles', code: 'SC'}, \n    {name: 'Sierra Leone', code: 'SL'}, \n    {name: 'Singapore', code: 'SG'}, \n    {name: 'Slovakia', code: 'SK'}, \n    {name: 'Slovenia', code: 'SI'}, \n    {name: 'Solomon Islands', code: 'SB'}, \n    {name: 'Somalia', code: 'SO'}, \n    {name: 'South Africa', code: 'ZA'}, \n    {name: 'South Georgia and the South Sandwich Islands', code: 'GS'}, \n    {name: 'Spain', code: 'ES'}, \n    {name: 'Sri Lanka', code: 'LK'}, \n    {name: 'Sudan', code: 'SD'}, \n    {name: 'Suriname', code: 'SR'}, \n    {name: 'Svalbard and Jan Mayen', code: 'SJ'}, \n    {name: 'Swaziland', code: 'SZ'}, \n    {name: 'Sweden', code: 'SE'}, \n    {name: 'Switzerland', code: 'CH'}, \n    {name: 'Syrian Arab Republic', code: 'SY'}, \n    {name: 'Taiwan, Province of China', code: 'TW'}, \n    {name: 'Tajikistan', code: 'TJ'}, \n    {name: 'Tanzania, United Republic of', code: 'TZ'}, \n    {name: 'Thailand', code: 'TH'}, \n    {name: 'Timor-Leste', code: 'TL'}, \n    {name: 'Togo', code: 'TG'}, \n    {name: 'Tokelau', code: 'TK'}, \n    {name: 'Tonga', code: 'TO'}, \n    {name: 'Trinidad and Tobago', code: 'TT'}, \n    {name: 'Tunisia', code: 'TN'}, \n    {name: 'Turkey', code: 'TR'}, \n    {name: 'Turkmenistan', code: 'TM'}, \n    {name: 'Turks and Caicos Islands', code: 'TC'}, \n    {name: 'Tuvalu', code: 'TV'}, \n    {name: 'Uganda', code: 'UG'}, \n    {name: 'Ukraine', code: 'UA'}, \n    {name: 'United Arab Emirates', code: 'AE'}, \n    {name: 'United Kingdom', code: 'GB'}, \n    {name: 'United States', code: 'US'}, \n    {name: 'United States Minor Outlying Islands', code: 'UM'}, \n    {name: 'Uruguay', code: 'UY'}, \n    {name: 'Uzbekistan', code: 'UZ'}, \n    {name: 'Vanuatu', code: 'VU'}, \n    {name: 'Venezuela', code: 'VE'}, \n    {name: 'Viet Nam', code: 'VN'}, \n    {name: 'Virgin Islands, British', code: 'VG'}, \n    {name: 'Virgin Islands, U.S.', code: 'VI'}, \n    {name: 'Wallis and Futuna', code: 'WF'}, \n    {name: 'Western Sahara', code: 'EH'}, \n    {name: 'Yemen', code: 'YE'}, \n    {name: 'Zambia', code: 'ZM'}, \n    {name: 'Zimbabwe', code: 'ZW'} \n  ];\n \n \n Script.on('load', function() {\n    Script.setState(\"Caller\", \"Levels\");\n\tCaller = \"Levels\";\n    Script.setState(\"ReturningFromMaintenance\", true, false);\n    Script.setState(\"ReturningFromMaintenanceLevel\", 1, false);\n\n\t \n    maitnanceId =Script.getState(\"rodent-maitnanceId\"); \n    persistence = Script.getState(\"rodent-persistance\");\n\n    var bgContainer =  Script.getScriptElement(\"branchM\");\n    var clearfixLine =  Script.getScriptElement(\"clearfixBranch\");\n    var panelIcon =  Script.getScriptElement(\"BranchIconForm\");\n\n    _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n    persistence.LastScreen = \"Branch Form\";\n    _UpdatePersistance(persistence);\n\n    ClientEvents.publish(\"set-css\",bgContainer ,false);\n    ClientEvents.publish(\"clear-fix-line\",clearfixLine ,false);\n    ClientEvents.publish(\"set-icon-svg\",panelIcon ,false);\n\n    ClientEvents.publish(\"setDateColor\",\"color:#6ec4f7ff;\",false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\n\tClientEvents.publish(\"branchDeleteSetStyle\", {Property: \"color\",PropertyValue:\"white\"},false);\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\n    //\tClientEvents.publish(\"setSubmitColor\",{Property: \"width\",PropertyValue:\"96%\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t \n\tvar date = new Date();\n\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\tClientEvents.publish(\"created-date\",format,false);\n\tvar countryDropdown = Script.getWidget(\"countryDropdownBranch\");\n\tvar coll = new SensaCollection([\"text\", \"value\"], \"text\", {});\n\tvar data = countryList.map(country => ({text: country.name, value: country.code}));\n\tfor (var i = 0;i<data.length;i++) {\n\t\tcoll.add(data[i]);\n\t}\n\tcountryDropdown.receiveTextValues(coll);\n\tcountryDropdown.resetDefault();\n\t \n    model = {};\n    if(maitnanceId !== null && maitnanceId !== undefined && maitnanceId !== \"0\") {\n        LoadModel(maitnanceId);\n    } else {\n        Database.readLastPrimaryKey(\"Rodent\",\"Branches\",function(eventData){\n\t\t\tmodel.Id = parseInt(eventData.value) + 1;\n\t\t});\n        model.Name = \"\";\n        model.Address = \"\";\n    }\n });\n\nClientEvents.subscribe(\"Address-changed\", function(data) \n{ \n \tmodel.Address = \"\";\n    var addressData = data.value.address_components;\n    //model.Address = addressData[0].long_name + \", \" + addressData[1].short_name + \", \" + addressData[2].long_name +  \", \" + addressData[3].long_name + \", \" + addressData[4].long_name + \", \" + addressData[5].long_name ;\n    model.Address = addressData[0].long_name + \", \" + addressData[1].short_name + \", \" + addressData[2].long_name +  \", \" + addressData[4].long_name + \", \" + addressData[5].long_name ;\n\n\tmodel.zip = addressData[5].long_name;\n    model.state = addressData[4].long_name;\n    model.city = addressData[3].long_name;\n\t\n\t\n});\n\nClientEvents.subscribe(\"name-changed\", function(data) \n{ \n\t\n    model.Name = data.value;\n});\n\n\nClientEvents.subscribe(\"cancel-btn\", function(data) \n{  \n\tScript.setState(\"matinanceCanceled\", \"1\",false);\n\tfw.func(\"JUMPSCREEN\", Caller);\n});\n\nClientEvents.subscribe(\"country-selected\", function(data) \n{  \n\tmodel.Country = data.value;\n\t\n\tfor(var country in \tcountryList)\n\t{\n\t\tif(country.code === model.Country)\n\t\t{\n\t\t\tmodel.Country = country.name;\n\t\t}\n\t}\n\tClientEvents.publish(\"setCountry\",data.value,false);\n\t\n});\n\n\n\nClientEvents.subscribe(\"save-changes\", function(data) \n{ \n\tif(validate())\n\t{\n\t\tvar dbVal = {};\n\t\tdbVal[\"Id\"] =\n\t\t{\n\t\t\t\"Id\":model.Id,\n\t\t\t\"Name\": model.Name,\n\t\t\t\"Address\":model.Address,\n\t\t\t\"RelativeId\":persistence.CompanyId,\n\t\t\t\"Country\": model.Country\n\t\t};   \n\t\t \n\t\tif(maitnanceId !== null && maitnanceId !== undefined && maitnanceId === \"0\")\n\t\t{\n\t\t\tdbVal[\"Id\"].CreatedBy = fw.func(\"GETUSER\");\n\t\t\tdbVal[\"Id\"].CreatedOn = new Date().getTime();\n\t\t\tdbVal[\"Id\"].OWner = fw.func(\"GETUSER\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdbVal[\"Id\"].UpdatedBy = fw.func(\"GETUSER\");\n\t\t\tdbVal[\"Id\"].UpdatedOn = new Date().getTime();\n\t\t}\n\n\t\tDatabase.saveRecordParam(\"Rodent\",\"Branches\",dbVal, function(result)\n\t\t{ \t\n\t\t\t Script.setState(\"SelectedEditId\",model.Id);\n\t\t\t Script.setState(\"MaitnanceMode\",maitnanceId);\n\n\t\t\t fw.func(\"JUMPSCREEN\", Caller);\n\t\t});\n\t}\n});\n\nClientEvents.subscribe(\"branchDeletePressed\", function(eventData) {\n\tDatabase.readRecords(\"Rodent\", \"Devices\", async function (deviceValues) {\n\t\t// Check if any active devices within branch\n\t\tif (model.Status == 1 && Object.keys(deviceValues.value.data).length > 0) {\n\t\t\t// Do not allow branch to be deactivated if devices are present\n\t\t\tClient.alert(\"There are active devices currently at a location within the hierarchy\", \"Delete not Permitted\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tlet res = await Client.confirm(\"Do you want to toggle this branch, and all customers, sites and locations within this branch?\", \n\t\t\t\t\t\t\t\t\t\t\t   (model.Status == 1 ? \"Deactivate\" : \"Activate\") + \" all levels?\", \n\t\t\t\t\t\t\t\t\t\t\t   { confirmText: \"Yes\", cancelText: \"No\" });\n\t\tif (!res) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar dbVal = {};\n\t\tdbVal[\"Id\"] =\n\t\t{\n\t\t\t\"Id\": model.Id,\n\t\t\t\"Name\": model.Name,\n\t\t\t\"Address\":model.Address,\n\t\t\t\"RelativeId\":persistence.CompanyId,\n\t\t\t\"Country\": model.Country,\n\t\t\t\"Status\": model.Status == 1 ? \"0\" : \"1\",\n\t\t\t\"UpdatedBy\": fw.func(\"GETUSER\"),\n\t\t\t\"UpdatedOn\": new Date().getTime()\n\t\t};\n\t\t// Toggle activate the branch\n\t\tDatabase.saveRecordParam(\"Rodent\", \"Branches\", dbVal, async function (result) {\n\t\t\tif (model.Status != 1) {\n\t\t\t\t// Prompt user for activating all lower levels\n\t\t\t\tlet res = await Client.confirm(\"Do you want to activate all customers, sites, and locations within this branch?\", \n\t\t\t\t\t\t\t\t\t\t\t   \"Activate all levels?\", \n\t\t\t\t\t\t\t\t\t\t\t   { confirmText: \"Yes\", cancelText: \"No\" });\n\t\t\t\tif (!res) {\n\t\t\t\t\tfw.func(\"JUMPSCREEN\", Caller);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Toggle activate customers of the branch\n\t\t\ttoggleActivateCustomers(model.Id);\n\t\t});\n\t}, {filter: `BranchId='${model.Id}' AND Status='${model.Status}'`});\n});\n\nfunction toggleActivateCustomers(branchId) {\n\tDatabase.readRecords(\"Rodent\", \"Customers\", async function (customerValues) {\n\t\tvar customersRemaining = Object.keys(customerValues.value.data).length;\n\t\tif (customersRemaining) {\n\t\t\tcustomerValues.value.forEach((record, pk) => {\n\t\t\t\trecord.Status = model.Status == 1 ? \"0\" : \"1\";\n\t\t\t\tvar dbVal = {};\n\t\t\t\tdbVal[\"Id\"] = record;\n\t\t\t\tDatabase.saveRecordParam(\"Rodent\", \"Customers\", dbVal, function (result) {\n\t\t\t\t\tcustomersRemaining--;\n\t\t\t\t\ttoggleActivateSites(record.Id, customersRemaining);\n\t\t\t\t});\n\t\t\t});\n\t\t} \n\t}, {filter: `RelativeId='${branchId}' AND Status='${model.Status}'`});\n}\n\nfunction toggleActivateSites(customerId, customersRemaining) {\n\tDatabase.readRecords(\"Rodent\", \"Sites\", function (siteValues) {\n\t\tconsole.log(\"Toggling sites for customer \" + customerId);\n\t\tvar sitesRemaining = Object.keys(siteValues.value.data).length;\n\t\tif (sitesRemaining) {\n\t\t\tsiteValues.value.forEach((record, pk) => {\n\t\t\t\trecord.Status = model.Status == 1 ? \"0\" : \"1\";\n\t\t\t\tvar dbVal = {};\n\t\t\t\tdbVal[\"Id\"] = record;\n\t\t\t\tDatabase.saveRecordParam(\"Rodent\", \"Sites\", dbVal, async function (result) {\n\t\t\t\t\tsitesRemaining--;\n\t\t\t\t\ttoggleActivateLocations(record.Id, customersRemaining, sitesRemaining);\n\t\t\t\t});\n\t\t\t});\n\t\t} \n\t}, {filter: `RelativeId='${customerId}' AND Status='${model.Status}'`});\n}\n\nfunction toggleActivateLocations(siteId, customersRemaining, sitesRemaining) {\n\tDatabase.readRecords(\"Rodent\", \"Locations\", function (locationValues) {\n\t\tconsole.log(\"Toggling locaitons for site \" + siteId);\n\t\tvar locationsRemaining = Object.keys(locationValues.value.data).length;\n\t\tif (locationsRemaining) {\n\t\t\tlocationValues.value.forEach((record, pk) => {\n\t\t\t\trecord.Status = model.Status == 1 ? \"0\" : \"1\";\n\t\t\t\tvar dbVal = {};\n\t\t\t\tdbVal[\"Id\"] = record;\n\t\t\t\tlocationsRemaining--;\n\t\t\t\tDatabase.saveRecordParam(\"Rodent\", \"Locations\", dbVal);\n\t\t\t});\n\t\t\tif (!locationsRemaining && !sitesRemaining && !customersRemaining) {\n\t\t\t\tfw.func(\"JUMPSCREEN\", Caller);\n\t\t\t}\n\t\t}\n\t}, {filter: `RelativeId='${siteId}' AND Status='${model.Status}'`});\n}\n\nfunction LoadModel(id)\n{\n    var getAdvisory =\n\t[{\n\t\t\"TableName\" : \"Branches\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t\t\"Id\",\n\t\t    \"Name\",\n\t\t\t\"Address\",\n\t\t\t\"CreatedOn\",\n\t\t\t\"UpdatedOn\",\n\t\t\t\"Status\",\n\t\t\t\"Country\"\n\t\t\t \n\t\t], // Specify the list of columns to take from the reference table.\n\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t[\n\t\t\t{\n\t\t\t\t\"Column\" : \"Id\",\n\t\t\t\t\"ParamName\" : \"branchId\",\n\t\t\t\t\"Value\": id  \n\t\t\t}\t\n\t\t]\n\t}];\n\tDatabase.readCompound(\"rodent\",\"Branches\",getAdvisory, function(currentData)\t\t\t\t\t \n    {\n\t\t \n\t\tvar branchData;\n\t\tfor(var item in currentData.value.data)\n\t\t{\n\t\t\tbranchData = currentData.value.data[item];\n        }\n        model = {};\n        model.Id = branchData[0];\n        model.Name = branchData[1];\n        model.Address = branchData[2];\n\t\tmodel.CreatedOn = branchData[3];\n\t\tmodel.UpdatedOn = branchData[4];\n\t\tmodel.Status = branchData[5];\n\t\tmodel.Country = branchData[6];\n\t\t\n\t\tif (model.Status == 1) {\n\t\t\t// Branch is enabled, show deactivate button\n\t\t\tClientEvents.publish(\"branchDeleteSetStyle\", {Property: \"background-color\",PropertyValue:\"#d12d1b\"},false);\n\t\t\tClientEvents.publish(\"branchActiveSetText\", \"Deactivate Branch\");\n\t\t} else {\n\t\t\t// Branch is disabled, show activate button\n\t\t\tClientEvents.publish(\"branchDeleteSetStyle\", {Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t\t\tClientEvents.publish(\"branchActiveSetText\", \"Activate Branch\");\n\t\t}\n\t\t\n        if(model.Name !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"name-value\",model.Name,false);\n\t\t}\n\n        if(model.Address !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"Address-value\",model.Address,false);\n\t\t}\n\t\t \n\t    if(model.CreatedOn !== undefined && model.CreatedOn !== \"\")\n\t\t{\n\t\t\t \n\t\t\tvar date = new Date(parseInt(model.CreatedOn)).toLocaleString();\n\t\t\tvar d = date.split(\",\");\n\t\t\tvar d0 = d[0].split(\"/\");\n\t\t\td0[2] = d0[2] - 2000;\n\t\t\td0 = d0.join(\"/\");\n\t\t\tClientEvents.publish(\"created-date\",d0,false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar date = new Date().toLocaleString();\n\t\t\tvar d = date.split(\",\");\n\t\t\tvar d0 = d[0].split(\"/\");\n\t\t\td0[2] = d0[2] - 2000;\n\t\t\td0 = d0.join(\"/\");\n\t\t\tClientEvents.publish(\"created-date\",d0,false);\n\t\t}\n\t\t\t\n\t\t \n\t\t if(model.CreatedOn !== undefined && model.CreatedOn !== \"\")\n\t\t{\n\t\t\t \n \t\t\tvar date = new Date(parseInt(model.CreatedOn));\n\t\t\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\t\t\tClientEvents.publish(\"created-date\",format,false);\n\t\t}\n\t\t\n\t\tif(model.UpdatedOn !== undefined && model.UpdatedOn !== \"\")\n\t\t{\n\t\t\t \n\t\t\tvar date = new Date(parseInt(model.UpdatedOn));\n\t\t\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\t\t\t\n\t\t\tClientEvents.publish(\"created-date\",format,false);\n\t\t\tClientEvents.publish(\"date-label\",\"Updated On\",false);\n\t\t\tClientEvents.publish(\"date-label-style\",\"color:white;\",false);\n\n\t\t}\n\t\t\n\t\tvar countryCode = branchData[6];\n\t\tfor(var country in countryList)\n\t\t{\n\t\t\tvar currentCountry = countryList[country];\n\t\t\tif(countryCode === currentCountry.code)\n\t\t\t{\n\t\t\t\tClientEvents.publish(\"set-country\",currentCountry.name,false);\n\t\t\t}\n\t\t}\n \t});\n}\n\nfunction validate()\n{\n\t\n\tvar result = true;\n\tif(model.Name === null || model.Name === undefined || model.Name === \"\")\n\t{\n\t\tClient.alert(\"Name is required!\");\n \t\tresult = false;\n\t}\n\t\n\t\n\treturn result;\n}\n\n\nfunction formatDate(date, format, utc) {\n    var MMMM = [\"\\x00\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var MMM = [\"\\x01\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    var dddd = [\"\\x02\", \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var ddd = [\"\\x03\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    function ii(i, len) { var s = i + \"\"; len = len || 2; while (s.length < len) s = \"0\" + s; return s; }\n\n    var y = utc ? date.getUTCFullYear() : date.getFullYear();\n    format = format.replace(/(^|[^\\\\])yyyy+/g, \"$1\" + y);\n    format = format.replace(/(^|[^\\\\])yy/g, \"$1\" + y.toString().substr(2, 2));\n    format = format.replace(/(^|[^\\\\])y/g, \"$1\" + y);\n\n    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;\n    format = format.replace(/(^|[^\\\\])MMMM+/g, \"$1\" + MMMM[0]);\n    format = format.replace(/(^|[^\\\\])MMM/g, \"$1\" + MMM[0]);\n    format = format.replace(/(^|[^\\\\])MM/g, \"$1\" + ii(M));\n    format = format.replace(/(^|[^\\\\])M/g, \"$1\" + M);\n\n    var d = utc ? date.getUTCDate() : date.getDate();\n    format = format.replace(/(^|[^\\\\])dddd+/g, \"$1\" + dddd[0]);\n    format = format.replace(/(^|[^\\\\])ddd/g, \"$1\" + ddd[0]);\n    format = format.replace(/(^|[^\\\\])dd/g, \"$1\" + ii(d));\n    format = format.replace(/(^|[^\\\\])d/g, \"$1\" + d);\n\n    var H = utc ? date.getUTCHours() : date.getHours();\n    format = format.replace(/(^|[^\\\\])HH+/g, \"$1\" + ii(H));\n    format = format.replace(/(^|[^\\\\])H/g, \"$1\" + H);\n\n    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;\n    format = format.replace(/(^|[^\\\\])hh+/g, \"$1\" + ii(h));\n    format = format.replace(/(^|[^\\\\])h/g, \"$1\" + h);\n\n    var m = utc ? date.getUTCMinutes() : date.getMinutes();\n    format = format.replace(/(^|[^\\\\])mm+/g, \"$1\" + ii(m));\n    format = format.replace(/(^|[^\\\\])m/g, \"$1\" + m);\n\n    var s = utc ? date.getUTCSeconds() : date.getSeconds();\n    format = format.replace(/(^|[^\\\\])ss+/g, \"$1\" + ii(s));\n    format = format.replace(/(^|[^\\\\])s/g, \"$1\" + s);\n\n    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();\n    format = format.replace(/(^|[^\\\\])fff+/g, \"$1\" + ii(f, 3));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])ff/g, \"$1\" + ii(f));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])f/g, \"$1\" + f);\n\n    var T = H < 12 ? \"AM\" : \"PM\";\n    format = format.replace(/(^|[^\\\\])TT+/g, \"$1\" + T);\n    format = format.replace(/(^|[^\\\\])T/g, \"$1\" + T.charAt(0));\n\n    var t = T.toLowerCase();\n    format = format.replace(/(^|[^\\\\])tt+/g, \"$1\" + t);\n    format = format.replace(/(^|[^\\\\])t/g, \"$1\" + t.charAt(0));\n\n    var tz = -date.getTimezoneOffset();\n    var K = utc || !tz ? \"Z\" : tz > 0 ? \"+\" : \"-\";\n    if (!utc) {\n        tz = Math.abs(tz);\n        var tzHrs = Math.floor(tz / 60);\n        var tzMin = tz % 60;\n        K += ii(tzHrs) + \":\" + ii(tzMin);\n    }\n    format = format.replace(/(^|[^\\\\])K/g, \"$1\" + K);\n\n    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;\n    format = format.replace(new RegExp(dddd[0], \"g\"), dddd[day]);\n    format = format.replace(new RegExp(ddd[0], \"g\"), ddd[day]);\n\n    format = format.replace(new RegExp(MMMM[0], \"g\"), MMMM[M]);\n    format = format.replace(new RegExp(MMM[0], \"g\"), MMM[M]);\n\n    format = format.replace(/\\\\(.)/g, \"$1\");\n\n    return format;\n};"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"branchM":{"t":"Scripting","lX":820,"lY":360,"sX":1,"sY":1,"s":"Branch Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"46.87%","y":"32.38%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"width:100%;height:100%;background-color:#41505aff;\">\n\t\n</div>"},"ev":{}},"Generic#1":{"t":"Generic","lX":0,"lY":0,"sX":12.63,"sY":6.7,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"670px","x":"0%","y":"0%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"set css":{"channel":"set-css/set html","event":"set html","important":"false"}}}}},"Button#6":{"t":"Button","lX":0,"lY":670,"sX":6.32,"sY":1.3,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"0px","y":"670px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Cancel"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#7":{"t":"Button","lX":549,"lY":640,"sX":6.32,"sY":1.3,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"49.8%","y":"670px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Submit"},"ev":{"clientEvents":{"inputEvents":{"setSubmitColor":{"channel":"setSubmitColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"save changes":{"channel":"save-changes/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"customerBG":{"t":"Scripting","lX":705,"lY":15,"sX":1,"sY":1,"s":"Customer Form","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.88%","x":"42.97%","y":"21.62%"},"ver":"200124c190915","z":"100","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"width:100%;height:100%;background-color:#41505aff;\">\n\t\n</div>"},"ev":{}},"CustomerFormController":{"t":"Scripting","lX":875,"lY":185,"sX":1,"sY":1,"s":"Customer Form","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"50.26%","y":"21.85%"},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar\taddrName = \"\";\n \n var countryList = [ \n    {name: 'Afghanistan', code: 'AF'}, \n    {name: 'Åland Islands', code: 'AX'}, \n    {name: 'Albania', code: 'AL'}, \n    {name: 'Algeria', code: 'DZ'}, \n    {name: 'American Samoa', code: 'AS'}, \n    {name: 'AndorrA', code: 'AD'}, \n    {name: 'Angola', code: 'AO'}, \n    {name: 'Anguilla', code: 'AI'}, \n    {name: 'Antarctica', code: 'AQ'}, \n    {name: 'Antigua and Barbuda', code: 'AG'}, \n    {name: 'Argentina', code: 'AR'}, \n    {name: 'Armenia', code: 'AM'}, \n    {name: 'Aruba', code: 'AW'}, \n    {name: 'Australia', code: 'AU'}, \n    {name: 'Austria', code: 'AT'}, \n    {name: 'Azerbaijan', code: 'AZ'}, \n    {name: 'Bahamas', code: 'BS'}, \n    {name: 'Bahrain', code: 'BH'}, \n    {name: 'Bangladesh', code: 'BD'}, \n    {name: 'Barbados', code: 'BB'}, \n    {name: 'Belarus', code: 'BY'}, \n    {name: 'Belgium', code: 'BE'}, \n    {name: 'Belize', code: 'BZ'}, \n    {name: 'Benin', code: 'BJ'}, \n    {name: 'Bermuda', code: 'BM'}, \n    {name: 'Bhutan', code: 'BT'}, \n    {name: 'Bolivia', code: 'BO'}, \n    {name: 'Bosnia and Herzegovina', code: 'BA'}, \n    {name: 'Botswana', code: 'BW'}, \n    {name: 'Bouvet Island', code: 'BV'}, \n    {name: 'Brazil', code: 'BR'}, \n    {name: 'British Indian Ocean Territory', code: 'IO'}, \n    {name: 'Brunei Darussalam', code: 'BN'}, \n    {name: 'Bulgaria', code: 'BG'}, \n    {name: 'Burkina Faso', code: 'BF'}, \n    {name: 'Burundi', code: 'BI'}, \n    {name: 'Cambodia', code: 'KH'}, \n    {name: 'Cameroon', code: 'CM'}, \n    {name: 'Canada', code: 'CA'}, \n    {name: 'Cape Verde', code: 'CV'}, \n    {name: 'Cayman Islands', code: 'KY'}, \n    {name: 'Central African Republic', code: 'CF'}, \n    {name: 'Chad', code: 'TD'}, \n    {name: 'Chile', code: 'CL'}, \n    {name: 'China', code: 'CN'}, \n    {name: 'Christmas Island', code: 'CX'}, \n    {name: 'Cocos (Keeling) Islands', code: 'CC'}, \n    {name: 'Colombia', code: 'CO'}, \n    {name: 'Comoros', code: 'KM'}, \n    {name: 'Congo', code: 'CG'}, \n    {name: 'Congo, The Democratic Republic of the', code: 'CD'}, \n    {name: 'Cook Islands', code: 'CK'}, \n    {name: 'Costa Rica', code: 'CR'}, \n    {name: 'Cote D\\'Ivoire', code: 'CI'}, \n    {name: 'Croatia', code: 'HR'}, \n    {name: 'Cuba', code: 'CU'}, \n    {name: 'Cyprus', code: 'CY'}, \n    {name: 'Czech Republic', code: 'CZ'}, \n    {name: 'Denmark', code: 'DK'}, \n    {name: 'Djibouti', code: 'DJ'}, \n    {name: 'Dominica', code: 'DM'}, \n    {name: 'Dominican Republic', code: 'DO'}, \n    {name: 'Ecuador', code: 'EC'}, \n    {name: 'Egypt', code: 'EG'}, \n    {name: 'El Salvador', code: 'SV'}, \n    {name: 'Equatorial Guinea', code: 'GQ'}, \n    {name: 'Eritrea', code: 'ER'}, \n    {name: 'Estonia', code: 'EE'}, \n    {name: 'Ethiopia', code: 'ET'}, \n    {name: 'Falkland Islands (Malvinas)', code: 'FK'}, \n    {name: 'Faroe Islands', code: 'FO'}, \n    {name: 'Fiji', code: 'FJ'}, \n    {name: 'Finland', code: 'FI'}, \n    {name: 'France', code: 'FR'}, \n    {name: 'French Guiana', code: 'GF'}, \n    {name: 'French Polynesia', code: 'PF'}, \n    {name: 'French Southern Territories', code: 'TF'}, \n    {name: 'Gabon', code: 'GA'}, \n    {name: 'Gambia', code: 'GM'}, \n    {name: 'Georgia', code: 'GE'}, \n    {name: 'Germany', code: 'DE'}, \n    {name: 'Ghana', code: 'GH'}, \n    {name: 'Gibraltar', code: 'GI'}, \n    {name: 'Greece', code: 'GR'}, \n    {name: 'Greenland', code: 'GL'}, \n    {name: 'Grenada', code: 'GD'}, \n    {name: 'Guadeloupe', code: 'GP'}, \n    {name: 'Guam', code: 'GU'}, \n    {name: 'Guatemala', code: 'GT'}, \n    {name: 'Guernsey', code: 'GG'}, \n    {name: 'Guinea', code: 'GN'}, \n    {name: 'Guinea-Bissau', code: 'GW'}, \n    {name: 'Guyana', code: 'GY'}, \n    {name: 'Haiti', code: 'HT'}, \n    {name: 'Heard Island and Mcdonald Islands', code: 'HM'}, \n    {name: 'Holy See (Vatican City State)', code: 'VA'}, \n    {name: 'Honduras', code: 'HN'}, \n    {name: 'Hong Kong', code: 'HK'}, \n    {name: 'Hungary', code: 'HU'}, \n    {name: 'Iceland', code: 'IS'}, \n    {name: 'India', code: 'IN'}, \n    {name: 'Indonesia', code: 'ID'}, \n    {name: 'Iran, Islamic Republic Of', code: 'IR'}, \n    {name: 'Iraq', code: 'IQ'}, \n    {name: 'Ireland', code: 'IE'}, \n    {name: 'Isle of Man', code: 'IM'}, \n    {name: 'Israel', code: 'IL'}, \n    {name: 'Italy', code: 'IT'}, \n    {name: 'Jamaica', code: 'JM'}, \n    {name: 'Japan', code: 'JP'}, \n    {name: 'Jersey', code: 'JE'}, \n    {name: 'Jordan', code: 'JO'}, \n    {name: 'Kazakhstan', code: 'KZ'}, \n    {name: 'Kenya', code: 'KE'}, \n    {name: 'Kiribati', code: 'KI'}, \n    {name: 'Korea, Democratic People\\'S Republic of', code: 'KP'}, \n    {name: 'Korea, Republic of', code: 'KR'}, \n    {name: 'Kuwait', code: 'KW'}, \n    {name: 'Kyrgyzstan', code: 'KG'}, \n    {name: 'Lao People\\'S Democratic Republic', code: 'LA'}, \n    {name: 'Latvia', code: 'LV'}, \n    {name: 'Lebanon', code: 'LB'}, \n    {name: 'Lesotho', code: 'LS'}, \n    {name: 'Liberia', code: 'LR'}, \n    {name: 'Libyan Arab Jamahiriya', code: 'LY'}, \n    {name: 'Liechtenstein', code: 'LI'}, \n    {name: 'Lithuania', code: 'LT'}, \n    {name: 'Luxembourg', code: 'LU'}, \n    {name: 'Macao', code: 'MO'}, \n    {name: 'Macedonia, The Former Yugoslav Republic of', code: 'MK'}, \n    {name: 'Madagascar', code: 'MG'}, \n    {name: 'Malawi', code: 'MW'}, \n    {name: 'Malaysia', code: 'MY'}, \n    {name: 'Maldives', code: 'MV'}, \n    {name: 'Mali', code: 'ML'}, \n    {name: 'Malta', code: 'MT'}, \n    {name: 'Marshall Islands', code: 'MH'}, \n    {name: 'Martinique', code: 'MQ'}, \n    {name: 'Mauritania', code: 'MR'}, \n    {name: 'Mauritius', code: 'MU'}, \n    {name: 'Mayotte', code: 'YT'}, \n    {name: 'Mexico', code: 'MX'}, \n    {name: 'Micronesia, Federated States of', code: 'FM'}, \n    {name: 'Moldova, Republic of', code: 'MD'}, \n    {name: 'Monaco', code: 'MC'}, \n    {name: 'Mongolia', code: 'MN'}, \n    {name: 'Montserrat', code: 'MS'}, \n    {name: 'Morocco', code: 'MA'}, \n    {name: 'Mozambique', code: 'MZ'}, \n    {name: 'Myanmar', code: 'MM'}, \n    {name: 'Namibia', code: 'NA'}, \n    {name: 'Nauru', code: 'NR'}, \n    {name: 'Nepal', code: 'NP'}, \n    {name: 'Netherlands', code: 'NL'}, \n    {name: 'Netherlands Antilles', code: 'AN'}, \n    {name: 'New Caledonia', code: 'NC'}, \n    {name: 'New Zealand', code: 'NZ'}, \n    {name: 'Nicaragua', code: 'NI'}, \n    {name: 'Niger', code: 'NE'}, \n    {name: 'Nigeria', code: 'NG'}, \n    {name: 'Niue', code: 'NU'}, \n    {name: 'Norfolk Island', code: 'NF'}, \n    {name: 'Northern Mariana Islands', code: 'MP'}, \n    {name: 'Norway', code: 'NO'}, \n    {name: 'Oman', code: 'OM'}, \n    {name: 'Pakistan', code: 'PK'}, \n    {name: 'Palau', code: 'PW'}, \n    {name: 'Palestinian Territory, Occupied', code: 'PS'}, \n    {name: 'Panama', code: 'PA'}, \n    {name: 'Papua New Guinea', code: 'PG'}, \n    {name: 'Paraguay', code: 'PY'}, \n    {name: 'Peru', code: 'PE'}, \n    {name: 'Philippines', code: 'PH'}, \n    {name: 'Pitcairn', code: 'PN'}, \n    {name: 'Poland', code: 'PL'}, \n    {name: 'Portugal', code: 'PT'}, \n    {name: 'Puerto Rico', code: 'PR'}, \n    {name: 'Qatar', code: 'QA'}, \n    {name: 'Reunion', code: 'RE'}, \n    {name: 'Romania', code: 'RO'}, \n    {name: 'Russian Federation', code: 'RU'}, \n    {name: 'RWANDA', code: 'RW'}, \n    {name: 'Saint Helena', code: 'SH'}, \n    {name: 'Saint Kitts and Nevis', code: 'KN'}, \n    {name: 'Saint Lucia', code: 'LC'}, \n    {name: 'Saint Pierre and Miquelon', code: 'PM'}, \n    {name: 'Saint Vincent and the Grenadines', code: 'VC'}, \n    {name: 'Samoa', code: 'WS'}, \n    {name: 'San Marino', code: 'SM'}, \n    {name: 'Sao Tome and Principe', code: 'ST'}, \n    {name: 'Saudi Arabia', code: 'SA'}, \n    {name: 'Senegal', code: 'SN'}, \n    {name: 'Serbia and Montenegro', code: 'CS'}, \n    {name: 'Seychelles', code: 'SC'}, \n    {name: 'Sierra Leone', code: 'SL'}, \n    {name: 'Singapore', code: 'SG'}, \n    {name: 'Slovakia', code: 'SK'}, \n    {name: 'Slovenia', code: 'SI'}, \n    {name: 'Solomon Islands', code: 'SB'}, \n    {name: 'Somalia', code: 'SO'}, \n    {name: 'South Africa', code: 'ZA'}, \n    {name: 'South Georgia and the South Sandwich Islands', code: 'GS'}, \n    {name: 'Spain', code: 'ES'}, \n    {name: 'Sri Lanka', code: 'LK'}, \n    {name: 'Sudan', code: 'SD'}, \n    {name: 'Suriname', code: 'SR'}, \n    {name: 'Svalbard and Jan Mayen', code: 'SJ'}, \n    {name: 'Swaziland', code: 'SZ'}, \n    {name: 'Sweden', code: 'SE'}, \n    {name: 'Switzerland', code: 'CH'}, \n    {name: 'Syrian Arab Republic', code: 'SY'}, \n    {name: 'Taiwan, Province of China', code: 'TW'}, \n    {name: 'Tajikistan', code: 'TJ'}, \n    {name: 'Tanzania, United Republic of', code: 'TZ'}, \n    {name: 'Thailand', code: 'TH'}, \n    {name: 'Timor-Leste', code: 'TL'}, \n    {name: 'Togo', code: 'TG'}, \n    {name: 'Tokelau', code: 'TK'}, \n    {name: 'Tonga', code: 'TO'}, \n    {name: 'Trinidad and Tobago', code: 'TT'}, \n    {name: 'Tunisia', code: 'TN'}, \n    {name: 'Turkey', code: 'TR'}, \n    {name: 'Turkmenistan', code: 'TM'}, \n    {name: 'Turks and Caicos Islands', code: 'TC'}, \n    {name: 'Tuvalu', code: 'TV'}, \n    {name: 'Uganda', code: 'UG'}, \n    {name: 'Ukraine', code: 'UA'}, \n    {name: 'United Arab Emirates', code: 'AE'}, \n    {name: 'United Kingdom', code: 'GB'}, \n    {name: 'United States', code: 'US'}, \n    {name: 'United States Minor Outlying Islands', code: 'UM'}, \n    {name: 'Uruguay', code: 'UY'}, \n    {name: 'Uzbekistan', code: 'UZ'}, \n    {name: 'Vanuatu', code: 'VU'}, \n    {name: 'Venezuela', code: 'VE'}, \n    {name: 'Viet Nam', code: 'VN'}, \n    {name: 'Virgin Islands, British', code: 'VG'}, \n    {name: 'Virgin Islands, U.S.', code: 'VI'}, \n    {name: 'Wallis and Futuna', code: 'WF'}, \n    {name: 'Western Sahara', code: 'EH'}, \n    {name: 'Yemen', code: 'YE'}, \n    {name: 'Zambia', code: 'ZM'}, \n    {name: 'Zimbabwe', code: 'ZW'} \n  ];\n \n var _UpdatePersistance;\n var persistence;\n var model;\n var Caller;\nvar maitnanceId;\nvar valid;\nvar NameChanged = false;\n Script.on('load', function() {\n    Script.setState(\"Caller\", \"Levels\");\n\tCaller = \"Levels\";\n    maitnanceId =Script.getState(\"rodent-maitnanceId\"); \n    persistence = Script.getState(\"rodent-persistance\");\n    Script.setState(\"ReturningFromMaintenance\", true, false);\n    Script.setState(\"ReturningFromMaintenanceLevel\", 2, false);\n\n    var bgContainer =  Script.getScriptElement(\"customerBG\");\n    var clearfixLine =  Script.getScriptElement(\"clearfixcustomer\");\n    var panelIcon =  Script.getScriptElement(\"customericonform\");\n\t \n     try{\n\t\t_UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\t\tpersistence.LastScreen = \"Customer Form\";\n\t\t_UpdatePersistance(persistence);\n\t }\n\t catch(e)\n\t {\n\t\t setTimeout(function(){ \t\n\t\t\t fw.func(\"JUMPSCREEN\", \"Initialisation\");\n\t\t }, 3000);\t \n\t }\n\n    ClientEvents.publish(\"set-css\",bgContainer ,false);\n    ClientEvents.publish(\"clear-fix-line\",clearfixLine ,false);\n    ClientEvents.publish(\"set-icon-svg\",panelIcon ,false);\n\t \n    ClientEvents.publish(\"setbtn1Color\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t \n\tClientEvents.publish(\"setInactiveCustomerStyle\", {Property: \"color\",PropertyValue:\"white\"},false);\n\n    //\tClientEvents.publish(\"setSubmitColor\",{Property: \"width\",PropertyValue:\"96%\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t\n    var countryDropdown = Script.getWidget(\"countryDropdown\");\n\tvar coll = new SensaCollection([\"text\", \"value\"], \"text\", {});\n\tvar data = countryList.map(country => ({text: country.name, value: country.code}));\n\tfor (var i = 0;i<data.length;i++) {\n\t\tcoll.add(data[i]);\n\t}\n\tcountryDropdown.receiveTextValues(coll);\n\tcountryDropdown.resetDefault();\n   \n\tmodel = {};\n    if(maitnanceId !== null && maitnanceId !== undefined && maitnanceId !== \"0\")\n    {\n        LoadModel(maitnanceId);\n    }\n    else\n    {\n\t\tLoadDefaultCountry();\n        Database.readLastPrimaryKey(\"Rodent\",\"Customers\",function(eventData){\n\t\t\tmodel.Id = parseInt(eventData.value) + 1;\n\t\t});\n        model.Name = \"\";\n        model.Address = \"\";\n        model.PrimaryContactName = \"\";\n        model.PrimaryContactEmail = \"\";\n        model.PrimaryContactMobile = \"\";\n    }\n\tvar date = new Date();\n\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\tClientEvents.publish(\"created-date\",format,false);\n    ClientEvents.publish(\"setDateColor\",\"white\",false);\n\n\t\n \n });\n\nClientEvents.subscribe(\"Address-changed\", function(data) \n{ \n  \n\tmodel.Address = \"\";\n    var addressData = data.value.address_components;\n    //model.Address = addressData[0].long_name + \", \" + addressData[1].short_name + \", \" + addressData[2].long_name +  \", \" + addressData[3].long_name + \", \" + addressData[4].long_name + \", \" + addressData[5].long_name ;\n    model.Address = addressData[0].long_name + \", \" + addressData[1].short_name + \", \" + addressData[2].long_name +  \", \" + addressData[4].long_name + \", \" + addressData[5].long_name ;\n\tmodel.zip = addressData[5].long_name;\n    model.state = addressData[4].long_name;\n    model.city = addressData[3].long_name;\n\t\n\t\n});\n\nClientEvents.subscribe(\"name-changed\", function(data) \n{ \n    model.Name = data.value;\n});\n\nClientEvents.subscribe(\"primary-name-changed\", function(data) \n{ \n\n    model.PrimaryContactName = data.value;\n\tif(data.value !== \"\")\n\t{\n\t\tNameChanged = true;\n\t}\n});\n\n\nClientEvents.subscribe(\"primary-email-changed\", function(data) \n{ \n \tmodel.PrimaryContactEmail = data.value;\n});\n\n\nClientEvents.subscribe(\"mobile-changed\", function(data) \n{ \n    model.PrimaryContactMobile = data.value;\n});\n\nClientEvents.subscribe(\"classification-selected\", function(data) \n{ \n\t\n    model.Classification = data.value;\n});\n\nClientEvents.subscribe(\"cancel-btn\", function(data) \n{  \n\tScript.setState(\"matinanceCanceled\", \"1\",false);\n\tfw.func(\"JUMPSCREEN\", Caller);\n});\nClientEvents.subscribe(\"country-selected\", function(data) \n{  \n\tmodel.country = data.value;\n\t\n\tfor(var country in \tcountryList)\n\t{\n\t\tif(country.code === model.country)\n\t\t{\n\t\t\tmodel.country = country.name;\n\t\t}\n\t}\n\tClientEvents.publish(\"setCountry\",data.value,false);\n\t\n});\n\n\n\nClientEvents.subscribe(\"save-changes\", function(data) \n{ \n\t \n\tif(validate())\n\t{\n\t\tvar dbVal = {};\n\t\t   \n\t\tdbVal[\"Id\"] =\n\t\t{\n\t\t\t\"Id\":model.Id,\n\t\t\t\"Name\": model.Name,\n\t\t\t\"Address\":model.Address,\n\t\t\t\"RelativeId\":persistence.BranchId,\n\t\t\t\"PrimaryContactName\": model.PrimaryContactName === undefined ? \"\" : model.PrimaryContactName,\n\t\t\t\"PrimaryContactEmail\": model.PrimaryContactEmail === undefined ? \"\" : model.PrimaryContactEmail,\n\t\t\t\"PrimaryContactMobile\": model.PrimaryContactMobile === undefined ? \"\" : model.PrimaryContactMobile,\n\t\t\t\"Classification\":model.Classification === undefined ? \"\" : model.Classification,\n\t\t\t\"Country\":model.country  === undefined ? \"\" : model.country,\n\t\t\t\"Zip\":model.postalCode  === undefined ? \"\" : model.postalCode,\n\t\t\t\"City\":model.city === undefined ? \"\" : model.city,\n\t\t\t\"State\": model.state === undefined ? \"\" : model.state\n\t\t};    \n\n\t\tif(maitnanceId !== null && maitnanceId !== undefined && maitnanceId === \"0\")\n\t\t{\n\t\t\tdbVal[\"Id\"].CreatedBy = fw.func(\"GETUSER\");\n\t\t\tdbVal[\"Id\"].CreatedOn = new Date().getTime();\n\t\t\tdbVal[\"Id\"].OWner = fw.func(\"GETUSER\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdbVal[\"Id\"].UpdatedBy = fw.func(\"GETUSER\");\n\t\t\tdbVal[\"Id\"].UpdatedOn = new Date().getTime();\n\t\t}\n\n\t\tDatabase.saveRecordParam(\"Rodent\",\"Customers\",dbVal, function(result)\n\t\t{ \t\n\t\t\t Script.setState(\"MaitnanceMode\",maitnanceId);\n\t\t\t Script.setState(\"SelectedEditId\",model.Id);\n\t\t\t fw.func(\"JUMPSCREEN\", Caller);\n\t\t});\n\t}\n});\n\nClientEvents.subscribe(\"inactivateCustomer\", function(eventData) {\n\tDatabase.readRecords(\"Rodent\", \"Devices\", async function (deviceValues) {\n\t\tconsole.log(deviceValues);\n\t\t// Check if any active devices with customer\n\t\tif (model.Status == 1 && Object.keys(deviceValues.value.data).length > 0) {\n\t\t\t// Do not allow customer to be deactivated if devices are present\n\t\t\tClient.alert(\"There are active devices currently at a location within the hierarchy\", \"Delete not Permitted\");\n\t\t\treturn;\n\t\t}\n\t\tlet res = await Client.confirm(\"Do you want to toggle this customer, and all sites and locations within this customer?\", \n\t\t\t\t\t\t\t\t\t\t\t   (model.Status == 1 ? \"Deactivate\" : \"Activate\") + \" all levels?\",  \n\t\t\t\t\t\t\t\t\t\t\t   { confirmText: \"Yes\", cancelText: \"No\" });\n\t\tif (!res) {\n\t\t\treturn;\n\t\t}\n\t\tvar dbVal = {};\n\t\tdbVal[\"Id\"] =\n\t\t{\n\t\t\t\"Id\":model.Id,\n\t\t\t\"Name\": model.Name,\n\t\t\t\"Address\":model.Address,\n\t\t\t\"RelativeId\":persistence.BranchId,\n\t\t\t\"PrimaryContactName\": model.PrimaryContactName === undefined ? \"\" : model.PrimaryContactName,\n\t\t\t\"PrimaryContactEmail\": model.PrimaryContactEmail === undefined ? \"\" : model.PrimaryContactEmail,\n\t\t\t\"PrimaryContactMobile\": model.PrimaryContactMobile === undefined ? \"\" : model.PrimaryContactMobile,\n\t\t\t\"Classification\":model.Classification === undefined ? \"\" : model.Classification,\n\t\t\t\"Country\":model.country  === undefined ? \"\" : model.country,\n\t\t\t\"Zip\":model.postalCode  === undefined ? \"\" : model.postalCode,\n\t\t\t\"City\":model.city === undefined ? \"\" : model.city,\n\t\t\t\"State\": model.state === undefined ? \"\" : model.state,\n\t\t\t\"Status\": model.Status == 1 ? \"0\" : \"1\",\n\t\t\t\"UpdatedBy\": fw.func(\"GETUSER\"),\n\t\t\t\"UpdatedOn\": new Date().getTime()\n\t\t};\n\t\t// Toggle activate the branch\n\t\tDatabase.saveRecordParam(\"Rodent\", \"Customers\", dbVal, async function (result) {\n\t\t\tif (model.Status != 1) {\n\t\t\t\t// Prompt user for activating all lower levels\n\t\t\t\tlet res = await Client.confirm(\"Do you want to activate all sites, and locations for this customer?\", \n\t\t\t\t\t\t\t\t\t\t\t   \"Activate all levels?\", \n\t\t\t\t\t\t\t\t\t\t\t   { confirmText: \"Yes\", cancelText: \"No\" });\n\t\t\t\tif (!res) {\n\t\t\t\t\tfw.func(\"JUMPSCREEN\", Caller);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Toggle activate sites of the customer\n\t\t\ttoggleActivateSites(model.Id);\n\t\t});\n\t}, {filter: `CustomerId='${model.Id}' AND Status='${model.Status}'`});\n});\n\n\nfunction toggleActivateSites(customerId) {\n\tDatabase.readRecords(\"Rodent\", \"Sites\", function (siteValues) {\n\t\tvar sitesRemaining = Object.keys(siteValues.value.data).length;\n\t\tif (sitesRemaining) {\n\t\t\tsiteValues.value.forEach((record, pk) => {\n\t\t\t\trecord.Status = model.Status == 1 ? \"0\" : \"1\";\n\t\t\t\tvar dbVal = {};\n\t\t\t\tdbVal[\"Id\"] = record;\n\t\t\t\tDatabase.saveRecordParam(\"Rodent\", \"Sites\", dbVal, function (result) {\n\t\t\t\t\tsitesRemaining--;\n\t\t\t\t\ttoggleActivateLocations(record.Id, sitesRemaining);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {filter: `RelativeId='${customerId}' AND Status='${model.Status}'`});\n}\n\nfunction toggleActivateLocations(siteId, sitesRemaining) {\n\tDatabase.readRecords(\"Rodent\", \"Locations\", function (locationValues) {\n\t\tconsole.log(\"Toggling locaitons for site \" + siteId);\n\t\tvar locationsRemaining = Object.keys(locationValues.value.data).length;\n\t\tif (locationsRemaining) {\n\t\t\tlocationValues.value.forEach((record, pk) => {\n\t\t\t\trecord.Status = model.Status == 1 ? \"0\" : \"1\";\n\t\t\t\tvar dbVal = {};\n\t\t\t\tdbVal[\"Id\"] = record;\n\t\t\t\tlocationsRemaining--;\n\t\t\t\tDatabase.saveRecordParam(\"Rodent\", \"Locations\", dbVal);\n\t\t\t});\n\t\t}\n\t\tconsole.log(`LOCATIONS ${locationsRemaining}, SITES ${sitesRemaining}`)\n\t\tif (!locationsRemaining && !sitesRemaining) {\n\t\t\tfw.func(\"JUMPSCREEN\", Caller);\n\t\t}\n\t}, {filter: `RelativeId='${siteId}' AND Status='${model.Status}'`});\n}\n\nfunction LoadModel(id)\n{\n    var getAdvisory =\n\t[{\n\t\t\"TableName\" : \"Customers\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t\t\"Id\",\n\t\t    \"Name\",\n\t\t\t\"Address\",\n\t\t\t\"PrimaryContactName\",\n\t\t\t\"PrimaryContactEmail\",\n\t\t\t\"PrimaryContactMobile\",\n\t\t\t\"Classification\",\n\t\t\t\"CreatedOn\",\n\t\t\t\"UpdatedOn\",\n\t\t\t\"Status\",\n\t\t\t\"Country\",\n\t\t\t\"Zip\",\n\t\t\t\"City\",\n\t\t\t\"State\"\n\t\t\t \n\t\t], // Specify the list of columns to take from the reference table.\n\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t[\n\t\t\t{\n\t\t\t\t\"Column\" : \"Id\",\n\t\t\t\t\"ParamName\" : \"branchId\",\n\t\t\t\t\"Value\": id  \n\t\t\t}\t\n\t\t]\n\t}];\n\tDatabase.readCompound(\"rodent\",\"Customers\",getAdvisory, function(currentData)\t\t\t\t\t \n    {\n\t\tvar branchData;\n\t\tfor(var item in currentData.value.data)\n\t\t{\n\t\t\tbranchData = currentData.value.data[item];\n        }\n        model = {};\n        model.Id = branchData[0];\n        model.Name = branchData[1];\n        model.Address = branchData[2];\n\t\tmodel.PrimaryContactName = branchData[3];\n\t\tmodel.PrimaryContactEmail = branchData[4];\n\t\tmodel.PrimaryContactMobile = branchData[5];\n\t\tmodel.Classification = branchData[6];\n\t\tmodel.CreatedOn = branchData[7];\n\t\tmodel.UpdatedOn = branchData[8];\n\t\tmodel.Status = branchData[9];\n\t\tmodel.country = branchData[10];\n\t\tmodel.postalCode = branchData[11];\n\t\tmodel.city = branchData[12];\n\t\tmodel.state = branchData[13];\n\t\t\n\t\tif (model.Status == 1) {\n\t\t\t// Customer is enabled, show deactivate button\n\t\t\tClientEvents.publish(\"setInactiveCustomerStyle\", {Property: \"background-color\",PropertyValue:\"#d12d1b\"},false);\n\t\t\tClientEvents.publish(\"setActiveCustomerText\", \"Deactivate Customer\");\n\t\t} else {\n\t\t\t// Customer is disabled, show activate button\n\t\t\tClientEvents.publish(\"setInactiveCustomerStyle\", {Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t\t\tClientEvents.publish(\"setActiveCustomerText\", \"Activate Customer\");\n\t\t}\n\t\t\n\t\t \n        if(model.Name !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"name-value\",model.Name,false);\n\t\t}\n\n        if(model.Address !== undefined)\n\t\t{\n\t\t\tvar devAddress = (typeof model.Address === \"string\")? model.Address.plit(\",\") : \"\";\n\t\t\tif(devAddress.length === 6) {\n                var addressList = devAddress.filter(function(value, index, arr) {\n                    return index !== 3;\n                });\n                model.Address = addressList.join(\", \");\n            }\n\t\t\tClientEvents.publish(\"Address-value\",model.Address,false);\n\t\t}\n\t\t\n\t    if(model.PrimaryContactName !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"primary-name-value\",model.PrimaryContactName,false);\n\t\t}\n\t\t\n\t\tif(model.PrimaryContactEmail !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"primary-email-value\",model.PrimaryContactEmail,false);\n\t\t}\n\t\t\n\t\tif(model.PrimaryContactMobile !== undefined && model.PrimaryContactMobile !== \"\" )\n\t\t{\n\t\t\tClientEvents.publish(\"mobile-value\",model.PrimaryContactMobile,false);\n\t\t}\n\t\t\n\t\tif(model.Classification !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"set-classification\",model.Classification,false);\n\t\t}\n\t\t\n\t\t\n\t\t if(model.CreatedOn !== undefined && model.UpdatedOn !== \"\")\n\t\t{\n\t\t\t \n \t\t\tvar date = new Date(parseInt(model.CreatedOn));\n\t\t\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\t\t\tClientEvents.publish(\"created-date\",format,false);\n\t\t\tClientEvents.publish(\"setDateColor\",\"color:white;\",false);\n\n\t\t}\n\t\t\n\t\tif(model.UpdatedOn !== undefined && model.UpdatedOn !== \"\")\n\t\t{\n\t\t\t  \n\t\t\tvar date = new Date(parseInt(model.UpdatedOn));\n\t\t\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\t\t\t\n\t\t\tClientEvents.publish(\"created-date\",format,false);\n\t\t\tClientEvents.publish(\"date-label\",\"Updated On\",false);\n\t\t\tClientEvents.publish(\"setDateColor\",\"color:white;\",false);\n\n\t\t}\n\t\t\n\t\tvar countryCode = model.country;\n\t\tfor(var country in countryList)\n\t\t{\n\t\t\tvar currentCountry = countryList[country];\n\t\t\tif(countryCode === currentCountry.code)\n\t\t\t{\n\t\t\t\tClientEvents.publish(\"set-country\",currentCountry.name,false);\n\t\t\t}\n\t\t}\n \t});\n}\n\n\nfunction validate()\n{\n\t  \n\tvar result = true;\n\tif(model.Name === \"\")\n\t{\n\t\tClient.alert(\"Name is required!\");\n \t\treturn false;\n\t}\n \n\tif(model.PrimaryContactEmail === \"Invalid Input\" || model.PrimaryContactEmail === \"\" && NameChanged)\n\t{\n        Client.alert(\"Primary Contact Email is required!\");\n\t\treturn false;\n\t}\n\tif(model.PrimaryContactMobile === \"\" && NameChanged)\n\t{\n        Client.alert(\"Mobile is required!\");\n \t\treturn false;\n\t}\n\t\t \n\treturn result;\n}\n\n\nfunction formatDate(date, format, utc) {\n    var MMMM = [\"\\x00\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var MMM = [\"\\x01\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    var dddd = [\"\\x02\", \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var ddd = [\"\\x03\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    function ii(i, len) { var s = i + \"\"; len = len || 2; while (s.length < len) s = \"0\" + s; return s; }\n\n    var y = utc ? date.getUTCFullYear() : date.getFullYear();\n    format = format.replace(/(^|[^\\\\])yyyy+/g, \"$1\" + y);\n    format = format.replace(/(^|[^\\\\])yy/g, \"$1\" + y.toString().substr(2, 2));\n    format = format.replace(/(^|[^\\\\])y/g, \"$1\" + y);\n\n    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;\n    format = format.replace(/(^|[^\\\\])MMMM+/g, \"$1\" + MMMM[0]);\n    format = format.replace(/(^|[^\\\\])MMM/g, \"$1\" + MMM[0]);\n    format = format.replace(/(^|[^\\\\])MM/g, \"$1\" + ii(M));\n    format = format.replace(/(^|[^\\\\])M/g, \"$1\" + M);\n\n    var d = utc ? date.getUTCDate() : date.getDate();\n    format = format.replace(/(^|[^\\\\])dddd+/g, \"$1\" + dddd[0]);\n    format = format.replace(/(^|[^\\\\])ddd/g, \"$1\" + ddd[0]);\n    format = format.replace(/(^|[^\\\\])dd/g, \"$1\" + ii(d));\n    format = format.replace(/(^|[^\\\\])d/g, \"$1\" + d);\n\n    var H = utc ? date.getUTCHours() : date.getHours();\n    format = format.replace(/(^|[^\\\\])HH+/g, \"$1\" + ii(H));\n    format = format.replace(/(^|[^\\\\])H/g, \"$1\" + H);\n\n    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;\n    format = format.replace(/(^|[^\\\\])hh+/g, \"$1\" + ii(h));\n    format = format.replace(/(^|[^\\\\])h/g, \"$1\" + h);\n\n    var m = utc ? date.getUTCMinutes() : date.getMinutes();\n    format = format.replace(/(^|[^\\\\])mm+/g, \"$1\" + ii(m));\n    format = format.replace(/(^|[^\\\\])m/g, \"$1\" + m);\n\n    var s = utc ? date.getUTCSeconds() : date.getSeconds();\n    format = format.replace(/(^|[^\\\\])ss+/g, \"$1\" + ii(s));\n    format = format.replace(/(^|[^\\\\])s/g, \"$1\" + s);\n\n    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();\n    format = format.replace(/(^|[^\\\\])fff+/g, \"$1\" + ii(f, 3));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])ff/g, \"$1\" + ii(f));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])f/g, \"$1\" + f);\n\n    var T = H < 12 ? \"AM\" : \"PM\";\n    format = format.replace(/(^|[^\\\\])TT+/g, \"$1\" + T);\n    format = format.replace(/(^|[^\\\\])T/g, \"$1\" + T.charAt(0));\n\n    var t = T.toLowerCase();\n    format = format.replace(/(^|[^\\\\])tt+/g, \"$1\" + t);\n    format = format.replace(/(^|[^\\\\])t/g, \"$1\" + t.charAt(0));\n\n    var tz = -date.getTimezoneOffset();\n    var K = utc || !tz ? \"Z\" : tz > 0 ? \"+\" : \"-\";\n    if (!utc) {\n        tz = Math.abs(tz);\n        var tzHrs = Math.floor(tz / 60);\n        var tzMin = tz % 60;\n        K += ii(tzHrs) + \":\" + ii(tzMin);\n    }\n    format = format.replace(/(^|[^\\\\])K/g, \"$1\" + K);\n\n    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;\n    format = format.replace(new RegExp(dddd[0], \"g\"), dddd[day]);\n    format = format.replace(new RegExp(ddd[0], \"g\"), ddd[day]);\n\n    format = format.replace(new RegExp(MMMM[0], \"g\"), MMMM[M]);\n    format = format.replace(new RegExp(MMM[0], \"g\"), MMM[M]);\n\n    format = format.replace(/\\\\(.)/g, \"$1\");\n\n    return format;\n};\n\n\nfunction LoadDefaultCountry()\n{\n\tvar getBranch =\n\t[{\n\t\t\"TableName\" : \"Branches\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t\t\"Country\"\n\t\t\t \n\t\t], // Specify the list of columns to take from the reference table.\n\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t[\n\t\t\t{\n\t\t\t\t\"Column\" : \"Id\",\n\t\t\t\t\"ParamName\" : \"branchId\",\n\t\t\t\t\"Value\": persistence.BranchId  \n\t\t\t}\t\n\t\t]\n\t}];\n\tDatabase.readCompound(\"rodent\",\"Branches\",getBranch, function(currentData)\t\t\t\t\t \n    {\n\t\tdebugger\n\t\tfor(var item in currentData.value.data)\n\t\t{\n\t\t\tvar current = currentData.value.data[item];\n\t\t\tvar countryCode = current[0];\n\t\t\tfor(var country in countryList)\n\t\t\t{\n\t\t\t\tvar currentCountry = countryList[country];\n\t\t\t\tif(countryCode === currentCountry.code)\n\t\t\t\t{\n\t\t\t\t\tClientEvents.publish(\"set-country\",currentCountry.name,false);\n\t\t\t\t\tClientEvents.publish(\"setCountry\",currentCountry.code,false);\n\t\t\t\t\tmodel.country = currentCountry.name;\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"Generic#11":{"t":"Generic","lX":0,"lY":0,"sX":12.54,"sY":8.58,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"99.3%","height":"858px","x":"0%","y":"0%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"green"},"ev":{"clientEvents":{"inputEvents":{"set css":{"channel":"set-css/set html","event":"set html","important":"false"}}}}},"Button#8":{"t":"Button","lX":0,"lY":858,"sX":6.32,"sY":1.3,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"0px","y":"858px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Cancel"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#9":{"t":"Button","lX":860,"lY":858,"sX":6.32,"sY":1.3,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"49.8%","y":"858px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Submit"},"ev":{"clientEvents":{"inputEvents":{"setSubmitColor":{"channel":"setSubmitColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"save changes":{"channel":"save-changes/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Scripting#5":{"t":"Scripting","lX":820,"lY":190,"sX":1,"sY":1,"s":"Site Form","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.88%","x":"47.56%","y":"23.04%"},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n \n \n var _UpdatePersistance;\n var persistence;\n var model;\n var Caller;\n var maitnanceId;\n var SelectedPriority;\n var NameChanged;\n\n var countryList = [ \n    {name: 'Afghanistan', code: 'AF'}, \n    {name: 'Åland Islands', code: 'AX'}, \n    {name: 'Albania', code: 'AL'}, \n    {name: 'Algeria', code: 'DZ'}, \n    {name: 'American Samoa', code: 'AS'}, \n    {name: 'AndorrA', code: 'AD'}, \n    {name: 'Angola', code: 'AO'}, \n    {name: 'Anguilla', code: 'AI'}, \n    {name: 'Antarctica', code: 'AQ'}, \n    {name: 'Antigua and Barbuda', code: 'AG'}, \n    {name: 'Argentina', code: 'AR'}, \n    {name: 'Armenia', code: 'AM'}, \n    {name: 'Aruba', code: 'AW'}, \n    {name: 'Australia', code: 'AU'}, \n    {name: 'Austria', code: 'AT'}, \n    {name: 'Azerbaijan', code: 'AZ'}, \n    {name: 'Bahamas', code: 'BS'}, \n    {name: 'Bahrain', code: 'BH'}, \n    {name: 'Bangladesh', code: 'BD'}, \n    {name: 'Barbados', code: 'BB'}, \n    {name: 'Belarus', code: 'BY'}, \n    {name: 'Belgium', code: 'BE'}, \n    {name: 'Belize', code: 'BZ'}, \n    {name: 'Benin', code: 'BJ'}, \n    {name: 'Bermuda', code: 'BM'}, \n    {name: 'Bhutan', code: 'BT'}, \n    {name: 'Bolivia', code: 'BO'}, \n    {name: 'Bosnia and Herzegovina', code: 'BA'}, \n    {name: 'Botswana', code: 'BW'}, \n    {name: 'Bouvet Island', code: 'BV'}, \n    {name: 'Brazil', code: 'BR'}, \n    {name: 'British Indian Ocean Territory', code: 'IO'}, \n    {name: 'Brunei Darussalam', code: 'BN'}, \n    {name: 'Bulgaria', code: 'BG'}, \n    {name: 'Burkina Faso', code: 'BF'}, \n    {name: 'Burundi', code: 'BI'}, \n    {name: 'Cambodia', code: 'KH'}, \n    {name: 'Cameroon', code: 'CM'}, \n    {name: 'Canada', code: 'CA'}, \n    {name: 'Cape Verde', code: 'CV'}, \n    {name: 'Cayman Islands', code: 'KY'}, \n    {name: 'Central African Republic', code: 'CF'}, \n    {name: 'Chad', code: 'TD'}, \n    {name: 'Chile', code: 'CL'}, \n    {name: 'China', code: 'CN'}, \n    {name: 'Christmas Island', code: 'CX'}, \n    {name: 'Cocos (Keeling) Islands', code: 'CC'}, \n    {name: 'Colombia', code: 'CO'}, \n    {name: 'Comoros', code: 'KM'}, \n    {name: 'Congo', code: 'CG'}, \n    {name: 'Congo, The Democratic Republic of the', code: 'CD'}, \n    {name: 'Cook Islands', code: 'CK'}, \n    {name: 'Costa Rica', code: 'CR'}, \n    {name: 'Cote D\\'Ivoire', code: 'CI'}, \n    {name: 'Croatia', code: 'HR'}, \n    {name: 'Cuba', code: 'CU'}, \n    {name: 'Cyprus', code: 'CY'}, \n    {name: 'Czech Republic', code: 'CZ'}, \n    {name: 'Denmark', code: 'DK'}, \n    {name: 'Djibouti', code: 'DJ'}, \n    {name: 'Dominica', code: 'DM'}, \n    {name: 'Dominican Republic', code: 'DO'}, \n    {name: 'Ecuador', code: 'EC'}, \n    {name: 'Egypt', code: 'EG'}, \n    {name: 'El Salvador', code: 'SV'}, \n    {name: 'Equatorial Guinea', code: 'GQ'}, \n    {name: 'Eritrea', code: 'ER'}, \n    {name: 'Estonia', code: 'EE'}, \n    {name: 'Ethiopia', code: 'ET'}, \n    {name: 'Falkland Islands (Malvinas)', code: 'FK'}, \n    {name: 'Faroe Islands', code: 'FO'}, \n    {name: 'Fiji', code: 'FJ'}, \n    {name: 'Finland', code: 'FI'}, \n    {name: 'France', code: 'FR'}, \n    {name: 'French Guiana', code: 'GF'}, \n    {name: 'French Polynesia', code: 'PF'}, \n    {name: 'French Southern Territories', code: 'TF'}, \n    {name: 'Gabon', code: 'GA'}, \n    {name: 'Gambia', code: 'GM'}, \n    {name: 'Georgia', code: 'GE'}, \n    {name: 'Germany', code: 'DE'}, \n    {name: 'Ghana', code: 'GH'}, \n    {name: 'Gibraltar', code: 'GI'}, \n    {name: 'Greece', code: 'GR'}, \n    {name: 'Greenland', code: 'GL'}, \n    {name: 'Grenada', code: 'GD'}, \n    {name: 'Guadeloupe', code: 'GP'}, \n    {name: 'Guam', code: 'GU'}, \n    {name: 'Guatemala', code: 'GT'}, \n    {name: 'Guernsey', code: 'GG'}, \n    {name: 'Guinea', code: 'GN'}, \n    {name: 'Guinea-Bissau', code: 'GW'}, \n    {name: 'Guyana', code: 'GY'}, \n    {name: 'Haiti', code: 'HT'}, \n    {name: 'Heard Island and Mcdonald Islands', code: 'HM'}, \n    {name: 'Holy See (Vatican City State)', code: 'VA'}, \n    {name: 'Honduras', code: 'HN'}, \n    {name: 'Hong Kong', code: 'HK'}, \n    {name: 'Hungary', code: 'HU'}, \n    {name: 'Iceland', code: 'IS'}, \n    {name: 'India', code: 'IN'}, \n    {name: 'Indonesia', code: 'ID'}, \n    {name: 'Iran, Islamic Republic Of', code: 'IR'}, \n    {name: 'Iraq', code: 'IQ'}, \n    {name: 'Ireland', code: 'IE'}, \n    {name: 'Isle of Man', code: 'IM'}, \n    {name: 'Israel', code: 'IL'}, \n    {name: 'Italy', code: 'IT'}, \n    {name: 'Jamaica', code: 'JM'}, \n    {name: 'Japan', code: 'JP'}, \n    {name: 'Jersey', code: 'JE'}, \n    {name: 'Jordan', code: 'JO'}, \n    {name: 'Kazakhstan', code: 'KZ'}, \n    {name: 'Kenya', code: 'KE'}, \n    {name: 'Kiribati', code: 'KI'}, \n    {name: 'Korea, Democratic People\\'S Republic of', code: 'KP'}, \n    {name: 'Korea, Republic of', code: 'KR'}, \n    {name: 'Kuwait', code: 'KW'}, \n    {name: 'Kyrgyzstan', code: 'KG'}, \n    {name: 'Lao People\\'S Democratic Republic', code: 'LA'}, \n    {name: 'Latvia', code: 'LV'}, \n    {name: 'Lebanon', code: 'LB'}, \n    {name: 'Lesotho', code: 'LS'}, \n    {name: 'Liberia', code: 'LR'}, \n    {name: 'Libyan Arab Jamahiriya', code: 'LY'}, \n    {name: 'Liechtenstein', code: 'LI'}, \n    {name: 'Lithuania', code: 'LT'}, \n    {name: 'Luxembourg', code: 'LU'}, \n    {name: 'Macao', code: 'MO'}, \n    {name: 'Macedonia, The Former Yugoslav Republic of', code: 'MK'}, \n    {name: 'Madagascar', code: 'MG'}, \n    {name: 'Malawi', code: 'MW'}, \n    {name: 'Malaysia', code: 'MY'}, \n    {name: 'Maldives', code: 'MV'}, \n    {name: 'Mali', code: 'ML'}, \n    {name: 'Malta', code: 'MT'}, \n    {name: 'Marshall Islands', code: 'MH'}, \n    {name: 'Martinique', code: 'MQ'}, \n    {name: 'Mauritania', code: 'MR'}, \n    {name: 'Mauritius', code: 'MU'}, \n    {name: 'Mayotte', code: 'YT'}, \n    {name: 'Mexico', code: 'MX'}, \n    {name: 'Micronesia, Federated States of', code: 'FM'}, \n    {name: 'Moldova, Republic of', code: 'MD'}, \n    {name: 'Monaco', code: 'MC'}, \n    {name: 'Mongolia', code: 'MN'}, \n    {name: 'Montserrat', code: 'MS'}, \n    {name: 'Morocco', code: 'MA'}, \n    {name: 'Mozambique', code: 'MZ'}, \n    {name: 'Myanmar', code: 'MM'}, \n    {name: 'Namibia', code: 'NA'}, \n    {name: 'Nauru', code: 'NR'}, \n    {name: 'Nepal', code: 'NP'}, \n    {name: 'Netherlands', code: 'NL'}, \n    {name: 'Netherlands Antilles', code: 'AN'}, \n    {name: 'New Caledonia', code: 'NC'}, \n    {name: 'New Zealand', code: 'NZ'}, \n    {name: 'Nicaragua', code: 'NI'}, \n    {name: 'Niger', code: 'NE'}, \n    {name: 'Nigeria', code: 'NG'}, \n    {name: 'Niue', code: 'NU'}, \n    {name: 'Norfolk Island', code: 'NF'}, \n    {name: 'Northern Mariana Islands', code: 'MP'}, \n    {name: 'Norway', code: 'NO'}, \n    {name: 'Oman', code: 'OM'}, \n    {name: 'Pakistan', code: 'PK'}, \n    {name: 'Palau', code: 'PW'}, \n    {name: 'Palestinian Territory, Occupied', code: 'PS'}, \n    {name: 'Panama', code: 'PA'}, \n    {name: 'Papua New Guinea', code: 'PG'}, \n    {name: 'Paraguay', code: 'PY'}, \n    {name: 'Peru', code: 'PE'}, \n    {name: 'Philippines', code: 'PH'}, \n    {name: 'Pitcairn', code: 'PN'}, \n    {name: 'Poland', code: 'PL'}, \n    {name: 'Portugal', code: 'PT'}, \n    {name: 'Puerto Rico', code: 'PR'}, \n    {name: 'Qatar', code: 'QA'}, \n    {name: 'Reunion', code: 'RE'}, \n    {name: 'Romania', code: 'RO'}, \n    {name: 'Russian Federation', code: 'RU'}, \n    {name: 'RWANDA', code: 'RW'}, \n    {name: 'Saint Helena', code: 'SH'}, \n    {name: 'Saint Kitts and Nevis', code: 'KN'}, \n    {name: 'Saint Lucia', code: 'LC'}, \n    {name: 'Saint Pierre and Miquelon', code: 'PM'}, \n    {name: 'Saint Vincent and the Grenadines', code: 'VC'}, \n    {name: 'Samoa', code: 'WS'}, \n    {name: 'San Marino', code: 'SM'}, \n    {name: 'Sao Tome and Principe', code: 'ST'}, \n    {name: 'Saudi Arabia', code: 'SA'}, \n    {name: 'Senegal', code: 'SN'}, \n    {name: 'Serbia and Montenegro', code: 'CS'}, \n    {name: 'Seychelles', code: 'SC'}, \n    {name: 'Sierra Leone', code: 'SL'}, \n    {name: 'Singapore', code: 'SG'}, \n    {name: 'Slovakia', code: 'SK'}, \n    {name: 'Slovenia', code: 'SI'}, \n    {name: 'Solomon Islands', code: 'SB'}, \n    {name: 'Somalia', code: 'SO'}, \n    {name: 'South Africa', code: 'ZA'}, \n    {name: 'South Georgia and the South Sandwich Islands', code: 'GS'}, \n    {name: 'Spain', code: 'ES'}, \n    {name: 'Sri Lanka', code: 'LK'}, \n    {name: 'Sudan', code: 'SD'}, \n    {name: 'Suriname', code: 'SR'}, \n    {name: 'Svalbard and Jan Mayen', code: 'SJ'}, \n    {name: 'Swaziland', code: 'SZ'}, \n    {name: 'Sweden', code: 'SE'}, \n    {name: 'Switzerland', code: 'CH'}, \n    {name: 'Syrian Arab Republic', code: 'SY'}, \n    {name: 'Taiwan, Province of China', code: 'TW'}, \n    {name: 'Tajikistan', code: 'TJ'}, \n    {name: 'Tanzania, United Republic of', code: 'TZ'}, \n    {name: 'Thailand', code: 'TH'}, \n    {name: 'Timor-Leste', code: 'TL'}, \n    {name: 'Togo', code: 'TG'}, \n    {name: 'Tokelau', code: 'TK'}, \n    {name: 'Tonga', code: 'TO'}, \n    {name: 'Trinidad and Tobago', code: 'TT'}, \n    {name: 'Tunisia', code: 'TN'}, \n    {name: 'Turkey', code: 'TR'}, \n    {name: 'Turkmenistan', code: 'TM'}, \n    {name: 'Turks and Caicos Islands', code: 'TC'}, \n    {name: 'Tuvalu', code: 'TV'}, \n    {name: 'Uganda', code: 'UG'}, \n    {name: 'Ukraine', code: 'UA'}, \n    {name: 'United Arab Emirates', code: 'AE'}, \n    {name: 'United Kingdom', code: 'GB'}, \n    {name: 'United States', code: 'US'}, \n    {name: 'United States Minor Outlying Islands', code: 'UM'}, \n    {name: 'Uruguay', code: 'UY'}, \n    {name: 'Uzbekistan', code: 'UZ'}, \n    {name: 'Vanuatu', code: 'VU'}, \n    {name: 'Venezuela', code: 'VE'}, \n    {name: 'Viet Nam', code: 'VN'}, \n    {name: 'Virgin Islands, British', code: 'VG'}, \n    {name: 'Virgin Islands, U.S.', code: 'VI'}, \n    {name: 'Wallis and Futuna', code: 'WF'}, \n    {name: 'Western Sahara', code: 'EH'}, \n    {name: 'Yemen', code: 'YE'}, \n    {name: 'Zambia', code: 'ZM'}, \n    {name: 'Zimbabwe', code: 'ZW'} \n  ];\n \n Script.on('load', function() {\n      \n    Script.setState(\"Caller\", \"Levels\");\n\tCaller = \"Levels\";\n    maitnanceId =Script.getState(\"rodent-maitnanceId\"); \n    persistence = Script.getState(\"rodent-persistance\");\n\tScript.setState(\"ReturningFromMaintenance\", true, false);\n    Script.setState(\"ReturningFromMaintenanceLevel\", 3, false);\n\n\tvar cardTemplate =  Script.getScriptElement(\"Priorities\");\n    var clearfixLine =  Script.getScriptElement(\"clearfixsites\");\n    var panelIcon =  Script.getScriptElement(\"sitesiconform\");\n\t \n    var bgContainer =  Script.getScriptElement(\"sitesBg\");\n\n\ttry{\n\t\t_UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\t\tpersistence.LastScreen = \"Site Form\";\n\t\t_UpdatePersistance(persistence);\n\t}\n\tcatch(e)\t\n\t{\n\t\t setTimeout(function(){ \t\n\t\t\t fw.func(\"JUMPSCREEN\", \"Initialisation\");\n\t\t }, 3000);\t\n\t}\n\t \n    ClientEvents.publish(\"set-css\",bgContainer ,false);\n    ClientEvents.publish(\"clear-fix-line\",clearfixLine ,false);\n    ClientEvents.publish(\"set-icon-svg\",panelIcon ,false);\n\t \n    ClientEvents.publish(\"setDateColor\",\"color:#6ec4f7ff;\",false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t \n\tClientEvents.publish(\"setSiteActivateStyle\", {Property: \"color\",PropertyValue:\"white\"},false);\n\n    //\tClientEvents.publish(\"setSubmitColor\",{Property: \"width\",PropertyValue:\"96%\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\tClientEvents.publish(\"setContent\",cardTemplate,false);\n \n\tvar countryDropdown = Script.getWidget(\"countryDropdown1\");\n\tvar coll = new SensaCollection([\"text\", \"value\"], \"text\", {});\n\tvar data = countryList.map(country => ({text: country.name, value: country.code}));\n\tfor (var i = 0;i<data.length;i++) {\n\t\tcoll.add(data[i]);\n\t}\n\tcountryDropdown.receiveTextValues(coll);\n\tcountryDropdown.resetDefault();\n\t  \n    model = {};\n    if(maitnanceId !== null && maitnanceId !== undefined && maitnanceId !== \"0\")\n    {\n        LoadModel(maitnanceId);\n    }\n    else\n    {\n\t\tLoadDefaultCountry();\n        Database.readLastPrimaryKey(\"Rodent\",\"Sites\",function(eventData){\n\t\t\t \n\t\t\tmodel.Id = parseInt(eventData.value) + 1;\n\t\t});\n        model.Name = \"\";\n        model.Address = \"\";\n\t    model.PrimaryContactName = \"\";\n        model.PrimaryContactEmail = \"\";\n        model.PrimaryContactMobile = \"\";\n    }\n \n\t \n\t var date = new Date();\n\t var format = formatDate(date,\"dd/MM/yyyy\");\n\t ClientEvents.publish(\"created-date\",format,false);\n\t LoadEmployees();\n\t \n\t  \n\t\n });\n\nClientEvents.subscribe(\"Address-changed\", function(data) \n{ \n\t \n\tmodel.Address = \"\";\n    var addressData = data.value.address_components;\n    model.Address = addressData[0].long_name + \", \" + addressData[1].short_name + \", \" + addressData[2].long_name +  \", \" + addressData[3].long_name + \", \" + addressData[4].long_name + \", \" + addressData[5].long_name ;\n\tmodel.Address = addressData[0].long_name + \", \" + addressData[1].short_name + \", \" + addressData[2].long_name +  \", \" + addressData[4].long_name + \", \" + addressData[5].long_name ;\n    model.zip = addressData[5].long_name;\n    model.state = addressData[4].long_name;\n    model.city = addressData[3].long_name;\n  \n});\n\nClientEvents.subscribe(\"name-changed\", function(data) \n{ \n    model.Name = data.value;\n});\n\nClientEvents.subscribe(\"primary-name-changed\", function(data) \n{ \n\tif(data.value !== \"\")\n\t{\n\t\tmodel.PrimaryContactName = data.value;\n\t\tNameChanged = true;\n\t}\n });\n\n\nClientEvents.subscribe(\"primary-email-changed\", function(data) \n{ \n    model.PrimaryContactEmail = data.value;\n});\n\n\nClientEvents.subscribe(\"mobile-changed\", function(data) \n{ \n    model.PrimaryContactMobile = data.value;\n});\n\nClientEvents.subscribe(\"alertowner-selected\", function(data) \n{ \n\t\n    model.AlertOwner = data.value;\n});\n\nClientEvents.subscribe(\"statusChecked\", function(data) \n{ \n\t\n    model.Alert = data.value;\n});\n\nClientEvents.subscribe(\"cancel-btn\", function(data) \n{  \n\tScript.setState(\"matinanceCanceled\", \"1\",false);\n\tfw.func(\"JUMPSCREEN\", Caller);\n});\n \nClientEvents.subscribe(\"country-selected\", function(data) \n{  \n\tmodel.country = data.value;\n\t\n\tfor(var country in \tcountryList)\n\t{\n\t\tif(country.code === model.country)\n\t\t{\n\t\t\tmodel.country = country.name;\n\t\t}\n\t}\n\tClientEvents.publish(\"setCountry\",data.value,false);\n\t\n});\n\n\n\n\nClientEvents.subscribe(\"save-changes\", function(data) \n{ \n\t \n\tif(validate())\n\t{\n\t\t \n\t\tvar dbVal = {};\n\t\tdbVal[\"Id\"] =\n\t\t{\n\t\t\t\"Id\":model.Id,\n\t\t\t\"Name\": model.Name,\n\t\t\t\"Address\":model.Address,\n\t\t\t\"RelativeId\":persistence.CustomerId,\n\t\t\t\"PrimaryContactName\": model.PrimaryContactName,\n\t\t\t\"PrimaryContactEmail\": model.PrimaryContactEmail,\n\t\t\t\"PrimaryContactMobile\": model.PrimaryContactMobile,\n\t\t\t\"AlertOwner\":model.AlertOwner === undefined ? \"0\" :  fw.func(\"GETUSER\"),\n\t\t\t\"Alert\":model.Alert === undefined ? \"0\" : model.Alert,\n\t\t\t\"Priority\":SelectedPriority === undefined ? \"3\" : SelectedPriority,\n\t\t\t\"City\":model.city === undefined ? \"\" : model.city,\n\t\t\t\"State\":model.state === undefined ? \"\" : model.state,\n\t\t\t\"Country\":model.country === undefined ? \"\" : model.country ,\n\t\t\t\"Zip\":model.zip === undefined ? \"\" : model.zip\n\t\t};    \n\n\t\tif(maitnanceId !== null && maitnanceId !== undefined && maitnanceId === \"0\")\n\t\t{\n\t\t\tdbVal[\"Id\"].CreatedBy = fw.func(\"GETUSER\");\n\t\t\tdbVal[\"Id\"].CreatedOn = new Date().getTime();\n\t\t\tdbVal[\"Id\"].OWner =fw.func(\"GETUSER\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdbVal[\"Id\"].UpdatedBy = fw.func(\"GETUSER\");\n\t\t\tdbVal[\"Id\"].UpdatedOn = new Date().getTime();\n\t\t}\n\n\t\tDatabase.saveRecordParam(\"Rodent\",\"Sites\",dbVal, function(result)\n\t\t{ \t\n \t\t\t Script.setState(\"MaitnanceMode\",maitnanceId);\n\t\t\t Script.setState(\"SelectedEditId\",model.Id);\n\t\t\t fw.func(\"JUMPSCREEN\", Caller);\n\t\t});\n\t}\n});\n\nClientEvents.subscribe(\"siteActivePressed\", function(eventData) {\n\tDatabase.readRecords(\"Rodent\", \"Devices\", async function (deviceValues) {\n\t\t// Check if any active devices with customer\n\t\tif (model.Status == 1 && Object.keys(deviceValues.value.data).length > 0) {\n\t\t\t// Do not allow site to be deactivated if devices are present\n\t\t\tClient.alert(\"There are active devices currently at a location within the hierarchy\", \"Delete not Permitted\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tlet res = await Client.confirm(\"Do you want to toggle this site and all locations within the site?\", \n\t\t\t\t\t\t\t\t\t\t\t   (model.Status == 1 ? \"Deactivate\" : \"Activate\") + \" all levels?\", \n\t\t\t\t\t\t\t\t\t\t\t   { confirmText: \"Yes\", cancelText: \"No\" });\n\t\tif (!res) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar dbVal = {};\n\t\tdbVal[\"Id\"] =\n\t\t{\n\t\t\t\"Id\":model.Id,\n\t\t\t\"Name\": model.Name,\n\t\t\t\"Address\":model.Address,\n\t\t\t\"RelativeId\":persistence.CustomerId,\n\t\t\t\"PrimaryContactName\": model.PrimaryContactName,\n\t\t\t\"PrimaryContactEmail\": model.PrimaryContactEmail,\n\t\t\t\"PrimaryContactMobile\": model.PrimaryContactMobile,\n\t\t\t\"AlertOwner\":model.AlertOwner === undefined ? \"0\" :  fw.func(\"GETUSER\"),\n\t\t\t\"Alert\":model.Alert === undefined ? \"0\" : model.Alert,\n\t\t\t\"Priority\":SelectedPriority === undefined ? \"3\" : SelectedPriority,\n\t\t\t\"City\":model.city === undefined ? \"\" : model.city,\n\t\t\t\"State\":model.state === undefined ? \"\" : model.state,\n\t\t\t\"Country\":model.country === undefined ? \"\" : model.country ,\n\t\t\t\"Zip\":model.zip === undefined ? \"\" : model.zip,\n\t\t\t\"Status\": model.Status == 1 ? \"0\" : \"1\",\n\t\t\t\"UpdatedBy\": fw.func(\"GETUSER\"),\n\t\t\t\"UpdatedOn\": new Date().getTime()\n\t\t};\n\t\t// Toggle the site\n\t\tDatabase.saveRecordParam(\"Rodent\", \"Sites\", dbVal, async function (result) {\n\t\t\t// Prompt user for activating all lower levels\n\t\t\tlet res = await Client.confirm(\"Do you want to activate all locations within this site?\", \n\t\t\t\t\t\t\t\t\t\t   \"Activate all locations?\", \n\t\t\t\t\t\t\t\t\t\t   { confirmText: \"Yes\", cancelText: \"No\" });\n\t\t\tif (!res) {\n\t\t\t\tfw.func(\"JUMPSCREEN\", Caller);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Toggle activate locations of the site\n\t\t\ttoggleActivateLocations(model.Id);\n\t\t});\n\t}, {filter: `SiteId='${model.Id}' AND Status='${model.Status}'`});\n});\n\nfunction toggleActivateLocations(siteId) {\n\tDatabase.readRecords(\"Rodent\", \"Locations\", function (locationValues) {\n\t\tconsole.log(\"Toggling locaitons for site \" + siteId);\n\t\tvar locationsRemaining = Object.keys(locationValues.value.data).length;\n\t\tif (locationsRemaining) {\n\t\t\tlocationValues.value.forEach((record, pk) => {\n\t\t\t\trecord.Status = model.Status == 1 ? \"0\" : \"1\";\n\t\t\t\tvar dbVal = {};\n\t\t\t\tdbVal[\"Id\"] = record;\n\t\t\t\tlocationsRemaining--;\n\t\t\t\tDatabase.saveRecordParam(\"Rodent\", \"Locations\", dbVal);\n\t\t\t});\n\t\t}\n\t\t// make sure all locations have been toggled before switching screen\n\t\tif (!locationsRemaining) {\n\t\t\tfw.func(\"JUMPSCREEN\", Caller);\n\t\t}\n\t}, {filter: `RelativeId='${siteId}' AND Status='${model.Status}'`});\n}\n\n\nfunction LoadModel(id)\n{\n    var getAdvisory =\n\t[{\n\t\t\"TableName\" : \"Sites\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t\t\"Id\",\n\t\t    \"Name\",\n\t\t\t\"Address\",\n\t\t\t\"PrimaryContactName\", \n\t\t\t\"PrimaryContactEmail\",\n\t\t\t\"PrimaryContactMobile\",\n\t\t\t\"AlertOwner\",\n\t\t\t\"Alert\",\n\t\t\t\"Priority\",\n\t\t\t\"CreatedOn\",\n\t\t\t\"UpdatedOn\",\n\t\t\t\"Country\",\n\t\t\t\"Status\"\n\t\t\t\n\t\t\t \n\t\t], // Specify the list of columns to take from the reference table.\n\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t[\n\t\t\t{\n\t\t\t\t\"Column\" : \"Id\",\n\t\t\t\t\"ParamName\" : \"branchId\",\n\t\t\t\t\"Value\": id  \n\t\t\t}\t\n\t\t]\n\t}];\n\tDatabase.readCompound(\"rodent\",\"Sites\",getAdvisory, function(currentData)\t\t\t\t\t \n    {\n\t\tvar branchData;\n\t\tfor(var item in currentData.value.data)\n\t\t{\n\t\t\tbranchData = currentData.value.data[item];\n        }\n        model = {};\n        model.Id = branchData[0];\n        model.Name = branchData[1];\n        model.Address = branchData[2];\n\t\tmodel.PrimaryContactName = branchData[3];\n\t\tmodel.PrimaryContactEmail = branchData[4];\n\t\tmodel.PrimaryContactMobile = branchData[5];\n\t\tmodel.AlertOwner = branchData[6];\n\t\tmodel.Alert = branchData[7];\n\t\tSelectedPriority = branchData[8];\n\t\tmodel.CreatedOn = branchData[9];\n\t\tmodel.UpdatedOn = branchData[10];\n\t\tmodel.country = branchData[11];\n\t\tmodel.Status = branchData[12];\n\t\t\n\t\tif (model.Status == 1) {\n\t\t\t// Site is enabled, show deactivate button\n\t\t\tClientEvents.publish(\"setSiteActivateStyle\", {Property: \"background-color\",PropertyValue:\"#d12d1b\"},false);\n\t\t\tClientEvents.publish(\"setSiteActiveText\", \"Deactivate Site\");\n\t\t} else {\n\t\t\t// Site is disabled, show activate button\n\t\t\tClientEvents.publish(\"setSiteActivateStyle\", {Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t\t\tClientEvents.publish(\"setSiteActiveText\", \"Activate Site\");\n\t\t}\n\t\t\n        if(model.Name !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"name-value\",model.Name,false);\n\t\t}\n\n        if(model.Address !== undefined)\n\t\t{\n\t\t\tvar devAddress = (typeof model.Address === \"string\")? model.Address.plit(\",\") : \"\";\n\t\t\tif(devAddress.length === 6) {\n                var addressList = devAddress.filter(function(value, index, arr) {\n                    return index !== 3;\n                });\n                model.Address = addressList.join(\", \");\n            }\n\t\t\tClientEvents.publish(\"Address-value\",model.Address,false);\n\t\t}\n\n\t\tif(model.PrimaryContactName !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"primary-name-value\",model.PrimaryContactName,false);\n\t\t}\n\t\t\n\t\tif(model.PrimaryContactEmail !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"primary-email-value\",model.PrimaryContactEmail,false);\n\t\t}\n\t\t\n\t\tif(model.PrimaryContactMobile !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"mobile-value\",model.PrimaryContactMobile,false);\n\t\t}\n\n\t\tif(model.AlertOwner !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"set-alertOwner\",model.AlertOwner,false);\n\t\t}\n\n\t\tif(model.Alert !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"toggle-switch\",model.Alert,false);\n\t\t}\n\t\tif(SelectedPriority !== undefined)\n\t\t{\n\t\t\tswitch(SelectedPriority)\n\t\t\t{\n\t\t\t\tcase \"1\":\n\t\t\t\tSelectType(\"urgent\");\n\t\t\t\tbreak;\n\t\t\t\tcase \"2\":\n\t\t\t\tSelectType(\"important\");\n\t\t\t\tbreak;\n\t\t\t\tcase \"3\":\n\t\t\t\tSelectType(\"minor\");\n\t\t\t\tbreak;\n\t\t\t}\n \t\t}\n\t\t\n\t    if(model.CreatedOn !== undefined)\n\t\t{\n\t\t\t \n \t\t\tvar date = new Date(parseInt(model.CreatedOn));\n\t\t\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\t\t\tClientEvents.publish(\"created-date\",format,false);\n\t\t}\n\t\t\n\t\tif(model.UpdatedOn !== undefined && model.UpdatedOn != \"\")\n\t\t{\n\t\t\t \n\t\t\tvar date = new Date(parseInt(model.UpdatedOn));\n\t\t\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\t\t\t\n\t\t\tClientEvents.publish(\"created-date\",format,false);\n\t\t\tClientEvents.publish(\"date-label\",\"Updated On\",false);\n\t\t\tClientEvents.publish(\"date-label-style\",\"color:white;\",false);\n\n\t\t}\n \n\t\tvar countryCode = model.country;\n\t\tfor(var country in countryList)\n\t\t{\n\t\t\tvar currentCountry = countryList[country];\n\t\t\tif(countryCode === currentCountry.code)\n\t\t\t{\n\t\t\t\tClientEvents.publish(\"set-country\",currentCountry.name,false);\n\t\t\t}\n\t\t}\n\t\t\n \t});\n}\n\nClientEvents.subscribe(\"GenericActionMessage\", function(data) {\n\t \n \tvar msg = data.split(\"|\");\n\tswitch(msg[0])\n\t{\n\t\tcase \"ActivateDeactivate\":\n\t\t\tSelectType(msg[1]);\n\t\t\tbreak;\n\t}\n\t\n});\n\n function LoadEmployees()\n {\n     var employeesQuery = [\n     {\n         \"TableName\" : \"PlatformPersistence\", // Specify the primary table used to construct the join request\n         \"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n         \"Columns\" :\n         [\n            \n             \"User\"\n \n         ], // Specify the list of columns to take from the reference table.\n         \"Filters\" : // Filter options in case they are needed.\n         [\n             {\n                 \"Column\" : \"CustomerId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                 \"ParamName\" : \"CustomerId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                 \"Value\": persistence.CustomerId // Value that you want to pass for comparison (any object)\n             }\t\n         ]\n     }];\n \n     Database.readCompound(\"rodent\",\"PlatformPersistence\",employeesQuery, function(eventData)\t\t\t\t\t \n     {\n         var current;\n         for(var val in eventData.value.data)\n         {\n             current =  eventData.value.data[val];\n             \n             ClientEvents.publish(\"set-alertOwner\", current[0],false);\n            \n        }\n\t\t\n\t\t//check if alert owner exist and set it again avoiding async data issues when publishing to the widget.\n\t    if(model.AlertOwner !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"set-alertOwner\",model.AlertOwner,false);\n\t\t}\n\n         \n     });\t\t\n     \n }\n\t\nfunction SelectType(type)\n{\n\tvar command;\n\tswitch(type)\n\t{\n\t\tcase \"urgent\":\n\t\t\tSelectedPriority = \"1\";\n\t\t\t\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"CurrentContent|sidebarContent\",\n\t\t\t\t\"Value\": \"btnUrgent\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"SidebarAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|urgent\",\n\t\t\t\t\"Value\": \"dot btnUrgent\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|important\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|minor\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\n\t\t\tbreak;\n\t\tcase \"important\":\n\t\t\tSelectedPriority = \"2\";\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"CurrentContent|sidebarContent\",\n\t\t\t\t\"Value\": \"btnImportant\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"SidebarAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|urgent\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|important\",\n\t\t\t\t\"Value\": \"dot btnImportant\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|minor\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tbreak;\n\t\tcase \"minor\":\n\t\t\tSelectedPriority = \"3\";\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"CurrentContent|sidebarContent\",\n\t\t\t\t\"Value\": \"btnMinor\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"SidebarAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|urgent\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|important\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|minor\",\n\t\t\t\t\"Value\": \"dot btnMinor\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tbreak;\n\t}\n}\n\n\nfunction validate()\n{\n\t \n\tvar result = true;\n\tif(model.Name === \"\")\n\t{\n\t\tClient.alert(\"Name is required!\");\n \t\treturn false;\n\t}\n \n\tif(model.PrimaryContactEmail === \"Invalid Input\" || model.PrimaryContactEmail === \"\" && NameChanged)\n\t{\n\t\tClient.alert(\"Primary Contact Email is required!\");\n\t\treturn false;\n\t}\n\tif(model.PrimaryContactMobile === \"\" && NameChanged)\n\t{\n\t\tClient.alert(\"Mobile is required!\");\n \t\treturn false;\n\t}\n\t\t \n\treturn result;\n}\n\n\nfunction formatDate(date, format, utc) {\n    var MMMM = [\"\\x00\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var MMM = [\"\\x01\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    var dddd = [\"\\x02\", \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var ddd = [\"\\x03\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    function ii(i, len) { var s = i + \"\"; len = len || 2; while (s.length < len) s = \"0\" + s; return s; }\n\n    var y = utc ? date.getUTCFullYear() : date.getFullYear();\n    format = format.replace(/(^|[^\\\\])yyyy+/g, \"$1\" + y);\n    format = format.replace(/(^|[^\\\\])yy/g, \"$1\" + y.toString().substr(2, 2));\n    format = format.replace(/(^|[^\\\\])y/g, \"$1\" + y);\n\n    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;\n    format = format.replace(/(^|[^\\\\])MMMM+/g, \"$1\" + MMMM[0]);\n    format = format.replace(/(^|[^\\\\])MMM/g, \"$1\" + MMM[0]);\n    format = format.replace(/(^|[^\\\\])MM/g, \"$1\" + ii(M));\n    format = format.replace(/(^|[^\\\\])M/g, \"$1\" + M);\n\n    var d = utc ? date.getUTCDate() : date.getDate();\n    format = format.replace(/(^|[^\\\\])dddd+/g, \"$1\" + dddd[0]);\n    format = format.replace(/(^|[^\\\\])ddd/g, \"$1\" + ddd[0]);\n    format = format.replace(/(^|[^\\\\])dd/g, \"$1\" + ii(d));\n    format = format.replace(/(^|[^\\\\])d/g, \"$1\" + d);\n\n    var H = utc ? date.getUTCHours() : date.getHours();\n    format = format.replace(/(^|[^\\\\])HH+/g, \"$1\" + ii(H));\n    format = format.replace(/(^|[^\\\\])H/g, \"$1\" + H);\n\n    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;\n    format = format.replace(/(^|[^\\\\])hh+/g, \"$1\" + ii(h));\n    format = format.replace(/(^|[^\\\\])h/g, \"$1\" + h);\n\n    var m = utc ? date.getUTCMinutes() : date.getMinutes();\n    format = format.replace(/(^|[^\\\\])mm+/g, \"$1\" + ii(m));\n    format = format.replace(/(^|[^\\\\])m/g, \"$1\" + m);\n\n    var s = utc ? date.getUTCSeconds() : date.getSeconds();\n    format = format.replace(/(^|[^\\\\])ss+/g, \"$1\" + ii(s));\n    format = format.replace(/(^|[^\\\\])s/g, \"$1\" + s);\n\n    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();\n    format = format.replace(/(^|[^\\\\])fff+/g, \"$1\" + ii(f, 3));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])ff/g, \"$1\" + ii(f));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])f/g, \"$1\" + f);\n\n    var T = H < 12 ? \"AM\" : \"PM\";\n    format = format.replace(/(^|[^\\\\])TT+/g, \"$1\" + T);\n    format = format.replace(/(^|[^\\\\])T/g, \"$1\" + T.charAt(0));\n\n    var t = T.toLowerCase();\n    format = format.replace(/(^|[^\\\\])tt+/g, \"$1\" + t);\n    format = format.replace(/(^|[^\\\\])t/g, \"$1\" + t.charAt(0));\n\n    var tz = -date.getTimezoneOffset();\n    var K = utc || !tz ? \"Z\" : tz > 0 ? \"+\" : \"-\";\n    if (!utc) {\n        tz = Math.abs(tz);\n        var tzHrs = Math.floor(tz / 60);\n        var tzMin = tz % 60;\n        K += ii(tzHrs) + \":\" + ii(tzMin);\n    }\n    format = format.replace(/(^|[^\\\\])K/g, \"$1\" + K);\n\n    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;\n    format = format.replace(new RegExp(dddd[0], \"g\"), dddd[day]);\n    format = format.replace(new RegExp(ddd[0], \"g\"), ddd[day]);\n\n    format = format.replace(new RegExp(MMMM[0], \"g\"), MMMM[M]);\n    format = format.replace(new RegExp(MMM[0], \"g\"), MMM[M]);\n\n    format = format.replace(/\\\\(.)/g, \"$1\");\n\n    return format;\n};\n\nfunction LoadDefaultCountry()\n{\n\tvar getBranch =\n\t[{\n\t\t\"TableName\" : \"Branches\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t\t\"Country\"\n\t\t\t \n\t\t], // Specify the list of columns to take from the reference table.\n\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t[\n\t\t\t{\n\t\t\t\t\"Column\" : \"Id\",\n\t\t\t\t\"ParamName\" : \"branchId\",\n\t\t\t\t\"Value\": persistence.BranchId  \n\t\t\t}\t\n\t\t]\n\t}];\n\tDatabase.readCompound(\"rodent\",\"Branches\",getBranch, function(currentData)\t\t\t\t\t \n    {\n\t\t \n\t\tfor(var item in currentData.value.data)\n\t\t{\n\t\t\tvar current = currentData.value.data[item];\n\t\t\tvar countryCode = current[0];\n\t\t\tfor(var country in countryList)\n\t\t\t{\n\t\t\t\tvar currentCountry = countryList[country];\n\t\t\t\tif(countryCode === currentCountry.code)\n\t\t\t\t{\n\t\t\t\t\tClientEvents.publish(\"set-country\",currentCountry.name,false);\n\t\t\t\t\tClientEvents.publish(\"setCountry\",currentCountry.code,false);\n\t\t\t\t\tmodel.country = currentCountry.name;\n\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"sitesBg":{"t":"Scripting","lX":930,"lY":195,"sX":1,"sY":1,"s":"Site Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200124c190915","z":"100","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"width:100%;height:100%;background-color:#41505aff;\">\n\t\n</div>"},"ev":{}},"Generic#12":{"t":"Generic","lX":0,"lY":0,"sX":12.63,"sY":8.5,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"850px","x":"0%","y":"0%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"set css":{"channel":"set-css/set html","event":"set html","important":"false"}}}}},"Button#10":{"t":"Button","lX":0,"lY":650,"sX":6.32,"sY":1.3,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"0px","y":"850px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Cancel"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#11":{"t":"Button","lX":549,"lY":650,"sX":6.32,"sY":1.3,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"60px","x":"49.8%","y":"850px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Submit"},"ev":{"clientEvents":{"inputEvents":{"setSubmitColor":{"channel":"setSubmitColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"save changes":{"channel":"save-changes/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Scripting#6":{"t":"Scripting","lX":870,"lY":170,"sX":1,"sY":1,"s":"Location Form","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.44%","x":"49.63%","y":"21.74%"},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n \n \n var _UpdatePersistance;\n var persistence;\n var model;\n var Caller;\nvar maitnanceId;\nvar SelectedPriority;\n\n \n Script.on('load', function() {\n    Script.setState(\"Caller\", \"Levels\");\n\tCaller = \"Levels\";\n    maitnanceId =Script.getState(\"rodent-maitnanceId\"); \n    persistence = Script.getState(\"rodent-persistance\");\n    Script.setState(\"ReturningFromMaintenance\", true, false);\n    Script.setState(\"ReturningFromMaintenanceLevel\", 4, false);\n\n    var bgContainer =  Script.getScriptElement(\"locationBg\");\n\tvar cardTemplate =  Script.getScriptElement(\"prioritieslocation\");\n    var clearfixLine =  Script.getScriptElement(\"clearfixlocation\");\n    var panelIcon =  Script.getScriptElement(\"locationiconform\");\n\t \n    _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n    persistence.LastScreen = \"Location Form\";\n    _UpdatePersistance(persistence);\n\n\n    ClientEvents.publish(\"set-css\",bgContainer ,false);\n    ClientEvents.publish(\"clear-fix-line\",clearfixLine ,false);\n    ClientEvents.publish(\"set-icon-svg\",panelIcon ,false);\n\t \n    ClientEvents.publish(\"setDateColor\",\"color:#6ec4f7ff;\",false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setbtn1Color\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\n\tClientEvents.publish(\"locationActiveSetStyle\", {Property: \"color\",PropertyValue:\"white\"},false);\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\n    //\tClientEvents.publish(\"setSubmitColor\",{Property: \"width\",PropertyValue:\"96%\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setSubmitColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\tClientEvents.publish(\"setContent\",cardTemplate,false);\n\n\t model = {};\n    if(maitnanceId !== null && maitnanceId !== undefined && maitnanceId !== \"0\")\n    {\n        LoadModel(maitnanceId);\n    }\n    else\n    {\n        Database.readLastPrimaryKey(\"Rodent\",\"Locations\",function(eventData){\n\t\t\tmodel.Id = parseInt(eventData.value) + 1;\n\t\t});\n        model.Name = \"\";\n        model.Address = \"\";\n\t\tmodel.Alert = \"0\"\n\t\tSelectedPriority = \"3\";\n\t\tmodel.AlertOwner = fw.func(\"GETUSER\");\n    }\n\t \n\tvar date = new Date();\n\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\tClientEvents.publish(\"created-date\",format,false);\n \n \n });\n\nClientEvents.subscribe(\"Address-changed\", function(data) \n{ \n\t\t \n    model.Address = data.value;\n});\n\nClientEvents.subscribe(\"name-changed\", function(data) \n{  \n    model.Name = data.value;\n});\n\nClientEvents.subscribe(\"alertowner-selected\", function(data) \n{ \n\t\n    model.AlertOwner = data.value;\n});\n\nClientEvents.subscribe(\"statusChecked\", function(data) \n{ \n    model.Alert = data.value;\n});\n\nClientEvents.subscribe(\"cancel-btn\", function(data) \n{  \n\tScript.setState(\"matinanceCanceled\", \"1\",false);\n\tfw.func(\"JUMPSCREEN\", Caller);\n});\n\n\nClientEvents.subscribe(\"save-changes\", function(data) \n{ \n\t if(validate())\n\t {\n\t\tvar dbVal = {};\n\t\tdbVal[\"Id\"] =\n\t\t{\n\t\t\t\"Id\":model.Id,\n\t\t\t\"Name\": model.Name,\n\t\t\t\"Description\":model.Address,\n\t\t\t\"RelativeId\":persistence.SiteId,\n\t\t\t\"AlertOwner\":model.AlertOwner,\n\t\t\t\"Alert\":model.Alert,\n\t\t\t\"Priority\":SelectedPriority\n\t\t};    \n\n\t\tif(maitnanceId !== null && maitnanceId !== undefined && maitnanceId === \"0\")\n\t\t{\n\t\t\tdbVal[\"Id\"].CreatedBy = fw.func(\"GETUSER\");\n\t\t\tdbVal[\"Id\"].CreatedOn = new Date().getTime();\n\t\t\tdbVal[\"Id\"].OWner =fw.func(\"GETUSER\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdbVal[\"Id\"].UpdatedBy = fw.func(\"GETUSER\");\n\t\t\tdbVal[\"Id\"].UpdatedOn = new Date().getTime();\n\t\t}\n\n\t\tDatabase.saveRecordParam(\"Rodent\",\"Locations\",dbVal, function(result)\n\t\t{ \t\n\t\t\t Script.setState(\"MaitnanceMode\",maitnanceId);\n\n\t\t\t fw.func(\"JUMPSCREEN\", Caller);\n\t\t});\n\t}\n});\n\nClientEvents.subscribe(\"locationActivePressed\", function(eventData) {\n\tDatabase.readRecords(\"Rodent\", \"Devices\", async function (deviceValues) {\n\t\t// Check if any active devices with location\n\t\tif (model.Status == 1 && Object.keys(deviceValues.value.data).length > 0) {\n\t\t\t// Do not allow location to be deactivated if devices are present\n\t\t\tClient.alert(\"There are active devices in this location\", \"Delete not Permitted\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tlet res = await Client.confirm(\"Do you want to toggle this location?\", \n\t\t\t\t\t\t\t\t\t\t\t   (model.Status == 1 ? \"Deactivate\" : \"Activate\") + \" location\", \n\t\t\t\t\t\t\t\t\t\t\t   { confirmText: \"Yes\", cancelText: \"No\" });\n\t\tif (!res) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar dbVal = {};\n\t\tdbVal[\"Id\"] =\n\t\t{\n\t\t\t\"Id\":model.Id,\n\t\t\t\"Name\": model.Name,\n\t\t\t\"Description\":model.Address,\n\t\t\t\"RelativeId\":persistence.SiteId,\n\t\t\t\"AlertOwner\":model.AlertOwner,\n\t\t\t\"Alert\":model.Alert,\n\t\t\t\"Priority\":SelectedPriority,\n\t\t\t\"Status\": model.Status == 1 ? \"0\" : \"1\",\n\t\t\t\"UpdatedBy\": fw.func(\"GETUSER\"),\n\t\t\t\"UpdatedOn\": new Date().getTime()\n\t\t};\n\t\t// Toggle the site\n\t\tDatabase.saveRecordParam(\"Rodent\", \"Locations\", dbVal, function (result) {\n\t\t\tfw.func(\"JUMPSCREEN\", Caller);\n\t\t});\n\t}, {filter: `LocationId='${model.Id}' AND Status='${model.Status}'`});\n});\n\nfunction LoadModel(id)\n{\n    var getAdvisory =\n\t[{\n\t\t\"TableName\" : \"Locations\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t\t\"Id\",\n\t\t    \"Name\",\n\t\t\t\"Description\",\n\t\t\t\"AlertOwner\",\n\t\t\t\"Alert\",\n\t\t\t\"Priority\",\n\t\t\t\"CreatedOn\",\n\t\t\t\"UpdatedOn\",\n\t\t\t\"Status\"\n\t\t\t\n\t\t\t \n\t\t], // Specify the list of columns to take from the reference table.\n\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t[\n\t\t\t{\n\t\t\t\t\"Column\" : \"Id\",\n\t\t\t\t\"ParamName\" : \"branchId\",\n\t\t\t\t\"Value\": id  \n\t\t\t}\t\n\t\t]\n\t}];\n\tDatabase.readCompound(\"rodent\",\"Locations\",getAdvisory, function(currentData)\t\t\t\t\t \n    {\n\t\t  \n\t\tvar branchData;\n\t\tfor(var item in currentData.value.data)\n\t\t{\n\t\t\tbranchData = currentData.value.data[item];\n        }\n        model = {};\n        model.Id = branchData[0];\n        model.Name = branchData[1];\n        model.Address = branchData[2];\n\t    model.AlertOwner = branchData[3];\n\t\tmodel.Alert = branchData[4];\n\t\tSelectedPriority = branchData[5];\n\t\tmodel.CreatedOn = branchData[6];\n\t\tmodel.UpdatedOn = branchData[7];\n\t\tmodel.Status = branchData[8];\n\t\t\n\t\tif (model.Status == 1) {\n\t\t\t// Site is enabled, show deactivate button\n\t\t\tClientEvents.publish(\"locationActiveSetStyle\", {Property: \"background-color\",PropertyValue:\"#d12d1b\"},false);\n\t\t\tClientEvents.publish(\"locationActiveSetText\", \"Deactivate Location\");\n\t\t} else {\n\t\t\t// Site is disabled, show activate button\n\t\t\tClientEvents.publish(\"locationActiveSetStyle\", {Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t\t\tClientEvents.publish(\"locationActiveSetText\", \"Activate Location\");\n\t\t}\n\t\t\n        if(model.Name !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"name-value\",model.Name,false);\n\t\t}\n\n        if(model.Address !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"Address-value\",model.Address,false);\n\t\t}\n\t\t\n\t\tif(model.AlertOwner !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"set-alertOwner\",model.AlertOwner,false);\n\t\t}\n\n\t\tif(model.Alert !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"toggle-switch\",model.Alert,false);\n\t\t}\n\t\t\n\t\tif(SelectedPriority !== undefined)\n\t\t{\n\t\t\tswitch(SelectedPriority)\n\t\t\t{\n\t\t\t\tcase \"1\":\n\t\t\t\tSelectType(\"urgent\");\n\t\t\t\tbreak;\n\t\t\t\tcase \"2\":\n\t\t\t\tSelectType(\"important\");\n\t\t\t\tbreak;\n\t\t\t\tcase \"3\":\n\t\t\t\tSelectType(\"minor\");\n\t\t\t\tbreak;\n\t\t\t}\n \t\t}\n\t\t\n\t    if(model.CreatedOn !== undefined)\n\t\t{\n\t\t\t \n \t\t\tvar date = new Date(parseInt(model.CreatedOn));\n\t\t\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\t\t\tClientEvents.publish(\"created-date\",format,false);\n\t\t}\n\t\t\n\t\tif(model.UpdatedOn !== undefined && model.UpdatedOn !== \"\")\n\t\t{\n\t\t\t \n\t\t\tvar date = new Date(parseInt(model.UpdatedOn));\n\t\t\tvar format = formatDate(date,\"dd/MM/yyyy\");\n\t\t\t\n\t\t\tClientEvents.publish(\"created-date\",format,false);\n\t\t\tClientEvents.publish(\"date-label\",\"Updated On\",false);\n\t\t\tClientEvents.publish(\"date-label-style\",\"color:white;\",false);\n\n\t\t}\n \t});\n}\n\nClientEvents.subscribe(\"GenericActionMessage\", function(data) {\n\t \n \tvar msg = data.split(\"|\");\n\tswitch(msg[0])\n\t{\n\t\tcase \"ActivateDeactivate\":\n\t\t\tSelectType(msg[1]);\n\t\t\tbreak;\n\t}\n\t\n});\n\n\n function LoadEmployees()\n {\n     var employeesQuery = [\n     {\n         \"TableName\" : \"PlatformPersistence\", // Specify the primary table used to construct the join request\n         \"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n         \"Columns\" :\n         [\n            \n             \"User\"\n \n         ], // Specify the list of columns to take from the reference table.\n         \"Filters\" : // Filter options in case they are needed.\n         [\n             {\n                 \"Column\" : \"CustomerId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                 \"ParamName\" : \"CustomerId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                 \"Value\": persistence.CustomerId // Value that you want to pass for comparison (any object)\n             }\t\n         ]\n     }];\n \n     Database.readCompound(\"rodent\",\"PlatformPersistence\",employeesQuery, function(eventData)\t\t\t\t\t \n     {\n         var current;\n         for(var val in eventData.value.data)\n         {\n             current =  eventData.value.data[val];\n             \n             ClientEvents.publish(\"set-alertOwner\", current[0],false);\n            \n         }\n         \n\t\t//check if alert owner exist and set it again avoiding async data issues when publishing to the widget.\n\t    if(model.AlertOwner !== undefined)\n\t\t{\n\t\t\tClientEvents.publish(\"set-alertOwner\",model.AlertOwner,false);\n\t\t}\n     });\t\t\n     \n }\n\t\n\nfunction SelectType(type)\n{\n\tvar command;\n\tswitch(type)\n\t{\n\t\tcase \"urgent\":\n\t\t\tSelectedPriority = \"1\";\n\t\t\t\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"CurrentContent|sidebarContent\",\n\t\t\t\t\"Value\": \"btnUrgent\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"SidebarAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|urgent\",\n\t\t\t\t\"Value\": \"dot btnUrgent\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|important\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|minor\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\n\t\t\tbreak;\n\t\tcase \"important\":\n\t\t\tSelectedPriority = \"2\";\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"CurrentContent|sidebarContent\",\n\t\t\t\t\"Value\": \"btnImportant\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"SidebarAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|urgent\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|important\",\n\t\t\t\t\"Value\": \"dot btnImportant\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|minor\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tbreak;\n\t\tcase \"minor\":\n\t\t\tSelectedPriority = \"3\";\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"CurrentContent|sidebarContent\",\n\t\t\t\t\"Value\": \"btnMinor\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"SidebarAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|urgent\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|important\",\n\t\t\t\t\"Value\": \"dot\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tcommand = \n\t\t\t{\n\t\t\t\t\"Action\":\"setElementClass\",\n\t\t\t\t\"Compoent\":\"widget\",\n\t\t\t\t\"Id\":\"BtnContent|minor\",\n\t\t\t\t\"Value\": \"dot btnMinor\"\n\t\t\t};\n\t\t\tClientEvents.publish(\"setSelectorAction\",command,true);\n\t\t\tbreak;\n\t}\n}\n\n\nfunction validate()\n{\n\t\n\tvar result = true;\n\tif(model.Name === null || model.Name === undefined || model.Name === \"\")\n\t{\n\t\tClient.alert( \"Name is required!\");\n \t\tresult = false;\n\t}\n\t\n\t\n\treturn result;\n}\n\n\n\n\nfunction formatDate(date, format, utc) {\n    var MMMM = [\"\\x00\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var MMM = [\"\\x01\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    var dddd = [\"\\x02\", \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var ddd = [\"\\x03\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    function ii(i, len) { var s = i + \"\"; len = len || 2; while (s.length < len) s = \"0\" + s; return s; }\n\n    var y = utc ? date.getUTCFullYear() : date.getFullYear();\n    format = format.replace(/(^|[^\\\\])yyyy+/g, \"$1\" + y);\n    format = format.replace(/(^|[^\\\\])yy/g, \"$1\" + y.toString().substr(2, 2));\n    format = format.replace(/(^|[^\\\\])y/g, \"$1\" + y);\n\n    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;\n    format = format.replace(/(^|[^\\\\])MMMM+/g, \"$1\" + MMMM[0]);\n    format = format.replace(/(^|[^\\\\])MMM/g, \"$1\" + MMM[0]);\n    format = format.replace(/(^|[^\\\\])MM/g, \"$1\" + ii(M));\n    format = format.replace(/(^|[^\\\\])M/g, \"$1\" + M);\n\n    var d = utc ? date.getUTCDate() : date.getDate();\n    format = format.replace(/(^|[^\\\\])dddd+/g, \"$1\" + dddd[0]);\n    format = format.replace(/(^|[^\\\\])ddd/g, \"$1\" + ddd[0]);\n    format = format.replace(/(^|[^\\\\])dd/g, \"$1\" + ii(d));\n    format = format.replace(/(^|[^\\\\])d/g, \"$1\" + d);\n\n    var H = utc ? date.getUTCHours() : date.getHours();\n    format = format.replace(/(^|[^\\\\])HH+/g, \"$1\" + ii(H));\n    format = format.replace(/(^|[^\\\\])H/g, \"$1\" + H);\n\n    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;\n    format = format.replace(/(^|[^\\\\])hh+/g, \"$1\" + ii(h));\n    format = format.replace(/(^|[^\\\\])h/g, \"$1\" + h);\n\n    var m = utc ? date.getUTCMinutes() : date.getMinutes();\n    format = format.replace(/(^|[^\\\\])mm+/g, \"$1\" + ii(m));\n    format = format.replace(/(^|[^\\\\])m/g, \"$1\" + m);\n\n    var s = utc ? date.getUTCSeconds() : date.getSeconds();\n    format = format.replace(/(^|[^\\\\])ss+/g, \"$1\" + ii(s));\n    format = format.replace(/(^|[^\\\\])s/g, \"$1\" + s);\n\n    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();\n    format = format.replace(/(^|[^\\\\])fff+/g, \"$1\" + ii(f, 3));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])ff/g, \"$1\" + ii(f));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])f/g, \"$1\" + f);\n\n    var T = H < 12 ? \"AM\" : \"PM\";\n    format = format.replace(/(^|[^\\\\])TT+/g, \"$1\" + T);\n    format = format.replace(/(^|[^\\\\])T/g, \"$1\" + T.charAt(0));\n\n    var t = T.toLowerCase();\n    format = format.replace(/(^|[^\\\\])tt+/g, \"$1\" + t);\n    format = format.replace(/(^|[^\\\\])t/g, \"$1\" + t.charAt(0));\n\n    var tz = -date.getTimezoneOffset();\n    var K = utc || !tz ? \"Z\" : tz > 0 ? \"+\" : \"-\";\n    if (!utc) {\n        tz = Math.abs(tz);\n        var tzHrs = Math.floor(tz / 60);\n        var tzMin = tz % 60;\n        K += ii(tzHrs) + \":\" + ii(tzMin);\n    }\n    format = format.replace(/(^|[^\\\\])K/g, \"$1\" + K);\n\n    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;\n    format = format.replace(new RegExp(dddd[0], \"g\"), dddd[day]);\n    format = format.replace(new RegExp(ddd[0], \"g\"), ddd[day]);\n\n    format = format.replace(new RegExp(MMMM[0], \"g\"), MMMM[M]);\n    format = format.replace(new RegExp(MMM[0], \"g\"), MMM[M]);\n\n    format = format.replace(/\\\\(.)/g, \"$1\");\n\n    return format;\n};"},"ev":{"serverEvents":{"inputEvents":{"New Event #1":{"channel":"$DB/ADMIN/MANAGE/RESPONSE","event":"feed","important":"false"}}}}},"locationBg":{"t":"Scripting","lX":760,"lY":195,"sX":1,"sY":1,"s":"Location Form","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.88%","x":"44.06%","y":"31%"},"ver":"200124c190915","z":"100","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"width:100%;height:100%;background-color:#41505aff;\">\n\t\n</div>"},"ev":{}},"Generic#19":{"t":"Generic","lX":86,"lY":380,"sX":6.32,"sY":1.61,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"161.233px","x":"5%","y":"380px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"red"},"ev":{"clientEvents":{"inputEvents":{"setContent":{"channel":"setContent/set html","event":"set html","important":"false"},"setSelectorAction":{"channel":"setSelectorAction/set action","event":"set action","important":"false"}}}}},"Switch#1":{"t":"Switch","lX":1036,"lY":380,"sX":4.74,"sY":1,"s":"Site Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"30%","height":"4.28%","x":"60%","y":"380px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"color":"blue","on label":"ON","off label":"OFF"},"ev":{"clientEvents":{"inputEvents":{"status changed":{"channel":"statusChanged/receive value","event":"receive value","important":"false"},"toggle-switch":{"channel":"toggle-switch/receive value","event":"receive value","important":"false"}},"outputEvents":{"status checked":{"channel":"statusChecked/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Label#3":{"t":"Label","lX":86,"lY":340,"sX":6.32,"sY":0.8,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"20px","x":"5%","y":"340px"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"15","label text":"<font color=\"#ffffff\">Priority</font>","text align":"center"},"ev":{}},"Label#4":{"t":"Label","lX":1122,"lY":340,"sX":2.53,"sY":0.8,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"20%","height":"20px","x":"65%","y":"340px"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"15","label text":"<span style=\"color: rgb(255, 255, 255);\">Alert Status</span><br>","text align":"center"},"ev":{}},"Dropdown#4":{"t":"Dropdown","lX":63,"lY":511,"sX":12,"sY":1,"s":"Site Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"5.94%","x":"3.67%","y":"511px"},"ver":"190104c190915","dis":false,"tt":"","a":{"default options":"","label text":"Primary Alert Owner","color":"white","tab index":"4"},"ev":{"clientEvents":{"inputEvents":{"set alertOwner":{"channel":"set-alertOwner/receive value","event":"receive value","important":"false"}},"outputEvents":{"alertowner selected":{"channel":"alertowner-selected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"Priorities":{"t":"Scripting","lX":1025,"lY":195,"sX":1,"sY":1,"s":"Site Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"83.88%","y":"50.24%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div class=\"topContainer\" id=\"Content\">\n\t<style>\n\t\t.setColor{\n\t\t\tbackground-color:#41505aff;\n\t\t\twidth:98%;\n\t\t\toverflow:hidden;\n\t\t\theight:98%;\n\t\t}\n\t\t.topContainer{\n\t\t\twidth:98%;\n\t\t\toverflow:hidden;\n\t\t\theight:97%;\n\t\t\tborder: 0.787px solid #6ec4f7ff;\n\t\t\tborder-radius: 11px;\n\t\t}\n\t\t.row{\n\t\t\tdisplay:flex;\n\t\t\theight: 100%;\n\t\t\twidth:100%;\n\t\t}\n\t\t.col-1{\n\t\t\twidth:10%;\n\t\t}\n\t\t.col-2{\n\t\t\twidth:20%;\n\t\t}\n\t\t.col-3{\n\t\t\twidth:30%;\n\t\t}\n\t\t.col-4{\n\t\t\twidth:40%;\n\t\t}\n\t\t.col-5{\n\t\t\twidth:50%;\n\t\t}\n\t\t.col-6{\n\t\t\twidth:60%;\n\t\t}\n\t\t.col-7{\n\t\t\twidth:70%;\n\t\t}\n\t\t.col-8{\n\t\t\twidth:80%;\n\t\t}\n\t\t.col-9{\n\t\t\twidth:90%;\n\t\t}\n\t\t.col-10{\n\t\t\twidth:100%;\n\t\t}\n\t\t.column{\n \t\t\theight: 100%;\n\t\t}\n\t\t.clearFix{\n\t\t\tborder-right:1px solid gray;\n\t\t}\n\t \n\t\t.active{\n\t\t\tbackground-color:#4d98c2ff;\n\t\t}\n\t\t.activeText{\n\t\t\tcolor:#4d98c2ff;\n\t\t    text-transform: uppercase;\n\n\t\t}\n\t\t.circleText{\n\t\t\tmargin-top: -7px;\n\t\t\tfont-size: 10px;\n\t\t\tcolor: white;\n\t\t}\n\t\t.Border{\n\t\t\tdisplay:flex;\n\t\t\n\t\t}\n        .btnHolder {\n            display: flex;\n            height: 100%;\n        }\n\n        .btnRow{\n            margin: 2%;\n            height: 50%;\n        }\n        .dot {\n            height: 81px;\n            width: 81px;\n            background-color: #bbb;\n            border-radius: 50%;\n            border: 5px solid #6ec4f7ff;\n            display: inline-block;\n        }\n\t\t\n\t\t.textLabel{\n\t\t\tcolor:white;\n\t\t\tfont-size:13px;\n\t\t}\n       \n        @media screen and (max-width: 1440px) {\n            .btnHolder {\n                margin-top: 1%;\n                display: flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        @media screen and (max-width: 1239px) {\n            .btnHolder {\n                margin-top: 1%;\n                display: flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n\n        }\n        @media screen and (max-width: 768px) {\n            .btnHolder{\n                margin-top: 3%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        \n        @media screen and (max-width: 427px) {\n            .btnHolder{\n                margin-top: 9%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 61px;\n                width: 61px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        @media screen and (max-width: 320px) {\n            #widget{\n                height: 107.233px !important;\n            }\n            .btnHolder{\n                margin-top: 6%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 31px;\n                width: 31px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n\t\t\t.textLabel{\n\t\t\t\tcolor:white;\n\t\t\t\tfont-size:13px;\n\t\t\t}\n        }\n      \n\n\t\t.innerContainer{\n\t\t\tdisplay:grid;\n\t\t\ttext-align:center;\n\t\t}\n        .btnUrgent{\n            background-color: #d74423ff;\n        }\n        .btnImportant{\n            background-color: #f88924ff;\n        }\n        .btnMinor{\n            background-color: #388b3dff;\n        }\n\t\n      \n\t</style>\n\n\n\t<div  class=\"btnHolder\" id=\"BtnContent\">\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|urgent')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot \" data-info=\"urgent\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n             </div>\n             <span  class=\"textLabel\">High</span>\n\n\t\t</div>\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|important')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot\" data-info=\"important\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n\t\t\t </div>\n             <span class=\"textLabel\">Medium</span>\n\n\t\t</div>\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|minor')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot btnMinor\" data-info=\"minor\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n             </div>\n             <span class=\"textLabel\">Low</span>\n\n\t\t</div>\n\t\t\n\t</div>\n</div>"},"ev":{}},"Label#5":{"t":"Label","lX":87,"lY":330,"sX":6.32,"sY":0.8,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"20px","x":"5%","y":"340px"},"ver":"200124c190915","z":"100","dis":false,"tt":"","a":{"font size":"15","label text":"<font color=\"#ffffff\">Priority</font>","text align":"center"},"ev":{}},"Label#6":{"t":"Label","lX":1133,"lY":330,"sX":2.53,"sY":0.8,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"20%","height":"20px","x":"65%","y":"340px"},"ver":"200124c190915","z":"100","dis":false,"tt":"","a":{"font size":"15","label text":"<font color=\"#ffffff\">Alert Status</font>","text align":"center"},"ev":{}},"Generic#25":{"t":"Generic","lX":87,"lY":380,"sX":6.32,"sY":1.61,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"50%","height":"161.233px","x":"5%","y":"380px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"red"},"ev":{"clientEvents":{"inputEvents":{"setContent":{"channel":"setContent/set html","event":"set html","important":"false"},"setSelectorAction":{"channel":"setSelectorAction/set action","event":"set action","important":"false"}}}}},"Switch#2":{"t":"Switch","lX":1046,"lY":380,"sX":4.74,"sY":1,"s":"Location Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"30%","height":"4.28%","x":"60%","y":"380px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"color":"blue","on label":"ON","off label":"OFF"},"ev":{"clientEvents":{"inputEvents":{"status changed":{"channel":"statusChanged/receive value","event":"receive value","important":"false"},"toggle-switch":{"channel":"toggle-switch/receive value","event":"receive value","important":"false"}},"outputEvents":{"status checked":{"channel":"statusChecked/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"prioritieslocation":{"t":"Scripting","lX":995,"lY":170,"sX":1,"sY":1,"s":"Location Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.76%","height":"11.88%","x":"83.88%","y":"50.24%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div class=\"topContainer\" id=\"Content\">\n\t<style>\n\t\t.setColor{\n\t\t\tbackground-color:#41505aff;\n\t\t\twidth:98%;\n\t\t\toverflow:hidden;\n\t\t\theight:98%;\n\t\t}\n\t\t.topContainer{\n\t\t\twidth:98%;\n\t\t\toverflow:hidden;\n\t\t\theight:97%;\n\t\t\tborder: 0.787px solid #6ec4f7ff;\n\t\t\tborder-radius: 11px;\n\t\t}\n\t\t.row{\n\t\t\tdisplay:flex;\n\t\t\theight: 100%;\n\t\t\twidth:100%;\n\t\t}\n\t\t.col-1{\n\t\t\twidth:10%;\n\t\t}\n\t\t.col-2{\n\t\t\twidth:20%;\n\t\t}\n\t\t.col-3{\n\t\t\twidth:30%;\n\t\t}\n\t\t.col-4{\n\t\t\twidth:40%;\n\t\t}\n\t\t.col-5{\n\t\t\twidth:50%;\n\t\t}\n\t\t.col-6{\n\t\t\twidth:60%;\n\t\t}\n\t\t.col-7{\n\t\t\twidth:70%;\n\t\t}\n\t\t.col-8{\n\t\t\twidth:80%;\n\t\t}\n\t\t.col-9{\n\t\t\twidth:90%;\n\t\t}\n\t\t.col-10{\n\t\t\twidth:100%;\n\t\t}\n\t\t.column{\n \t\t\theight: 100%;\n\t\t}\n\t\t.clearFix{\n\t\t\tborder-right:1px solid gray;\n\t\t}\n\t \n\t\t.active{\n\t\t\tbackground-color:#4d98c2ff;\n\t\t}\n\t\t.activeText{\n\t\t\tcolor:#4d98c2ff;\n\t\t    text-transform: uppercase;\n\n\t\t}\n\t\t.circleText{\n\t\t\tmargin-top: -7px;\n\t\t\tfont-size: 10px;\n\t\t\tcolor: white;\n\t\t}\n\t\t.Border{\n\t\t\tdisplay:flex;\n\t\t\n\t\t}\n        .btnHolder {\n            display: flex;\n            height: 100%;\n        }\n\n        .btnRow{\n            margin: 2%;\n            height: 50%;\n        }\n        .dot {\n            height: 81px;\n            width: 81px;\n            background-color: #bbb;\n            border-radius: 50%;\n            border: 5px solid #6ec4f7ff;\n            display: inline-block;\n        }\n\t\t\n\t\t.textLabel{\n\t\t\tcolor:white;\n\t\t\tfont-size:13px;\n\t\t}\n       \n        @media screen and (max-width: 1440px) {\n            .btnHolder {\n                margin-top: 1%;\n                display: flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        @media screen and (max-width: 1239px) {\n            .btnHolder {\n                margin-top: 1%;\n                display: flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n\n        }\n        @media screen and (max-width: 768px) {\n            .btnHolder{\n                margin-top: 3%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 81px;\n                width: 81px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        \n        @media screen and (max-width: 427px) {\n            .btnHolder{\n                margin-top: 9%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 61px;\n                width: 61px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n        }\n        @media screen and (max-width: 320px) {\n            #widget{\n                height: 107.233px !important;\n            }\n            .btnHolder{\n                margin-top: 6%;\n                display:flex;\n                height: 100%;\n            }\n\n            .btnRow{\n                margin: 2%;\n                height: 50%;\n            }\n            .dot {\n                height: 31px;\n                width: 31px;\n                background-color: #bbb;\n                border-radius: 50%;\n                border: 5px solid #6ec4f7ff;\n                display: inline-block;\n            }\n\t\t\t.textLabel{\n\t\t\t\tcolor:white;\n\t\t\t\tfont-size:13px;\n\t\t\t}\n        }\n      \n\n\t\t.innerContainer{\n\t\t\tdisplay:grid;\n\t\t\ttext-align:center;\n\t\t}\n        .btnUrgent{\n            background-color: #d74423ff;\n        }\n        .btnImportant{\n            background-color: #f88924ff;\n        }\n        .btnMinor{\n            background-color: #388b3dff;\n        }\n\t\n      \n\t</style>\n\n\n\t<div  class=\"btnHolder\" id=\"BtnContent\">\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|urgent')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot \" data-info=\"urgent\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n             </div>\n             <span  class=\"textLabel\">High</span>\n\n\t\t</div>\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|important')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot\" data-info=\"important\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n\t\t\t </div>\n             <span class=\"textLabel\">Medium</span>\n\n\t\t</div>\n\t\t\n\t\t<div class=\"col-3 innerContainer btnRow\" onclick=\"GenericClicked('ActivateDeactivate|minor')\">\n\t\t\t <div class=\"row\" style=\"display:inline;\">\n\t\t\t\t <div class=\"dot btnMinor\" data-info=\"minor\">\n\t\t\t\t\t \n\t\t\t\t </div>\n\n             </div>\n             <span class=\"textLabel\">Low</span>\n\n\t\t</div>\n\t\t\n\t</div>\n</div>"},"ev":{}},"Dropdown#5":{"t":"Dropdown","lX":64,"lY":523,"sX":12,"sY":1,"s":"Location Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"5.94%","x":"3.67%","y":"523px"},"ver":"190104c190915","dis":false,"tt":"","a":{"default options":"","label text":"Primary Alert Owner","color":"white","tab index":"3"},"ev":{"clientEvents":{"inputEvents":{"set alertOwner":{"channel":"set-alertOwner/receive value","event":"receive value","important":"false"}},"outputEvents":{"alertowner selected":{"channel":"alertowner-selected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"Generic#26":{"t":"Generic","lX":0,"lY":60,"sX":12.38,"sY":0.02,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"98%","height":"2px","x":"0%","y":"60px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"white"},"ev":{"clientEvents":{"inputEvents":{"clear fix line":{"channel":"clear-fix-line/set html","event":"set html","important":"false"}}}}},"Generic#27":{"t":"Generic","lX":87,"lY":10,"sX":0.4,"sY":0.4,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"40px","height":"40px","x":"5%","y":"10px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"red"},"ev":{"clientEvents":{"inputEvents":{"set svg icon":{"channel":"set-icon-svg/set html","event":"set html","important":"false"}}}}},"BranchIconForm":{"t":"Scripting","lX":1210,"lY":355,"sX":1,"sY":1,"s":"Branch Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"65.69%","y":"37.07%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" height=\"40\" width=\"40\" viewBox=\"0 0 40.0 40.0\" version=\"1.1\" id=\"SVGRoot\" sodipodi:docname=\"branchIcon.svg\" inkscape:version=\"1.0.1 (3bc2e813f5, 2020-09-07)\">\n  <g inkscape:label=\"Layer 1\" inkscape:groupmode=\"layer\" id=\"layer1\">\n    <g transform=\"matrix(2.8315254,0,0,2.3131511,1250.3615,-135.65766)\" id=\"g63807\">\n      <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect63791\" width=\"6.5903883\" height=\"1.4587677\" x=\"433.22476\" y=\"-62.705818\" transform=\"scale(-1)\"></rect>\n      <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect63793\" width=\"6.5903883\" height=\"1.4587677\" x=\"433.22476\" y=\"-65.194893\" transform=\"scale(-1)\"></rect>\n      <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect63795\" width=\"6.5903883\" height=\"1.4587677\" x=\"433.22476\" y=\"-67.683983\" transform=\"scale(-1)\" inkscape:transform-center-x=\"-1.25\" inkscape:transform-center-y=\"-3.5945593\"></rect>\n      <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect63797\" width=\"6.3636031\" height=\"1.4587677\" x=\"61.317451\" y=\"431.00888\" transform=\"rotate(90)\"></rect>\n      <rect y=\"69.145058\" x=\"-436.51538\" height=\"6.3613191\" width=\"8.7030411\" id=\"rect63799\" style=\"opacity:1;fill:none;fill-opacity:1;stroke: #ffffff;stroke-width:1.0614;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\"></rect>\n      <path sodipodi:nodetypes=\"ccccccccccccccc\" inkscape:connector-curvature=\"0\" id=\"path63801\" d=\"m -437.65522,74.827066 -3.9548,-0.006 0.0236,-16.17481 h 12.22868 v 6.62866 l 0.004,2.66544 -1.16431,-0.0147 -0.0106,-2.65078 v -5.48182 h -9.88744 v 13.81616 0 l 2.75443,0.015 v 0 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill: #ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;\"></path>\n      <rect inkscape:transform-center-y=\"-2.4472877\" inkscape:transform-center-x=\"-1.25\" transform=\"scale(-1)\" y=\"-71.544823\" x=\"428.84824\" height=\"0.99317604\" width=\"6.5903883\" id=\"rect63803\" style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\"></rect>\n      <rect transform=\"scale(-1)\" y=\"-73.045937\" x=\"428.84824\" height=\"0.99317604\" width=\"6.5903883\" id=\"rect63805\" style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\"></rect>\n    </g>\n  </g>\n</svg>"},"ev":{}},"Label#7":{"t":"Label","lX":314,"lY":17,"sX":9.47,"sY":1.08,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"75%","height":"26.909px","x":"18%","y":"2%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"22","label text":"<font color=\"#ffffff\">Branch</font>"},"ev":{"clientEvents":{"inputEvents":{"set title color":{"channel":"setTitleColor/apply css","event":"apply css","important":"false"}}}}},"clearfixBranch":{"t":"Scripting","lX":1065,"lY":365,"sX":1,"sY":1,"s":"Branch Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"65.69%","y":"37.07%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"overflow:hiden; border-bottom:1.5px solid white; width:100%;\">\n\t<style>\n\t\tbody {\n\t\t\tfont-family: \"Open Sans\";\n\t\t\tfont-size: 16px;\n\t\t\tuser-select: none;\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: hidden;\n\t\t}\n\t</style>\n</div>"},"ev":{}},"Label#8":{"t":"Label","lX":87,"lY":35,"sX":10.74,"sY":0.8,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"85%%","height":"20px","x":"5%","y":"35px"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"set date color":{"channel":"setDateColor/apply css","event":"apply css","important":"false"},"created date":{"channel":"created-date/receive value","event":"receive value","important":"false"}}}}},"Label#9":{"t":"Label","lX":85,"lY":70,"sX":10.74,"sY":0.8,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"85%","height":"20px","x":"5%","y":"70px"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"date-label":{"channel":"date-label/receive value","event":"receive value","important":"false"},"date label style":{"channel":"date-label-style/apply css","event":"apply css","important":"false"}}}}},"Label#12":{"t":"Label","lX":87,"lY":35,"sX":10.74,"sY":0.8,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"85%%","height":"20px","x":"5%","y":"35px"},"ver":"200124c190915","z":"100","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"created date":{"channel":"created-date/receive value","event":"receive value","important":"false"},"set date color":{"channel":"setDateColor/set color","event":"set color","important":"false"}}}}},"Label#13":{"t":"Label","lX":87,"lY":70,"sX":10.74,"sY":0.8,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"85%","height":"20px","x":"5%","y":"70px"},"ver":"200124c190915","z":"100","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"date label style":{"channel":"date-label-style/apply css","event":"apply css","important":"false"},"date-label":{"channel":"date-label/receive value","event":"receive value","important":"false"}}}}},"Generic#28":{"t":"Generic","lX":0,"lY":60,"sX":12.38,"sY":0.02,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"98%","height":"2px","x":"0%","y":"60px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"white"},"ev":{"clientEvents":{"inputEvents":{"clear fix line":{"channel":"clear-fix-line/set html","event":"set html","important":"false"}}}}},"Generic#29":{"t":"Generic","lX":86,"lY":10,"sX":0.4,"sY":0.4,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"40px","height":"40px","x":"5%","y":"10px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"red"},"ev":{"clientEvents":{"inputEvents":{"set svg icon":{"channel":"set-icon-svg/set html","event":"set html","important":"false"}}}}},"Label#14":{"t":"Label","lX":314,"lY":17,"sX":9.47,"sY":1.08,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"75%","height":"26.909px","x":"18%","y":"2%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"22","label text":"<font color=\"#ffffff\">Customer</font>"},"ev":{"clientEvents":{"inputEvents":{"set title color":{"channel":"setTitleColor/set color","event":"set color","important":"false"}}}}},"clearfixcustomer":{"t":"Scripting","lX":860,"lY":15,"sX":1,"sY":1,"s":"Customer Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"65.69%","y":"37.07%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"overflow:hiden; border-bottom:1.5px solid white; width:100%;\">\n\t<style>\n\t\tbody {\n\t\t\tfont-family: \"Open Sans\";\n\t\t\tfont-size: 16px;\n\t\t\tuser-select: none;\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: hidden;\n\t\t}\n\t</style>\n</div>"},"ev":{}},"customericonform":{"t":"Scripting","lX":1025,"lY":15,"sX":1,"sY":1,"s":"Customer Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"65.69%","y":"37.07%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 17.933333\" height=\"42\" width=\"42\">\n<g style=\"fill: #ffffff;fill-opacity:1;\" id=\"g8558\" transform=\"matrix(1.2320797,0,0,1.1086219,-149.59752,-64.987096)\">\n<path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill: #ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.15868;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;\" d=\"m 127.7884,74.23748 -2.65186,-0.006 -0.88953,-0.0088 H 121.8568 V 58.963261 h 12.22869 v 6.628658 l 0.004,0.973414 c -0.33978,-0.368141 -0.71617,-0.634551 -1.16431,-0.701637 l -0.0106,-0.271777 v -5.481813 h -9.88744 v 12.965712 h 1.22576 l 0.89574,0.0088 2.62582,0.006 z\" id=\"path6880-6-8-4-3-2-9\"></path>\n<rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#2c5aa0;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect7488-4-2-8-3-4-8-4-0-8-2-2-3\" width=\"7.7148671\" height=\"1.7806553\" x=\"-131.72319\" y=\"-63.009228\" transform=\"scale(-1)\"></rect>\n<rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect7488-4-2-8-3-4-8-4-3-5-3-2-5-6\" width=\"7.7148671\" height=\"1.7806553\" x=\"-131.61604\" y=\"-65.558746\" transform=\"scale(-1)\"></rect>\n<path style=\"color: #ffffff;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill: #ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;\" d=\"m 123.88958,68.099214 v -1.76264 h 6.60242 c -0.57651,0.485193 -0.7723,0.844388 -1.09929,1.758906 z\" id=\"path8471-5-4-0-6-7\"></path>\n<g id=\"g26680-4-6-1\" transform=\"matrix(0.32163656,0,0,-0.35879566,438.60327,574.36524)\">\n<g transform=\"translate(0.31661036,-0.22079882)\" id=\"g8547\">\n<path style=\"opacity:1;fill: #ffffff;fill-opacity:0;stroke: #ffffff;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"path26669-0-9-3\" transform=\"scale(1,-1)\" d=\"m -947.89313,-1408.5568 a 4.8449111,4.8449111 0 0 1 -4.82869,4.8449 4.8449111,4.8449111 0 0 1 -4.86102,-4.8124 4.8449111,4.8449111 0 0 1 4.79616,-4.8771 4.8449111,4.8449111 0 0 1 4.89312,4.7798 l -4.84448,0.065 z\"></path>\n<path style=\"fill: #ffffff;fill-opacity:0;stroke: #ffffff;stroke-width:2.90815;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;\" d=\"m -961.98958,1395.7962 17.9656,-0.035\" id=\"path26675-9-4-9\"></path>\n<path style=\"opacity:1;fill:none;fill-opacity:1;stroke: #ffffff;stroke-width:3.11311;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"path26671-0-8-9\" transform=\"matrix(-0.99997671,0.00682476,0.01106739,0.99993875,0,0)\" d=\"m 977.38034,1389.4074 a 8.9775076,7.0499392 0 0 1 -8.92843,7.0495 8.9775076,7.0499392 0 0 1 -9.02604,-6.9724 l 8.97696,-0.077 z\"></path>\n</g>\n</g>\n</g>\n</svg>"},"ev":{}},"Label#15":{"t":"Label","lX":85,"lY":35,"sX":10.74,"sY":0.8,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"85%%","height":"20px","x":"5%","y":"35px"},"ver":"200124c190915","z":"100","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"set date color":{"channel":"setDateColor/apply css","event":"apply css","important":"false"},"created date":{"channel":"created-date/receive value","event":"receive value","important":"false"}}}}},"Generic#30":{"t":"Generic","lX":86,"lY":10,"sX":0.4,"sY":0.4,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"40px","height":"40px","x":"5%","y":"10px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"red"},"ev":{"clientEvents":{"inputEvents":{"set svg icon":{"channel":"set-icon-svg/set html","event":"set html","important":"false"}}}}},"Label#20":{"t":"Label","lX":86,"lY":70,"sX":10.74,"sY":0.8,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"85%","height":"20px","x":"5%","y":"70px"},"ver":"200124c190915","z":"100","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"date-label":{"channel":"date-label/receive value","event":"receive value","important":"false"},"date label style":{"channel":"date-label-style/apply css","event":"apply css","important":"false"}}}}},"Generic#31":{"t":"Generic","lX":0,"lY":60,"sX":12.38,"sY":0.02,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"98%","height":"2px","x":"0%","y":"60px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"white"},"ev":{"clientEvents":{"inputEvents":{"clear fix line":{"channel":"clear-fix-line/set html","event":"set html","important":"false"}}}}},"clearfixsites":{"t":"Scripting","lX":1120,"lY":195,"sX":1,"sY":1,"s":"Site Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"65.69%","y":"37.07%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"overflow:hiden; border-bottom:1.5px solid white; width:100%;\">\n\t<style>\n\t\tbody {\n\t\t\tfont-family: \"Open Sans\";\n\t\t\tfont-size: 16px;\n\t\t\tuser-select: none;\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: hidden;\n\t\t}\n\t</style>\n</div>"},"ev":{}},"sitesiconform":{"t":"Scripting","lX":1210,"lY":195,"sX":1,"sY":1,"s":"Site Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"65.69%","y":"37.07%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"40\" width=\"40\"> \n    <g style=\"fill:#d74423;fill-opacity:1\" transform=\"matrix(0.39670883,0,0,-0.35820296,-163.19829,457.34499)\" id=\"g18592-3-4\">\n      <path style=\"color: #ffffff;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill: #ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3.28444;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;\" d=\"m 422.01831,1230.034 -2.7745,0.01 h -6.77539 v 46.6876 h 34.66406 v -18.7899 l 0.0117,-2.4418 -3.30047,2.1251 -0.0296,0.3167 v 15.5389 h -28.02734 v -39.7576 l 3.4746,-0.01 2.72883,0.01 c 0,-1.2216 0.0281,-1.332 0.0281,-3.6862 z\" id=\"path18578-0-7\"></path>\n      <path style=\"fill: #ffffff;fill-opacity:0;stroke: #ffffff;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;\" d=\"m 445.0059,1251.8235 8.49957,-5.6176 0.20237,-15.2629 H 426.5017 l -0.0127,15.8989 13.96358,7.8434 z\" id=\"path18580-0-48\"></path>\n      <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect18582-5-4\" width=\"4.6674132\" height=\"4.8891621\" x=\"-435.84637\" y=\"1237.4868\" transform=\"scale(-1,1)\"></rect>\n      <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect18584-0-2\" width=\"4.6674132\" height=\"4.8891621\" x=\"-448.59576\" y=\"1237.4868\" transform=\"scale(-1,1)\"></rect>\n      <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect18586-3-79\" width=\"21.868916\" height=\"5.0475268\" x=\"-440.74075\" y=\"1265.5631\" transform=\"scale(-1,1)\"></rect>\n      <rect style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" id=\"rect18588-6-6\" width=\"21.868916\" height=\"5.0475268\" x=\"-440.74075\" y=\"1258.3362\" transform=\"scale(-1,1)\"></rect>\n      <path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill: #ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;\" d=\"m 418.87296,1251.0608 v 4.9964 h 15.96391 l -8.73278,-4.9964 z\" id=\"path18590-6-1\"></path>\n    </g>\n  </svg>"},"ev":{}},"Generic#32":{"t":"Generic","lX":101,"lY":25,"sX":0.4,"sY":0.4,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"40px","height":"40px","x":"5%","y":"10px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"red"},"ev":{"clientEvents":{"inputEvents":{"set svg icon":{"channel":"set-icon-svg/set html","event":"set html","important":"false"}}}}},"Label#21":{"t":"Label","lX":87,"lY":35,"sX":10.74,"sY":0.8,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"85%%","height":"20px","x":"5%","y":"35px"},"ver":"200124c190915","z":"100","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"set date color":{"channel":"setDateColor/apply css","event":"apply css","important":"false"},"created date":{"channel":"created-date/receive value","event":"receive value","important":"false"}}}}},"Label#22":{"t":"Label","lX":86,"lY":70,"sX":10.74,"sY":0.8,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"85%","height":"20px","x":"5%","y":"70px"},"ver":"200124c190915","z":"100","dis":false,"tt":"","a":{"font size":"12","label text":"<font color=\"#ffffff\">Created On</font>","text align":"right"},"ev":{"clientEvents":{"inputEvents":{"date-label":{"channel":"date-label/receive value","event":"receive value","important":"false"},"date label style":{"channel":"date-label-style/apply css","event":"apply css","important":"false"}}}}},"Generic#33":{"t":"Generic","lX":15,"lY":75,"sX":12.38,"sY":0.02,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"98%","height":"2px","x":"0%","y":"60px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"background":"white"},"ev":{"clientEvents":{"inputEvents":{"clear fix line":{"channel":"clear-fix-line/set html","event":"set html","important":"false"}}}}},"clearfixlocation":{"t":"Scripting","lX":1120,"lY":165,"sX":1,"sY":1,"s":"Location Form","ps":{"enabled":"false","scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"65.69%","y":"37.07%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div style=\"overflow:hiden; border-bottom:1.5px solid white; width:100%;\">\n\t<style>\n\t\tbody {\n\t\t\tfont-family: \"Open Sans\";\n\t\t\tfont-size: 16px;\n\t\t\tuser-select: none;\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: hidden;\n\t\t}\n\t</style>\n</div>"},"ev":{}},"locationiconform":{"t":"Scripting","lX":1145,"lY":312,"sX":1,"sY":1,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"5.74%","height":"11.44%","x":"65.69%","y":"37.07%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"40\" width=\"40\">\n\t<g id=\"g8856\" transform=\"matrix(1.0393596,0,0,1.0918312,-144.64395,-96.576359)\">\n\t <g id=\"g8880\">\n\t   <path id=\"path18578-0-7-9-4\" d=\"m 151.37301,104.03303 -8.46777,-0.006 -1.0003,-0.009 h -2.68785 V 88.523917 h 13.75153 v 6.730598 l 0.005,-2.01108 -1.30933,0.01668 -0.0117,1.994402 v -5.56608 H 140.5335 V 102.8535 h 1.37841 l 1.00727,0.009 7.73503,0.006 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill: #ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.23812;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;\"></path>\n\t   <rect transform=\"scale(-1)\" y=\"-92.548515\" x=\"-150.43297\" height=\"1.8080391\" width=\"8.6755915\" id=\"rect18586-3-79-9-9\" style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\"></rect>\n\t   <path style=\"opacity:1;fill: #ffffff;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\" d=\"m 148.8019,95.137243 h -7.04451 v -1.808039 h 8.67558 c -0.70958,0.529282 -1.38201,1.074999 -1.63107,1.808039 z\" id=\"rect18588-6-6-2-1\"></path>\n\t   <path id=\"path18590-6-1-8-7\" d=\"m 141.75782,97.743303 v -1.789747 l 6.75536,-0.0092 c -0.11624,0.430866 -0.29459,0.730966 -0.28386,1.817226 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill: #ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;\"></path>\n\t   <g id=\"g8846\" transform=\"matrix(0.68359534,0,0,0.68359534,43.301134,37.305868)\">\n\t\t <path id=\"path7975-0-8-4-00\" d=\"m 163.24978,87.851079 a 3.5554496,3.5554496 0 0 1 -3.55545,3.555449 3.5554496,3.5554496 0 0 1 -3.55545,-3.555449 3.5554496,3.5554496 0 0 1 3.55545,-3.555449 3.5554496,3.5554496 0 0 1 3.55545,3.555449 z\" style=\"opacity:1;fill:none;fill-opacity:1;stroke: #ffffff;stroke-width:1.77158;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;\"></path>\n\t\t <path id=\"path8088-3-7-2\" d=\"m 155.57309,89.531337 4.09342,7.671637 c 1.38143,-2.559632 3.23012,-5.812085 4.14428,-7.678892 -2.4549,3.121173 -5.10937,3.839063 -8.2377,0.0073 z\" style=\"fill: #ffffff;fill-opacity:1;stroke:none;stroke-width:0.529167;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;\"></path>\n\t   </g>\n\t </g>\n\t</g>\n</svg>"},"ev":{}},"Label#23":{"t":"Label","lX":311,"lY":17,"sX":9.47,"sY":1.08,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"75%","height":"26.909px","x":"18%","y":"2%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"22","label text":"<font color=\"#ffffff\">Site</font>"},"ev":{"clientEvents":{"inputEvents":{"set title color":{"channel":"setTitleColor/apply css","event":"apply css","important":"false"}}}}},"Label#24":{"t":"Label","lX":314,"lY":17,"sX":9.47,"sY":1.08,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"75%","height":"26.909px","x":"18%","y":"2%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"22","label text":"<font color=\"#ffffff\">Location</font>"},"ev":{"clientEvents":{"inputEvents":{"set title color":{"channel":"setTitleColor/apply css","event":"apply css","important":"false"}}}}},"Input#0":{"t":"Input","lX":67,"lY":110,"sX":12,"sY":1,"s":"Branch Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"6.29%","x":"3.84%","y":"110px"},"ver":"270520c190915","dis":false,"tt":"","a":{"required":"true","label text":"Name","color":"white","tab index":"1"},"ev":{"clientEvents":{"inputEvents":{"name":{"channel":"name-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"name changed":{"channel":"name-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#1":{"t":"Input","lX":67,"lY":110,"sX":12,"sY":1,"s":"Customer Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"6.29%","x":"3.84%","y":"110px"},"ver":"270520c190915","z":"100","dis":false,"tt":"","a":{"required":"true","color":"white","label text":"Name","tab index":"1"},"ev":{"clientEvents":{"inputEvents":{"name":{"channel":"name-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"name changed":{"channel":"name-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#4":{"t":"Input","lX":42,"lY":392,"sX":12,"sY":1,"s":"Customer Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"4.38%","x":"3.84%","y":"392px"},"ver":"270520c190915","dis":false,"tt":"","a":{"label text":"Primary Contact Name","color":"white","tab index":"4"},"ev":{"clientEvents":{"inputEvents":{"primary name":{"channel":"primary-name-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"primary name changed":{"channel":"primary-name-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#5":{"t":"Input","lX":42,"lY":460,"sX":12,"sY":1,"s":"Customer Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"4.38%","x":"3.84%","y":"461px"},"ver":"270520c190915","z":"100","dis":false,"tt":"","a":{"label text":"Primary Contact Email","color":"white","invalid message":"Email is not valid.","tab index":"5","type":"email"},"ev":{"clientEvents":{"inputEvents":{"Primary email":{"channel":"primary-email-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"primary email changed":{"channel":"primary-email-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#6":{"t":"Input","lX":42,"lY":530,"sX":5.94,"sY":1,"s":"Customer Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"47%","height":"4.38%","x":"3.84%","y":"530px"},"ver":"270520c190915","z":"100","dis":false,"tt":"","a":{"label text":"Mobile","color":"white","validate pattern":"\\+|^[\\d ]","invalid message":"Mobile number is required","tab index":"6","type":"phonenumber","api key":"AIzaSyDPZqlIT0Mx7pQDSBqQto-5mYB4PSBlT0U"},"ev":{"clientEvents":{"inputEvents":{"Mobile":{"channel":"mobile-value/receive value","event":"receive value","important":"false"},"setCountry":{"channel":"setCountry/set country","event":"set country","important":"false"}},"outputEvents":{"mobile changed":{"channel":"mobile-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#7":{"t":"Input","lX":66,"lY":580,"sX":12,"sY":1,"s":"Site Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"6.29%","x":"3.84%","y":"578px"},"ver":"270520c190915","dis":false,"tt":"","a":{"label text":"Primary Contact Name","color":"white","tab index":"5"},"ev":{"clientEvents":{"inputEvents":{"primary name":{"channel":"primary-name-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"primary name changed":{"channel":"primary-name-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#8":{"t":"Input","lX":42,"lY":650,"sX":12,"sY":1,"s":"Site Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"4.38%","x":"3.84%","y":"649px"},"ver":"270520c190915","z":"100","dis":false,"tt":"","a":{"label text":"Primary Contact Email","color":"white","validate pattern":"(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])","invalid message":"Data input is invalid, please use proper email","tab index":"6","type":"email"},"ev":{"clientEvents":{"inputEvents":{"Primary email":{"channel":"primary-email-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"primary email changed":{"channel":"primary-email-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#9":{"t":"Input","lX":42,"lY":720,"sX":5.94,"sY":1,"s":"Site Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"47%","height":"4.38%","x":"3.84%","y":"718px"},"ver":"270520c190915","z":"100","dis":false,"tt":"","a":{"label text":"Mobile","color":"white","validate pattern":"\\+|^[\\d ]","invalid message":"Data input is invalid, must be a valid phone number.","tab index":"7","type":"phonenumber","api key":"AIzaSyDPZqlIT0Mx7pQDSBqQto-5mYB4PSBlT0U"},"ev":{"clientEvents":{"inputEvents":{"Mobile":{"channel":"mobile-value/receive value","event":"receive value","important":"false"},"setCountry":{"channel":"setCountry/set country","event":"set country","important":"false"}},"outputEvents":{"mobile changed":{"channel":"mobile-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#10":{"t":"Input","lX":66,"lY":100,"sX":12,"sY":1,"s":"Site Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"6.29%","x":"3.84%","y":"100px"},"ver":"270520c190915","z":"100","dis":false,"tt":"","a":{"required":"true","color":"white","label text":"Name","tab index":"1"},"ev":{"clientEvents":{"inputEvents":{"name":{"channel":"name-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"name changed":{"channel":"name-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#11":{"t":"Input","lX":67,"lY":100,"sX":12,"sY":1,"s":"Location Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"6.29%","x":"3.84%","y":"100px"},"ver":"270520c190915","z":"100","dis":false,"tt":"","a":{"required":"true","color":"white","label text":"Name","tab index":"1"},"ev":{"clientEvents":{"inputEvents":{"name":{"channel":"name-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"name changed":{"channel":"name-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"BarcodeScanner#1":{"t":"BarcodeScanner","lX":100,"lY":0,"sX":15.5,"sY":2.5,"s":"Provisioning Step 1","ps":{"enabled":"true","scalingType":"OK","width":"88.93%","height":"250px","x":"5.74%","y":"0%"},"ver":"190104c190915","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"start":{"channel":"start/activate","event":"activate","important":"false"}},"outputEvents":{"detected":{"channel":"detected/receive value","event":"Detected","trigger":"Detected","important":"false"}}}}},"Input#12":{"t":"Input","lX":102,"lY":337,"sX":15.65,"sY":1,"s":"Provisioning Step 1","ps":{"enabled":"true","scalingType":"NOVERT","width":"89.79%","height":"6.29%","x":"5.85%","y":"45%"},"ver":"270520c190915","z":"110","dis":false,"tt":"","a":{"label text":"Device"},"ev":{"clientEvents":{"inputEvents":{"setDevice":{"channel":"setDevice/receive value","event":"receive value","important":"false"}},"outputEvents":{"DeviceFieldChanged":{"channel":"DeviceFieldChanged/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Generic#34":{"t":"Generic","lX":0,"lY":85,"sX":17.43,"sY":7.39,"s":"Provisioning Step 1","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"89.79%","x":"0px","y":"10%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"Button#12":{"t":"Button","lX":102,"lY":463,"sX":15.55,"sY":1.28,"s":"Provisioning Step 1","ps":{"enabled":"true","scalingType":"OK","width":"89.21%","height":"7.13%","x":"5.85%","y":"65%"},"ver":"190104c190915","z":"110","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Next"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"},"NextPageSubmit":{"channel":"NextPageSubmit/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Scripting#4":{"t":"Scripting","lX":340,"lY":310,"sX":1,"sY":1,"s":"Provisioning Step 1","ps":{"enabled":"false","scalingType":"OK","width":"6.65%","height":"11.42%","x":"22.62%","y":"35.39%"},"ver":"200124c190915","vis":false,"dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n var Caller;\n var _initializer;\n var _handleGeneric;\n var _publishCommand;\n var _gotoPage;\n var persistence;\n var _UpdatePersistance;\n var ProvisioningOption;\n var DeviceId;\n \n const modelNameId = {\n     Pestsense10: 1,\n     Rodent_Sensor: 2,\n     Yacht: 3\n };\n \n var modelId;\n \n var formCotrol = 0;\n \n console.log(\"Here in stg\");\n Script.on('load', function () {\n \n     persistence = Script.getState(\"rodent-persistance\");\n     console.log(\"DEv persistance is \" + JSON.stringify(persistence, null, 4));\n     Script.setState(\"Caller\", persistence.LastScreen);\n     try {\n         _initializer = Script.getState(\"Initializer\");\n         _handleGeneric = Script.getState(\"HandleGeneric\");\n         _publishCommand = Script.getState(\"PublishCommand\");\n         _gotoPage = Script.getState(\"GotoPage\");\n         _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n         enableProvisioning();\n     }\n     catch (e) {\n         setTimeout(function () {\n             fw.func(\"JUMPSCREEN\", \"Initialisation\");\n         }, 3000);\n     }\n \n     var seleceted = Script.getState(\"SelectedName\");\n     var cardTemplate = Script.inheritScript(\"MenuTemplateRodent\");\n     _initializer(cardTemplate, \"SetHtml\");\n \n     var topMenuTemplate = Script.inheritScript(\"Menu\");\n     _initializer(topMenuTemplate, \"setTopHtml\");\n     var command =\n     {\n         \"Action\": \"Hide\",\n         \"Compoent\": \"RightPanel\",\n         \"Value\": true\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"Hide\",\n         \"Compoent\": \"LeftPanel\",\n         \"Value\": true\n     };\n     _publishCommand(command, \"activateGeneric\");\n \n     command =\n     {\n         \"Action\": \"HideIndex\"\n     };\n     _publishCommand(command, \"activateGeneric\");\n \n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"AddReport\",\n         \"Value\": \"\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"AddAdvisory\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"MaintnanceModeRow\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"SetTopAction\");\n     ProvisioningOption = Script.getState(\"EnableProvisioning\");\n     DeviceId = undefined;\n \n     ClientEvents.publish(\"start\", \"\", false);\n \n     ClientEvents.publish(\"setCancelColor\", { Property: \"width\", PropertyValue: \"100%\" }, false);\n     ClientEvents.publish(\"setCancelColor\", { Property: \"height\", PropertyValue: \"100%\" }, false);\n     ClientEvents.publish(\"setCancelColor\", { Property: \"color\", PropertyValue: \"white\" }, false);\n     ClientEvents.publish(\"setCancelColor\", { Property: \"background-color\", PropertyValue: \"#6ec3f6ff\" }, false);\n \n });\n \n \n function enableProvisioning() {\n \n     var user = Client.getUser();\n     //console.log(\"User is \" + user);\n     var selectUser = [\n         {\n             \"TableName\": \"users\", // Specify the primary table used to construct the join request\n             \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\":\n                 [\n                     //\"username\",\n                     \"accessrole\"\n \n \n                 ], // Specify the list of columns to take from the reference table.\n             \"Filters\": // Filter options in case they are needed.\n                 [\n                     {\n                         \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                         \"ParamName\": \"username\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                         \"Value\": user // Value that you want to pass for comparison (any object)\n                     }\n                 ]\n         }\n     ];\n \n     Database.readCompound(\"Directory\", \"users\", selectUser, (eventData) => {\n \n         var accessRoleId = Object.values(eventData.value.data)[0][0];\n         //console.log(\"Access role value is \" + accessRoleId);\n        // var errorEnable = {};\n         if (accessRoleId === \"\" || accessRoleId == 0 || accessRoleId == null) {\n \n             return;\n \n         }\n         var filter = {\n             columns: \"Feature02\",\n             filter: \"Id=\" + accessRoleId\n         };\n \n         Database.readRecords(\"rodent\", \"UserAccessRole\", function (eventData) {\n \n             //console.log(\"Data read from user access role \" + JSON.stringify(eventData.value, null, 4));\n             var provisioningAccess = parseInt(Object.values(eventData.value.data)[0][0]);\n \n             if (provisioningAccess === 1) {\n \n                 formCotrol = 1;\n \n             }\n \n         }, filter);\n \n     });\n }\n \n ClientEvents.subscribe(\"NextPageSubmit\", function (data) {\n \n \n \n     // if (formCotrol === 0) {\n     //     Client.alert(\"You don't have adequate permission to provision this device\");\n     //     fw.func(\"JUMPSCREEN\", \"Device Level\");\n     //     return;\n     // }\n \n \n \n     if (ProvisioningOption === \"True\" && ProvisioningOption != null && ProvisioningOption !== undefined) {\n \n         var selectAdvisories = [\n             {\n                 \"TableName\": \"Devices\", // Specify the primary table used to construct the join request\n                 \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n                 \"Columns\":\n                     [\n                         \"Id\",\n                         \"SiteId\",\n                         \"LocationId\",\n                         \"CustomerId\",\n                         \"CompanyId\",\n                         \"BranchId\",\n                         \"BarcodeId\"\n \n \n                     ], // Specify the list of columns to take from the reference table.\n                 \"Filters\": // Filter options in case they are needed.\n                     [\n                         {\n                             \"Column\": \"BarcodeId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                             \"ParamName\": \"BarcodeId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                             \"Value\": DeviceId.device // Value that you want to pass for comparison (any object)\n                         }\n                     ]\n             }];\n \n         if (DeviceId !== undefined) {\n             Database.readCompound(\"rodent\", \"Devices\", selectAdvisories, function (eventData) {\n                 console.log(\"DEvo device values data is \" + JSON.stringify(eventData, null, 4));\n \n                 // moving happen here\n                 var current;\n                 for (var item in eventData.value.data) {\n                     current = eventData.value.data[item];\n                 }\n \n                 if (current === undefined) {\n \n                     // provisioning a new device. \n                     GetDevice(DeviceId.device, DeviceId.model);\n                 }\n                 else {\n \n                     var values = Object.values(eventData.value.data)[0];\n                     //console.log(\"DEvo VAlue is \" + JSON.stringify(values, null, 4) + \" type id \" + typeof values);\n                     //console.log(\"DEvo persistance data is \" + JSON.stringify(persistence, null, 4));\n                     var devCompanyId = parseInt(values[4]);\n                     var devBranchId = parseInt(values[5]);\n                     var devSiteId = parseInt(values[1]);\n                     var devCustomerId = parseInt(values[3]);\n                     var devLocationId = parseInt(values[2]);\n \n                     //var values = Object.values(eventData.value.data);\n                     var companyId = typeof persistence.CompanyId === \"string\" ? parseInt(persistence.CompanyId) : null;\n                     var branchId = typeof persistence.BranchId === \"string\" ? parseInt(persistence.BranchId) : null;\n                     var siteId = typeof persistence.SiteId === \"string\" ? parseInt(persistence.SiteId) : null;\n                     var locationId = typeof persistence.LocationId === \"string\" ? parseInt(persistence.LocationId) : null;\n \n                     var customerID = typeof persistence.CustomerId === \"string\" ? parseInt(persistence.CustomerId) : null;\n                     var LastScreen = typeof persistence.LastScreen === \"string\" ? persistence.LastScreen : \"Levels\";\n                     //\n \n                     //\n \n \n                     // if (formCotrol === 0) {\n                     //     Client.alert(\"You don't have adequate permission to provision this device\");\n                     //     fw.func(\"JUMPSCREEN\", LastScreen);\n                     //     //return;\n                     // }\n \n                     var dbVal = {};\n                     dbVal[current[0]] = {\n                         \"Id\": current[0],\n                         \"SiteId\": persistence.SiteId,\n                         \"LocationId\": persistence.LocationId,\n                         \"CustomerId\": persistence.CustomerId,\n                         \"CompanyId\": persistence.CompanyId,\n                         \"BranchId\": persistence.BranchId,\n                         \"StationId\": null\n                     };\n                     console.log(\"DEvo persistance data is \" + JSON.stringify(persistence, null, 4));\n                     console.log(`DEvo device values are Devcomp ${devCompanyId} comp ${companyId} devC ${devCustomerId} and cus ${customerID} \n                     devBr ${devBranchId} br ${branchId} devSit ${devSiteId} side is ${siteId} devL ${devLocationId} ${locationId}`);\n                     if (devCompanyId === companyId) { //|| devCustomerId === customerID\n \n \n                         if (devBranchId === branchId) {\n \n                             // same site or deleted device\n                             if (devSiteId === siteId || devSiteId === 0) {\n \n                                 if (locationId !== devLocationId || devLocationId === 0) {\n \n                                     Database.updateRecord(\"Rodent\", \"Devices\", dbVal, function (data) {\n \n                                         Script.setState(\"barcodeId\", current[0], true);\n                                         _UpdatePersistance(persistence);\n                                         fw.func(\"JUMPSCREEN\", LastScreen); // LastScreen, \"Device Level\"\n                                     });\n \n                                 } else {\n                                     fw.func(\"JUMPSCREEN\", LastScreen); // \n \n                                 }\n \n                             } else {\n \n                                 Client.alert(`This device is installed at a different site and cannot be moved to a different one.\\nYou need to remove it first`);\n                                 fw.func(\"JUMPSCREEN\", LastScreen);\n \n                             }\n \n                         } else {\n                             // different branch\n \n                             if (devSiteId === 0) {\n\n                                var option = { \"confirmText\": \"Confirm\", \"cancelText\": \"Cancel\" };\n                                Client.confirm(\"Are you sure you want to move this device between branches?\", \"Move device between branches\", option).then((eventData) => {\n\n                                    //console.log(\"Return data is  is \" + JSON.stringify(eventData, null, 4));\n\n                                    if (!eventData) {\n                                        fw.func(\"JUMPSCREEN\", LastScreen);\n                                    } else {\n                                        Database.updateRecord(\"Rodent\", \"Devices\", dbVal, function (data) {\n\n                                            Script.setState(\"barcodeId\", current[0], true);\n                                            _UpdatePersistance(persistence);\n                                            fw.func(\"JUMPSCREEN\", LastScreen); // LastScreen, \"Device Level\"\n                                        });\n                                    }\n\n                                });\n                            } else {\n                                Client.alert(\"This device is at a diffent branch\");\n                                fw.func(\"JUMPSCREEN\", LastScreen); \n                            }\n                         }\n \n                     } else {\n                         Client.alert(\"The device does not exist\");\n                         fw.func(\"JUMPSCREEN\", LastScreen); // LastScreen, \"Device Level\"\n                     }\n \n \n                     // Database.updateRecord(\"Rodent\", \"Devices\", dbVal, function (data) {\n \n                     //     Script.setState(\"barcodeId\", current[0], true);\n                     //     _UpdatePersistance(persistence);\n                     //     fw.func(\"JUMPSCREEN\", \"Device Level\");\n                     // });\n                 }\n             });\n         }\n         else {\n             Client.alert(\"Device is not known to the system please check Device ID or rescan\");\n         }\n     }\n     else {\n         if (DeviceId !== undefined) {\n             //console.log(\"Devo in else is DEvo device values in else\");\n             ScanDevice(DeviceId.device);\n         }\n         else {\n             Client.alert(\"Device  is not known to the system please check Device ID or rescan\");\n         }\n     }\n });\n \n \n \n ClientEvents.subscribe(\"DeviceFieldChanged\", function (data) {\n     DeviceId = {\n         model: \"Pestsense10\",\n         device: data.value\n     };\n     modelId = 1;\n });\n \n ClientEvents.subscribe(\"Detected\", function (data) {\n \n     var res = data.value.split(\",\");\n     //persistence\n     DeviceId = {\n         model: res[0],\n         device: res[1]\n     };\n     modelId = modelNameId[res[0]];\n     ClientEvents.publish(\"setDevice\", DeviceId.device, false);\n });\n \n ClientEvents.subscribe(\"GenericActionMessage\", function (data) {\n     //  Script.setState(\"ReturningFromMaintenance\", true);\n     _handleGeneric(data);\n });\n \n function GetDevice(id, model) {\n \n     var getDevice =\n         [{\n             \"TableName\": model, // Specify the primary table used to construct the join request\n             \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\":\n                 [\n                     \"serialnum\",\n                     \"name\",\n                     \"url\",\n                     \"imagename\",\n                     \"make\"\n                 ], // Specify the list of columns to take from the reference table.\n             \"Filters\": // Filter options in case they are needed.\n                 [\n                     {\n                         \"Column\": \"name\",\n                         \"ParamName\": \"branchId\",\n                         \"Value\": id\n                     }\n                 ]\n         }];\n     Database.readCompound(\"pestco\", \"rodent_sensor\", getDevice, function (currentData) {\n \n         var current;\n         for (var item in currentData.value.data) {\n             current = currentData.value.data[item];\n         }\n         var LastScreen = typeof persistence.LastScreen === \"string\" ? persistence.LastScreen : \"Levels\";\n         //\n \n         if (current === undefined) {\n             Client.alert(\"Device is not known to the system please check Device ID rescan or enter\");\n         }\n         else {\n             var deviceNumber = DeviceId.device;\n             var compoundQeury = [\n                 {\n                     \"TableName\": \"Devices\", // Specify the primary table used to construct the join request\n                     \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n                     \"Columns\":\n                         [\n                             \"DeviceName\"\n                         ],\n                     \"Filters\":\n                         [\n                             {\n                                 \"Column\": \"DeviceNumber\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                                 \"ParamName\": \"DeviceNumber\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                                 \"Value\": deviceNumber // Value that you want to pass for comparison (any object)\n                             }\n                         ]// Specify the list of columns to take from the reference table.\n                 }];\n             if (formCotrol === 0) {\n                 Client.alert(\"You don't have adequate permission to provision this device\");\n                 fw.func(\"JUMPSCREEN\", LastScreen);\n                 return;\n             }\n             Database.readCompound(\"rodent\", \"Devices\", compoundQeury, function (packet) {\n                 var devName;\n                 //console.log(\"line 1221 : \" + JSON.stringify(packet, null, 4)); \n                 for (var val in packet.value.data) {\n                     devName = packet.value.data[val];\n                 }\n \n                 current.imagename = \"../images/Device.PNG\";\n                 current.modelName = model;\n                 Script.setState(\"DeviceExists\", current);\n                 Script.setState(\"devModelId\", modelId);\n                 Script.setState(\"devModel\", DeviceId.model);\n                 Script.setState(\"device\", DeviceId.device);\n                 Script.setState(\"devName\", devName);\n                 fw.func(\"JUMPSCREEN\", \"Provisioning Step 2\");\n             });\n \n         }\n     });\n }\n \n function ScanDevice(code) {\n \n     var selectAdvisories = [\n         {\n             \"TableName\": \"Devices\", // Specify the primary table used to construct the join request\n             \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\":\n                 [\n                     \"Id\",\n                     \"SiteId\",\n                     \"LocationId\",\n                     \"CustomerId\",\n                     \"CompanyId\",\n                     \"BranchId\"\n \n \n \n                 ], // Specify the list of columns to take from the reference table.\n             \"Filters\": // Filter options in case they are needed.\n                 [\n                     {\n                         \"Column\": \"BarcodeId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                         \"ParamName\": \"BarcodeId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                         \"Value\": code // Value that you want to pass for comparison (any object)\n                     }\n                 ]\n         }];\n     Database.readCompound(\"rodent\", \"Devices\", selectAdvisories, function (eventData) {\n \n \n         var values = Object.values(eventData.value.data)[0];\n         //console.log(\"DEvo VAlue is \" + JSON.stringify(values, null, 4) + \" type id \" + typeof values);\n         //console.log(\"DEvo persistance data is \" + JSON.stringify(persistence, null, 4));\n \n         var LastScreen = typeof persistence.LastScreen === \"string\" ? persistence.LastScreen : \"Levels\";\n         //\n \n         var current;\n         for (var item in eventData.value.data) {\n             current = eventData.value.data[item];\n         }\n         if (current === undefined) {\n             Client.alert(\"Device is not known to the system please check Device ID or rescan\");\n              fw.func(\"JUMPSCREEN\", LastScreen); //LastScreen\n         }\n         else {\n \n             var selectAdvisories = [\n                 {\n                     \"TableName\": \"Locations\", // Specify the primary table used to construct the join request\n                     \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n                     \"Columns\":\n                         [\n                             \"Id\"\n                         ], // Specify the list of columns to take from the reference table.\n                     \"Filters\": // Filter options in case they are needed.\n                         [\n                             {\n                                 \"Column\": \"RelativeId\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                                 \"ParamName\": \"AreaId\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                                 \"Value\": current[1] // Value that you want to pass for comparison (any object)\n                             }\n                         ]\n                 }];\n \n             Database.readCompound(\"rodent\", \"Locations\", selectAdvisories, function (currentData) {\n \n                 var selectedSites = [];\n                 var areas;\n                 for (var item in currentData.value.data) {\n                     areas = currentData.value.data[item];\n                     selectedSites.push(areas[0]);\n                 }\n \n                 if (current !== undefined) {\n \n \n                     ClientEvents.publish(\"detection-end\", \"\");\n \n                     persistence.SiteId = current[1];\n                     persistence.LocationId = current[2];\n                     persistence.CompanyId = current[4];\n                     persistence.CustomerId = current[3];\n                     persistence.LastScreen = \"Device Level\";\n \n \n                     Script.setState(\"SelectedCustomer\", persistence.CustomerId);\n                     Script.setState(\"SelectedArea\", persistence.SiteId);\n \n                     Script.setState(\"selectedSites\", selectedSites);\n \n                     Script.setState(\"selectedSite\", persistence.LocationId);\n                     Script.setState(\"getSite\", persistence.SiteId);\n                     Script.setState(\"rodent-persistance\", persistence, true);\n                     Script.setState(\"barcodeId\", current[0], true);\n \n \n                     _UpdatePersistance(persistence);\n                     fw.func(\"JUMPSCREEN\", \"Device Level\"); //LastScreen\n                 }\n             });\n             // if(devBranchId === )\n         }\n     });\n }"},"ev":{}},"Input#13":{"t":"Input","lX":102,"lY":495,"sX":13.5,"sY":1,"s":"Provisioning Step 2","ps":{"enabled":"true","scalingType":"NOVERT","width":"89.79%","height":"6.75%","x":"5.85%","y":"63%"},"ver":"270520c190915","dis":false,"tt":"","a":{"label text":"Enter Alias Name or leave blank"},"ev":{"clientEvents":{"inputEvents":{"setDevice":{"channel":"setDevice/receive value","event":"receive value","important":"false"}},"outputEvents":{"DeviceFieldChanged":{"channel":"DeviceFieldChanged/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Button#13":{"t":"Button","lX":102,"lY":632,"sX":13.41,"sY":1.36,"s":"Provisioning Step 2","ps":{"enabled":"true","scalingType":"OK","width":"89.21%","height":"7.13%","x":"5.85%","y":"75%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Next"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"},"NextPageSubmit":{"channel":"NextPageSubmit/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Image#1":{"t":"Image","lX":108,"lY":76,"sX":13.37,"sY":4.58,"s":"Provisioning Step 2","ps":{"enabled":"true","scalingType":"","width":"88.93%","height":"52.26%","x":"6.2%","y":"9.62%"},"ver":"202605c190915","dis":false,"tt":"","a":{"border width":"0","opacity":"1","image":""},"ev":{"clientEvents":{"inputEvents":{"set-image":{"channel":"set-image/receive value","event":"receive value","important":"false"}}}}},"Label#25":{"t":"Label","lX":165,"lY":30,"sX":12.5,"sY":1.6,"s":"Provisioning Step 2","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"3.56%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"New Device Recognised"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabel/receive value","event":"receive value","important":"false"}}}}},"Scripting#7":{"t":"Scripting","lX":570,"lY":385,"sX":1,"sY":1,"s":"Provisioning Step 2","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar Caller;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar persistence;\nvar _UpdatePersistance;\nvar DeviceData;\nvar CanSubmit = true;\n\nvar deviceModelId;\nvar deviceModel;\nvar deviceId;\nvar deviceName;\nScript.on('load', function() {\n    \n    persistence = \tScript.getState(\"rodent-persistance\");\n    Script.setState(\"Caller\", \"Provisioning Step 1\");\n    \n\t\n\tdeviceModelId = Script.getState(\"devModelId\");\n    deviceModel = Script.getState(\"devModel\");\n    deviceId = Script.getState(\"device\");\n\tdeviceName =  Script.getState(\"devName\");\n\t\n    _initializer = Script.getState(\"Initializer\");\n    _handleGeneric = Script.getState(\"HandleGeneric\");\n    _publishCommand = Script.getState(\"PublishCommand\");\n    _gotoPage = Script.getState(\"GotoPage\");\n    _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\n    var seleceted = Script.getState(\"SelectedName\");\n    var cardTemplate =  Script.inheritScript(\"MenuTemplateRodent\");\n    _initializer(cardTemplate, \"SetHtml\");\n\n    var topMenuTemplate = Script.inheritScript(\"Menu\");\n    _initializer(topMenuTemplate, \"setTopHtml\");\n    var command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n      \n    command = \n    {\n        \"Action\":\"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n   \n    command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddReport\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\t command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddAdvisory\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n\t{\n\t\t\"Action\":\"setVisible\",\n\t\t\"Compoent\":\"MaintnanceModeRow\",\n\t\t\"Value\": \"none\",\n \t};\n\t_publishCommand(command, \"SetTopAction\");\t\n \n \n    ClientEvents.publish(\"start\",\"\",false);\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t    \n\tDeviceData = Script.getState(\"DeviceExists\");\n\tif(DeviceData === \"False\")\n\t{\n\t\tCanSubmit = false;\n\t\tClientEvents.publish(\"setLabel\",\"Device doesn't exist, please contact your system administrator\",false);\n\t}\n\telse\n\t{\n\t\t    ClientEvents.publish(\"set-image\",\"Picture4.jpg\",false);\n\t}\n\n});\n \n\nClientEvents.subscribe(\"NextPageSubmit\", function(data) \n{ \n\t\n\tif(CanSubmit)\n\t{\n\t\tScript.setState(\"deviceModelId\", deviceModelId);\n        Script.setState(\"deviceModel\", deviceModel);\n        Script.setState(\"deviceId\", deviceId);\n        Script.setState(\"deviceName\", deviceName);\n\t\tfw.func(\"JUMPSCREEN\", \"Provisioning Step 3\");\n\t}\n});\n\nClientEvents.subscribe(\"GenericActionMessage\", function(data) \n{ \n    _handleGeneric(data);\n});\n\n ClientEvents.subscribe(\"DeviceFieldChanged\", function(data) \n{ \n  \n\t deviceName = data.value;\n\t if(DeviceData !== \"False\")\n\t {\n\t\tDeviceData[\"Alias\"] = data.value;\n\t }\n\t \n});"},"ev":{}},"Button#14":{"t":"Button","lX":102,"lY":632,"sX":13.41,"sY":1.36,"s":"Provisioning Step 3","ps":{"enabled":"true","scalingType":"OK","width":"89.21%","height":"7.13%","x":"5.85%","y":"75%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Next"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"},"NextPageSubmit":{"channel":"NextPageSubmit/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"HelpViewer#0":{"t":"HelpViewer","lX":103,"lY":56,"sX":8.97,"sY":2.97,"s":"Provisioning Step 3","ps":{"enabled":"true","scalingType":"","width":"89.5%","height":"67.7%","x":"5.91%","y":"6.65%"},"ver":"202605c190915","dis":false,"tt":"","a":{"border width":"1","border color":"#ffffff","background color":"#ffffff","zoom":"1"},"ev":{"clientEvents":{"inputEvents":{"sethelp":{"channel":"sethelp/set helpfile","event":"set helpfile","important":"false"}}}}},"Scripting#8":{"t":"Scripting","lX":585,"lY":355,"sX":1,"sY":1,"s":"Provisioning Step 3","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar Caller;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar persistence;\nvar _UpdatePersistance;\nvar DeviceData;\nvar CanSubmit;\n\nvar deviceModelId;\nvar deviceModel;\nvar deviceId;\nvar deviceName;\nScript.on('load', function() {\n     \n    persistence = \tScript.getState(\"rodent-persistance\");\n    Script.setState(\"Caller\", \"Provisioning Step 2\");\n    \n\tdeviceModelId = Script.getState(\"devModelId\");\n    deviceModel = Script.getState(\"devModel\");\n    deviceId = Script.getState(\"device\");\n\n    deviceName =  Script.getState(\"devName\");\n\t\n    _initializer = Script.getState(\"Initializer\");\n    _handleGeneric = Script.getState(\"HandleGeneric\");\n    _publishCommand = Script.getState(\"PublishCommand\");\n    _gotoPage = Script.getState(\"GotoPage\");\n    _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\n    var seleceted = Script.getState(\"SelectedName\");\n    var cardTemplate =  Script.inheritScript(\"MenuTemplateRodent\");\n    _initializer(cardTemplate, \"SetHtml\");\n\n    var topMenuTemplate = Script.inheritScript(\"Menu\");\n    _initializer(topMenuTemplate, \"setTopHtml\");\n    var command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n      \n    command = \n    {\n        \"Action\":\"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n   \n    command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddReport\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\t command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddAdvisory\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n\t{\n\t\t\"Action\":\"setVisible\",\n\t\t\"Compoent\":\"MaintnanceModeRow\",\n\t\t\"Value\": \"none\",\n \t};\n\t_publishCommand(command, \"SetTopAction\");\t\n \n \n    ClientEvents.publish(\"start\",\"\",false);\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t  \n\tDeviceData = Script.getState(\"DeviceExists\");\n\n\tDeviceData.Help = \"/widgets/help/application/device_help/InsertBatteries.md\";\n\n\tif(DeviceData[\"2\"] !== \"\")\n\t{\n\t\t//DeviceData.Help =DeviceData[\"4\"];// \"widgets/Carousel.md\";\n\t}\n\tClientEvents.publish(\"sethelp\",DeviceData.Help,false);\n\n});\n \nClientEvents.subscribe(\"GenericActionMessage\", function(data) \n{ \n    _handleGeneric(data);\n});\n\nClientEvents.subscribe(\"NextPageSubmit\", function(data) \n{  \n\tScript.setState(\"deviceModelId\", deviceModelId);\n    Script.setState(\"deviceModel\", deviceModel);\n    Script.setState(\"deviceId\", deviceId);\n\tScript.getState(\"deviceName\", deviceName);\n\tfw.func(\"JUMPSCREEN\", \"Provisioning Step 4\");\n \n});"},"ev":{}},"Button#15":{"t":"Button","lX":101,"lY":632,"sX":13.41,"sY":1.36,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"89.21%","height":"7.13%","x":"5.85%","y":"75%"},"ver":"190104c190915","z":"110","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"ACTIVATE"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"},"NextPageSubmit":{"channel":"NextPageSubmit/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Label#27":{"t":"Label","lX":163,"lY":706,"sX":12.5,"sY":1.6,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"85.56%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"Click to ACTIVATE register your new device"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabel/receive value","event":"receive value","important":"false"}}}}},"Scripting#9":{"t":"Scripting","lX":510,"lY":450,"sX":1,"sY":1,"s":"Provisioning Step 4","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"11.88%","x":"29.26%","y":"53.44%"},"ver":"200124c190915","dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar Caller;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar persistence;\nvar _UpdatePersistance;\nvar DeviceData;\nvar CanSubmit;\n\nvar deviceModelId;\nvar deviceModel;\nvar deviceId;\nvar deviceName;\n\nScript.on('load', function() {\n    \n    persistence = \tScript.getState(\"rodent-persistance\");\n    Script.setState(\"Caller\", \"Provisioning Step 2\");\n\t\n\tdeviceModelId = Script.getState(\"deviceModelId\");\n    deviceModel = Script.getState(\"deviceModel\");\n    deviceId = Script.getState(\"deviceId\");\n\tdeviceName = Script.getState(\"deviceName\");\n    \n    _initializer = Script.getState(\"Initializer\");\n    _handleGeneric = Script.getState(\"HandleGeneric\");\n    _publishCommand = Script.getState(\"PublishCommand\");\n    _gotoPage = Script.getState(\"GotoPage\");\n    _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\n    var seleceted = Script.getState(\"SelectedName\");\n    var cardTemplate =  Script.inheritScript(\"MenuTemplateRodent\");\n    _initializer(cardTemplate, \"SetHtml\");\n\n    var topMenuTemplate = Script.inheritScript(\"Menu\");\n    _initializer(topMenuTemplate, \"setTopHtml\");\n    var command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n      \n    command = \n    {\n        \"Action\":\"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n   \n    command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddReport\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\t command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddAdvisory\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n\t{\n\t\t\"Action\":\"setVisible\",\n\t\t\"Compoent\":\"MaintnanceModeRow\",\n\t\t\"Value\": \"none\",\n \t};\n\t_publishCommand(command, \"SetTopAction\");\t\n \n \n    ClientEvents.publish(\"start\",\"\",false);\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t  \n \t\n\tDeviceData = Script.getState(\"DeviceExists\");\n\tClientEvents.publish(\"setLabelProduct\",DeviceData[\"4\"],false);\n    ClientEvents.publish(\"setLabelDeviceId\",DeviceData[\"1\"],false);\n\tClientEvents.publish(\"setLabelName\",DeviceData.Alias,false);\t\n\t\n});\n \nClientEvents.subscribe(\"GenericActionMessage\", function(data) \n{ \n    _handleGeneric(data);\n});\n\nClientEvents.subscribe(\"NextPageSubmit\", function(data) \n{  \n\t   var compoundQeury = [\n     {\n         \"TableName\" : \"Devices\", // Specify the primary table used to construct the join request\n          \"Columns\" :\n         [\n             \"Id\",\n   \n         ], // Specify the list of columns to take from the reference table.\n         \n         \"Filters\" : // Filter options in case they are needed.\n         [\n             {\n                 \"Column\" : \"DeviceNumber\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                 \"ParamName\" : \"DeviceNumber\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                 \"Value\": DeviceData[\"1\"] // Value that you want to pass for comparison (any object)\n             }\t\n         ],\n       \n     }];\n     \n     var modelId = deviceModelId;\n     Database.readCompound(\"rodent\",\"Devices\",compoundQeury, function(packet)\t\t\t\t\t \n     {\t\n          \n         var current;\n\t\t for(var item in packet.value.data)\n\t\t {\n\t\t\tcurrent = packet.value.data[item];\n\t\t }\n\t\t \n\t\t if(current === undefined)\n\t\t {\n\t\t\t \n\t\t\tDatabase.readLastPrimaryKey(\"Rodent\",\"Devices\",function(eventData){\n\t\t\t\t  \n\t\t\t\tvar lastId = parseInt(eventData.value)+1;\n\t\t\t\tvar dbVal = {};\n\t\t\t\tDeviceData.NewEntry = lastId;\n\t\t\t\tdbVal[lastId] = {\n\t\t\t\t\t\"Id\": lastId,\n\t\t\t\t\t\"DeviceNumber\": DeviceData[\"1\"],\n\t\t\t\t\t\"Sid\":  DeviceData[\"0\"],\n\t\t\t\t\t\"CreatedOn\": new Date().getTime(),\n\t\t\t\t\t\"CreatedBy\": fw.func(\"GETUSER\"),\n\t\t\t\t\t\"DeviceName\": DeviceData.Alias,\n\t\t\t\t\t\"State\": 1,\n\t\t\t\t\t\"Status\": 0,\n\t\t\t\t\t\"CompanyId\": persistence.CompanyId,\n\t\t\t\t\t\"CustomerId\":persistence.CustomerId,\n\t\t\t\t\t\"BranchId\": persistence.BranchId,\n\t\t\t\t\t\"LocationId\":persistence.LocationId,\n\t\t\t\t\t\"SiteId\":persistence.SiteId,\n\t\t\t\t\t\"BarcodeId\":DeviceData[\"1\"],\n\t\t\t\t\t\"Owner\": fw.func(\"GETUSER\"),\n\t\t\t\t\t\"DeviceType\":1,\n\t\t\t\t\t\"PacketType\": \"\",\n\t\t\t\t\t\"DeviceRange\": \"\",\n\t\t\t\t\t\"RebaitRange\":\"\",\n\t\t\t\t\t\"L1\": \"\",\n\t\t\t\t\t\"L2\":\"\",\n\t\t\t\t\t\"PState\":\"\",\n\t\t\t\t\t\"P1Weight\":\"\",\n\t\t\t\t\t\"P2Weight\":\"\",\n\t\t\t\t\t\"BaitEnalbed\":\"0\",\n\t\t\t\t\t\"ModelId\": modelId,\n\t\t\t\t\t\"MotionCounters\": 0\n\t\t\t\t};\n\n\t\t\t\t// Update a record's values, Fails if the record does not exist.\n\t\t\t\tDatabase.saveRecordParam(\"Rodent\", \"Devices\", dbVal, function (data) {\n\t\t\t\t\t \n\t\t\t\t\tfw.func(\"JUMPSCREEN\", \"Provisioning Step 5\");\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t }\n     }); \t\n});"},"ev":{}},"Label#32":{"t":"Label","lX":163,"lY":87,"sX":14.5,"sY":1.6,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"10.56%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"Product"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabel/receive value","event":"receive value","important":"false"}}}}},"Label#33":{"t":"Label","lX":163,"lY":128,"sX":14.5,"sY":1.6,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"15.56%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"New Device Recognised"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabelProduct/receive value","event":"receive value","important":"false"}}}}},"Label#34":{"t":"Label","lX":163,"lY":170,"sX":14.5,"sY":1.6,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"20.56%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"Device ID"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabel/receive value","event":"receive value","important":"false"}}}}},"Label#35":{"t":"Label","lX":163,"lY":211,"sX":14.5,"sY":1.6,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"25.56%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"New Device Recognised"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabelDeviceId/receive value","event":"receive value","important":"false"}}}}},"Label#36":{"t":"Label","lX":163,"lY":252,"sX":14.5,"sY":1.6,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"30.56%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"Name"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabel/receive value","event":"receive value","important":"false"}}}}},"Label#37":{"t":"Label","lX":163,"lY":293,"sX":14.5,"sY":1.6,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"35.56%"},"ver":"200124c190915","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"New Device Recognised"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabelName/receive value","event":"receive value","important":"false"}}}}},"Button#16":{"t":"Button","lX":101,"lY":632,"sX":15.55,"sY":1.31,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"OK","width":"89.21%","height":"7.13%","x":"5.85%","y":"75%"},"ver":"190104c190915","z":"110","dis":false,"tt":"","a":{"outline color":"white","text color":"white","color":"orange strong","button name":"Next"},"ev":{"clientEvents":{"inputEvents":{"setCancelColor":{"channel":"setCancelColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"cancel action":{"channel":"cancel-btn/receive value","event":"pressed","trigger":"pressed","important":"false"},"NextPageSubmit":{"channel":"NextPageSubmit/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Scripting#10":{"t":"Scripting","lX":255,"lY":475,"sX":1,"sY":1,"s":"Provisioning Step 5","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar Caller;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar persistence;\nvar _UpdatePersistance;\nvar DeviceData;\nvar CanSubmit;\nScript.on('load', function() {\n    \n    persistence = \tScript.getState(\"rodent-persistance\");\n    Script.setState(\"Caller\", \"Provisioning Step 4\");\n    \n    _initializer = Script.getState(\"Initializer\");\n    _handleGeneric = Script.getState(\"HandleGeneric\");\n    _publishCommand = Script.getState(\"PublishCommand\");\n    _gotoPage = Script.getState(\"GotoPage\");\n    _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\n    var seleceted = Script.getState(\"SelectedName\");\n    var cardTemplate =  Script.inheritScript(\"MenuTemplateRodent\");\n    _initializer(cardTemplate, \"SetHtml\");\n\n    var topMenuTemplate = Script.inheritScript(\"Menu\");\n    _initializer(topMenuTemplate, \"setTopHtml\");\n    var command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n      \n    command = \n    {\n        \"Action\":\"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n   \n    command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddReport\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\t command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddAdvisory\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n\t{\n\t\t\"Action\":\"setVisible\",\n\t\t\"Compoent\":\"MaintnanceModeRow\",\n\t\t\"Value\": \"none\",\n \t};\n\t_publishCommand(command, \"SetTopAction\");\t\n \n \n    ClientEvents.publish(\"start\",\"\",false);\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n\t  \n\tDeviceData = Script.getState(\"DeviceExists\");\n\tClientEvents.publish(\"setLabelProduct\",DeviceData[\"4\"],false);\n    ClientEvents.publish(\"setLabelDeviceId\",DeviceData[\"1\"],false);\n\tClientEvents.publish(\"setLabelName\",DeviceData.Alias,false);\t\n\tClientEvents.publish(\"set-tick\",\"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Green_tick.svg/1200px-Green_tick.svg.png\",false);\t\n\n\t\n});\n \nClientEvents.subscribe(\"GenericActionMessage\", function(data) \n{ \n    _handleGeneric(data);\n});\n\nClientEvents.subscribe(\"NextPageSubmit\", function(data) \n{  \n\t \n\tClientEvents.publish(\"detection-end\", \"\");\n\tpersistence.LastScreen = \"Device Level\";\n\tScript.setState(\"SelectedCustomer\", persistence.CustomerId);\n\tScript.setState(\"SelectedArea\",persistence.SiteId);\n \tScript.setState(\"selectedSite\", persistence.LocationId);\n\tScript.setState(\"getSite\", persistence.SiteId);\n\tScript.setState(\"rodent-persistance\",persistence,true);\n \tScript.setState(\"barcodeId\",DeviceData[\"NewEntry\"].toString(),true);\n\n\t_UpdatePersistance(persistence);\n \n\n\tfw.func(\"JUMPSCREEN\", \"Device Level\");\n \n});"},"ev":{}},"Scripting#11":{"t":"Scripting","lX":295,"lY":270,"sX":1,"sY":1,"s":"UnallocatedList","ps":{"enabled":"false","scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200124c190915","dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nvar Caller;\nvar _initializer;\nvar _handleGeneric;\nvar _publishCommand;\nvar _gotoPage;\nvar persistence;\nvar _UpdatePersistance;\nvar DeviceData;\nvar CanSubmit;\nScript.on('load', function() {\n    \n    persistence = \tScript.getState(\"rodent-persistance\");\n    Script.setState(\"Caller\", \"Provisioning Step 2\");\n    \n    _initializer = Script.getState(\"Initializer\");\n    _handleGeneric = Script.getState(\"HandleGeneric\");\n    _publishCommand = Script.getState(\"PublishCommand\");\n    _gotoPage = Script.getState(\"GotoPage\");\n    _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\n    var seleceted = Script.getState(\"SelectedName\");\n    var cardTemplate =  Script.inheritScript(\"MenuTemplateRodent\");\n    _initializer(cardTemplate, \"SetHtml\");\n\n    var topMenuTemplate = Script.inheritScript(\"Menu\");\n    _initializer(topMenuTemplate, \"setTopHtml\");\n    var command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"RightPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n    {\n        \"Action\":\"Hide\",\n        \"Compoent\":\"LeftPanel\",\n        \"Value\": true\n    };\n    _publishCommand(command, \"activateGeneric\");\n      \n    command = \n    {\n        \"Action\":\"HideIndex\"\n    };\n    _publishCommand(command, \"activateGeneric\");\n   \n    command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddReport\",\n        \"Value\": \"\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n\t command = \n    {\n        \"Action\":\"setVisible\",\n        \"Compoent\":\"AddAdvisory\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"activateGeneric\");\n    command = \n\t{\n\t\t\"Action\":\"setVisible\",\n\t\t\"Compoent\":\"MaintnanceModeRow\",\n\t\t\"Value\": \"none\",\n \t};\n\t_publishCommand(command, \"SetTopAction\");\t\n \n \n    ClientEvents.publish(\"start\",\"\",false);\n\n    ClientEvents.publish(\"setCancelColor\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setCancelColor\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n \n\t  var compoundQeury = [\n    {\n        \"TableName\" : \"Branches\", // Specify the primary table used to construct the join request\n        \"Join\" :2, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n        \"Columns\" :\n        [\n        \"Id\",\n        \"Name\", \n        \"Address\"\n        ], // Specify the list of columns to take from the reference table.\n        \"JoinOn\": [\"Devices\"],\n        \"JoinTable\":\"Devices\",\n        \"CompoundTables\" : // List of tables that you want joined over the reference table (Takes in a List<CompoundTable> etc the current structure for a lever of inheritence.\n        [\n          {\n                         \"Columns\": [\"count(*)\"],\n                         \"TableName\": \"Devices\",\n                         \"CustomName\": \"Danger\",\n                         \"JoinTable\": \"Devices\",\n                         \"Filters\": [\n                             {\n                                 \"Column\": \"BranchId\",\n                                 \"ParamName\": \"Parent1\",\n                                 \"Value\": \"Branches.Id\",\n                                 \"IsParentRelated\": true\n                             },\n \n                             {\n                                 \"Column\": \"State\",\n                                 \"ParamName\": \"State1\",\n                                 \"Value\": 3,\n                                 \"IsParentRelated\": false\n                             },\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t\"Column\" : \"SiteId\", \n\t\t\t\t\t\t\t\t\"ParamName\" : \"SiteId11\",  \n\t\t\t\t\t\t\t\t\"Value\": null,\n\t\t\t\t\t\t\t\t\"IsParentRelated\": false,\n\t\t\t\t\t\t\t\t\"IsNull\": true,\n\n\t\t\t\t\t\t\t}\n                         ]\n                     },\n                     {\n                         \"Columns\": [\"count(*)\"],\n                         \"TableName\": \"Devices\",\n                         \"CustomName\": \"Attention\",\n                         \"JoinTable\": \"Devices\",\n                         \"Filters\": [\n\t\t\t\t\t\t\t {\n                                 \"Column\": \"BranchId\",\n                                 \"ParamName\": \"Parent2\",\n                                 \"Value\": \"Branches.Id\",\n                                 \"IsParentRelated\": true\n                             },\n                             {\n                                 \"Column\": \"State\",\n                                 \"ParamName\": \"State2\",\n                                 \"Value\": 4,\n                                 \"IsParentRelated\": false\n                             },\n\t\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t\t\"Column\" : \"SiteId\", \n\t\t\t\t\t\t\t\t\"ParamName\" : \"SiteId12\",  \n\t\t\t\t\t\t\t\t\"Value\": null,\n\t\t\t\t\t\t\t\t\"IsParentRelated\": false,\n\t\t\t\t\t\t\t\t\"IsNull\": true,\n\n\t\t\t\t\t\t\t}\n                         ]\n                     },\n                     {\n                         \"Columns\": [\"count(*)\"],\n                         \"TableName\": \"Devices\",\n                         \"CustomName\": \"NoAction\",\n                         \"JoinTable\": \"Devices\",\n                         \"Filters\": [\n\t\t\t\t\t\t   {\n                                 \"Column\": \"BranchId\",\n                                 \"ParamName\": \"Parent3\",\n                                 \"Value\": \"Branches.Id\",\n                                 \"IsParentRelated\": true\n                             },\n                             {\n                                 \"Column\": \"State\",\n                                 \"ParamName\": \"State3\",\n                                 \"Value\": 2,\n                                 \"IsParentRelated\": false\n                             },\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t\"Column\" : \"SiteId\", \n\t\t\t\t\t\t\t\t\"ParamName\" : \"SiteId13\",  \n\t\t\t\t\t\t\t\t\"Value\": null,\n\t\t\t\t\t\t\t\t\"IsParentRelated\": false,\n\t\t\t\t\t\t\t\t\"IsNull\": true,\n\n\t\t\t\t\t\t\t}\n                         ]\n                     },\n        ],  \n        \"CustomColumnNames\":\n        [\n            {\n                \"Index\":1,\n                \"BindingName\": \"CardName\"\n            },\n            {\n                \"Index\":2,\n                \"BindingName\": \"CardAddress\"\n            },\n            \n        ],\n        \"Filters\" :\n        [\n            {\n                \"Column\" : \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                \"ParamName\" : \"SiteIdPk\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                \"Value\": persistence.BranchId // Value that you want to pass for comparison (any object)\n            }\n\t\t\t \n        ] // Filter options in case they are needed.\n    }];\n    \n    Database.readSubQuery(\"rodent\",\"Areas\",compoundQeury, function(packet)\t\t\t\t\t \n    {\t\n        \n       // persistence.LastScreen = \"Site Report List\";\n        //_UpdatePersistance(persistence);\n        ClientEvents.publish(\"clearLanding\",  \"\",false);\n        \n        var cardTemplate =  Script.getScriptElement(\"BranchHolder\");\n        ClientEvents.publish(\"setHeaderTemplate\", cardTemplate, false);\t\n        ClientEvents.publish(\"SetSource\", packet, false);\t\n        ClientEvents.publish(\"toggleCard\", selectedSite, false);\n        //ClientEvents.publish(\"view-pointer-changed\",2,false);\n    }); \n    \n});\n \nClientEvents.subscribe(\"GenericActionMessage\", function(data) \n{ \n    _handleGeneric(data);\n});"},"ev":{}},"Generic#39":{"t":"Generic","lX":0,"lY":500,"sX":17.43,"sY":4.21,"s":"UnallocatedList","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"50%","x":"0px","y":"500px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"Generic#40":{"t":"Generic","lX":15,"lY":15,"sX":17.43,"sY":0.75,"s":"UnallocatedList","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"75px","x":"0px","y":"0px"},"ver":"190104c190915","z":"120","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setTopHtml":{"channel":"setTopHtml/set html","event":"set html","important":"false"},"SetTopAction":{"channel":"SetTopAction/set action","event":"set action","important":"false"}}}}},"GenericCard#0":{"t":"GenericCard","lX":0,"lY":75,"sX":17.43,"sY":7,"s":"UnallocatedList","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"83.14%","x":"0px","y":"75px"},"ver":"190104c190915","z":"110","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"SetSource":{"channel":"SetSource/receive headers","event":"receive headers","important":"false"},"setChildrenTemplate":{"channel":"setChildrenTemplate/set value template","event":"set value template","important":"false"},"setHeaderTemplate":{"channel":"setHeaderTemplate/set header template","event":"set header template","important":"false"},"clearLanding":{"channel":"clearLanding/clear content","event":"clear content","important":"false"},"setAreas":{"channel":"setAreas/receive value","event":"receive value","important":"false"},"toggleCard":{"channel":"toggleCard/toggle card","event":"toggle card","important":"false"},"view pointer changed":{"channel":"view-pointer-changed/change view pointer","event":"change view pointer","important":"false"}}}}},"BranchHolder":{"t":"Scripting","lX":465,"lY":265,"sX":1,"sY":1,"s":"UnallocatedList","ps":{"enabled":"false","scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200124c190915","dis":false,"tt":"","a":{"script type":"html","code editor":"<div id=\"cardTemplate\" style=\"display:none\">\n\t<div>\n\t\t<!--Start of Parent Card-->\n\t\t<div class=\"normalCardBorder\" onclick=\"genericHeaderClicked(this)\" style=\"font-family: sans-serif; background-color: #f2f2f2;border-bottom: 3px solid white; padding: 8px; overflow:auto; overflow-x:hidden\">\n\t\t\t<div data-section=\"cell\">\n\n\t\t\t\t\t<div class=\"container flex\" style=\"margin: 8px 8px 4px 0;width:99.5%;\" >\n\t\t\t\t\t\t<div class=\"flex\"  style=\"border-right: 0.98px solid #9b9b9bff;  width:100%;\">\n\t\t\t\t\t\t\t<div class=\"iconWidth\">\n\t\t\t\t\t\t\t  \t <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"43\" width=\"43\">\n\t\t\t\t\t\t\t\t\t<g style=\"fill:#d74423;fill-opacity:1\" transform=\"matrix(0.39670883,0,0,-0.35820296,-163.19829,457.34499)\" id=\"g18592-3-4\">\n\t\t\t\t\t\t\t\t\t   <path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#41505a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3.28444;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" d=\"m 422.01831,1230.034 -2.7745,0.01 h -6.77539 v 46.6876 h 34.66406 v -18.7899 l 0.0117,-2.4418 -3.30047,2.1251 -0.0296,0.3167 v 15.5389 h -28.02734 v -39.7576 l 3.4746,-0.01 2.72883,0.01 c 0,-1.2216 0.0281,-1.332 0.0281,-3.6862 z\" id=\"path18578-0-7\"></path>\n\t\t\t\t\t\t\t\t\t   <path style=\"fill:#000000;fill-opacity:0;stroke:#41505a;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" d=\"m 445.0059,1251.8235 8.49957,-5.6176 0.20237,-15.2629 H 426.5017 l -0.0127,15.8989 13.96358,7.8434 z\" id=\"path18580-0-48\"></path>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18582-5-4\" width=\"4.6674132\" height=\"4.8891621\" x=\"-435.84637\" y=\"1237.4868\" transform=\"scale(-1,1)\"></rect>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18584-0-2\" width=\"4.6674132\" height=\"4.8891621\" x=\"-448.59576\" y=\"1237.4868\" transform=\"scale(-1,1)\"></rect>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18586-3-79\" width=\"21.868916\" height=\"5.0475268\" x=\"-440.74075\" y=\"1265.5631\" transform=\"scale(-1,1)\"></rect>\n\t\t\t\t\t\t\t\t\t   <rect style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" id=\"rect18588-6-6\" width=\"21.868916\" height=\"5.0475268\" x=\"-440.74075\" y=\"1258.3362\" transform=\"scale(-1,1)\"></rect>\n\t\t\t\t\t\t\t\t\t   <path style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#2c5aa0;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\" d=\"m 418.87296,1251.0608 v 4.9964 h 15.96391 l -8.73278,-4.9964 z\" id=\"path18590-6-1\"></path>\n\t\t\t\t\t\t\t\t\t</g>    \n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t\t\t\t<div class=\"vertical-center setupContent\" >\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div class=\"capitalize\" data-value=\"CardName\" style=\"font-weight:bold;width:100%;\" >\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div data-value=\"CardAddress\" class=\"CardAddress\" >\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex\" tyle=\"float: right;width:100%;\">\n\n\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 5px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Urgent\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status1Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 10px; margin-right:10px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Important\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status2Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;margin-right: 12px;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Minor\">\n\t\t\t\t\t\t\t\t\t  --\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status3Pos\" class=\"underlineIndicatorCenter\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t</div>\n\n\t\t<!--End of Parent Card-->\n\n\n\t\t<div data-selector=\"Children\" style=\"display:none;\">\n\n\t\t</div>\n\n\t</div>\n</div>"},"ev":{}},"Label#28":{"t":"Label","lX":163,"lY":87,"sX":12.5,"sY":1.6,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"10.56%"},"ver":"200124c190915","z":"110","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"Product"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabel/receive value","event":"receive value","important":"false"}}}}},"Label#29":{"t":"Label","lX":163,"lY":128,"sX":12.5,"sY":1.6,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"15.56%"},"ver":"200124c190915","z":"110","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"New Device Recognised"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabelProduct/receive value","event":"receive value","important":"false"}}}}},"Label#30":{"t":"Label","lX":163,"lY":170,"sX":12.5,"sY":1.6,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"20.56%"},"ver":"200124c190915","z":"110","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"Device ID"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabel/receive value","event":"receive value","important":"false"}}}}},"Label#31":{"t":"Label","lX":163,"lY":211,"sX":12.5,"sY":1.6,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"25.56%"},"ver":"200124c190915","z":"110","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"New Device Recognised"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabelDeviceId/receive value","event":"receive value","important":"false"}}}}},"Label#38":{"t":"Label","lX":163,"lY":252,"sX":12.5,"sY":1.6,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"30.56%"},"ver":"200124c190915","z":"110","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"Name"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabel/receive value","event":"receive value","important":"false"}}}}},"Label#39":{"t":"Label","lX":163,"lY":293,"sX":12.5,"sY":1.6,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"83.19%","height":"40px","x":"9.47%","y":"35.56%"},"ver":"200124c190915","z":"110","dis":false,"tt":"","a":{"font size":"20","text align":"center","label text":"New Device Recognised"},"ev":{"clientEvents":{"inputEvents":{"setLabel":{"channel":"setLabelName/receive value","event":"receive value","important":"false"}}}}},"Image#2":{"t":"Image","lX":743,"lY":372,"sX":2.55,"sY":2.2,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"","width":"14.63%","height":"26.13%","x":"43.03%","y":"45.13%"},"ver":"202605c190915","dis":false,"tt":"","a":{"border width":"0","opacity":"1","image":""},"ev":{"clientEvents":{"inputEvents":{"set-tick":{"channel":"set-tick/set image","event":"set image","important":"false"}}}}},"Button#17":{"t":"Button","lX":86,"lY":818,"sX":21.45,"sY":0.87,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"90%","height":"40px","x":"5%","y":"818px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"color":"orange strong","outline color":"white","text color":"white","button name":"PHOTO"},"ev":{"clientEvents":{"inputEvents":{"setbtn1Color":{"channel":"setbtn1Color/set style property","event":"set style property","important":"false"}},"outputEvents":{"TakePhoto":{"channel":"TakePhoto/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Input#14":{"t":"Input","lX":42,"lY":300,"sX":12,"sY":1,"s":"Branch Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"4.38%","x":"3.84%","y":"300px"},"ver":"270520c210519","dis":false,"tt":"","a":{"type":"address","label text":"Address","color":"white","use full address":"true","api key":"AIzaSyDPZqlIT0Mx7pQDSBqQto-5mYB4PSBlT0U"},"ev":{"clientEvents":{"inputEvents":{"Address-value":{"channel":"Address-value/receive value","event":"receive value","important":"false"},"set-country":{"channel":"set-country/set country","event":"set country","important":"false"}},"outputEvents":{"Address-changed":{"channel":"Address-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#15":{"t":"Input","lX":67,"lY":260,"sX":12,"sY":1,"s":"Customer Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"6.29%","x":"3.84%","y":"260px"},"ver":"270520c210519","z":"130","dis":false,"tt":"","a":{"type":"address","label text":"Address","color":"white","api key":"AIzaSyDPZqlIT0Mx7pQDSBqQto-5mYB4PSBlT0U","form id":"details","form key":"address","use full address":"true"},"ev":{"clientEvents":{"inputEvents":{"Address-value":{"channel":"Address-value/receive value","event":"receive value","important":"false"},"setCountry":{"channel":"setCountry/set country","event":"set country","important":"false"}},"outputEvents":{"Address-changed":{"channel":"Address-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#16":{"t":"Input","lX":66,"lY":270,"sX":12,"sY":1,"s":"Site Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"6.29%","x":"3.84%","y":"270px"},"ver":"270520c210519","dis":false,"tt":"","a":{"type":"address","label text":"Address","color":"white","api key":"AIzaSyDPZqlIT0Mx7pQDSBqQto-5mYB4PSBlT0U","use full address":"true","tab index":"3"},"ev":{"clientEvents":{"inputEvents":{"Address-value":{"channel":"Address-value/receive value","event":"receive value","important":"false"},"setCountry":{"channel":"setCountry/set country","event":"set country","important":"false"}},"outputEvents":{"Address-changed":{"channel":"Address-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Input#17":{"t":"Input","lX":67,"lY":280,"sX":12,"sY":1,"s":"Location Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"6.29%","x":"3.84%","y":"280px"},"ver":"270520c210519","dis":false,"tt":"","a":{"label text":"Description","color":"white","api key":"AIzaSyDPZqlIT0Mx7pQDSBqQto-5mYB4PSBlT0U"},"ev":{"clientEvents":{"inputEvents":{"Address-value":{"channel":"Address-value/receive value","event":"receive value","important":"false"}},"outputEvents":{"Address-changed":{"channel":"Address-changed/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"Dropdown#6":{"t":"Dropdown","lX":67,"lY":330,"sX":12,"sY":1,"s":"Customer Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"5.94%","x":"3.84%","y":"330px"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{"default value":"A","default options":"A,B,C","label text":"Classification","color":"white","tab index":"3"},"ev":{"clientEvents":{"inputEvents":{"set classification":{"channel":"set-classification/receive value","event":"receive value","important":"false"}},"outputEvents":{"classification selected":{"channel":"classification-selected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"countryDropdown":{"t":"Dropdown","lX":64,"lY":181,"sX":12,"sY":1,"s":"Customer Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"5.94%","x":"3.67%","y":"181px"},"ver":"190104c190915","dis":false,"tt":"","a":{"default options":"","label text":"Country","color":"white","tab index":"3","disable edit":"false"},"ev":{"clientEvents":{"inputEvents":{"set-country":{"channel":"set-country/receive value","event":"receive value","important":"false"}},"outputEvents":{"country-selected":{"channel":"country-selected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"countryDropdown1":{"t":"Dropdown","lX":63,"lY":190,"sX":12,"sY":1,"s":"Site Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"5.94%","x":"3.67%","y":"190px"},"ver":"190104c190915","dis":false,"tt":"","a":{"default options":"","label text":"Country","color":"white","tab index":"2","disable edit":"false"},"ev":{"clientEvents":{"inputEvents":{"set-country":{"channel":"set-country/receive value","event":"receive value","important":"false"}},"outputEvents":{"country-selected":{"channel":"country-selected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"MapBuilder#0":{"t":"MapBuilder","lX":0,"lY":0,"sX":12.63,"sY":7.26,"s":"Floor Map","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"100%","x":"NaN%","y":"0%"},"ver":"190104c210519","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"set mode":{"channel":"setmode/set mode","event":"set mode","important":"false"},"load menu icons":{"channel":"load-menu-icons/set icons","event":"set icons","important":"false"},"focus category":{"channel":"focus-category/toggle navigation","event":"toggle navigation","important":"false"},"set-map-image":{"channel":"set-map-image/set image","event":"set image","important":"false"}}}}},"Scripting#12":{"t":"Scripting","lX":375,"lY":320,"sX":1,"sY":1,"s":"Floor Map","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c210519","dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nScript.on('load', function() {\n var items = [\"smart.html\"];\n\tdebugger\n ClientEvents.publish(\"load-menu-icons\", {type: 1, source: [\"smart.html\"]}, false);\t\n\t ClientEvents.publish(\"focus-category\", 1, false);\t\n \t\n\t ClientEvents.publish(\"set-map-image\", {src: \"http://localhost/images/floormap.PNG\", value: \"http://localhost/images/floormap.PNG\"}, false);\t\n\n\n});"},"ev":{}},"Button#18":{"t":"Button","lX":1110,"lY":785,"sX":1,"sY":1,"s":"Floor Map","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"5.46%","x":"63.68%","y":"93.23%"},"ver":"190104c210519","dis":false,"tt":"","a":{"button name":"Preview","value on":"true"},"ev":{"clientEvents":{"outputEvents":{"set mode":{"channel":"setmode/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#19":{"t":"Button","lX":1225,"lY":785,"sX":1,"sY":1,"s":"Floor Map","ps":{"enabled":"false","scalingType":"OK","width":"5.74%","height":"5.46%","x":"70.28%","y":"93.23%"},"ver":"190104c210519","dis":false,"tt":"","a":{"value on":"false","button name":"Edit"},"ev":{"clientEvents":{"outputEvents":{"set mode":{"channel":"setmode/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"btnDelete":{"t":"Button","lX":86,"lY":1074,"sX":21.45,"sY":0.87,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"90%","height":"40px","x":"5%","y":"1329px"},"ver":"190104c190915","dis":false,"tt":"","a":{"color":"orange strong","outline color":"white","text color":"white","button name":"DELETE"},"ev":{"clientEvents":{"inputEvents":{"setDeleteColor":{"channel":"setDeleteColor/set style property","event":"set style property","important":"false"}},"outputEvents":{"DeleteAdvisory":{"channel":"DeleteAdvisory/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"countryDropdownBranch":{"t":"Dropdown","lX":40,"lY":200,"sX":12,"sY":1,"s":"Branch Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"95%","height":"4.13%","x":"3.67%","y":"200px"},"ver":"190104c190915","dis":false,"tt":"","a":{"default options":"","label text":"Country","color":"white","tab index":"3","disable edit":"false"},"ev":{"clientEvents":{"inputEvents":{"set-country":{"channel":"set-country/receive value","event":"receive value","important":"false"}},"outputEvents":{"country-selected":{"channel":"country-selected/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"Generic#35":{"t":"Generic","lX":0,"lY":84,"sX":15.03,"sY":7.87,"s":"Provisioning Step 2","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"89.79%","x":"0px","y":"10%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"Generic#36":{"t":"Generic","lX":0,"lY":84,"sX":15.03,"sY":7.87,"s":"Provisioning Step 3","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"89.79%","x":"0px","y":"10%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"Generic#37":{"t":"Generic","lX":0,"lY":84,"sX":15.03,"sY":7.89,"s":"Provisioning Step 4","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"90.02%","x":"0px","y":"10%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"Generic#38":{"t":"Generic","lX":0,"lY":743,"sX":17.43,"sY":7.57,"s":"Provisioning Step 5","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"89.9%","x":"0px","y":"10%"},"ver":"190104c190915","z":"100","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"reasonForm":{"t":"Dropdown","lX":86,"lY":107,"sX":21.45,"sY":1,"s":"Site Report Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"90%","height":"5.94%","x":"5%","y":"13%"},"ver":"190104c190915","dis":false,"tt":"","a":{"default options":"","label text":"Reason for Visit","color":"white","disable edit":"false","form id":"reasonForm","form key":"reasonForm"},"ev":{"clientEvents":{"inputEvents":{"visit reason":{"channel":"visit-reason/receive value","event":"receive value","important":"false"}},"outputEvents":{"reason changed":{"channel":"reason-changed/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"branchDeleteButton":{"t":"Button","lX":42,"lY":400,"sX":12,"sY":1.09,"s":"Branch Form","ps":{"enabled":"true","scalingType":"OK","width":"95%","height":"50px","x":"3.84%","y":"400px"},"ver":"190104c210519","dis":false,"tt":"","a":{"color":"orange strong","button name":"Deactivate Branch"},"ev":{"clientEvents":{"inputEvents":{"set text":{"channel":"branchActiveSetText/set text","event":"set text","important":"false"},"set style":{"channel":"branchDeleteSetStyle/set style property","event":"set style property","important":"false"}},"outputEvents":{"pressed":{"channel":"branchDeletePressed/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#1":{"t":"Button","lX":42,"lY":610,"sX":12,"sY":0.87,"s":"Customer Form","ps":{"enabled":"true","scalingType":"OK","width":"95%","height":"40px","x":"3.84%","y":"610px"},"ver":"190104c210519","dis":false,"tt":"","a":{"button name":"Deactivate Customer","color":"orange strong"},"ev":{"clientEvents":{"inputEvents":{"setInactiveCustomerStyle":{"channel":"setInactiveCustomerStyle/set style property","event":"set style property","important":"false"},"set text":{"channel":"setActiveCustomerText/set text","event":"set text","important":"false"}},"outputEvents":{"inactivateCustomer":{"channel":"inactivateCustomer/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#20":{"t":"Button","lX":42,"lY":790,"sX":12,"sY":0.87,"s":"Site Form","ps":{"enabled":"true","scalingType":"OK","width":"95%","height":"40px","x":"3.84%","y":"790px"},"ver":"190104c210519","dis":false,"tt":"","a":{"button name":"Deactivate Site","color":"orange strong"},"ev":{"clientEvents":{"inputEvents":{"setSiteActiveText":{"channel":"setSiteActiveText/set text","event":"set text","important":"false"},"setSiteActivateStyle":{"channel":"setSiteActivateStyle/set style property","event":"set style property","important":"false"}},"outputEvents":{"siteActivePressed":{"channel":"siteActivePressed/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Button#21":{"t":"Button","lX":42,"lY":765,"sX":11.38,"sY":0.87,"s":"Location Form","ps":{"enabled":"true","scalingType":"OK","width":"90.07%","height":"40px","x":"3.84%","y":"766px"},"ver":"190104c210519","dis":false,"tt":"","a":{"color":"orange strong","button name":"Deactivate Location"},"ev":{"clientEvents":{"inputEvents":{"locationActiveSetStyle":{"channel":"locationActiveSetStyle/set style property","event":"set style property","important":"false"},"locationActiveSetText":{"channel":"locationActiveSetText/set text","event":"set text","important":"false"}},"outputEvents":{"locationActivePressed":{"channel":"locationActivePressed/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"Dropdown#0":{"t":"Dropdown","lX":85,"lY":985,"sX":21.45,"sY":1,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"NOVERT","width":"90%","height":"5.73%","x":"5%","y":"1073px"},"ver":"190104c190915","z":"130","dis":false,"tt":"","a":{"default value":"Customer","default options":"Customer,Company","label text":"Assigned To","color":"white","tab index":"4"},"ev":{"clientEvents":{"inputEvents":{"select assignee":{"channel":"selectAssignee/receive value","event":"receive value","important":"false"}},"outputEvents":{"assignee changed":{"channel":"AssigneeChanged/receive value","event":"selected","trigger":"selected","important":"false"}}}}},"Text Area#0":{"t":"Text Area","lX":38,"lY":1130,"sX":21.45,"sY":1.2,"s":"Recommendation Form","ps":{"enabled":"true","scalingType":"OK","width":"90%","height":"120px","x":"5%","y":"1131px"},"ver":"190104c190915","dis":false,"tt":"","a":{"label text":"Resolution Notes","color":"white","tab index":"3"},"ev":{"clientEvents":{"inputEvents":{"SetResolution":{"channel":"SetResolution/receive value","event":"receive value","important":"false"}},"outputEvents":{"ResolutionChanged":{"channel":"ResolutionChanged/receive value","event":"on change","trigger":"on change","important":"false"}}}}},"ReportsTemplateDevice":{"t":"Scripting","lX":665,"lY":285,"sX":1,"sY":1,"s":"Recommendation List","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div id=\"cardTemplate\" style=\"display:none\">\n\t<div>\n\t\t<!--Start of Parent Card-->\n\t\t<div class=\"normalCardBorder\" onclick=\"genericHeaderClicked(this)\" style=\"font-family: sans-serif; background-color: #f2f2f2;border-bottom: 3px solid white; padding: 8px; overflow:auto; overflow-x:hidden\">\n\t\t\t<div data-section=\"cell\">\n\n\t\t\t\t\t<div class=\"container flex\" style=\"margin: 8px 8px 4px 0;width:99.5%;\" >\n\t\t\t\t\t\t<div class=\"flex\"  style=\"border-right: 0.98px solid #9b9b9bff;  width:100%;\">\n\t\t\t\t\t\t\t<div class=\"iconWidth\">\n\t\t\t\t\t\t\t <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"43\" width=\"43\">\n\t\t\t\t\t\t\t\t\t<g id=\"g8856\" transform=\"matrix(1.0393596,0,0,1.0918312,-144.64395,-96.576359)\">\n\t\t\t\t\t\t\t\t\t\t<g id=\"g8880\">\n\t\t\t\t\t\t\t\t\t\t\t<path id=\"path18578-0-7-9-4\" d=\"m 151.37301,104.03303 -8.46777,-0.006 -1.0003,-0.009 h -2.68785 V 88.523917 h 13.75153 v 6.730598 l 0.005,-2.01108 -1.30933,0.01668 -0.0117,1.994402 v -5.56608 H 140.5335 V 102.8535 h 1.37841 l 1.00727,0.009 7.73503,0.006 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#41505a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.23812;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\"></path>\n\t\t\t\t\t\t\t\t\t\t\t<rect transform=\"scale(-1)\" y=\"-92.548515\" x=\"-150.43297\" height=\"1.8080391\" width=\"8.6755915\" id=\"rect18586-3-79-9-9\" style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></rect>\n\t\t\t\t\t\t\t\t\t\t\t<path style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 148.8019,95.137243 h -7.04451 v -1.808039 h 8.67558 c -0.70958,0.529282 -1.38201,1.074999 -1.63107,1.808039 z\" id=\"rect18588-6-6-2-1\"></path>\n\t\t\t\t\t\t\t\t\t\t\t<path id=\"path18590-6-1-8-7\" d=\"m 141.75782,97.743303 v -1.789747 l 6.75536,-0.0092 c -0.11624,0.430866 -0.29459,0.730966 -0.28386,1.817226 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#2c5aa0;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\"></path>\n\t\t\t\t\t\t\t\t\t\t\t<g id=\"g8846\" transform=\"matrix(0.68359534,0,0,0.68359534,43.301134,37.305868)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<path id=\"path7975-0-8-4-00\" d=\"m 163.24978,87.851079 a 3.5554496,3.5554496 0 0 1 -3.55545,3.555449 3.5554496,3.5554496 0 0 1 -3.55545,-3.555449 3.5554496,3.5554496 0 0 1 3.55545,-3.555449 3.5554496,3.5554496 0 0 1 3.55545,3.555449 z\" style=\"opacity:1;fill:none;fill-opacity:1;stroke:#41505a;stroke-width:1.77158;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></path>\n\t\t\t\t\t\t\t\t\t\t\t\t<path id=\"path8088-3-7-2\" d=\"m 155.57309,89.531337 4.09342,7.671637 c 1.38143,-2.559632 3.23012,-5.812085 4.14428,-7.678892 -2.4549,3.121173 -5.10937,3.839063 -8.2377,0.0073 z\" style=\"fill:#41505a;fill-opacity:1;stroke:none;stroke-width:0.529167;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"></path>\n\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t\t\t\t<div class=\"vertical-center setupContent\" >\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div class=\"capitalize\" data-value=\"CardName\" style=\"font-weight:bold;width:100%;\" >\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div data-value=\"CardAddress\" class=\"CardAddress\" >\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex\" tyle=\"float: right;width:100%;\">\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 5px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Urgent\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status1Pos\" class=\"underlineIndicatorRight\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 10px; margin-right:10px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Important\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status2Pos\" class=\"underlineIndicatorRight\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;margin-right: 12px;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Minor\">\n\t\t\t\t\t\t\t\t\t  --\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status3Pos\" class=\"underlineIndicatorRight\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t</div>\n\n\t\t<!--End of Parent Card-->\n\n\n\t\t<div data-selector=\"Children\" style=\"display:none;\">\n\n\t\t</div>\n\n\t</div>\n</div>"},"ev":{}},"ReportsTemplateSite":{"t":"Scripting","lX":560,"lY":425,"sX":1,"sY":1,"s":"Recommendation List","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","z":"140","vis":false,"dis":false,"tt":"","a":{"script type":"html","code editor":"<div id=\"cardTemplate\" style=\"display:none\">\n\t<div>\n\t\t<!--Start of Parent Card-->\n\t\t<div class=\"normalCardBorder\" onclick=\"genericHeaderClicked(this)\" style=\"font-family: sans-serif; background-color: #f2f2f2;border-bottom: 3px solid white; padding: 8px; overflow:auto; overflow-x:hidden\">\n\t\t\t<div data-section=\"cell\">\n\n\t\t\t\t\t<div class=\"container flex\" style=\"margin: 8px 8px 4px 0;width:99.5%;\" >\n\t\t\t\t\t\t<div class=\"flex\"  style=\"border-right: 0.98px solid #9b9b9bff;  width:100%;\">\n\t\t\t\t\t\t\t<div class=\"iconWidth\">\n\t\t\t\t\t\t\t <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" id=\"svg29831\" version=\"1.1\" viewBox=\"0 0 16.933333 16.933333\" height=\"43\" width=\"43\">\n\t\t\t\t\t\t\t\t\t<g id=\"g8856\" transform=\"matrix(1.0393596,0,0,1.0918312,-144.64395,-96.576359)\">\n\t\t\t\t\t\t\t\t\t\t<g id=\"g8880\">\n\t\t\t\t\t\t\t\t\t\t\t<path id=\"path18578-0-7-9-4\" d=\"m 151.37301,104.03303 -8.46777,-0.006 -1.0003,-0.009 h -2.68785 V 88.523917 h 13.75153 v 6.730598 l 0.005,-2.01108 -1.30933,0.01668 -0.0117,1.994402 v -5.56608 H 140.5335 V 102.8535 h 1.37841 l 1.00727,0.009 7.73503,0.006 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#41505a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.23812;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\"></path>\n\t\t\t\t\t\t\t\t\t\t\t<rect transform=\"scale(-1)\" y=\"-92.548515\" x=\"-150.43297\" height=\"1.8080391\" width=\"8.6755915\" id=\"rect18586-3-79-9-9\" style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></rect>\n\t\t\t\t\t\t\t\t\t\t\t<path style=\"opacity:1;fill:#2c5aa0;fill-opacity:1;stroke:#d74423;stroke-width:0;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" d=\"m 148.8019,95.137243 h -7.04451 v -1.808039 h 8.67558 c -0.70958,0.529282 -1.38201,1.074999 -1.63107,1.808039 z\" id=\"rect18588-6-6-2-1\"></path>\n\t\t\t\t\t\t\t\t\t\t\t<path id=\"path18590-6-1-8-7\" d=\"m 141.75782,97.743303 v -1.789747 l 6.75536,-0.0092 c -0.11624,0.430866 -0.29459,0.730966 -0.28386,1.817226 z\" style=\"color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#2c5aa0;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate\"></path>\n\t\t\t\t\t\t\t\t\t\t\t<g id=\"g8846\" transform=\"matrix(0.68359534,0,0,0.68359534,43.301134,37.305868)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<path id=\"path7975-0-8-4-00\" d=\"m 163.24978,87.851079 a 3.5554496,3.5554496 0 0 1 -3.55545,3.555449 3.5554496,3.5554496 0 0 1 -3.55545,-3.555449 3.5554496,3.5554496 0 0 1 3.55545,-3.555449 3.5554496,3.5554496 0 0 1 3.55545,3.555449 z\" style=\"opacity:1;fill:none;fill-opacity:1;stroke:#41505a;stroke-width:1.77158;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"></path>\n\t\t\t\t\t\t\t\t\t\t\t\t<path id=\"path8088-3-7-2\" d=\"m 155.57309,89.531337 4.09342,7.671637 c 1.38143,-2.559632 3.23012,-5.812085 4.14428,-7.678892 -2.4549,3.121173 -5.10937,3.839063 -8.2377,0.0073 z\" style=\"fill:#41505a;fill-opacity:1;stroke:none;stroke-width:0.529167;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"></path>\n\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--<div data-info=\"icon\" class=\"redIcon vertical-center\" style=\"display: inline-block; width: 25px; height: 25px;\"></div>-->\n\t\t\t\t\t\t\t<div class=\"vertical-center setupContent\" >\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div class=\"capitalize\" data-value=\"CardName\" style=\"font-weight:bold;width:100%;\" >\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div data-value=\"CardAddress\" class=\"CardAddress\" >\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex\" tyle=\"float: right;width:100%;\">\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 5px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Urgent\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineRed\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status1Pos\" class=\"underlineIndicatorRight\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl1\" class=\"LabelStyle\" style=\"justify-content:center;\">URGENT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center;margin-left: 10px; margin-right:10px; width:100%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Important\">\n\t\t\t\t\t\t\t\t\t\t--\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineOrange\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status2Pos\" class=\"underlineIndicatorRight\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl2\" class=\"LabelStyle\">IMPORTANT</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"displayContainer\" style=\" text-align: center; width:100%;margin-right: 12px;\">\n\t\t\t\t\t\t\t\t\t<span class=\"ValueStyle\" data-value=\"Minor\">\n\t\t\t\t\t\t\t\t\t  --\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class=\"UnderlineGreen\" style=\"width:100%;\">\n\t\t\t\t\t\t\t\t\t\t<span data-value=\"status3Pos\" class=\"underlineIndicatorRight\" ></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span  data-info=\"lbl3\" class=\"LabelStyle\">MINOR</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t</div>\n\n\t\t<!--End of Parent Card-->\n\n\n\t\t<div data-selector=\"Children\" style=\"display:none;\">\n\n\t\t</div>\n\n\t</div>\n</div>"},"ev":{}},"UserAccessScript":{"t":"Scripting","lX":455,"lY":275,"sX":1,"sY":1,"s":"General User Screen","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c210519","dis":false,"tt":"","a":{"script type":"javascript","code editor":"//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\nScript.on('load', function() {\n\tvar userDetails = Script.getState(\"userDetails\");\n\t//Client.publish(userDetails, \"value\");\n\tClientEvents.publish(\"generalUser\", userDetails);\n});"},"ev":{}},"generalUser":{"t":"Label","lX":0,"lY":395,"sX":2,"sY":2,"s":"General User Screen","ps":{"enabled":"false","scalingType":"OK","width":"15.84%","height":"6.89%","x":"0%","y":"54.68%"},"ver":"200124c210519","dis":false,"tt":"","a":{"font size":"10","text align":"center","label text":"Label text"},"ev":{"clientEvents":{"inputEvents":{"generalUser":{"channel":"generalUser/receive value","event":"receive value","important":"false"}}}}},"HelpViewer#1":{"t":"HelpViewer","lX":20,"lY":75,"sX":5.22,"sY":3.04,"s":"Help Screen","ps":{"enabled":"true","scalingType":"","width":"100%","height":"69.64%","x":"20px","y":"75px"},"ver":"202605c210519","dis":false,"tt":"","a":{"border width":"0","background color":"#ffffff","zoom":"1"},"ev":{"clientEvents":{"inputEvents":{"setHelpFilePath":{"channel":"setHelpFilePath/set helpfile","event":"set helpfile","important":"false"}}}}},"Generic#41":{"t":"Generic","lX":0,"lY":0,"sX":7.83,"sY":0.75,"s":"Help Screen","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"75px","x":"0px","y":"0px"},"ver":"190104c210519","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"SetTopAction":{"channel":"SetTopAction/set action","event":"set action","important":"false"},"setTopHtml":{"channel":"setTopHtml/set html","event":"set html","important":"false"}},"outputEvents":{"EditCard":{"channel":"EditCard/receive value","event":"EditCard","trigger":"EditCard","important":"false"}}}}},"Generic#42":{"t":"Generic","lX":0,"lY":428,"sX":7.83,"sY":4.37,"s":"Help Screen","ps":{"enabled":"true","scalingType":"OK","width":"100%","height":"50%","x":"0px","y":"50%"},"ver":"190104c210519","dis":false,"tt":"","a":{},"ev":{"clientEvents":{"inputEvents":{"setCss":{"channel":"setCss/set css","event":"set css","important":"false"},"SetHtml":{"channel":"SetHtml/set html","event":"set html","important":"false"},"activateGeneric":{"channel":"activateGeneric/set action","event":"set action","important":"false"}}}}},"Button#22":{"t":"Button","lX":40,"lY":685,"sX":7.03,"sY":1.3,"s":"Help Screen","ps":{"enabled":"true","scalingType":"OK","width":"100% - 80px","height":"6.87%","x":"40px","y":"80%"},"ver":"190104c210519","z":"140","dis":false,"tt":"","a":{"button name":"CLOSE"},"ev":{"clientEvents":{"inputEvents":{"setButtonStyle":{"channel":"setButtonStyle/set style property","event":"set style property","important":"false"}},"outputEvents":{"closeButtonPressed":{"channel":"closeButtonPressed/receive value","event":"pressed","trigger":"pressed","important":"false"}}}}},"HelpScreenScript":{"t":"Scripting","lX":810,"lY":50,"sX":1,"sY":1,"s":"Help Screen","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c210519","dis":false,"tt":"","a":{"script type":"javascript","code editor":"//heirarchy controller\n//# sourceURL=dynamic-script.js\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date Date: \n * Version: \n */\n\n/**\n * Initialise script state (run once at startup)\n */\n var activeFilter1;\n var CompanyId;\n \n var _initializer;\n var _handleGeneric;\n var _publishCommand;\n var _gotoPage;\n var _UpdatePersistance;\n var persistence;\n var activeLevel;\n var activeFilter;\n var lastId;\n var parentId;\n var backHidden = true;\n var locationName;\n var description;\n\n// variable storing the help filepath\nvar helpFilePath;\n Script.on('load', function () {\t \n\t try{\n\t\t persistence = Script.getState(\"rodent-persistance\");\n\t\t _initializer = Script.getState(\"Initializer\");\n\t\t _handleGeneric = Script.getState(\"HandleGeneric\");\n\t\t _publishCommand = Script.getState(\"PublishCommand\");\n\t\t _UpdatePersistance = Script.getState(\"UpdatePersistance\");\n\t\t _gotoPage = Script.getState(\"GotoPage\");\n\t\t var seleceted = Script.getState(\"OldState\");\n\t\t var cardTemplate = Script.inheritScript(\"MenuTemplateRodent\");\n\t\t _initializer(cardTemplate, \"SetHtml\");\n\t }\n\t catch(e)\n\t {\n\t\t setTimeout(function(){ \t\n\t\t\t fw.func(\"JUMPSCREEN\", \"Initialisation\");\n\t\t }, 200);\n\n\t }\n\t persistence = Script.getState(\"rodent-persistance\");\n     var topMenuTemplate = Script.inheritScript(\"Menu\");\n     _initializer(topMenuTemplate, \"setTopHtml\");\n     HideAll();\n\t ShowBackButton();\n\t HideBarcodeBtn();\n\t setButtonStyle();\n\t // need to get the file name that was stored in the statestore, and send it to the helpviewer widget\n\t helpFilePath = Script.getState(\"helpFilePath\");\n\t console.log(helpFilePath);\n\t ClientEvents.publish(\"setHelpFilePath\", helpFilePath);\n });\n\nfunction setButtonStyle() {\n\tClientEvents.publish(\"setButtonStyle\",{Property: \"width\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setButtonStyle\",{Property: \"height\",PropertyValue:\"100%\"},false);\n    ClientEvents.publish(\"setButtonStyle\",{Property: \"color\",PropertyValue:\"white\"},false);\n    ClientEvents.publish(\"setButtonStyle\",{Property: \"background-color\",PropertyValue:\"#6ec3f6ff\"},false);\n}\n\nClientEvents.subscribe(\"closeButtonPressed\", function (data) {\n\tconsole.log(\"close button pressed, going back\");\n\tfw.func(\"JUMPSCREEN\", persistence.LastScreen);\n});\n\nClientEvents.subscribe(\"GenericActionMessage\", function (data) {\n    console.log(JSON.stringify(data));\n\t //debugger;\n     if (data === \"GoBack|null\") {\n         fw.func(\"JUMPSCREEN\", persistence.LastScreen);\n\t } else {\n         _handleGeneric(data);\n     }\n });\n  \n //Menu Related options\n function HideAll() {\n     var command =\n     {\n         \"Action\": \"Hide\",\n         \"Compoent\": \"RightPanel\",\n         \"Value\": true\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"Hide\",\n         \"Compoent\": \"LeftPanel\",\n         \"Value\": true\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"siteVisits\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"SetTopAction\");\n \n     command =\n     {\n         \"Action\": \"setVal\",\n         \"Compoent\": \"RightPanel\",\n         \"Value\": \" \",\n         \"Id\": \"PageName\",\n     };\n     _publishCommand(command, \"SetTopAction\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"siteVisits\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"SetTopAction\");\n     command =\n     {\n         \"Action\": \"Change Generic Action\",\n         \"Compoent\": \"status\",\n         \"Value\": \"Status\",\n     };\n     _publishCommand(command, \"SetTopAction\");\n     command =\n     {\n         \"Action\": \"Change Generic Action\",\n         \"Compoent\": \"Advisories\",\n         \"Value\": \"GoTo|Recommendation List\",\n     };\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"Advisories\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"SetTopAction\");\n     command =\n     {\n         \"Action\": \"HideIndex\"\n     };\n     _publishCommand(command, \"activateGeneric\");\n \n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"OpenBtn\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"CloseBtn\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"OpenNavigation\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"BackButton\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"AddAdvisory\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"AddReport\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"MaintnanceModeRow\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"setTopAction\");\n \n }\n \n function ShowBackButton() {\n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"BackButton\",\n         \"Value\": \"\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n }\n \n function ShowAdvisory() {\n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"Advisories\",\n         \"Value\": \"\",\n     };\n     _publishCommand(command, \"setTopAction\");\n }\n\n function HideAdvisory() {\n    var command =\n    {\n        \"Action\": \"setVisible\",\n        \"Compoent\": \"Advisories\",\n        \"Value\": \"none\",\n    };\n    _publishCommand(command, \"setTopAction\");\n}\n \n function ShowOpenBtn() {\n \n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"OpenBtn\",\n         \"Value\": \"\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n }\n \n function ShowMenuBtn() {\n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"OpenNavigation\",\n         \"Value\": \"\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n }\n function ShowSiteReports() {\n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"AddReport\",\n         \"Value\": \"\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"siteVisits\",\n         \"Value\": \"\",\n     };\n     _publishCommand(command, \"SetTopAction\");\n \n }\n \n function HideOpenBtn() {\n \n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"OpenBtn\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n }\n\n function HideBarcodeBtn() {\n \n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"BarcodeBtn\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n }\n \n function HideMenuBtn() {\n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"OpenNavigation\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n }\n \n function HideSiteReports() {\n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"AddReport\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n     command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"siteVisits\",\n         \"Value\": \"none\",\n     };\n     _publishCommand(command, \"SetTopAction\");\n \n }\n function HideBackButton() {\n     var command =\n     {\n         \"Action\": \"setVisible\",\n         \"Compoent\": \"BackButton\",\n         \"Value\": \"None\",\n     };\n     _publishCommand(command, \"activateGeneric\");\n }\n \n // shows certain buttons when at the site level\n function activeSiteControl() {\n     ShowOpenBtn();\n     ShowMenuBtn();\n     ShowSiteReports();\n     ShowAdvisory();\n }\n // hides certain buttons when exiting the site level\n function DeactivateSiteControls() {\n     HideOpenBtn();\n     HideMenuBtn();\n     HideSiteReports();\n     HideAdvisory();\n }\n\n  Date.prototype.addDays = function (days) {\n            var date = new Date(this.valueOf());\n            date.setDate(date.getDate() + days);\n            return date;\n        };"},"ev":{}}},"screens":{"Initialisation":{"index":0,"icon":"widgets","meta":""},"Home":{"index":1,"icon":"widgets","meta":""},"Levels":{"index":2,"icon":"widgets","meta":""},"Device Level":{"index":3,"icon":"widgets","meta":""},"Recommendation List":{"index":4,"icon":"widgets","meta":""},"Recommendation Form":{"index":5,"icon":"class","meta":""},"Site Report List":{"index":6,"icon":"widgets","meta":""},"Site Report Form":{"index":7,"icon":"widgets","meta":""},"Branch Form":{"index":8,"icon":"widgets","meta":""},"Customer Form":{"index":9,"icon":"widgets","meta":""},"Site Form":{"index":10,"icon":"widgets","meta":""},"Location Form":{"index":11,"icon":"widgets","meta":""},"UnallocatedList":{"index":12,"icon":"widgets","meta":""},"Scan Device":{"index":13,"icon":"widgets","meta":""},"Provisioning Step 1":{"index":14,"icon":"widgets","meta":""},"Provisioning Step 2":{"index":15,"icon":"widgets","meta":""},"Provisioning Step 3":{"index":16,"icon":"widgets","meta":""},"Provisioning Step 4":{"index":17,"icon":"widgets","meta":""},"Provisioning Step 5":{"index":18,"icon":"widgets","meta":""},"Map":{"index":19,"icon":"map","meta":""},"Floor Map":{"index":20,"icon":"widgets","meta":""},"General User Screen":{"index":21,"icon":"widgets","meta":""},"Help Screen":{"index":22,"icon":"widgets","meta":""}},"meta":""}