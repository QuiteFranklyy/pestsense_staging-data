{"device":"DESKTOP","widgets":{"JsonParser#3":{"t":"JsonParser","lX":610,"lY":155,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"190104c190915","z":"100","dis":false,"a":{"field name":"signal"},"ev":{}},"JsonParser#4":{"t":"JsonParser","lX":340,"lY":145,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"4.21%","height":"8.32%","x":"11.86%","y":"8.32%"},"ver":"190104c190915","dis":false,"tt":"","a":{"field name":"data"},"ev":{}},"End#20":{"t":"End","lX":240,"lY":90,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.76%","height":"7.44%","x":"7.71%","y":"49.2%"},"ver":"200819c190915","dis":false,"a":{"channel":"SENSAHUB/TRIAL/+/liveupdate","[object Attr]":"liveupdate","category":"SENSAHUB","class":"TRIAL","instance":"+","scope":"liveupdate"},"ev":{}},"End#24":{"t":"End","lX":860,"lY":180,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"4.21%","height":"5.41%","x":"35.59%","y":"37.94%"},"ver":"200107c190915","dis":false,"a":{"channel":"sensahub/TRIAL/+/Signal","[object Attr]":"Signal","category":"sensahub","class":"TRIAL","instance":"+","scope":"Signal"},"ev":{}},"JsonParser#9":{"t":"JsonParser","lX":600,"lY":275,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"190104c190915","z":"100","dis":false,"a":{"field name":"battery1"},"ev":{}},"End#29":{"t":"End","lX":855,"lY":255,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"4.21%","height":"5.41%","x":"35.59%","y":"37.94%"},"ver":"200107c190915","dis":false,"a":{"channel":"SENSAHUB/TRIAL/+/Battery","[object Attr]":"Battery","category":"SENSAHUB","class":"TRIAL","instance":"+","scope":"Battery"},"ev":{}},"DatabaseUpdate":{"t":"Scripting","lX":225,"lY":245,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"25.53%","y":"52.06%"},"ver":"190104c190915","dis":false,"a":{"code editor":"// Javascript flow scripting.\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date: \n * Version: \n */\n\n// Declare global variables here to be initialised at server startup\n\n/**\n * Initialise script state (run once at startup). Pass in channels set in script node widget\n */\n Script.on(\"load\", function() {\n});\n\n//Initialize threshold holders\nvar RedLower;\nvar RedUpper;\nvar AmberLower;\nvar AmberUpper;\n\nvar triggerTreshold;\nvar triggerTresholdUpper;\n/**\n * Response to incoming flow message. eventData object passed in with:\n * eventData.value - incoming data value (string)\n * eventData.startCh - state of channel that initiated the flow and the channel details (Object. Members {channel}, {value})\n * @return {string} return a value to continue the flow or to cancel flow return null\n */\nScript.on(\"flow\", function(eventData) {\n\tvar result;\n\t// console.log(eventData.value);\n\tresult = eventData.value;      // Adjust result with output of script processing\n\tvar dataPacket = JSON.parse(eventData.value);\n\tconsole.log(dataPacket);\n\tvar selectTraps = [\n\t{\n\t\t\"TableName\" : \"Device\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t    \"Id\",\n\t\t\t\"State\",\n\t\t\t\"Current\",\n\t\t\t\"MinValue\",\n\t\t\t\"MaxValue\",\n\t\t\t\"AvgValue\",\n\t\t\t\"RecentValue\",\n\t\t\t\"RedLower\",\n\t\t\t\"RedUpper\",\n\t\t\t\"AmberLower\",\n\t\t\t\"AmberUpper\"\n\t\t], // Specify the list of columns to take from the reference table.\n\t\t\"Filters\" : // Filter options in case they are needed.\n\t\t[\n\t\t\t{\n\t\t\t\t\"Column\" : \"Sid\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n\t\t\t\t\"ParamName\" : \"sid\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n\t\t\t\t\"Value\": dataPacket.sid // Value that you want to pass for comparison (any object)\n\t\t\t}\t\n\t\t]\n\t}];\n\n\t//console.log(dataPacket.data);\n    var readRecord = Database.readCompound(\"refrigerations\",\"Device\",selectTraps);\n \t//Break if device isn't associated with a trap within the relational database.\n\t\n\tvar selected;\n\tvar oldRecord = JSON.parse(readRecord);\n\n\t\n\tfor(var row in oldRecord.data)\n\t{\n \t\tselected = oldRecord.data[row];\n\t}\n\t// In case device doesn't exist in the relational database or has a missing id\n\tif(selected === undefined)\n\t{\n\t\t\n\t\tSystem.writeLog(\"Device data rejected, not associated with any bait box in rodent database!!!\");\n\t\treturn null;\n\t}\n\t\n\t// Set the thresholds for the specific sensor\n\tRedLower = selected[7];\n\tRedUpper = selected[8];\n\tAmberLower = selected[9];\n    AmberUpper = selected[10];\n\n\tvar minTemp = selected[3];\n\tvar maxTemp = selected[4];\n\tvar currentTemp = parseFloat(dataPacket.data.temp1);\n\t\n \n\t\n\tvar updateTime;\n \t \n\tupdateTime = new Date().getTime();\n\n\n\n\tvar dBm = parseInt(dataPacket.data.signal);\n\t//This is the lora signal strenght so it has a negative \"DBM\"\n\tvar quality;\n\tquality = CheckSignalStrenght(dBm);\n\t \n\t//Convert MV to V - 4 times 1.5v batteries.\n \tvar communicationError = 0;\n\tif (parseFloat(dataPacket.data.battery1) < 3.0)\n\t{\n\t\tcommunicationError = 1;\n\t}\n\t\n\tvar trapId = selected[0];\n\tvar newStatus = CheckRowStatus(currentTemp);\n    console.log(\"Red Lower: \"+RedLower);\n    console.log(\"Red Upper: \"+ RedUpper);\n    console.log(\"Amber Lower: \"+ AmberLower);\n    console.log(\"Amber Upper: \" + AmberUpper);\n    console.log(\"Temperature is: \"+ currentTemp);\n    console.log(\"New status is \"+ newStatus);\n\n\tvar emailStatus = {};\n\t\n \tDatabase.saveRecordParam(\"refrigerations\", \"Device\",  {\n\t\ttrapId:{\n\t\t\t\"Id\": selected[0],\n\t\t\t\"State\": newStatus, // Set the state\n \t\t\t\"SignalStrenght\": quality,\n \t\t\t\"DeviceBattery\":dataPacket.data.battery1,\n\t\t\t\"Current\": currentTemp,\n\t\t\t\"MinValue\": minTemp,\n\t\t\t\"MaxValue\": maxTemp,\n\t\t\t\"RecentValue\": currentTemp,\n\t\t\t\"LastUpdate\":updateTime,\n\t\t\t\"CommunicationError\": communicationError\n\t\t}\n\t} , function (data) {\n\n\t});\n\n\t //if(emailStatus.data !== undefined && emailStatus.usrArr !== undefined)\n\t// {\n\t//\treturn JSON.stringify({\"recipients\":emailStatus.usrArr ,\"subject\":\"PestSense automated alert\",\"body\": emailStatus.data});\n\t// }\n});\n\n\n function CheckRowStatus(temperature) {\n\tvar result = 0;\n\tvar importantRisen = 0;\n\tvar green = 0;\n\n\tif (!IsDecimal(temperature)) {\n\t\tresult = 1;\n \t\treturn result;\n\t}\n\n \n\tif(parseFloat(temperature) > AmberLower && parseFloat(temperature) < AmberUpper)\n    {\n        green = 1;\n    }\n    \n\tif (parseFloat(temperature) < RedUpper && parseFloat(temperature) >= AmberUpper) {\n\t\timportantRisen = 1;\n\t}\n\tif (parseFloat(temperature) > RedLower && parseFloat(temperature) <= AmberLower) {\n\t\timportantRisen = 1;\n\t}\n\t \n\tif (importantRisen === 1) {\n \t\tresult = 4;\n\t}\n\telse if (green == 1) {\n \t\tresult = 2;\n\t}\n\telse {  \n \t\tresult = 3;\n\t}\n\n\n\treturn result;\n}\n\n \n\nfunction evenRound(num, decimalPlaces) {\n\tvar d = decimalPlaces || 0;\n\tvar m = Math.pow(10, d);\n\tvar n = +(d ? num * m : num).toFixed(8); // Avoid rounding errors\n\tvar i = Math.floor(n), f = n - i;\n\tvar e = 1e-8; // Allow for rounding errors in f\n\tvar r = (f > 0.5 - e && f < 0.5 + e) ?\n\t\t((i % 2 == 0) ? i : i + 1) : Math.round(n);\n\treturn d ? r / m : r;\n}\n\nvar IsDecimal = function(num){\n    return ((num.toString().split('.').length) <= 2 && num.toString().match(/^[\\+\\-]?\\d*\\.?\\d+(?:[Ee][\\+\\-]?\\d+)?$/)) ? (!isNaN(parseFloat(num))) : false ;\n};\n\nfunction NotifyStatusAlert()\n{\n\tvar email = {};\n\tvar selectUsers = [\n\t{\n\t\t\"TableName\" : \"users\", // Specify the primary table used to construct the join request\n\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\"Columns\" :\n\t\t[\n\t\t\t\"username\",\n\t\t\t\"email\"\n\t\t], // Specify the list of columns to take from the reference table.\n\n\t}];\n\n\n\tvar readRecord = Database.readCompound(\"Directory\",\"users\",selectUsers);\n\tvar recordData = JSON.parse(readRecord);\n\t//var currentData = JSON.parse(recordData.data);\n\t//If users exist\n\tif (Object.keys(recordData.data).length > 0) {\n\t\tvar usrArr = [];\n\t\tfor(var user in recordData.data)\n\t\t{\n\n\t\t\tconsole.log(recordData.data[user][1]);\n\t\t\tif(recordData.data[user][1] !== \"\")\n\t\t\t{\n\t\t\t\tusrArr.push(recordData.data[user][1]);\n\t\t\t}\n\t\t}\n\n\t\tvar message = GetMessageBody(device, reading1===true ? 1 : 0, reading2 === true ? 1 : 0);\n\t\temail.data = message;\n\t\temail.usrArr = usrArr;\n\t\t//return JSON.stringify({\"recipients\":usrArr,\"subject\":\"PestSense automated alert\",\"body\": message});\n\t}\n\treturn email;\n}\n\n\n\nfunction GetMessageBody(device, entrance, exit)\n{\n\treturn \"<!DOCTYPE html>\"+\n\"<html>\"+\n\"<body>\"+\n      \n    \"<div class=\\\"outerContainer\\\" style=\\\"margin-left:13%;  margin-right:13%\\\">\"+\n\t\t  \n        \"<h2 style=\\\"text-align: center; color:black\\\">\"+\n            \"PestSense automated alert message for device:\"+ \n        \"</h2>\"+\n        \"<div class=\\\"main normalCardBorder SideBarGreen\\\" style=\\\"color:black border-left: 8px solid #185f55;border-right: 5px solid #f2f2f2;\\\">\"+\n            \"<div data-section=\\\"cell\\\">\"+\n                \"<div>\"+\n                    \"<div class=\\\"container flex\\\"  style=\\\"; background-color:#e5e7e9;\\\" >\"+\n                        \"<div>\"+\n                            \"<div class=\\\"vertical-center setupContent\\\" style=\\\"width: 100%;\\\">\"+\n                                \"<div class=\\\"row\\\">\"+\n                                    \"<h2 data-value=\\\"Status\\\" style=\\\"margin-right: 6px;color:black; text-align: center;\\\">\"+device+\"</h2>\"+\n                                \"</div>\"+\n                                \"<div class=\\\"row\\\" style=\\\"display: flex;\\\">\"+\n                                    \"<div style=\\\"width: 100%;\\\">\"+\n                                        \"<h3 style=\\\"text-align: center;font-weight: 500; color:black;\\\">Trigger count:</h1>\"+\n                                        \"<h2 style=\\\"text-align: center; font-size: 28px;color:black;\\\">\"+(entrance + exit)+\"</h2>\"+\n                                    \"</div>\"+\n                                    \n                                \"</div>\"+\n                            \"</div>\"+\n                        \"</div>\"+\n                \"</div>\"+\n            \"</div>\"+\n        \"</div>\"+\n    \"<div>\"+\n    \"<table style=\\width:351.0pt; padding-top:20px;\\ width=\\\"468\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\">\"+\n        \"<tbody>\"+\n        \"<tr style=\\\"height:63.0pt\\\">\"+\n        \"<td style=\\\"width:67.5pt;background:#404040;padding:0cm 0cm 0cm 0cm;height:63.0pt\\\" width=\\\"90\\\">\"+\n        \"<p class=\\\"m_-8575651637602756575xmsonormal\\\" style=\\\"text-align:center\\\" align=\\\"center\\\"><img style=\\\"width:.6875in;height:.6145in\\\" id=\\\"m_-8575651637602756575x_Picture_x0020_2\\\" src=\\\"https://pestsense.sensahub.com/images/brand_icon.png\\\" alt=\\\"Logo Description automatically generated\\\" data-image-whitelisted=\\\"\\\" class=\\\"CToWUd\\\" width=\\\"66\\\" height=\\\"59\\\" border=\\\"0\\\"><u></u><u></u></p>\"+\n        \"</td>\"+\n        \"<td style=\\\"width:4.5pt;background:white;padding:0cm 0cm 0cm 0cm;height:63.0pt\\\" width=\\\"6\\\">\"+\n        \"</td>\"+\n        \"<td style=\\\"width:279.0pt;background:#e5e7e9;padding:0cm 3.75pt 0cm 11.25pt;height:63.0pt\\\" width=\\\"372\\\">\"+\n        \"<p class=\\\"m_-8575651637602756575xmsonormal\\\" style=\\\"line-height:16.5pt\\\"><b><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:#70ad47\\\">Alerts </span></b><b><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:black\\\">| PestSense</span></b><u></u><u></u></p>\"+\n        \"<p class=\\\"m_-8575651637602756575xmsonormal\\\" style=\\\"line-height:16.5pt\\\"><span style=\\\"color:black\\\"><a href=\\\"mailto:deand@pestsense.com\\\" target=\\\"_blank\\\"><span style=\\\"color:#0563c1\\\">support@pestsense.com</span></a></span><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:black\\\">\"+\n        \"</span><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:#70ad47\\\">&nbsp;</span><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:black\\\">\"+\n        \"</span><b><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:#70ad47\\\">M</span></b><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:black\\\"> Phone goes here </span><u></u><u></u></p>\"+\n        \"</td>\"+\n        \"</tr>\"+\n        \"</tbody>\"+\n    \"</table>\"+\n    \"</div>\"+\n\"</body>\"+\n\"</html>\"; \n}\n\n\nfunction CheckSignalStrenght(dBm) {\n\tif (dBm < -120) {\n\t\t//  console.log(\"Signal is 10\");\n\t\treturn 10;\n\t}\n\n\tif (dBm < -115) {\n\t\t//    console.log(\"Signal is 20\");\n\t\treturn 20;\n\t}\n\n\tif (dBm < -111) {\n\t\t//  console.log(\"Signal is 30\");\n\t\treturn 30;\n\t}\n\n\tif (dBm < -107) {\n\t\t//    console.log(\"Signal is 40\");\n\t\treturn 40;\n\t}\n\n\tif (dBm < -101) {\n\t\t//   console.log(\"Signal is 50\");\n\t\treturn 50;\n\t}\n\n\tif (dBm < -95) {\n\t\t//  console.log(\"Signal is 60\");\n\t\treturn 60;\n\t}\n\n\tif (dBm < -90) {\n\t\t//  console.log(\"Signal is 70\");\n\t\treturn 70;\n\t}\n\n\tif (dBm > -90) {\n\t\t//   console.log(\"Signal is 100\");\n\t\treturn 100;\n\t}\n}"},"ev":{}},"End#2":{"t":"End","lX":850,"lY":25,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"7.44%","x":"49.05%","y":"6.18%"},"ver":"200819c190915","dis":false,"a":{"channel":"sensahub/trial/+/temperature","[object Attr]":"temperature","category":"sensahub","class":"trial","instance":"+","scope":"temperature"},"ev":{}},"End#5":{"t":"End","lX":850,"lY":530,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200819c190915","dis":false,"a":{"channel":"$NET/EMAIL/SMTPCLIENT/SENDLIST","[object Attr]":"SENDLIST","category":"$NET","class":"EMAIL","instance":"SMTPCLIENT","scope":"SENDLIST"},"ev":{}},"Scripting#3":{"t":"Scripting","lX":400,"lY":10,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"11.44%","x":"19.68%","y":"2.4%"},"ver":"190104c190915","dis":false,"a":{"code editor":"// Javascript flow scripting.\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date: \n * Version: \n */\n\n// Declare global variables here to be initialised at server startup\n\n/**\n * Initialise script state (run once at startup). Pass in channels set in script node widget\n */\nScript.on(\"load\", function() {\n});\n\n/**\n * Response to incoming flow message. eventData object passed in with:\n * eventData.value - incoming data value (string)\n * eventData.startCh - state of channel that initiated the flow and the channel details (Object. Members {channel}, {value})\n * @return {string} return a value to continue the flow or to cancel flow return null\n */\nScript.on(\"flow\", function(eventData) {\n\t// Get the message source device name\n\tvar usermeta = JSON.parse(eventData.usrmeta);\n\tvar values = JSON.parse(eventData.value);\n\tvar device = usermeta.split(\"/\")[3].charAt(0).toUpperCase() + usermeta.split(\"/\")[3].slice(1).toLowerCase();\n \t//var subject = \"Bait box '\" + device + \"' has not communicated for \" + eventData.value;\n\t \n\tvar reading1 = false;\n\tvar reading2 = false;\n //\n\tif(parseInt(values.counter1) > 0 || parseInt(eventData.counter2) > 0)\n\t{\n\t\n\t\tif(parseInt(values.counter1) > 0)\n\t\t{\n\t\t\treading1= true;\n\t\t}\n\t\t\n\t\tif(parseInt(values.counter2) > 0)\n\t\t{\n\t\t\treading1= true;\n\t\t}\n\t\t\n\t\tif(parseInt(values.counter1) < 0)\n\t\t{\n\t\t\t//Todo implement error catchign message if the device fails\n\t\t\treading1= false;\n\t\t}\n\t\t\n\t\tif(parseInt(values.counter2) < 0)\n\t\t{\n\t\t\t//Todo implement error catchign message if the device fails\n\t\t\treading1= false;\n\t\t}\n\t\t\n\t\t \n\t\tvar selectUsers = [\n\t\t{\n\t\t\t\"TableName\" : \"users\", // Specify the primary table used to construct the join request\n\t\t\t\"Join\" : 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\t\"Columns\" :\n\t\t\t[\n\t\t\t\t\"username\",\n\t\t\t\t\"email\"\n\t\t\t], // Specify the list of columns to take from the reference table.\n\t\t \n\t\t}];\n\n\n\t\tvar readRecord = Database.readCompound(\"Directory\",\"users\",selectUsers);\n  \t\tvar recordData = JSON.parse(readRecord);\n \t\t//var currentData = JSON.parse(recordData.data);\n \t\t//If users exist\n\t\tif (Object.keys(recordData.data).length > 0) {\n\t\t\tvar usrArr = [];\n \t\t\tfor(var user in recordData.data)\n\t\t\t{\n\t\t\t\t\n\t\t\t\tconsole.log(recordData.data[user][1]);\n\t\t\t\tif(recordData.data[user][1] !== \"\")\n\t\t\t\t{\n\t\t\t\t\tusrArr.push(recordData.data[user][1]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar message = GetMessageBody(device, reading1===true ? 1 : 0, reading2 === true ? 1 : 0);\n\t\t\t\n\t\t\t\n\t\t\t//return JSON.stringify({\"recipients\":usrArr,\"subject\":\"PestSense automated alert\",\"body\": message});\n\t\t}\n\t}\n\t\n \n});\n \n\nfunction GetMessageBody(device, entrance, exit)\n{\n\treturn \"<!DOCTYPE html>\"+\n\"<html>\"+\n\"<body>\"+\n      \n    \"<div class=\\\"outerContainer\\\" style=\\\"margin-left:13%;  margin-right:13%\\\">\"+\n\t\t  \n        \"<h2 style=\\\"text-align: center; color:black\\\">\"+\n            \"PestSense automated alert message for device:\"+ \n        \"</h2>\"+\n        \"<div class=\\\"main normalCardBorder SideBarGreen\\\" style=\\\"color:black border-left: 8px solid #185f55;border-right: 5px solid #f2f2f2;\\\">\"+\n            \"<div data-section=\\\"cell\\\">\"+\n                \"<div>\"+\n                    \"<div class=\\\"container flex\\\"  style=\\\"; background-color:#e5e7e9;\\\" >\"+\n                        \"<div>\"+\n                            \"<div class=\\\"vertical-center setupContent\\\" style=\\\"width: 100%;\\\">\"+\n                                \"<div class=\\\"row\\\">\"+\n                                    \"<h2 data-value=\\\"Status\\\" style=\\\"margin-right: 6px;color:black; text-align: center;\\\">\"+device+\"</h2>\"+\n                                \"</div>\"+\n                                \"<div class=\\\"row\\\" style=\\\"display: flex;\\\">\"+\n                                    \"<div style=\\\"width: 100%;\\\">\"+\n                                        \"<h3 style=\\\"text-align: center;font-weight: 500; color:black;\\\">Trigger count:</h1>\"+\n                                        \"<h2 style=\\\"text-align: center; font-size: 28px;color:black;\\\">\"+(entrance + exit)+\"</h2>\"+\n                                    \"</div>\"+\n                                    \n                                \"</div>\"+\n                            \"</div>\"+\n                        \"</div>\"+\n                \"</div>\"+\n            \"</div>\"+\n        \"</div>\"+\n    \"<div>\"+\n    \"<table style=\\width:351.0pt; padding-top:20px;\\ width=\\\"468\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\">\"+\n        \"<tbody>\"+\n        \"<tr style=\\\"height:63.0pt\\\">\"+\n        \"<td style=\\\"width:67.5pt;background:#404040;padding:0cm 0cm 0cm 0cm;height:63.0pt\\\" width=\\\"90\\\">\"+\n        \"<p class=\\\"m_-8575651637602756575xmsonormal\\\" style=\\\"text-align:center\\\" align=\\\"center\\\"><img style=\\\"width:.6875in;height:.6145in\\\" id=\\\"m_-8575651637602756575x_Picture_x0020_2\\\" src=\\\"https://pestsense.sensahub.com/images/brand_icon.png\\\" alt=\\\"Logo Description automatically generated\\\" data-image-whitelisted=\\\"\\\" class=\\\"CToWUd\\\" width=\\\"66\\\" height=\\\"59\\\" border=\\\"0\\\"><u></u><u></u></p>\"+\n        \"</td>\"+\n        \"<td style=\\\"width:4.5pt;background:white;padding:0cm 0cm 0cm 0cm;height:63.0pt\\\" width=\\\"6\\\">\"+\n        \"</td>\"+\n        \"<td style=\\\"width:279.0pt;background:#e5e7e9;padding:0cm 3.75pt 0cm 11.25pt;height:63.0pt\\\" width=\\\"372\\\">\"+\n        \"<p class=\\\"m_-8575651637602756575xmsonormal\\\" style=\\\"line-height:16.5pt\\\"><b><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:#70ad47\\\">Alerts </span></b><b><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:black\\\">| PestSense</span></b><u></u><u></u></p>\"+\n        \"<p class=\\\"m_-8575651637602756575xmsonormal\\\" style=\\\"line-height:16.5pt\\\"><span style=\\\"color:black\\\"><a href=\\\"mailto:deand@pestsense.com\\\" target=\\\"_blank\\\"><span style=\\\"color:#0563c1\\\">support@pestsense.com</span></a></span><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:black\\\">\"+\n        \"</span><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:#70ad47\\\">&nbsp;</span><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:black\\\">\"+\n        \"</span><b><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:#70ad47\\\">M</span></b><span style=\\\"font-size:10.5pt;font-family:&quot;Segoe UI&quot;,sans-serif;color:black\\\"> Phone goes here </span><u></u><u></u></p>\"+\n        \"</td>\"+\n        \"</tr>\"+\n        \"</tbody>\"+\n    \"</table>\"+\n    \"</div>\"+\n\"</body>\"+\n\"</html>\"; \n}"},"ev":{}},"JsonParser#0":{"t":"JsonParser","lX":585,"lY":40,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"190104c190915","dis":false,"a":{"field name":"temp1"},"ev":{}},"Start#0":{"t":"Start","lX":125,"lY":570,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"7.44%","x":"3.33%","y":"66.02%"},"ver":"200819c190915","dis":false,"a":{"channel":"SENSAHUB/TRIAL/+/temperatureaccumulated","[object Attr]":"temperatureaccumulated","category":"SENSAHUB","class":"TRIAL","instance":"+","scope":"temperatureaccumulated"},"ev":{}},"Scripting#0":{"t":"Scripting","lX":340,"lY":485,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"11.88%","x":"18.65%","y":"66.51%"},"ver":"190104c190915","dis":false,"a":{"code editor":"// Javascript flow scripting.\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date: \n * Version: \n */\n\n// Declare global variables here to be initialised at server startup\nvar devices = {};\nvar activeData = {};\n \n\nScript.on(\"load\",function () {\n\t \n    var selectTraps = [\n        {\n            \"TableName\": \"Device\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\",\n                    \"Name\",\n                    \"MinValue\",\n\t\t\t\t\t\"MaxValue\",\n\t\t\t\t\t\"AvgValue\"\n                ], // Specify the list of columns to take from the reference table.\n\n        }];\n\n    var readRecord = Database.readCompound(\"refrigerations\", \"Device\", selectTraps);\n    //Break if device isn't associated with a trap within the relational database.\n\n    var selected;\n    var oldRecord = JSON.parse(readRecord);\n\n\n    for (var row in oldRecord.data) {\n        selected = oldRecord.data[row];\n        devices[selected[1]] = {\n            \"Id\": selected[0],\n            \"Name\": selected[1],\n            \"MinValue\": selected[2],\n\t\t\t\"MaxValue\": selected[3],\n\t\t\t\"AvgValue\": selected[4]\n        };\n\t\tactiveData[selected[1]] = {};\n\t\tactiveData[selected[1]].data = [];\n       \n    }\n\t \n\n});\n\n\nfunction FlowDataUpdate(data)\n{\n \n}\n\n/**\n * Response to incoming flow message. eventData object passed in with:\n * eventData.value - incoming data value (string)\n * eventData.startCh - state of channel that initiated the flow and the channel details (Object. Members {channel}, {value})\n * @return {string} return a value to continue the flow or to cancel flow return null\n */\nScript.on(\"flow\", function(eventData) {\n\tvar result;\n\t\n\tresult = eventData;      // Adjust result with output of script processing\n \tvar device;\n\t\n  \n\tif(eventData.usrmeta !== \"Expired\")\n\t{\n\t\tif(eventData.usrmeta !== undefined)\n\t\t{\n\t\t\tdevice = eventData.startCh.channel.instance;\n \n           if(activeData[device] !== undefined)\n\t\t\t{\n\t\t\t\t\n\t\t\t\tactiveData[device].data.push(parseFloat(eventData.value));\n \t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.log(\"Doesn't exist in database\");\n\t\t\t}\n\t\t\t\n\t\t}\n \t}\n\telse\n\t{\n\t\tif(eventData.usrmeta !== undefined)\n\t\t{\n\t\t\tUpdateDevices();\n\t\t}\n\n\t}\n\t\n\treturn result;\n});\n\nfunction UpdateDevices()\n{\n    for(var currentDevice in devices)\n\t{\n\t\tvar selected = devices[currentDevice];\n\t\t\n\t \n\t    if(activeData[selected.Name].data.length > 0)\n        {        \n            var min = Math.min.apply(Math, activeData[selected.Name].data);    // 1\n            var max = Math.max.apply(Math, activeData[selected.Name].data);\n            \n           \n            selected.MinValue = min;\n            selected.MaxValue = max;\n            selected.AvgValue = average(activeData[selected.Name].data); \n            devices[selected.sid] = selected;\n            var trapId = selected.Id.toString();\n            Database.saveRecordParam(\"refrigerations\", \"Device\", {\n            \ttrapId: selected\n            }, function (data) {\n\n            });\n        }\n\t\tactiveData[selected.Name].data = [];\n\t}\n}\n\nfunction average(nums) {\n    var sum = 0;\n    for( var i = 0; i < nums.length; i++ ){\n        sum += parseFloat(nums[i]);\n    }\n    return sum/nums.length;\n}"},"ev":{}},"Expired":{"t":"Interval","lX":115,"lY":400,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"190104c190915","dis":false,"a":{"interval":"4","timespan":"hours","data":"1","one off":"false","random number":"false","random min":"","random max":""},"ev":{}},"End#0":{"t":"End","lX":855,"lY":100,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"7.72%","x":"49.11%","y":"10.45%"},"ver":"200819c190915","dis":false,"a":{"channel":"sensahub/trial/+/temperatureaccumulated","[object Attr]":"temperatureaccumulated","category":"sensahub","class":"trial","instance":"+","scope":"temperatureaccumulated"},"ev":{}},"EmailHandler":{"t":"Scripting","lX":690,"lY":505,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"11.88%","x":"36.14%","y":"70.67%"},"ver":"190104c190915","dis":false,"tt":"","a":{"code editor":"// Javascript flow scripting.\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date: \n * Version: \n */\n\n// Declare global variables here to be initialised at server startup\nvar devices = {};\nvar activeData = {};\nvar RedLower;\nvar RedUpper;\nvar AmberLower;\nvar AmberUpper;\n\n //Path varibles\n var selectedSites;\n var selectedAreas;\n var selectedCustomers;\n var selectedAssets;\n\n\n var currentArea;\n var currentSite;\n var currentCustomer;\n var emailHolder;\n var status;\n var TemperatureReading;\n var battery = \"3.0v\";\n var foodDatePrint;\n var Device;\n\nScript.on(\"load\", function () {\n\tScript.setState(\"DeviceThresholsUpdated\", \"\");\n\t GetSites();\n     GetAreas();\n     GetCustomers();\n\t GetAssets();\n    var selectTraps = [\n        {\n            \"TableName\": \"Device\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"Id\",\n                    \"Sid\",\n\t\t\t\t\t\"RedAlertEnabled\",\n\t\t\t\t\t\"AmberAlertEnabled\",\n\t\t\t\t\t\"CompanyId\",\n\t\t\t\t\t\"BranchId\",\n\t\t\t\t\t\"SiteId\",\n\t\t\t\t\t\"LocationId\",\n\t\t\t\t\t\"AssetId\",\n\t\t\t\t\t\"RedLower\",\n\t\t\t\t\t\"RedUpper\",\n\t\t\t\t\t\"AmberLower\",\n\t\t\t\t\t\"AmberUpper\",\n                    \"Name\",\n                    \"CustomerId\",\n\t\t\t\t\t\"Owner\",\n                    \"DeviceBattery\"\n\t\t\t \n                ], // Specify the list of columns to take from the reference table.\n\n        }];\n\n    var readRecord = Database.readCompound(\"refrigerations\", \"Device\", selectTraps);\n    //Break if device isn't associated with a trap within the relational database.\n\n    var selected;\n    var oldRecord = JSON.parse(readRecord);\n\n\n    for (var row in oldRecord.data) {\n        selected = oldRecord.data[row];\n        devices[selected[1]] = {\n            \"Id\": selected[0],\n            \"Sid\": selected[1],\n            \"RedAlertEnabled\": selected[2],\n\t\t\t\"AmberAlertEnabled\": selected[3],\n\t\t\t\"CompanyId\": selected[4],\n\t\t\t\"BranchId\": selected[5],\n\t\t\t\"SiteId\": selected[6],\n\t\t\t\"LocationId\": selected[7],\n\t\t\t\"AssetId\": selected[8],\n\t\t\t\"RedLower\":selected[9],\n\t\t\t\"RedUpper\": selected[10],\n\t\t\t\"AmberLower\": selected[11],\n\t\t\t\"AmberUpper\":selected[12],\n            \"Name\" : selected[13],\n            \"CustomerId\": selected[14],\n\t\t\t\"Owner\": selected[15],\n            \"DeviceBattery\": selected[16]\n        };\n\t\tactiveData[selected[1]] = {};\n\t\tactiveData[selected[1]].RedCanSend = 1;\n\t\tactiveData[selected[1]].AmberCanSend = 1;\n\t\t//activeData[selected[1]].data = [];\n        activeData[selected[1]].dataRed = [];\n        activeData[selected[1]].dataAmber = [];\n\t\t// console.log(  {\n        //      \"Id\": selected[0],\n        //     \"Sid\": selected[1],\n        //     \"RedAlertEnabled\": selected[2],\n\t\t// \t\"AmberAlertEnabled\": selected[3],\n\t\t// \t\"CompanyId\": selected[4],\n\t\t// \t\"BranchId\": selected[5],\n\t\t// \t\"SiteId\": selected[6],\n\t\t// \t\"LocationId\": selected[7],\n\t\t// \t\"AssetId\": selected[8],\n\t\t// \t\"RedLower\":selected[9],\n\t\t// \t\"RedUpper\": selected[10],\n\t\t// \t\"AmberLower\": selected[11],\n\t\t// \t\"AmberUpper\":selected[12]\n        // });\n    }\n\n\n});\n\n\n function GetAreas() {\n     var selectTraps = [\n         {\n             \"TableName\": \"Locations\", // Specify the primary table used to construct the join request\n             \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\":\n                 [\n                    \"Id\",\n                    \"Name\", \n                    \"Description\"\n                 ], // Specify the list of columns to take from the reference table.\n \n         }];\n \n \n     var readRecord = Database.readCompound(\"refrigerations\", \"Locations\", selectTraps);\n     //Break if device isn't associated with a trap within the relational database.\n \n     var oldRecord = JSON.parse(readRecord);\n  \n     selectedAreas = oldRecord.data;\n \n }\n \n function GetSites() {\n     var selectTraps = [\n         {\n             \"TableName\": \"Sites\", // Specify the primary table used to construct the join request\n             \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\":\n                 [\n                    \"Id\",\n                    \"Name\", \n                    \"Address\"\n               \n                 ], // Specify the list of columns to take from the reference table.\n \n         }];\n \n \n     var readRecord = Database.readCompound(\"refrigerations\", \"Sites\", selectTraps);\n     //Break if device isn't associated with a trap within the relational database.\n \n     var oldRecord = JSON.parse(readRecord);\n \n \n     selectedSites = oldRecord.data;\n \n }\n \n function GetCustomers() {\n     var selectTraps = [\n         {\n             \"TableName\": \"Customers\", // Specify the primary table used to construct the join request\n             \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\":\n                 [\n                    \"Id\",\n                    \"Name\", \n                    \"Description\",\n                    \"PrimaryContactEmail\"\n                 ], // Specify the list of columns to take from the reference table.\n \n         }];\n \n \n     var readRecord = Database.readCompound(\"refrigerations\", \"Customers\", selectTraps);\n     //Break if device isn't associated with a trap within the relational database.\n \n     var oldRecord = JSON.parse(readRecord);\n \n \n     selectedCustomers = oldRecord.data;\n \n }\n\n \n function GetAssets() {\n     var selectTraps = [\n         {\n             \"TableName\": \"Assets\", // Specify the primary table used to construct the join request\n             \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\":\n                 [\n                    \"Id\",\n                    \"Name\", \n                    \"Location\"\n                 ], // Specify the list of columns to take from the reference table.\n \n         }];\n \n \n     var readRecord = Database.readCompound(\"refrigerations\", \"Assets\", selectTraps);\n     //Break if device isn't associated with a trap within the relational database.\n \n     var oldRecord = JSON.parse(readRecord);\n \n \n     selectedAssets = oldRecord.data;\n \n }\n\n\n/**\n * Response to incoming flow message. eventData object passed in with:\n * eventData.value - incoming data value (string)\n * eventData.startCh - state of channel that initiated the flow and the channel details (Object. Members {channel}, {value})\n * @return {string} return a value to continue the flow or to cancel flow return null\n */\nScript.on(\"flow\", function(eventData) {\n\tvar result;\n\t\n\tresult = eventData;      // Adjust result with output of script processing\n\tvar dataPacket = JSON.parse(eventData.value);\n\n \tvar device;\n\t\n\tvar updateData;\n\t\n\t// Check if any devices have changed the database thresholds.\n\t// var deviceThresholdsUpdated = Script.getState(\"DeviceThresholsUpdated\");\n\t// console.log(\"Devuce updated thresholds: \" + deviceThresholdsUpdated);\n\n\t// if(deviceThresholdsUpdated !== \"\")\n\t// {\n\t// \tfor(var item in deviceThresholdsUpdated)\n\t// \t{\n\t// \t\tvar deviceThreshold = deviceThresholdsUpdated[item];\n\t// \t\tconsole.log(\"Red Lower Before update: \"+ activeData[deviceThreshold.sid].RedLower);\n\t// \t\tconsole.log(\"Red Upper Before update: \"+ activeData[deviceThreshold.sid].RedUpper);\n\t// \t\tconsole.log(\"Amber Lower Before update: \"+ activeData[deviceThreshold.sid].AmberLower);\n\t// \t\tconsole.log(\"Amber Upper Before update: \"+ activeData[deviceThreshold.sid].AmberUpper);\n\n\t// \t\tactiveData[deviceThreshold.sid].RedLower = deviceThreshold.RedLower;\n\t// \t\tactiveData[deviceThreshold.sid].RedUpper =  deviceThreshold.RedUpper;\n\t// \t\tactiveData[deviceThreshold.sid].AmberLower = deviceThreshold.AmberLower;\n\t// \t\tactiveData[deviceThreshold.sid].AmberUpper = deviceThreshold.AmberUpper;\n\t\t\t\n\t// \t\tconsole.log(\"Red Lower after update: \"+ activeData[deviceThreshold.sid].RedLower);\n\t// \t\tconsole.log(\"Red Upper after update: \"+ activeData[deviceThreshold.sid].RedUpper);\n\t// \t\tconsole.log(\"Amber Lower after update: \"+ activeData[deviceThreshold.sid].AmberLower);\n\t// \t\tconsole.log(\"Amber Upper after update: \"+ activeData[deviceThreshold.sid].AmberUpper);\n\n\t// \t}\n\t// \tScript.setState(\"DeviceThresholsUpdated\", \"\");\n\n\t// }\n\t//Dispose the collection in the channel rise the flag to dispose local running collection \n\t\n\n\t\n\tif(eventData.usrmeta !== \"RedAlertExpired\" && eventData.usrmeta !== \"AmberAlertExpired\")\n\t{\n\t\tif(eventData.usrmeta !== undefined)\n\t\t{\n            var selectTraps = [\n                {\n                    \"TableName\": \"Device\", // Specify the primary table used to construct the join request\n                    \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n                    \"Columns\":\n                        [\n                            \"Id\",\n                            \"Sid\",\n                            \"RedAlertEnabled\",\n                            \"AmberAlertEnabled\",\n                            \"CompanyId\",\n                            \"BranchId\",\n                            \"SiteId\",\n                            \"LocationId\",\n                            \"AssetId\",\n                            \"RedLower\",\n                            \"RedUpper\",\n                            \"AmberLower\",\n                            \"AmberUpper\",\n                            \"Name\",\n                            \"CustomerId\",\n                            \"Owner\",\n                            \"DeviceBattery\",\n\t\t\t\t\t\t\t\"RecentValue\"\n                     \n                        ], // Specify the list of columns to take from the reference table.\n                        \"Filters\": // Filter options in case they are needed.\n                        [\n                            {\n                                \"Column\": \"Sid\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n                                \"ParamName\": \"sid\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n                                \"Value\": dataPacket.sid // Value that you want to pass for comparison (any object)\n                            }\n                        ]\n                }];\n        \n            var readRecord = Database.readCompound(\"refrigerations\", \"Device\", selectTraps);\n            //Break if device isn't associated with a trap within the relational database.\n        \n            var selected;\n            var oldRecord = JSON.parse(readRecord);\n        \n        \n            for (var row in oldRecord.data) {\n                selected = oldRecord.data[row];\n                devices[selected[1]] = {\n                    \"Id\": selected[0],\n                    \"Sid\": selected[1],\n                    \"RedAlertEnabled\": selected[2],\n                    \"AmberAlertEnabled\": selected[3],\n                    \"CompanyId\": selected[4],\n                    \"BranchId\": selected[5],\n                    \"SiteId\": selected[6],\n                    \"LocationId\": selected[7],\n                    \"AssetId\": selected[8],\n                    \"RedLower\":selected[9],\n                    \"RedUpper\": selected[10],\n                    \"AmberLower\": selected[11],\n                    \"AmberUpper\":selected[12],\n                    \"Name\" : selected[13],\n                    \"CustomerId\": selected[14],\n                    \"Owner\": selected[15],\n                    \"DeviceBattery\": selected[16],\n\t\t\t\t\t\"RecentValue\": selected[17]\n                };\n       \n                activeData[dataPacket.sid].RedLower = selected[9];\n                activeData[dataPacket.sid].RedUpper = selected[10];\n                activeData[dataPacket.sid].AmberLower = selected[11];\n                activeData[dataPacket.sid].AmberUpper = selected[12];\n                activeData[dataPacket.sid].RedAlertEnabled = selected[2];\n                activeData[dataPacket.sid].RedAlertEnabled = selected[3];\n\t\t\t\tactiveData[dataPacket.sid].RecentValue = selected[17];\n \n            }\n        \n\n \t\t\tif(activeData[dataPacket.sid] !== undefined)\n\t\t\t{\n\t\t\t\t//Assign Device varibles\n\t\t\t\tRedLower = activeData[dataPacket.sid].RedLower;\n\t\t\t\tRedUpper = activeData[dataPacket.sid].RedUpper;\n\t\t\t\tAmberLower = activeData[dataPacket.sid].AmberLower;\n\t\t\t\tAmberUpper = activeData[dataPacket.sid].AmberUpper;\n\t\t\t\tvar newStatus = CheckRowStatus(parseFloat(dataPacket.data.temp1));\n\t\t\t\tactiveData[dataPacket.sid].dataRed.push(newStatus);\n                activeData[dataPacket.sid].dataAmber.push(newStatus);\n\n\t\t\t}\n\t\t}\n \t}\n\telse\n\t{\n\t\tif(eventData.usrmeta !== undefined)\n\t\t{\n\t\t\t\n\t\t\tupdateData = UpdateDevices(eventData.usrmeta);\n \n            if(updateData !== undefined && updateData.length > 0)\n            {\n                return  JSON.stringify(updateData);\n                // for(var item in updateData)\n                // {\n                     // return updateData[item];\n                 //}\n            }\n\t\t}\n\n        \n\n\t}\n\n  \n\t\n });\n\nfunction UpdateDevices(alertType)\n{\n    var result = [];\n    for(var currentDevice in devices)\n\t{\n\t\tvar selected = devices[currentDevice];\n\t\t\n\t \n\n\t    if(activeData[parseInt(selected.Sid)].dataRed.length > 0 || activeData[parseInt(selected.Sid)].dataAmber.length > 0)\n        {        \n            var validateAlert;\n            var validateReset ;\n            if(alertType === \"RedAlertExpired\")\n            {\n\t\t\t\tconsole.log(\"-------------------Validating Email results for with statuses before expiry RED-----------------------------\");\n\t\t\t\tconsole.log(activeData[parseInt(selected.Sid)].dataRed);\n\t\t\t\tconsole.log(\"------------------------------------------------------------------------------------------------------------\");\n\n                validateAlert = ValidateAlert(activeData[parseInt(selected.Sid)].dataRed, alertType);\n                validateReset = ValidateAlertReset(activeData[parseInt(selected.Sid)].dataRed);\n            }\n            else\n            {\n\t\t\t\tconsole.log(\"-------------------Validating Email results for with statuses before expiry AMBER-----------------------------\");\n\t\t\t\tconsole.log(activeData[parseInt(selected.Sid)].dataAmber);\n\t\t\t\tconsole.log(\"---------------------------------------------------------------------------------000000-----------------------\");\n\n                validateAlert = ValidateAlert(activeData[parseInt(selected.Sid)].dataAmber, alertType);\n                validateReset = ValidateAlertReset(activeData[parseInt(selected.Sid)].dataAmber);\n            }\n\t\t\t\n\t\t\t\n            foodDatePrint = formatDate(new Date(), \"dd/MM/yy\", false);\n            currentArea = selected.LocationId;\n            currentSite = selected.SiteId;\n            currentCustomer = selected.CustomerId;\n\t\t\tcurrentAsset = selected.AssetId;\n            emailHolder =   selected.Owner;\n            Device = selected.Name;\n            console.log(activeData[parseInt(selected.Sid)]);\n            TemperatureReading = activeData[parseInt(selected.Sid)].RecentValue;\n\t\t\tconsole.log(TemperatureReading);\n\n            var output = ((selected.DeviceBattery - 2.1) / (3.0 - 2.1)) * 100;\n            if (output < 100)\n                battery = output;\n            else\n                battery = 100;\n \n            if(validateAlert.alertReult)\n\t\t\t{\n\t\t\t\tconsole.log(\"Sending alert\");\n\t\t\t\tconsole.log(\" activeData[parseInt(selected.Sid)].RedCanSend: \" +  activeData[parseInt(selected.Sid)].RedCanSend);\n\t\t\t\tconsole.log(\" activeData[parseInt(selected.Sid)].AmberCanSend: \" +  activeData[parseInt(selected.Sid)].RedCanSend);\n\n\t\t\t\tif(alertType === \"RedAlertExpired\" && activeData[parseInt(selected.Sid)].RedCanSend === 1 && validateAlert.AlertType === 3)\n\t\t\t\t{\n \n                    activeData[parseInt(selected.Sid)].RedCanSend = 0;\n                    var dataLenght = activeData[parseInt(selected.Sid)].dataRed.length;\n                    if(activeData[parseInt(selected.Sid)].dataRed[dataLenght - 1] === 4 && activeData[parseInt(selected.Sid)].AmberCanSend === 1)\n                    {\n                        console.log(\"-------------------Sending Amber Alert-----------------------------\");\n                        result.push(SendNotification(activeData[parseInt(selected.Sid)], 2));\n                    }\n\t\t\t\t\telse if(activeData[parseInt(selected.Sid)].dataRed[dataLenght - 1] === 3)\n                    {\n                        console.log(\"-------------------Sending Red Alert-----------------------------\");\n                        result.push(SendNotification(activeData[parseInt(selected.Sid)], 1));\n                    }\n\t\t\t\t\tactiveData[parseInt(selected.Sid)].dataRed = [];\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(alertType === \"AmberAlertExpired\" && activeData[parseInt(selected.Sid)].AmberCanSend === 1 && validateAlert.AlertType === 4)\n\t\t\t\t{\n\t\t\t\t\tconsole.log(\"-------------------Sending AMBER Alert-----------------------------\");\n\n                    activeData[parseInt(selected.Sid)].AmberCanSend = 0;\n\t\t\t\t\tresult.push(SendNotification(activeData[parseInt(selected.Sid)], 2));\n\t\t\t\t\tactiveData[parseInt(selected.Sid)].dataAmber = [];\n\n\t\t\t\t}\n\t\t\t}\n     \n\t\t\t\n\t\t\tif(validateReset)\n\t\t\t{\n\t\t\t\tconsole.log(\"Resetting thresholds senders\");\n \t\t\t\tactiveData[parseInt(selected.Sid)].RedCanSend = 1;\n\t\t\t\tactiveData[parseInt(selected.Sid)].AmberCanSend = 1;\n                activeData[parseInt(selected.Sid)].dataRed = [];\n                activeData[parseInt(selected.Sid)].dataAmber = [];\n\t\t\t}\n\n        }\n\t}\n    return result;\n }\n\n\n\n function CheckRowStatus(temperature) {\n\tvar result = 0;\n\tvar importantRisen = 0;\n\tvar green = 0;\n\n\tif (!IsDecimal(temperature)) {\n\t\tresult = 1;\n \t\treturn result;\n\t}\n\n \n\tif(parseFloat(temperature) > AmberLower && parseFloat(temperature) < AmberUpper)\n    {\n        green = 1;\n    }\n    \n\tif (parseFloat(temperature) < RedUpper && parseFloat(temperature) >= AmberUpper) {\n\t\timportantRisen = 1;\n\t}\n\tif (parseFloat(temperature) > RedLower && parseFloat(temperature) <= AmberLower) {\n\t\timportantRisen = 1;\n\t}\n\t \n\tif (importantRisen === 1) {\n \t\tresult = 4;\n\t}\n\telse if (green == 1) {\n \t\tresult = 2;\n\t}\n\telse {  \n \t\tresult = 3;\n\t}\n\n\n\treturn result;\n}\n\nfunction evenRound(num, decimalPlaces) {\n\tvar d = decimalPlaces || 0;\n\tvar m = Math.pow(10, d);\n\tvar n = +(d ? num * m : num).toFixed(8); // Avoid rounding errors\n\tvar i = Math.floor(n), f = n - i;\n\tvar e = 1e-8; // Allow for rounding errors in f\n\tvar r = (f > 0.5 - e && f < 0.5 + e) ?\n\t\t((i % 2 == 0) ? i : i + 1) : Math.round(n);\n\treturn d ? r / m : r;\n}\n\nvar IsDecimal = function(num){\n    return ((num.toString().split('.').length) <= 2 && num.toString().match(/^[\\+\\-]?\\d*\\.?\\d+(?:[Ee][\\+\\-]?\\d+)?$/)) ? (!isNaN(parseFloat(num))) : false ;\n};\n\nfunction ValidateAlert(data, alertType)\n{\n\tvar result ={};\n    var sendSignal = true;\n\tvar alert;\n\tswitch(alertType)\n\t{\n\t\tcase \"RedAlertExpired\":\n\t\t\talert = 3;\n\t\t\tbreak;\n\t\tcase \"AmberAlertExpired\":\n\t\t\talert = 4;\n\t\t\tbreak;\n\t}\n\t\n\tfor(var item in data)\n\t{\n\t//\tconsole.log(data[item]);\n\t\tif(data[item] === 2)\n\t\t{\n\t\t   sendSignal = false;\n\t\t}\n\t}\n\tresult.AlertType = alert;\n    result.alertReult = sendSignal;\n\treturn result;\n}\n\n\n\nfunction ValidateAlertReset(data)\n{\n\tvar result = false;\n\tfor(var item in data)\n\t{\n\t//\tconsole.log(data[item]);\n\t\tif(data[item] === 2)\n\t\t{\n\t\t   result = true;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n\nfunction NotifyStatusAlert(statusColor) {\n    var email = {};\n    var filters = [\n        \n\n    ];\n\n    if (emailHolder !== undefined) {\n        filters.push({\n            \"Column\": \"username\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n            \"ParamName\": \"receiver\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n            \"Value\": emailHolder // Value that you want to pass for comparison (any object)\n        });\n    }\n\n    var selectUsers = [\n        {\n            \"TableName\": \"users\", // Specify the primary table used to construct the join request\n            \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n            \"Columns\":\n                [\n                    \"username\",\n                    \"email\"\n                ], // Specify the list of columns to take from the reference table.\n            \"Filters\": filters // Filter options in case they are needed.\n\n        }];\n\n\n    var readRecord = Database.readCompound(\"Directory\", \"users\", selectUsers);\n    var recordData = JSON.parse(readRecord);\n    //var currentData = JSON.parse(recordData.data);\n    //If users exist\n    var usrArr = [];\n    if (Object.keys(recordData.data).length > 0) {\n    \n        for (var user in recordData.data) {\n\n            if (recordData.data[user][1] !== \"\") {\n\n                usrArr.push(recordData.data[user][1]);\n\n            }\n        }\n    }\n \n    var selectedCustomer;\n    var selectedSite;\n    var selectedArea;\n\tvar selectedAsset;\n    var customerMail;\n    for (var customer in selectedCustomers) {\n        var current2 = selectedCustomers[customer];\n        if (current2[0] === currentCustomer) {\n            selectedCustomer = current2[1];\n            customerMail = current2[3];\n        }\n    }\n\n\n    for (var area in selectedAreas) {\n        var current3 = selectedAreas[area];\n        if (current3[0] === currentArea) {\n            selectedArea = current3[1];\n        }\n    }\n\n\n    for (var site in selectedSites) {\n        var current4 = selectedSites[site];\n        if (current4[0] === currentSite) {\n            selectedSite = current4[1];\n        }\n    }\n\n    for (var asset in selectedAssets) {\n        var current5 = selectedAssets[asset];\n        if (current5[0] === currentAsset) {\n            selectedAsset = current5[1];\n        }\n    }\n   \n    \n    messageAlert = \"Temperature recorded is \"+TemperatureReading;\n    var subject = \"Temperature Alert  \"+selectedAsset+\" is recording \"+ TemperatureReading;\n    var message = GetMessageBody(Device, battery, statusColor, selectedCustomer, selectedArea, selectedSite, selectedAsset);\n    email.data = message;\n    email.usrArr = usrArr;\n    usrArr.push(\"kristiformilchev615@gmail.com\");\n    usrArr.push(customerMail);\n    usrArr.push(\"fred@sensavation.com\");\n\tusrArr.push(\"petar@collaborativesoft.com\");\n    //usrArr.push(\"rob@sensavation.com\");\n    usrArr.push(\"deandob@sensavation.com\");\n \treturn { \"recipients\": usrArr, \"subject\": subject, \"body\":message };\n\t\n    //  var userarr = [\"kristiformilchev615@gmail.com\"];\n\n \n}\n\nfunction SendNotification(data, alertType)\n{ \n      \n    var statusColor;\n    switch (parseInt(alertType)) {\n        case 1:\n            statusColor = \"red\";\n            break;\n        case 2:\n            statusColor = \"orange\";\n            break;\n\n    }\n     \n    return NotifyStatusAlert(statusColor);\n\n}\n\n\n\n function GetMessageBody(device, battery, status, customer, area, site, asset) {\n     return '<!DOCTYPE HTML PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional //EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">' +\n         '<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\">' +\n         '<head>' +\n         '<!--[if gte mso 9]>' +\n         '<xml>' +\n         '  <o:OfficeDocumentSettings>' +\n         '    <o:AllowPNG/>' +\n         '    <o:PixelsPerInch>96</o:PixelsPerInch>' +\n         '  </o:OfficeDocumentSettings>' +\n         '</xml>' +\n         '<![endif]-->' +\n         '  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">' +\n         '  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">' +\n         '  <meta name=\"x-apple-disable-message-reformatting\">' +\n         '  <!--[if !mso]><!--><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><!--<![endif]-->' +\n         '  <title></title>' +\n         '  ' +\n         '    <style type=\"text/css\">' +\n         '      a { color: #161a39; text-decoration: underline; } @media (max-width: 480px) { #u_row_12.v-row-padding--vertical { padding-top: 0px !important; padding-bottom: 0px !important; } #u_column_13 .v-col-border { border-top: 0px solid transparent !important;border-left: 6px solid  !important;border-right: 0px solid transparent !important;border-bottom: 0px solid transparent !important; } #u_row_18.v-row-padding--vertical { padding-top: 0px !important; padding-bottom: 0px !important; } #u_column_27 .v-col-border { border-top: 0px solid transparent !important;border-left: 6px solid #ec1414 !important;border-right: 0px solid transparent !important;border-bottom: 0px solid transparent !important; } #u_content_text_60 .v-container-padding-padding { padding: 2px !important; } #u_content_text_72 .v-container-padding-padding { padding: 13px 10px 10px !important; } #u_content_text_71 .v-container-padding-padding { padding: 22px 10px 10px !important; } #u_content_text_70 .v-container-padding-padding { padding: 21px 10px 10px !important; } #u_content_text_68 .v-container-padding-padding { padding: 10px !important; } #u_content_text_73 .v-container-padding-padding { padding: 17px 10px 10px !important; } #u_content_social_1 .v-container-padding-padding { padding: 26px 10px 10px !important; } #u_content_text_6 .v-color { color: #000000 !important; } }' +\n         '@media only screen and (min-width: 620px) {' +\n         '  .u-row {' +\n         '    width: 600px !important;' +\n         '  }' +\n         '  .u-row .u-col {' +\n         '    vertical-align: top;' +\n         '  }' +\n         '' +\n         '  .u-row .u-col-32p01 {' +\n         '    width: 192.06px !important;' +\n         '  }' +\n         '' +\n         '  .u-row .u-col-50 {' +\n         '    width: 300px !important;' +\n         '  }' +\n         '' +\n         '  .u-row .u-col-67p99 {' +\n         '    width: 407.94px !important;' +\n         '  }' +\n         '' +\n         '  .u-row .u-col-100 {' +\n         '    width: 600px !important;' +\n         '  }' +\n         '' +\n         '}' +\n         '' +\n         '@media (max-width: 620px) {' +\n         '  .u-row-container {' +\n         '    max-width: 100% !important;' +\n         '    padding-left: 0px !important;' +\n         '    padding-right: 0px !important;' +\n         '  }' +\n         '  .u-row .u-col {' +\n         '    min-width: 320px !important;' +\n         '    max-width: 100% !important;' +\n         '    display: block !important;' +\n         '  }' +\n         '  .u-row {' +\n         '    width: calc(100% - 40px) !important;' +\n         '  }' +\n         '  .u-col {' +\n         '    width: 100% !important;' +\n         '  }' +\n         '  .u-col > div {' +\n         '    margin: 0 auto;' +\n         '  }' +\n         '  .no-stack .u-col {' +\n         '    min-width: 0 !important;' +\n         '    display: table-cell !important;' +\n         '  }' +\n         '' +\n         '  .no-stack .u-col-32p01 {' +\n         '    width: 32.01% !important;' +\n         '  }' +\n         '' +\n         '.no-stack .u-col-67p99 {' +\n         '    width: 67.99% !important;' +\n         '  }' +\n         '' +\n         '}' +\n         'body {' +\n         '  margin: 0;' +\n         '  padding: 0;' +\n         '}' +\n         '' +\n         'table,' +\n         'tr,' +\n         'td {' +\n         '  vertical-align: top;' +\n         '  border-collapse: collapse;' +\n         '}' +\n         '' +\n         'p {' +\n         '  margin: 0;' +\n         '}' +\n         '' +\n         '.ie-container table,' +\n         '.mso-container table {' +\n         '  table-layout: fixed;' +\n         '}' +\n         '' +\n         '* {' +\n         '  line-height: inherit;' +\n         '}' +\n         '' +\n         'a[x-apple-data-detectors=\\'true\\'] {' +\n         '  color: inherit !important;' +\n         '  text-decoration: none !important;' +\n         '}' +\n         '' +\n         '@media (max-width: 480px) {' +\n         '  .hide-mobile {' +\n         '    display: none !important;' +\n         '    max-height: 0px;' +\n         '    overflow: hidden;' +\n         '  }' +\n         '' +\n         '  .hide-desktop {' +\n         '    display: block !important;' +\n         '  }' +\n         '}' +\n         '    </style>' +\n         '  ' +\n         '  ' +\n         '' +\n         '<!--[if !mso]><!--><link href=\"https://fonts.googleapis.com/css?family=Lato:400,700&display=swap\" rel=\"stylesheet\" type=\"text/css\"><!--<![endif]-->' +\n         '' +\n         '</head>' +\n         '' +\n         '<body class=\"clean-body\" style=\"margin: 0;padding: 0;-webkit-text-size-adjust: 100%;background-color: #f9f9f9\">' +\n         '  <!--[if IE]><div class=\"ie-container\"><![endif]-->' +\n         '  <!--[if mso]><div class=\"mso-container\"><![endif]-->' +\n         '  <table style=\"border-collapse: collapse;table-layout: fixed;border-spacing: 0;mso-table-lspace: 0pt;mso-table-rspace: 0pt;vertical-align: top;min-width: 320px;Margin: 0 auto;background-color: #f9f9f9;width:100%\" cellpadding=\"0\" cellspacing=\"0\">' +\n         '  <tbody>' +\n         '  <tr style=\"vertical-align: top\">' +\n         '    <td style=\"word-break: break-word;border-collapse: collapse !important;vertical-align: top\">' +\n         '    <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td align=\"center\" style=\"background-color: #f9f9f9;\"><![endif]-->' +\n         '    ' +\n         '' +\n         '<div class=\"u-row-container v-row-padding--vertical\" style=\"padding: 0px;background-color: #f9f9f9\">' +\n         '  <div class=\"u-row\" style=\"Margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #f9f9f9;\">' +\n         '    <div style=\"border-collapse: collapse;display: table;width: 100%;background-color: transparent;\">' +\n         '      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px;background-color: #f9f9f9;\" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\"background-color: #f9f9f9;\"><![endif]-->' +\n         '      ' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"600\" class=\"v-col-border\" style=\"border-color:' + status + '; width: 600px;padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div class=\"u-col u-col-100\" style=\"max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:15px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <table height=\"0px\" align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"border-collapse: collapse;table-layout: fixed;border-spacing: 0;mso-table-lspace: 0pt;mso-table-rspace: 0pt;vertical-align: top;border-top: 1px solid #f9f9f9;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%\">' +\n         '    <tbody>' +\n         '      <tr style=\"vertical-align: top\">' +\n         '        <td style=\"word-break: break-word;border-collapse: collapse !important;vertical-align: top;font-size: 0px;line-height: 0px;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%\">' +\n         '          <span> </span>' +\n         '        </td>' +\n         '      </tr>' +\n         '    </tbody>' +\n         '  </table>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '      <!--[if (mso)|(IE)]></tr></table></td></tr></table><![endif]-->' +\n         '    </div>' +\n         '  </div>' +\n         '</div>' +\n         '' +\n         '' +\n         '' +\n         '<div class=\"u-row-container v-row-padding--vertical\" style=\"padding: 0px;background-color: transparent\">' +\n         '  <div class=\"u-row\" style=\"Margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word; \">' +\n         '    <div style=\"border-collapse: collapse;display: table;width: 100%;background-color: transparent;\">' +\n         '      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px;background-color: transparent;\" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\" \"><![endif]-->' +\n         '      ' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"600\" class=\"v-col-border\" style=\"border-color:' + status + '; width: 600px;padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div class=\"u-col u-col-100\" style=\"max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:25px 10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '<table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\">' +\n         '  <tr>' +\n         '    <td style=\"padding-right: 0px;padding-left: 0px;\" align=\"center\">' +\n         '      ' +\n         '      <img align=\"center\" border=\"0\" src=\"https://fridge.sensahub.com/images/brand_icon.png\" alt=\"Image\" title=\"Image\" style=\"outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;clear: both;display: inline-block !important;border: none;height: auto;float: none;width: 14%;max-width: 81.2px;\" width=\"81.2\"/>' +\n         '      ' +\n         '    </td>' +\n         '  </tr>' +\n         '</table>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '      <!--[if (mso)|(IE)]></tr></table></td></tr></table><![endif]-->' +\n         '    </div>' +\n         '  </div>' +\n         '</div>' +\n         '' +\n         '' +\n         '' +\n         '<div id=\"u_row_12\" class=\"u-row-container v-row-padding--vertical hide-mobile\" style=\"padding: 0px; \">' +\n         '  <div class=\"u-row no-stack\" style=\"Margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: transparent;\">' +\n         '    <div style=\"border-collapse: collapse;display: table;width: 100%;background-color: transparent;\">' +\n         '      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px; \" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\"background-color: transparent;\"><![endif]-->' +\n         '      ' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"186\" class=\"v-col-border\" style=\"border-color:' + status + '; background-color: #f2f2f2;width: 186px;padding: 0px;border-top: 0px solid transparent;border-left: 6px solid ' + status + ';border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div id=\"u_column_13\" class=\"u-col u-col-32p01\" style=\"max-width: 320px;min-width: 192px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"background-color: #f2f2f2;width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 0px;border-top: 0px solid transparent;border-left: 6px solid ' + status + ';border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Alert</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Location</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Asset</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Device</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Temperature</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n        \n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Battery Level</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"408\" class=\"v-col-border\" style=\"border-color:' + status + '; background-color: #f2f2f2;width: 408px;padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div class=\"u-col u-col-67p99\" style=\"max-width: 320px;min-width: 408px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"background-color: #f2f2f2;width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + messageAlert + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + customer + ', ' + area  + ', ' + site  + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + asset + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + device + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + TemperatureReading + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n        \n         \n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + battery + '%</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '      <!--[if (mso)|(IE)]></tr></table></td></tr></table><![endif]-->' +\n         '    </div>' +\n         '  </div>' +\n         '</div>' +\n         '' +\n         '' +\n         '<!--[if !mso]><!-->' +\n         '<div id=\"u_row_18\" class=\"u-row-container v-row-padding--vertical hide-desktop\" style=\"display: none;mso-hide: all;padding: 0px; \">' +\n         '  <div class=\"u-row no-stack\" style=\"Margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: transparent;\">' +\n         '    <div style=\"border-collapse: collapse;display: table;width: 100%;background-color: transparent;\">' +\n         '      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px; \" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\"background-color: transparent;\"><![endif]-->' +\n         '      ' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"186\" class=\"v-col-border\" style=\"border-color:' + status + '; background-color: #f2f2f2;width: 186px;padding: 0px;border-top: 0px solid transparent;border-left: 6px solid ' + status + ';border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div id=\"u_column_27\" class=\"u-col u-col-32p01\" style=\"max-width: 320px;min-width: 192px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"background-color: #f2f2f2;width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 0px;border-top: 0px solid transparent;border-left: 6px solid ' + status + ';border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Alert</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Location</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Device</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Temperature</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         \n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%; text-align: right;\">Battery Level</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"408\" class=\"v-col-border\" style=\"border-color:' + status + '; background-color: #f2f2f2;width: 408px;padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div class=\"u-col u-col-67p99\" style=\"max-width: 320px;min-width: 408px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"background-color: #f2f2f2;width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + ';  padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + messageAlert + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + customer + ', ' + area  + ', ' +  site + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + asset + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + device + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + TemperatureReading + '</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table id=\"u_content_text_60\" style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n        \n         '<table id=\"u_content_text_68\" style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\">' + battery + '%</p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table id=\"u_content_text_73\" style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    ' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '      <!--[if (mso)|(IE)]></tr></table></td></tr></table><![endif]-->' +\n         '    </div>' +\n         '  </div>' +\n         '</div>' +\n         '<!--<![endif]-->' +\n         '' +\n         '' +\n         '<div class=\"u-row-container v-row-padding--vertical\" style=\"padding: 0px;background-color: transparent\">' +\n         '  <div class=\"u-row\" style=\"Margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word; \">' +\n         '    <div style=\"border-collapse: collapse;display: table;width: 100%;background-color: transparent;\">' +\n         '      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px;background-color: transparent;\" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\" \"><![endif]-->' +\n         '      ' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"600\" class=\"v-col-border\" style=\" border-color:' + status + ';  width: 600px;padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div class=\"u-col u-col-100\" style=\"max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:40px 40px 30px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"font-size: 14px; line-height: 140%;\"><span style=\"color: #888888; font-size: 14px; line-height: 19.6px;\"><em><span style=\"font-size: 16px; line-height: 22.4px;\">This is an automated system message, do not reply</span></em></span></p>' +\n         '<p style=\"font-size: 14px; line-height: 140%;\"> </p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '      <!--[if (mso)|(IE)]></tr></table></td></tr></table><![endif]-->' +\n         '    </div>' +\n         '  </div>' +\n         '</div>' +\n         '' +\n         '' +\n         '' +\n         '<div class=\"u-row-container v-row-padding--vertical\" style=\"padding: 0px;background-color: transparent\">' +\n         '  <div class=\"u-row\" style=\"Margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #f2f2f2;\">' +\n         '    <div style=\"border-collapse: collapse;display: table;width: 100%;background-color: transparent;\">' +\n         '      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px;background-color: transparent;\" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\"background-color: #f2f2f2;\"><![endif]-->' +\n         '      ' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"300\" class=\"v-col-border\" style=\"border-color:' + status + '; width: 300px;padding: 20px 20px 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div class=\"u-col u-col-50\" style=\"max-width: 320px;min-width: 300px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 20px 20px 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n          '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"300\" class=\"v-col-border\" style=\"border-color:' + status + '; width: 300px;padding: 0px 0px 0px 20px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div class=\"u-col u-col-50\" style=\"max-width: 320px;min-width: 300px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 0px 0px 0px 20px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table id=\"u_content_social_1\" class=\"hide-mobile\" style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:25px 10px 10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '<div align=\"left\">' +\n         ' <p class=\"text-align:center\">' + formatDate(new Date(), \"dd/MM/yy HH:MM\", false) + '</p>' +\n         '</div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '' +\n         '<table id=\"u_content_text_6\" style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:5px 10px 10px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <div class=\"v-color\" style=\"color: #000000; line-height: 140%; text-align: left; word-wrap: break-word;\">' +\n         '    <p style=\"line-height: 140%; font-size: 14px; text-align: left;\"><span style=\"font-size: 14px; line-height: 19.6px; color: #000000;\"><span style=\"font-size: 14px; line-height: 19.6px;\"><span style=\"line-height: 19.6px; font-size: 14px;\">Sensahub   All Rights Reserved</span></span></span></p>' +\n         '  </div>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '      <!--[if (mso)|(IE)]></tr></table></td></tr></table><![endif]-->' +\n         '    </div>' +\n         '  </div>' +\n         '</div>' +\n         '' +\n         '' +\n         '' +\n         '<div class=\"u-row-container v-row-padding--vertical\" style=\"padding: 0px;background-color: #f9f9f9\">' +\n         '  <div class=\"u-row\" style=\"Margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #f2f2f2;\">' +\n         '    <div style=\"border-collapse: collapse;display: table;width: 100%;background-color: transparent;\">' +\n         '      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px;background-color: #f9f9f9;\" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\"background-color: #f2f2f2;\"><![endif]-->' +\n         '      ' +\n         '<!--[if (mso)|(IE)]><td align=\"center\" width=\"600\" class=\"v-col-border\" style=\"border-color:' + status + '; width: 600px;padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->' +\n         '<div class=\"u-col u-col-100\" style=\"max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;\">' +\n         '  <div style=\"width: 100% !important;\">' +\n         '  <!--[if (!mso)&(!IE)]><!--><div class=\"v-col-border\" style=\"border-color:' + status + '; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->' +\n         '  ' +\n         '' +\n         '<table style=\"font-family:\\'Lato\\',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">' +\n         '  <tbody>' +\n         '    <tr>' +\n         '      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:15px;font-family:\\'Lato\\',sans-serif;\" align=\"left\">' +\n         '        ' +\n         '  <table height=\"0px\" align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"border-collapse: collapse;table-layout: fixed;border-spacing: 0;mso-table-lspace: 0pt;mso-table-rspace: 0pt;vertical-align: top;border-top: 1px solid #1c103b;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%\">' +\n         '    <tbody>' +\n         '      <tr style=\"vertical-align: top\">' +\n         '        <td style=\"word-break: break-word;border-collapse: collapse !important;vertical-align: top;font-size: 0px;line-height: 0px;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%\">' +\n         '          <span> </span>' +\n         '        </td>' +\n         '      </tr>' +\n         '    </tbody>' +\n         '  </table>' +\n         '' +\n         '      </td>' +\n         '    </tr>' +\n         '  </tbody>' +\n         '</table>' +\n         '' +\n         '' +\n         '  <!--[if (!mso)&(!IE)]><!--></div><!--<![endif]-->' +\n         '  </div>' +\n         '</div>' +\n         '<!--[if (mso)|(IE)]></td><![endif]-->' +\n         '      <!--[if (mso)|(IE)]></tr></table></td></tr></table><![endif]-->' +\n         '    </div>' +\n         '  </div>' +\n         '</div>' +\n         '' +\n         '' +\n         '    <!--[if (mso)|(IE)]></td></tr></table><![endif]-->' +\n         '    </td>' +\n         '  </tr>' +\n         '  </tbody>' +\n         '  </table>' +\n         '  <!--[if mso]></div><![endif]-->' +\n         '  <!--[if IE]></div><![endif]-->' +\n         '</body>' +\n         '' +\n         '</html>';\n \n \n \n \n \n }\n\n \n \n function formatDate(date, format, utc) {\n    var MMMM = [\"\\x00\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var MMM = [\"\\x01\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    var dddd = [\"\\x02\", \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var ddd = [\"\\x03\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    function ii(i, len) { var s = i + \"\"; len = len || 2; while (s.length < len) s = \"0\" + s; return s; }\n\n    var y = utc ? date.getUTCFullYear() : date.getFullYear();\n    format = format.replace(/(^|[^\\\\])yyyy+/g, \"$1\" + y);\n    format = format.replace(/(^|[^\\\\])yy/g, \"$1\" + y.toString().substr(2, 2));\n    format = format.replace(/(^|[^\\\\])y/g, \"$1\" + y);\n\n    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;\n    format = format.replace(/(^|[^\\\\])MMMM+/g, \"$1\" + MMMM[0]);\n    format = format.replace(/(^|[^\\\\])MMM/g, \"$1\" + MMM[0]);\n    format = format.replace(/(^|[^\\\\])MM/g, \"$1\" + ii(M));\n    format = format.replace(/(^|[^\\\\])M/g, \"$1\" + M);\n\n    var d = utc ? date.getUTCDate() : date.getDate();\n    format = format.replace(/(^|[^\\\\])dddd+/g, \"$1\" + dddd[0]);\n    format = format.replace(/(^|[^\\\\])ddd/g, \"$1\" + ddd[0]);\n    format = format.replace(/(^|[^\\\\])dd/g, \"$1\" + ii(d));\n    format = format.replace(/(^|[^\\\\])d/g, \"$1\" + d);\n\n    var H = utc ? date.getUTCHours() : date.getHours();\n    format = format.replace(/(^|[^\\\\])HH+/g, \"$1\" + ii(H));\n    format = format.replace(/(^|[^\\\\])H/g, \"$1\" + H);\n\n    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;\n    format = format.replace(/(^|[^\\\\])hh+/g, \"$1\" + ii(h));\n    format = format.replace(/(^|[^\\\\])h/g, \"$1\" + h);\n\n    var m = utc ? date.getUTCMinutes() : date.getMinutes();\n    format = format.replace(/(^|[^\\\\])mm+/g, \"$1\" + ii(m));\n    format = format.replace(/(^|[^\\\\])m/g, \"$1\" + m);\n\n    var s = utc ? date.getUTCSeconds() : date.getSeconds();\n    format = format.replace(/(^|[^\\\\])ss+/g, \"$1\" + ii(s));\n    format = format.replace(/(^|[^\\\\])s/g, \"$1\" + s);\n\n    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();\n    format = format.replace(/(^|[^\\\\])fff+/g, \"$1\" + ii(f, 3));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])ff/g, \"$1\" + ii(f));\n    f = Math.round(f / 10);\n    format = format.replace(/(^|[^\\\\])f/g, \"$1\" + f);\n\n    var T = H < 12 ? \"AM\" : \"PM\";\n    format = format.replace(/(^|[^\\\\])TT+/g, \"$1\" + T);\n    format = format.replace(/(^|[^\\\\])T/g, \"$1\" + T.charAt(0));\n\n    var t = T.toLowerCase();\n    format = format.replace(/(^|[^\\\\])tt+/g, \"$1\" + t);\n    format = format.replace(/(^|[^\\\\])t/g, \"$1\" + t.charAt(0));\n\n    var tz = -date.getTimezoneOffset();\n    var K = utc || !tz ? \"Z\" : tz > 0 ? \"+\" : \"-\";\n    if (!utc) {\n        tz = Math.abs(tz);\n        var tzHrs = Math.floor(tz / 60);\n        var tzMin = tz % 60;\n        K += ii(tzHrs) + \":\" + ii(tzMin);\n    }\n    format = format.replace(/(^|[^\\\\])K/g, \"$1\" + K);\n\n    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;\n    format = format.replace(new RegExp(dddd[0], \"g\"), dddd[day]);\n    format = format.replace(new RegExp(ddd[0], \"g\"), ddd[day]);\n\n    format = format.replace(new RegExp(MMMM[0], \"g\"), MMMM[M]);\n    format = format.replace(new RegExp(MMM[0], \"g\"), MMM[M]);\n\n    format = format.replace(/\\\\(.)/g, \"$1\");\n\n    return format;\n}"},"ev":{}},"RedAlertExpired":{"t":"Interval","lX":485,"lY":545,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"190104c190915","dis":false,"a":{"interval":"60","timespan":"minutes","data":"1","one off":"false","random number":"false","random min":"","random max":""},"ev":{}},"AmberAlertExpired":{"t":"Interval","lX":490,"lY":690,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"11.88%","x":"42.28%","y":"53.8%"},"ver":"190104c190915","dis":false,"a":{"interval":"30","timespan":"minutes","data":"1","one off":"false","random number":"false","random min":"","random max":""},"ev":{}},"Heartbeat#1":{"t":"Heartbeat","lX":840,"lY":400,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"4.2%","height":"8.1%","x":"25.22%","y":"31.69%"},"ver":"200129c210519","dis":false,"a":{"time elapsed":"2","timespan":"hours","alarm value":"1"},"ev":{}},"Scripting#2":{"t":"Scripting","lX":985,"lY":405,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"11.88%","x":"56.45%","y":"48.1%"},"ver":"190104c210519","dis":false,"tt":"","a":{"code editor":"// Javascript flow scripting.\n/**\n * Description: \n * Create Author/Date: \n * Modified Author/Date: \n * Version: \n */\n\n// Declare global variables here to be initialised at server startup\n\n/**\n * Initialise script state (run once at startup). Pass in channels set in script node widget\n */\nScript.on(\"load\", function () {\n});\n\n/**\n * Response to incoming flow message. eventData object passed in with:\n * eventData.value - incoming data value (string)\n * eventData.startCh - state of channel that initiated the flow and the channel details (Object. Members {channel}, {value})\n * @return {string} return a value to continue the flow or to cancel flow return null\n */\nScript.on(\"flow\", function (eventData) {\n\t// Get the message source device name\n\tvar device = eventData.startCh.channel.instance.charAt(0).toUpperCase() + eventData.startCh.channel.instance.slice(1).toUpperCase();\n\tvar subject = \"Bait box '\" + device + \"' has not communicated for \" + eventData.value;\n\t\tconsole.log(device);\n\n \tvar selectTraps = [\n\t\t{\n\t\t\t\"TableName\": \"Device\", // Specify the primary table used to construct the join request\n\t\t\t\"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n\t\t\t\"Columns\":\n\t\t\t\t[\n\t\t\t\t\t\"Id\",\n\t\t\t\t\t\"Owner\",\n\t\t\t\t\t\"CustomerId\"\n\n\n\t\t\t\t], // Specify the list of columns to take from the reference table.\n\t\t\t\"Filters\": // Filter options in case they are needed.\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t\"Column\": \"Name\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n\t\t\t\t\t\t\"ParamName\": \"DeviceNumber\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n\t\t\t\t\t\t\"Value\": device.toString() // Value that you want to pass for comparison (any object)\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t}];\n\n\n\tvar readRecord = Database.readCompound(\"refrigerations\", \"Devices\", selectTraps);\n\t// Get trapper associated with the trap\n\t//var dbResult = Database.readRecords(\"traps\",\"State\",\"Technician\", \"DeviceNumber='\" + device + \"'\");\n\tvar recordData = JSON.parse(readRecord);\n\tconsole.log(recordData.data);\n\tconsole.log(recordData);\n\n\n\t// Do we have a trapper?\n\tif (Object.keys(recordData.data).length > 0) {\n\t\tfor (var item in recordData.data) {\n\t\t\tvar dto = recordData.data[item];\n\t\t\tvar trapId = dto[0];\n\t\t\tDatabase.saveRecordParam(\"refrigerations\", \"Device\",  {\n\t\t\t\ttrapId:{\n\t\t\t\t\t\"Id\": trapId,\n\t\t\t\t\t\"CommunicationError\": 1\n\t\t\t\t}\n\t\t\t} , function (data) {\n\n\t\t\t});\n\t\t\tvar trapper = dto[1];\n \t\t\tvar email = \"undefined\";\n\t\t\tvar customerEmail = GetCustomerEmail(dto[1]);\n\t\t\tvar dirInfo = JSON.parse(Directory.getUsers({ \"users\": [trapper], columns: [\"email\"] }));\n\t\t\tconsole.log(dirInfo.data[trapper]);\n\t\t\t\n\t\t\tvar subject = \"Alert Device Status Offline\";\n\t\t    var emails = [\"dean.dobson@pestsense.com\", \"kristiformilchev615@gmail.com\", \"petar@collaborativesoft.com\"];\n \t\t\tif(dirInfo.data[trapper] !== undefined)\n\t\t\t{\n\t\t\t\temails.push(dirInfo.data[trapper][0]);\n\t\t\t}\n\t\t\tif(customerEmail !== null)\n\t\t\t{\n\t\t\t\temails.push(customerEmail);\n\t\t\t}\n\t\t\tconsole.log(customerEmail);\n\t\t\tconsole.log(emails);\n\t\t\treturn JSON.stringify({\n\t\t\t\t\"recipients\": emails, \"subject\": subject, \"body\": \"Message from Sensahub Automated Alerts: Please check the status of \" +\n\t\t\t\t\t\"device '\" + device + \"' as it has stopped communicating, either no cellular signal or battery is flat.\"\n\t\t\t});\n\t\t}\n\t}\n\telse {\n\t\tSystem.writeLog(\"INFO - Device heartbeat timed out but no user associated with device '\" + device + \"', so can't send warning email. Check device signal strength and/or battery.\");\n\t}\n});\n\nfunction GetCustomerEmail(id)\n{\n\t var result = null;\n\t var selectTraps = [\n         {\n             \"TableName\": \"Customers\", // Specify the primary table used to construct the join request\n             \"Join\": 1, // Join type 1 - Inner Join, 2 - Outer Join, 3 - Left join, 4 - Right Join.\n             \"Columns\":\n                 [\n                    \"Id\",\n                    \"PrimaryContactEmail\"\n                 ], // Specify the list of columns to take from the reference table.\n\t\t\t \"Filters\": // Filter options in case they are needed.\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t\"Column\": \"Id\", //Column that will be applied (don't include table name will be resolved if its contained within the reference table.\n\t\t\t\t\t\t\"ParamName\": \"DeviceNumber\", // Parameter name, must be unique and should not contain $ as its resolved by the mapper. \n\t\t\t\t\t\t\"Value\": id // Value that you want to pass for comparison (any object)\n\t\t\t\t\t}\n\t\t\t\t]\n         }];\n \n \n     var readRecord = Database.readCompound(\"refrigerations\", \"Customers\", selectTraps);\n     //Break if device isn't associated with a trap within the relational database.\n \n     var oldRecord = JSON.parse(readRecord);\n\tif(oldRecord.data[id] !== undefined)\n\t{\n\t\t//\temails.push(dirInfo.data[trapper][0]);\n\t\tresult = oldRecord.data[trapper][1];\n\t}\n\treturn result;\n\t\n}"},"ev":{}},"End#3":{"t":"End","lX":1125,"lY":435,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"200819c190915","dis":false,"a":{"channel":"$NET/EMAIL/SMTPCLIENT/SEND","[object Attr]":"SEND","category":"$NET","class":"EMAIL","instance":"SMTPCLIENT","scope":"SEND"},"ev":{}},"Start#1":{"t":"Start","lX":645,"lY":435,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"5.74%","height":"7.72%","x":"36.95%","y":"51.43%"},"ver":"200819c210519","dis":false,"a":{"channel":"SENSAHUB/TRIAL/+/SIGNAL","[object Attr]":"SIGNAL","category":"SENSAHUB","class":"TRIAL","instance":"+","scope":"SIGNAL"},"ev":{}},"MQTT#0-SENSATIZE-DEV":{"t":"MQTT","lX":65,"lY":160,"sX":1,"sY":1,"s":"Refrigeration Temperature","ps":{"enabled":false,"scalingType":"NOSCALE","width":"","height":"","x":"","y":""},"ver":"190104c210519","dis":false,"a":{"device authorization":"json","model":"sensahub_sensor","topic level":"none","text":"OR","json key":"sid","encryption":"true","broker":"false","topic":"","server password":"","subscription":"sensahub/fridge/sensorhost/v1/#","client username":"sensahub","client password":"sensahub","certificate name":"sensorhost.cer","protocol":"3.1.1","quality of service":"at most once","remote broker":"sensorhost.com","clean session":"false","retain published":"true"},"ev":{}}},"screens":{"Refrigeration Temperature":{"index":0,"icon":"vibration","meta":""}},"meta":"","links":[{"inpNodeName":"Scripting#0","inpNodeType":"Scripting","inpPin":0,"outNodeName":"Start#0","outNodeType":"Start","outPin":0,"path":"M 219 587 C 281 587 281 528 345 528","screen":"Refrigeration Temperature"},{"inpNodeName":"Scripting#0","inpNodeType":"Scripting","inpPin":0,"outNodeName":"Expired","outNodeType":"Interval","outPin":0,"path":"M 206 445 C 276.5 444 276.5 528 345 528","screen":"Refrigeration Temperature"},{"inpNodeName":"JsonParser#0","inpNodeType":"JsonParser","inpPin":0,"outNodeName":"JsonParser#4","outNodeType":"JsonParser","outPin":0,"path":"M 434 186 C 510.5 186 510.5 76 590 81","screen":"Refrigeration Temperature"},{"inpNodeName":"JsonParser#3","inpNodeType":"JsonParser","inpPin":0,"outNodeName":"JsonParser#4","outNodeType":"JsonParser","outPin":0,"path":"M 434 186 C 521 186 521 196 615 196","screen":"Refrigeration Temperature"},{"inpNodeName":"JsonParser#9","inpNodeType":"JsonParser","inpPin":0,"outNodeName":"JsonParser#4","outNodeType":"JsonParser","outPin":0,"path":"M 434 186 C 516.5 186 516.5 314 605 316","screen":"Refrigeration Temperature"},{"inpNodeName":"End#2","inpNodeType":"End","inpPin":0,"outNodeName":"JsonParser#0","outNodeType":"JsonParser","outPin":0,"path":"M 679 81 C 764.5 81 764.5 43 855 42","screen":"Refrigeration Temperature"},{"inpNodeName":"End#24","inpNodeType":"End","inpPin":0,"outNodeName":"JsonParser#3","outNodeType":"JsonParser","outPin":0,"path":"M 704 196 C 777.5 196 777.5 194 865 197","screen":"Refrigeration Temperature"},{"inpNodeName":"End#0","inpNodeType":"End","inpPin":0,"outNodeName":"JsonParser#0","outNodeType":"JsonParser","outPin":0,"path":"M 679 81 C 769 81 769 114 860 117","screen":"Refrigeration Temperature"},{"inpNodeName":"End#29","inpNodeType":"End","inpPin":0,"outNodeName":"JsonParser#9","outNodeType":"JsonParser","outPin":0,"path":"M 694 316 C 775 316 775 269 860 272","screen":"Refrigeration Temperature"},{"inpNodeName":"EmailHandler","inpNodeType":"Scripting","inpPin":0,"outNodeName":"RedAlertExpired","outNodeType":"Interval","outPin":0,"path":"M 576 590 C 635.5 590 635.5 548 695 548","screen":"Refrigeration Temperature"},{"inpNodeName":"EmailHandler","inpNodeType":"Scripting","inpPin":0,"outNodeName":"AmberAlertExpired","outNodeType":"Interval","outPin":0,"path":"M 581 735 C 638 735 638 548 695 548","screen":"Refrigeration Temperature"},{"inpNodeName":"End#5","inpNodeType":"End","inpPin":0,"outNodeName":"EmailHandler","outNodeType":"Scripting","outPin":0,"path":"M 784 548 C 819.5 548 819.5 547 855 547","screen":"Refrigeration Temperature"},{"inpNodeName":"End#20","inpNodeType":"End","inpPin":0,"outNodeName":"MQTT#0-SENSATIZE-DEV","outNodeType":"MQTT","outPin":0,"path":"M 159 187 C 202 187 202 107 245 107","screen":"Refrigeration Temperature"},{"inpNodeName":"JsonParser#4","inpNodeType":"JsonParser","inpPin":0,"outNodeName":"MQTT#0-SENSATIZE-DEV","outNodeType":"MQTT","outPin":0,"path":"M 159 187 C 252 187 252 186 345 186","screen":"Refrigeration Temperature"},{"inpNodeName":"DatabaseUpdate","inpNodeType":"Scripting","inpPin":0,"outNodeName":"MQTT#0-SENSATIZE-DEV","outNodeType":"MQTT","outPin":0,"path":"M 159 187 C 194.5 187 194.5 288 230 288","screen":"Refrigeration Temperature"},{"inpNodeName":"EmailHandler","inpNodeType":"Scripting","inpPin":0,"outNodeName":"MQTT#0-SENSATIZE-DEV","outNodeType":"MQTT","outPin":0,"path":"M 159 187 C 427 187 427 548 695 548","screen":"Refrigeration Temperature"},{"inpNodeName":"Scripting#2","inpNodeType":"Scripting","inpPin":0,"outNodeName":"Heartbeat#1","outNodeType":"Heartbeat","outPin":0,"path":"M 934 451 C 961.5 451 961.5 448 990 448","screen":"Refrigeration Temperature"},{"inpNodeName":"End#3","inpNodeType":"End","inpPin":0,"outNodeName":"Scripting#2","outNodeType":"Scripting","outPin":0,"path":"M 1079 448 C 1104 448 1104 452 1130 452","screen":"Refrigeration Temperature"},{"inpNodeName":"Heartbeat#1","inpNodeType":"Heartbeat","inpPin":0,"outNodeName":"Start#1","outNodeType":"Start","outPin":0,"path":"M 739 452 C 791.5 450 791.5 451 845 451","screen":"Refrigeration Temperature"}]}